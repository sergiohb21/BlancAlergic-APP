[{"revision":"7309ce84ba1ab33d26ec1d63a127496a","url":"404.html"},{"revision":null,"url":"assets/html2canvas.esm-B0tyYwQk.js"},{"revision":null,"url":"assets/index-B_FU0uW-.js"},{"revision":null,"url":"assets/index-C40nrs4k.css"},{"revision":null,"url":"assets/index.es-CzUprbLL.js"},{"revision":null,"url":"assets/purify.es-B6FQ9oRL.js"},{"revision":"a4bfddd35fb0bc9386c8c01df234932d","url":"index.html"},{"revision":"332892388682f6b3c1a0a9e1e4f2f3cd","url":"registerSW.js"},{"revision":"bc138b0814ac259298774db23b39b4b1","url":"unregister-sw.js"},{"revision":"30e9fb8822b8993375c9640c84cb781e","url":"icons/icon-192x192.png"},{"revision":"30e9fb8822b8993375c9640c84cb781e","url":"icons/icon-512x512.png"},{"revision":"2d4aef0f18c7a393816c7f9102e82e94","url":"manifest.webmanifest"}]=[];const c="blancalergic-v2",i="blancalergic-static-v2",a=["/","/index.html","/manifest.webmanifest","/icons/icon-192x192.png","/icons/icon-512x512.png"],t=["firestore.googleapis.com","identitytoolkit.googleapis.com","googleapis.com","firebaseio.com","firebase.googleapis.com"];function s(n){return t.some(o=>n.includes(o))}self.addEventListener("install",n=>{console.log(" SW: Instalando Service Worker..."),n.waitUntil(caches.open(i).then(o=>(console.log(" SW: Cacheando assets est谩ticos"),o.addAll(a))).then(()=>self.skipWaiting()))});self.addEventListener("activate",n=>{console.log(" SW: Activando Service Worker..."),n.waitUntil(Promise.all([caches.keys().then(o=>Promise.all(o.map(e=>{if(e!==i&&e!==c)return console.log(" SW: Eliminando cache antiguo:",e),caches.delete(e)}))),self.clients.claim()]))});self.addEventListener("fetch",n=>{const o=n.request.url;if(s(o)){console.log(" SW: Ignorando llamada a Firebase:",o);return}n.respondWith(l(n.request))});async function l(n){new URL(n.url);try{return r(n)?await d(n):await g(n)}catch(o){return console.error(" SW: Error en handleRequest:",o),new Response("Error de red",{status:500})}}function r(n){return["script","style","image","font"].includes(n.destination)||n.url.includes("/assets/")||n.url.includes("/icons/")}async function d(n){const o=await caches.match(n);if(o)return console.log(" SW: Sirviendo desde cache:",n.url),o;try{const e=await fetch(n);return e.ok&&(console.log(" SW: Cacheando nuevo recurso:",n.url),(await caches.open(i)).put(n,e.clone())),e}catch(e){throw console.error(" SW: Error en cacheFirst:",e),e}}async function g(n){try{console.log(" SW: Intentando desde red:",n.url);const o=await fetch(n);return o.ok&&(await caches.open(c)).put(n,o.clone()),o}catch(o){console.log(" SW: Red fall贸, intentando cache:",n.url);const e=await caches.match(n);if(e)return e;throw o}}self.addEventListener("push",n=>{if(console.log(" SW: Recibida notificaci贸n push"),n.data){const o=n.data.json(),e={body:o.body,icon:"/BlancAlergic-APP/icons/icon-192x192.png",badge:"/BlancAlergic-APP/icons/icon-192x192.png",vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:o.primaryKey||1},actions:[{action:"explore",title:"Ver detalles",icon:"/BlancAlergic-APP/icons/icon-192x192.png"},{action:"close",title:"Cerrar",icon:"/BlancAlergic-APP/icons/icon-192x192.png"}]};n.waitUntil(self.registration.showNotification(o.title,e))}});self.addEventListener("notificationclick",n=>{console.log(" SW: Clic en notificaci贸n"),n.notification.close(),n.action==="explore"?n.waitUntil(clients.openWindow("/BlancAlergic-APP/historial-medico")):n.waitUntil(clients.openWindow("/BlancAlergic-APP/"))});self.addEventListener("sync",n=>{console.log(" SW: Evento de sincronizaci贸n:",n.tag),n.tag==="background-sync"&&n.waitUntil(f())});async function f(){console.log(" SW: Realizando sincronizaci贸n en segundo plano")}self.addEventListener("message",n=>{console.log(" SW: Mensaje recibido:",n.data),n.data&&n.data.type==="SKIP_WAITING"&&self.skipWaiting()});console.log(" SW: Service Worker inteligente cargado");
