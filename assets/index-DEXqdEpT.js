function aP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var WY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ug(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hy={exports:{}},hf={},fy={exports:{}},yn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function lP(){if(ew)return yn;ew=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function w(ae){return ae===null||typeof ae!="object"?null:(ae=y&&ae[y]||ae["@@iterator"],typeof ae=="function"?ae:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,S={};function _(ae,F,ee){this.props=ae,this.context=F,this.refs=S,this.updater=ee||v}_.prototype.isReactComponent={},_.prototype.setState=function(ae,F){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,F,"setState")},_.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function I(){}I.prototype=_.prototype;function V(ae,F,ee){this.props=ae,this.context=F,this.refs=S,this.updater=ee||v}var z=V.prototype=new I;z.constructor=V,j(z,_.prototype),z.isPureReactComponent=!0;var $=Array.isArray,J=Object.prototype.hasOwnProperty,le={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function E(ae,F,ee){var Q,he={},ge=null,ve=null;if(F!=null)for(Q in F.ref!==void 0&&(ve=F.ref),F.key!==void 0&&(ge=""+F.key),F)J.call(F,Q)&&!q.hasOwnProperty(Q)&&(he[Q]=F[Q]);var Ee=arguments.length-2;if(Ee===1)he.children=ee;else if(1<Ee){for(var Te=Array(Ee),je=0;je<Ee;je++)Te[je]=arguments[je+2];he.children=Te}if(ae&&ae.defaultProps)for(Q in Ee=ae.defaultProps,Ee)he[Q]===void 0&&(he[Q]=Ee[Q]);return{$$typeof:t,type:ae,key:ge,ref:ve,props:he,_owner:le.current}}function T(ae,F){return{$$typeof:t,type:ae.type,key:F,ref:ae.ref,props:ae.props,_owner:ae._owner}}function U(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===t}function C(ae){var F={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(ee){return F[ee]})}var L=/\/+/g;function D(ae,F){return typeof ae=="object"&&ae!==null&&ae.key!=null?C(""+ae.key):F.toString(36)}function ne(ae,F,ee,Q,he){var ge=typeof ae;(ge==="undefined"||ge==="boolean")&&(ae=null);var ve=!1;if(ae===null)ve=!0;else switch(ge){case"string":case"number":ve=!0;break;case"object":switch(ae.$$typeof){case t:case e:ve=!0}}if(ve)return ve=ae,he=he(ve),ae=Q===""?"."+D(ve,0):Q,$(he)?(ee="",ae!=null&&(ee=ae.replace(L,"$&/")+"/"),ne(he,F,ee,"",function(je){return je})):he!=null&&(U(he)&&(he=T(he,ee+(!he.key||ve&&ve.key===he.key?"":(""+he.key).replace(L,"$&/")+"/")+ae)),F.push(he)),1;if(ve=0,Q=Q===""?".":Q+":",$(ae))for(var Ee=0;Ee<ae.length;Ee++){ge=ae[Ee];var Te=Q+D(ge,Ee);ve+=ne(ge,F,ee,Te,he)}else if(Te=w(ae),typeof Te=="function")for(ae=Te.call(ae),Ee=0;!(ge=ae.next()).done;)ge=ge.value,Te=Q+D(ge,Ee++),ve+=ne(ge,F,ee,Te,he);else if(ge==="object")throw F=String(ae),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return ve}function se(ae,F,ee){if(ae==null)return ae;var Q=[],he=0;return ne(ae,Q,"","",function(ge){return F.call(ee,ge,he++)}),Q}function oe(ae){if(ae._status===-1){var F=ae._result;F=F(),F.then(function(ee){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=ee)},function(ee){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=ee)}),ae._status===-1&&(ae._status=0,ae._result=F)}if(ae._status===1)return ae._result.default;throw ae._result}var Z={current:null},Y={transition:null},pe={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:Y,ReactCurrentOwner:le};function we(){throw Error("act(...) is not supported in production builds of React.")}return yn.Children={map:se,forEach:function(ae,F,ee){se(ae,function(){F.apply(this,arguments)},ee)},count:function(ae){var F=0;return se(ae,function(){F++}),F},toArray:function(ae){return se(ae,function(F){return F})||[]},only:function(ae){if(!U(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},yn.Component=_,yn.Fragment=n,yn.Profiler=i,yn.PureComponent=V,yn.StrictMode=r,yn.Suspense=u,yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,yn.act=we,yn.cloneElement=function(ae,F,ee){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var Q=j({},ae.props),he=ae.key,ge=ae.ref,ve=ae._owner;if(F!=null){if(F.ref!==void 0&&(ge=F.ref,ve=le.current),F.key!==void 0&&(he=""+F.key),ae.type&&ae.type.defaultProps)var Ee=ae.type.defaultProps;for(Te in F)J.call(F,Te)&&!q.hasOwnProperty(Te)&&(Q[Te]=F[Te]===void 0&&Ee!==void 0?Ee[Te]:F[Te])}var Te=arguments.length-2;if(Te===1)Q.children=ee;else if(1<Te){Ee=Array(Te);for(var je=0;je<Te;je++)Ee[je]=arguments[je+2];Q.children=Ee}return{$$typeof:t,type:ae.type,key:he,ref:ge,props:Q,_owner:ve}},yn.createContext=function(ae){return ae={$$typeof:a,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:s,_context:ae},ae.Consumer=ae},yn.createElement=E,yn.createFactory=function(ae){var F=E.bind(null,ae);return F.type=ae,F},yn.createRef=function(){return{current:null}},yn.forwardRef=function(ae){return{$$typeof:c,render:ae}},yn.isValidElement=U,yn.lazy=function(ae){return{$$typeof:p,_payload:{_status:-1,_result:ae},_init:oe}},yn.memo=function(ae,F){return{$$typeof:h,type:ae,compare:F===void 0?null:F}},yn.startTransition=function(ae){var F=Y.transition;Y.transition={};try{ae()}finally{Y.transition=F}},yn.unstable_act=we,yn.useCallback=function(ae,F){return Z.current.useCallback(ae,F)},yn.useContext=function(ae){return Z.current.useContext(ae)},yn.useDebugValue=function(){},yn.useDeferredValue=function(ae){return Z.current.useDeferredValue(ae)},yn.useEffect=function(ae,F){return Z.current.useEffect(ae,F)},yn.useId=function(){return Z.current.useId()},yn.useImperativeHandle=function(ae,F,ee){return Z.current.useImperativeHandle(ae,F,ee)},yn.useInsertionEffect=function(ae,F){return Z.current.useInsertionEffect(ae,F)},yn.useLayoutEffect=function(ae,F){return Z.current.useLayoutEffect(ae,F)},yn.useMemo=function(ae,F){return Z.current.useMemo(ae,F)},yn.useReducer=function(ae,F,ee){return Z.current.useReducer(ae,F,ee)},yn.useRef=function(ae){return Z.current.useRef(ae)},yn.useState=function(ae){return Z.current.useState(ae)},yn.useSyncExternalStore=function(ae,F,ee){return Z.current.useSyncExternalStore(ae,F,ee)},yn.useTransition=function(){return Z.current.useTransition()},yn.version="18.3.1",yn}var tw;function W1(){return tw||(tw=1,fy.exports=lP()),fy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw;function cP(){if(nw)return hf;nw=1;var t=W1(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(c,u,h){var p,y={},w=null,v=null;h!==void 0&&(w=""+h),u.key!==void 0&&(w=""+u.key),u.ref!==void 0&&(v=u.ref);for(p in u)r.call(u,p)&&!s.hasOwnProperty(p)&&(y[p]=u[p]);if(c&&c.defaultProps)for(p in u=c.defaultProps,u)y[p]===void 0&&(y[p]=u[p]);return{$$typeof:e,type:c,key:w,ref:v,props:y,_owner:i.current}}return hf.Fragment=n,hf.jsx=a,hf.jsxs=a,hf}var rw;function uP(){return rw||(rw=1,hy.exports=cP()),hy.exports}var d=uP(),O=W1();const js=Ug(O),hp=aP({__proto__:null,default:js},[O]);var pm={},py={exports:{}},uo={},my={exports:{}},gy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function dP(){return iw||(iw=1,(function(t){function e(Y,pe){var we=Y.length;Y.push(pe);e:for(;0<we;){var ae=we-1>>>1,F=Y[ae];if(0<i(F,pe))Y[ae]=pe,Y[we]=F,we=ae;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var pe=Y[0],we=Y.pop();if(we!==pe){Y[0]=we;e:for(var ae=0,F=Y.length,ee=F>>>1;ae<ee;){var Q=2*(ae+1)-1,he=Y[Q],ge=Q+1,ve=Y[ge];if(0>i(he,we))ge<F&&0>i(ve,he)?(Y[ae]=ve,Y[ge]=we,ae=ge):(Y[ae]=he,Y[Q]=we,ae=Q);else if(ge<F&&0>i(ve,we))Y[ae]=ve,Y[ge]=we,ae=ge;else break e}}return pe}function i(Y,pe){var we=Y.sortIndex-pe.sortIndex;return we!==0?we:Y.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],h=[],p=1,y=null,w=3,v=!1,j=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(Y){for(var pe=n(h);pe!==null;){if(pe.callback===null)r(h);else if(pe.startTime<=Y)r(h),pe.sortIndex=pe.expirationTime,e(u,pe);else break;pe=n(h)}}function $(Y){if(S=!1,z(Y),!j)if(n(u)!==null)j=!0,oe(J);else{var pe=n(h);pe!==null&&Z($,pe.startTime-Y)}}function J(Y,pe){j=!1,S&&(S=!1,I(E),E=-1),v=!0;var we=w;try{for(z(pe),y=n(u);y!==null&&(!(y.expirationTime>pe)||Y&&!C());){var ae=y.callback;if(typeof ae=="function"){y.callback=null,w=y.priorityLevel;var F=ae(y.expirationTime<=pe);pe=t.unstable_now(),typeof F=="function"?y.callback=F:y===n(u)&&r(u),z(pe)}else r(u);y=n(u)}if(y!==null)var ee=!0;else{var Q=n(h);Q!==null&&Z($,Q.startTime-pe),ee=!1}return ee}finally{y=null,w=we,v=!1}}var le=!1,q=null,E=-1,T=5,U=-1;function C(){return!(t.unstable_now()-U<T)}function L(){if(q!==null){var Y=t.unstable_now();U=Y;var pe=!0;try{pe=q(!0,Y)}finally{pe?D():(le=!1,q=null)}}else le=!1}var D;if(typeof V=="function")D=function(){V(L)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,se=ne.port2;ne.port1.onmessage=L,D=function(){se.postMessage(null)}}else D=function(){_(L,0)};function oe(Y){q=Y,le||(le=!0,D())}function Z(Y,pe){E=_(function(){Y(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){j||v||(j=!0,oe(J))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Y){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var we=w;w=pe;try{return Y()}finally{w=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,pe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var we=w;w=Y;try{return pe()}finally{w=we}},t.unstable_scheduleCallback=function(Y,pe,we){var ae=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?ae+we:ae):we=ae,Y){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=we+F,Y={id:p++,callback:pe,priorityLevel:Y,startTime:we,expirationTime:F,sortIndex:-1},we>ae?(Y.sortIndex=we,e(h,Y),n(u)===null&&Y===n(h)&&(S?(I(E),E=-1):S=!0,Z($,we-ae))):(Y.sortIndex=F,e(u,Y),j||v||(j=!0,oe(J))),Y},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(Y){var pe=w;return function(){var we=w;w=pe;try{return Y.apply(this,arguments)}finally{w=we}}}})(gy)),gy}var sw;function hP(){return sw||(sw=1,my.exports=dP()),my.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function fP(){if(ow)return uo;ow=1;var t=W1(),e=hP();function n(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function w(o){return u.call(y,o)?!0:u.call(p,o)?!1:h.test(o)?y[o]=!0:(p[o]=!0,!1)}function v(o,l,f,x){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return x?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function j(o,l,f,x){if(l===null||typeof l>"u"||v(o,l,f,x))return!0;if(x)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(o,l,f,x,N,R,G){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=x,this.attributeNamespace=N,this.mustUseProperty=f,this.propertyName=o,this.type=l,this.sanitizeURL=R,this.removeEmptyString=G}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){_[o]=new S(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];_[l]=new S(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){_[o]=new S(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){_[o]=new S(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){_[o]=new S(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){_[o]=new S(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){_[o]=new S(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){_[o]=new S(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){_[o]=new S(o,5,!1,o.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function V(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(I,V);_[l]=new S(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(I,V);_[l]=new S(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(I,V);_[l]=new S(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){_[o]=new S(o,1,!1,o.toLowerCase(),null,!1,!1)}),_.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){_[o]=new S(o,1,!1,o.toLowerCase(),null,!0,!0)});function z(o,l,f,x){var N=_.hasOwnProperty(l)?_[l]:null;(N!==null?N.type!==0:x||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(j(l,f,N,x)&&(f=null),x||N===null?w(l)&&(f===null?o.removeAttribute(l):o.setAttribute(l,""+f)):N.mustUseProperty?o[N.propertyName]=f===null?N.type===3?!1:"":f:(l=N.attributeName,x=N.attributeNamespace,f===null?o.removeAttribute(l):(N=N.type,f=N===3||N===4&&f===!0?"":""+f,x?o.setAttributeNS(x,l,f):o.setAttribute(l,f))))}var $=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),le=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),C=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),Y=Symbol.iterator;function pe(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var we=Object.assign,ae;function F(o){if(ae===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);ae=l&&l[1]||""}return`
`+ae+o}var ee=!1;function Q(o,l){if(!o||ee)return"";ee=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(De){var x=De}Reflect.construct(o,[],l)}else{try{l.call()}catch(De){x=De}o.call(l.prototype)}else{try{throw Error()}catch(De){x=De}o()}}catch(De){if(De&&x&&typeof De.stack=="string"){for(var N=De.stack.split(`
`),R=x.stack.split(`
`),G=N.length-1,me=R.length-1;1<=G&&0<=me&&N[G]!==R[me];)me--;for(;1<=G&&0<=me;G--,me--)if(N[G]!==R[me]){if(G!==1||me!==1)do if(G--,me--,0>me||N[G]!==R[me]){var be=`
`+N[G].replace(" at new "," at ");return o.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",o.displayName)),be}while(1<=G&&0<=me);break}}}finally{ee=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?F(o):""}function he(o){switch(o.tag){case 5:return F(o.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return o=Q(o.type,!1),o;case 11:return o=Q(o.type.render,!1),o;case 1:return o=Q(o.type,!0),o;default:return""}}function ge(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case q:return"Fragment";case le:return"Portal";case T:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case ne:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case C:return(o.displayName||"Context")+".Consumer";case U:return(o._context.displayName||"Context")+".Provider";case L:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case se:return l=o.displayName||null,l!==null?l:ge(o.type)||"Memo";case oe:l=o._payload,o=o._init;try{return ge(o(l))}catch{}}return null}function ve(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(l);case 8:return l===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ee(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Te(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function je(o){var l=Te(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),x=""+o[l];if(!o.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var N=f.get,R=f.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return N.call(this)},set:function(G){x=""+G,R.call(this,G)}}),Object.defineProperty(o,l,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(G){x=""+G},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function ze(o){o._valueTracker||(o._valueTracker=je(o))}function Je(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var f=l.getValue(),x="";return o&&(x=Te(o)?o.checked?"true":"false":o.value),o=x,o!==f?(l.setValue(o),!0):!1}function tt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Me(o,l){var f=l.checked;return we({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function fe(o,l){var f=l.defaultValue==null?"":l.defaultValue,x=l.checked!=null?l.checked:l.defaultChecked;f=Ee(l.value!=null?l.value:f),o._wrapperState={initialChecked:x,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Xt(o,l){l=l.checked,l!=null&&z(o,"checked",l,!1)}function Pt(o,l){Xt(o,l);var f=Ee(l.value),x=l.type;if(f!=null)x==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(x==="submit"||x==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ke(o,l.type,f):l.hasOwnProperty("defaultValue")&&Ke(o,l.type,Ee(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function bt(o,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var x=l.type;if(!(x!=="submit"&&x!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,f||l===o.value||(o.value=l),o.defaultValue=l}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function Ke(o,l,f){(l!=="number"||tt(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var ct=Array.isArray;function nt(o,l,f,x){if(o=o.options,l){l={};for(var N=0;N<f.length;N++)l["$"+f[N]]=!0;for(f=0;f<o.length;f++)N=l.hasOwnProperty("$"+o[f].value),o[f].selected!==N&&(o[f].selected=N),N&&x&&(o[f].defaultSelected=!0)}else{for(f=""+Ee(f),l=null,N=0;N<o.length;N++){if(o[N].value===f){o[N].selected=!0,x&&(o[N].defaultSelected=!0);return}l!==null||o[N].disabled||(l=o[N])}l!==null&&(l.selected=!0)}}function $t(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return we({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function At(o,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(n(92));if(ct(f)){if(1<f.length)throw Error(n(93));f=f[0]}l=f}l==null&&(l=""),f=l}o._wrapperState={initialValue:Ee(f)}}function fn(o,l){var f=Ee(l.value),x=Ee(l.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),l.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),x!=null&&(o.defaultValue=""+x)}function Bt(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function vt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ht(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?vt(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Dt,Nt=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,x,N){MSApp.execUnsafeLocalFunction(function(){return o(l,f,x,N)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Dt=Dt||document.createElement("div"),Dt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Dt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function kt(o,l){if(l){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=l;return}}o.textContent=l}var xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sn=["Webkit","ms","Moz","O"];Object.keys(xt).forEach(function(o){Sn.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),xt[l]=xt[o]})});function vn(o,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||xt.hasOwnProperty(o)&&xt[o]?(""+l).trim():l+"px"}function ht(o,l){o=o.style;for(var f in l)if(l.hasOwnProperty(f)){var x=f.indexOf("--")===0,N=vn(f,l[f],x);f==="float"&&(f="cssFloat"),x?o.setProperty(f,N):o[f]=N}}var zt=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kn(o,l){if(l){if(zt[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Ct(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=null;function Ut(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var nr=null,Dn=null,pn=null;function Mt(o){if(o=_c(o)){if(typeof nr!="function")throw Error(n(280));var l=o.stateNode;l&&(l=wu(l),nr(o.stateNode,o.type,l))}}function an(o){Dn?pn?pn.push(o):pn=[o]:Dn=o}function yo(){if(Dn){var o=Dn,l=pn;if(pn=Dn=null,Mt(o),l)for(o=0;o<l.length;o++)Mt(l[o])}}function vr(o,l){return o(l)}function Vs(){}var hi=!1;function It(o,l,f){if(hi)return o(l,f);hi=!0;try{return vr(o,l,f)}finally{hi=!1,(Dn!==null||pn!==null)&&(Vs(),yo())}}function Vn(o,l){var f=o.stateNode;if(f===null)return null;var x=wu(f);if(x===null)return null;f=x[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,l,typeof f));return f}var hs=!1;if(c)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){hs=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{hs=!1}function fi(o,l,f,x,N,R,G,me,be){var De=Array.prototype.slice.call(arguments,3);try{l.apply(f,De)}catch(Ge){this.onError(Ge)}}var qn=!1,dr=null,Yn=!1,vo=null,Oo={onError:function(o){qn=!0,dr=o}};function Ui(o,l,f,x,N,R,G,me,be){qn=!1,dr=null,fi.apply(Oo,arguments)}function Us(o,l,f,x,N,R,G,me,be){if(Ui.apply(this,arguments),qn){if(qn){var De=dr;qn=!1,dr=null}else throw Error(n(198));Yn||(Yn=!0,vo=De)}}function Rr(o){var l=o,f=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(f=l.return),o=l.return;while(o)}return l.tag===3?f:null}function Ai(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function br(o){if(Rr(o)!==o)throw Error(n(188))}function Fo(o){var l=o.alternate;if(!l){if(l=Rr(o),l===null)throw Error(n(188));return l!==o?null:o}for(var f=o,x=l;;){var N=f.return;if(N===null)break;var R=N.alternate;if(R===null){if(x=N.return,x!==null){f=x;continue}break}if(N.child===R.child){for(R=N.child;R;){if(R===f)return br(N),o;if(R===x)return br(N),l;R=R.sibling}throw Error(n(188))}if(f.return!==x.return)f=N,x=R;else{for(var G=!1,me=N.child;me;){if(me===f){G=!0,f=N,x=R;break}if(me===x){G=!0,x=N,f=R;break}me=me.sibling}if(!G){for(me=R.child;me;){if(me===f){G=!0,f=R,x=N;break}if(me===x){G=!0,x=R,f=N;break}me=me.sibling}if(!G)throw Error(n(189))}}if(f.alternate!==x)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:l}function fs(o){return o=Fo(o),o!==null?Js(o):null}function Js(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Js(o);if(l!==null)return l;o=o.sibling}return null}var xo=e.unstable_scheduleCallback,Vo=e.unstable_cancelCallback,ha=e.unstable_shouldYield,uu=e.unstable_requestPaint,Mn=e.unstable_now,Al=e.unstable_getCurrentPriorityLevel,Uo=e.unstable_ImmediatePriority,ei=e.unstable_UserBlockingPriority,Bi=e.unstable_NormalPriority,Ua=e.unstable_LowPriority,Ba=e.unstable_IdlePriority,Bo=null,zi=null;function Nl(o){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(Bo,o,void 0,(o.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:Sl,El=Math.log,hr=Math.LN2;function Sl(o){return o>>>=0,o===0?32:31-(El(o)/hr|0)|0}var fa=64,ps=4194304;function ms(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ni(o,l){var f=o.pendingLanes;if(f===0)return 0;var x=0,N=o.suspendedLanes,R=o.pingedLanes,G=f&268435455;if(G!==0){var me=G&~N;me!==0?x=ms(me):(R&=G,R!==0&&(x=ms(R)))}else G=f&~N,G!==0?x=ms(G):R!==0&&(x=ms(R));if(x===0)return 0;if(l!==0&&l!==x&&(l&N)===0&&(N=x&-x,R=l&-l,N>=R||N===16&&(R&4194240)!==0))return l;if((x&4)!==0&&(x|=f&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=x;0<l;)f=31-Br(l),N=1<<f,x|=o[f],l&=~N;return x}function pa(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Un(o,l){for(var f=o.suspendedLanes,x=o.pingedLanes,N=o.expirationTimes,R=o.pendingLanes;0<R;){var G=31-Br(R),me=1<<G,be=N[G];be===-1?((me&f)===0||(me&x)!==0)&&(N[G]=pa(me,l)):be<=l&&(o.expiredLanes|=me),R&=~me}}function Ei(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ma(){var o=fa;return fa<<=1,(fa&4194240)===0&&(fa=64),o}function zo(o){for(var l=[],f=0;31>f;f++)l.push(o);return l}function qo(o,l,f){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Br(l),o[l]=f}function mn(o,l){var f=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var x=o.eventTimes;for(o=o.expirationTimes;0<f;){var N=31-Br(f),R=1<<N;l[N]=0,x[N]=-1,o[N]=-1,f&=~R}}function bo(o,l){var f=o.entangledLanes|=l;for(o=o.entanglements;f;){var x=31-Br(f),N=1<<x;N&l|o[x]&l&&(o[x]|=l),f&=~N}}var cn=0;function Zi(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var za,qa,lc,cc,$a,wo=!1,Si=[],ti=null,Ti=null,es=null,Rt=new Map,gs=new Map,Zs=[],du="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uc(o,l){switch(o){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Rt.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(l.pointerId)}}function wr(o,l,f,x,N,R){return o===null||o.nativeEvent!==R?(o={blockedOn:l,domEventName:f,eventSystemFlags:x,nativeEvent:R,targetContainers:[N]},l!==null&&(l=_c(l),l!==null&&qa(l)),o):(o.eventSystemFlags|=x,l=o.targetContainers,N!==null&&l.indexOf(N)===-1&&l.push(N),o)}function _o(o,l,f,x,N){switch(l){case"focusin":return ti=wr(ti,o,l,f,x,N),!0;case"dragenter":return Ti=wr(Ti,o,l,f,x,N),!0;case"mouseover":return es=wr(es,o,l,f,x,N),!0;case"pointerover":var R=N.pointerId;return Rt.set(R,wr(Rt.get(R)||null,o,l,f,x,N)),!0;case"gotpointercapture":return R=N.pointerId,gs.set(R,wr(gs.get(R)||null,o,l,f,x,N)),!0}return!1}function dc(o){var l=Za(o.target);if(l!==null){var f=Rr(l);if(f!==null){if(l=f.tag,l===13){if(l=Ai(f),l!==null){o.blockedOn=l,$a(o.priority,function(){lc(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ao(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var f=Ho(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var x=new f.constructor(f.type,f);sn=x,f.target.dispatchEvent(x),sn=null}else return l=_c(f),l!==null&&qa(l),o.blockedOn=f,!1;l.shift()}return!0}function eo(o,l,f){Ao(o)&&f.delete(l)}function Ha(){wo=!1,ti!==null&&Ao(ti)&&(ti=null),Ti!==null&&Ao(Ti)&&(Ti=null),es!==null&&Ao(es)&&(es=null),Rt.forEach(eo),gs.forEach(eo)}function ki(o,l){o.blockedOn===l&&(o.blockedOn=null,wo||(wo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ha)))}function qi(o){function l(N){return ki(N,o)}if(0<Si.length){ki(Si[0],o);for(var f=1;f<Si.length;f++){var x=Si[f];x.blockedOn===o&&(x.blockedOn=null)}}for(ti!==null&&ki(ti,o),Ti!==null&&ki(Ti,o),es!==null&&ki(es,o),Rt.forEach(l),gs.forEach(l),f=0;f<Zs.length;f++)x=Zs[f],x.blockedOn===o&&(x.blockedOn=null);for(;0<Zs.length&&(f=Zs[0],f.blockedOn===null);)dc(f),f.blockedOn===null&&Zs.shift()}var ys=$.ReactCurrentBatchConfig,$o=!0;function $n(o,l,f,x){var N=cn,R=ys.transition;ys.transition=null;try{cn=1,No(o,l,f,x)}finally{cn=N,ys.transition=R}}function Tl(o,l,f,x){var N=cn,R=ys.transition;ys.transition=null;try{cn=4,No(o,l,f,x)}finally{cn=N,ys.transition=R}}function No(o,l,f,x){if($o){var N=Ho(o,l,f,x);if(N===null)vu(o,l,x,Bs,f),uc(o,x);else if(_o(N,o,l,f,x))x.stopPropagation();else if(uc(o,x),l&4&&-1<du.indexOf(o)){for(;N!==null;){var R=_c(N);if(R!==null&&za(R),R=Ho(o,l,f,x),R===null&&vu(o,l,x,Bs,f),R===N)break;N=R}N!==null&&x.stopPropagation()}else vu(o,l,x,null,f)}}var Bs=null;function Ho(o,l,f,x){if(Bs=null,o=Ut(x),o=Za(o),o!==null)if(l=Rr(o),l===null)o=null;else if(f=l.tag,f===13){if(o=Ai(l),o!==null)return o;o=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Bs=o,null}function Wo(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Al()){case Uo:return 1;case ei:return 4;case Bi:case Ua:return 16;case Ba:return 536870912;default:return 16}default:return 16}}var Ci=null,to=null,Ii=null;function Wa(){if(Ii)return Ii;var o,l=to,f=l.length,x,N="value"in Ci?Ci.value:Ci.textContent,R=N.length;for(o=0;o<f&&l[o]===N[o];o++);var G=f-o;for(x=1;x<=G&&l[f-x]===N[R-x];x++);return Ii=N.slice(o,1<x?1-x:void 0)}function vs(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function pi(){return!0}function Ga(){return!1}function zr(o){function l(f,x,N,R,G){this._reactName=f,this._targetInst=N,this.type=x,this.nativeEvent=R,this.target=G,this.currentTarget=null;for(var me in o)o.hasOwnProperty(me)&&(f=o[me],this[me]=f?f(R):R[me]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?pi:Ga,this.isPropagationStopped=Ga,this}return we(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=pi)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=pi)},persist:function(){},isPersistent:pi}),l}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=zr(Pi),A=we({},Pi,{view:0,detail:0}),H=zr(A),de,ye,Ne,Ue=we({},A,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ne&&(Ne&&o.type==="mousemove"?(de=o.screenX-Ne.screenX,ye=o.screenY-Ne.screenY):ye=de=0,Ne=o),de)},movementY:function(o){return"movementY"in o?o.movementY:ye}}),$e=zr(Ue),st=we({},Ue,{dataTransfer:0}),ft=zr(st),Lt=we({},A,{relatedTarget:0}),Vt=zr(Lt),wn=we({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),Cn=zr(wn),fr=we({},Pi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Bn=zr(fr),_r=we({},Pi,{data:0}),ar=zr(_r),Ar={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ri={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kl(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Ri[o])?!!l[o]:!1}function ts(){return kl}var g=we({},A,{key:function(o){if(o.key){var l=Ar[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=vs(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?rr[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(o){return o.type==="keypress"?vs(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?vs(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),P=zr(g),B=we({},Ue,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),re=zr(B),Se=we({},A,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),Le=zr(Se),Xe=we({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),xn=zr(Xe),pr=we({},Ue,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),un=zr(pr),ln=[9,13,27,32],Hn=c&&"CompositionEvent"in window,ji=null;c&&"documentMode"in document&&(ji=document.documentMode);var $i=c&&"TextEvent"in window&&!ji,mi=c&&(!Hn||ji&&8<ji&&11>=ji),no=" ",hc=!1;function fc(o,l){switch(o){case"keyup":return ln.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ya(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ro=!1;function zs(o,l){switch(o){case"compositionend":return ya(l);case"keypress":return l.which!==32?null:(hc=!0,no);case"textInput":return o=l.data,o===no&&hc?null:o;default:return null}}function qs(o,l){if(ro)return o==="compositionend"||!Hn&&fc(o,l)?(o=Wa(),Ii=to=Ci=null,ro=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return mi&&l.locale!=="ko"?null:l.data;default:return null}}var Ka={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Go(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Ka[o.type]:l==="textarea"}function va(o,l,f,x){an(x),l=xd(l,"onChange"),0<l.length&&(f=new ga("onChange","change",null,f,x),o.push({event:f,listeners:l}))}var xa=null,Ko=null;function jr(o){gu(o,0)}function Cl(o){var l=Vl(o);if(Je(l))return o}function Yo(o,l){if(o==="change")return l}var Eo=!1;if(c){var Il;if(c){var Pl="oninput"in document;if(!Pl){var pc=document.createElement("div");pc.setAttribute("oninput","return;"),Pl=typeof pc.oninput=="function"}Il=Pl}else Il=!1;Eo=Il&&(!document.documentMode||9<document.documentMode)}function mc(){xa&&(xa.detachEvent("onpropertychange",ba),Ko=xa=null)}function ba(o){if(o.propertyName==="value"&&Cl(Ko)){var l=[];va(l,Ko,o,Ut(o)),It(jr,l)}}function Ya(o,l,f){o==="focusin"?(mc(),xa=l,Ko=f,xa.attachEvent("onpropertychange",ba)):o==="focusout"&&mc()}function Qa(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Cl(Ko)}function Rl(o,l){if(o==="click")return Cl(l)}function Xa(o,l){if(o==="input"||o==="change")return Cl(l)}function jl(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Nr=typeof Object.is=="function"?Object.is:jl;function xs(o,l){if(Nr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var f=Object.keys(o),x=Object.keys(l);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var N=f[x];if(!u.call(l,N)||!Nr(o[N],l[N]))return!1}return!0}function In(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Wn(o,l){var f=In(o);o=0;for(var x;f;){if(f.nodeType===3){if(x=o+f.textContent.length,o<=l&&x>=l)return{node:f,offset:l-o};o=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=In(f)}}function Er(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Er(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function qr(){for(var o=window,l=tt();l instanceof o.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)o=l.contentWindow;else break;l=tt(o.document)}return l}function So(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function hu(o){var l=qr(),f=o.focusedElem,x=o.selectionRange;if(l!==f&&f&&f.ownerDocument&&Er(f.ownerDocument.documentElement,f)){if(x!==null&&So(f)){if(l=x.start,o=x.end,o===void 0&&(o=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(o,f.value.length);else if(o=(l=f.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var N=f.textContent.length,R=Math.min(x.start,N);x=x.end===void 0?R:Math.min(x.end,N),!o.extend&&R>x&&(N=x,x=R,R=N),N=Wn(f,R);var G=Wn(f,x);N&&G&&(o.rangeCount!==1||o.anchorNode!==N.node||o.anchorOffset!==N.offset||o.focusNode!==G.node||o.focusOffset!==G.offset)&&(l=l.createRange(),l.setStart(N.node,N.offset),o.removeAllRanges(),R>x?(o.addRange(l),o.extend(G.node,G.offset)):(l.setEnd(G.node,G.offset),o.addRange(l)))}}for(l=[],o=f;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)o=l[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var gc=c&&"documentMode"in document&&11>=document.documentMode,wa=null,md=null,yc=null,gd=!1;function Bh(o,l,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;gd||wa==null||wa!==tt(x)||(x=wa,"selectionStart"in x&&So(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),yc&&xs(yc,x)||(yc=x,x=xd(md,"onSelect"),0<x.length&&(l=new ga("onSelect","select",null,l,f),o.push({event:l,listeners:x}),l.target=wa)))}function fu(o,l){var f={};return f[o.toLowerCase()]=l.toLowerCase(),f["Webkit"+o]="webkit"+l,f["Moz"+o]="moz"+l,f}var Ll={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},Dl={},zh={};c&&(zh=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function pu(o){if(Dl[o])return Dl[o];if(!Ll[o])return o;var l=Ll[o],f;for(f in l)if(l.hasOwnProperty(f)&&f in zh)return Dl[o]=l[f];return o}var qh=pu("animationend"),$h=pu("animationiteration"),Hh=pu("animationstart"),Wh=pu("transitionend"),Gh=new Map,Kh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qo(o,l){Gh.set(o,l),s(l,[o])}for(var vc=0;vc<Kh.length;vc++){var ns=Kh[vc],io=ns.toLowerCase(),yd=ns[0].toUpperCase()+ns.slice(1);Qo(io,"on"+yd)}Qo(qh,"onAnimationEnd"),Qo($h,"onAnimationIteration"),Qo(Hh,"onAnimationStart"),Qo("dblclick","onDoubleClick"),Qo("focusin","onFocus"),Qo("focusout","onBlur"),Qo(Wh,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function mu(o,l,f){var x=o.type||"unknown-event";o.currentTarget=f,Us(x,l,void 0,o),o.currentTarget=null}function gu(o,l){l=(l&4)!==0;for(var f=0;f<o.length;f++){var x=o[f],N=x.event;x=x.listeners;e:{var R=void 0;if(l)for(var G=x.length-1;0<=G;G--){var me=x[G],be=me.instance,De=me.currentTarget;if(me=me.listener,be!==R&&N.isPropagationStopped())break e;mu(N,me,De),R=be}else for(G=0;G<x.length;G++){if(me=x[G],be=me.instance,De=me.currentTarget,me=me.listener,be!==R&&N.isPropagationStopped())break e;mu(N,me,De),R=be}}}if(Yn)throw o=vo,Yn=!1,vo=null,o}function Qn(o,l){var f=l[ws];f===void 0&&(f=l[ws]=new Set);var x=o+"__bubble";f.has(x)||(yu(l,o,2,!1),f.add(x))}function vd(o,l,f){var x=0;l&&(x|=4),yu(f,o,x,l)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Ml(o){if(!o[xc]){o[xc]=!0,r.forEach(function(f){f!=="selectionchange"&&(Lp.has(f)||vd(f,!1,o),vd(f,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[xc]||(l[xc]=!0,vd("selectionchange",!1,l))}}function yu(o,l,f,x){switch(Wo(l)){case 1:var N=$n;break;case 4:N=Tl;break;default:N=No}f=N.bind(null,l,f,o),N=void 0,!hs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(N=!0),x?N!==void 0?o.addEventListener(l,f,{capture:!0,passive:N}):o.addEventListener(l,f,!0):N!==void 0?o.addEventListener(l,f,{passive:N}):o.addEventListener(l,f,!1)}function vu(o,l,f,x,N){var R=x;if((l&1)===0&&(l&2)===0&&x!==null)e:for(;;){if(x===null)return;var G=x.tag;if(G===3||G===4){var me=x.stateNode.containerInfo;if(me===N||me.nodeType===8&&me.parentNode===N)break;if(G===4)for(G=x.return;G!==null;){var be=G.tag;if((be===3||be===4)&&(be=G.stateNode.containerInfo,be===N||be.nodeType===8&&be.parentNode===N))return;G=G.return}for(;me!==null;){if(G=Za(me),G===null)return;if(be=G.tag,be===5||be===6){x=R=G;continue e}me=me.parentNode}}x=x.return}It(function(){var De=R,Ge=Ut(f),Qe=[];e:{var We=Gh.get(o);if(We!==void 0){var it=ga,pt=o;switch(o){case"keypress":if(vs(f)===0)break e;case"keydown":case"keyup":it=P;break;case"focusin":pt="focus",it=Vt;break;case"focusout":pt="blur",it=Vt;break;case"beforeblur":case"afterblur":it=Vt;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=$e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=ft;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=Le;break;case qh:case $h:case Hh:it=Cn;break;case Wh:it=xn;break;case"scroll":it=H;break;case"wheel":it=un;break;case"copy":case"cut":case"paste":it=Bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=re}var wt=(l&4)!==0,ii=!wt&&o==="scroll",Ie=wt?We!==null?We+"Capture":null:We;wt=[];for(var Ae=De,Re;Ae!==null;){Re=Ae;var Ze=Re.stateNode;if(Re.tag===5&&Ze!==null&&(Re=Ze,Ie!==null&&(Ze=Vn(Ae,Ie),Ze!=null&&wt.push(xu(Ae,Ze,Re)))),ii)break;Ae=Ae.return}0<wt.length&&(We=new it(We,pt,null,f,Ge),Qe.push({event:We,listeners:wt}))}}if((l&7)===0){e:{if(We=o==="mouseover"||o==="pointerover",it=o==="mouseout"||o==="pointerout",We&&f!==sn&&(pt=f.relatedTarget||f.fromElement)&&(Za(pt)||pt[Hi]))break e;if((it||We)&&(We=Ge.window===Ge?Ge:(We=Ge.ownerDocument)?We.defaultView||We.parentWindow:window,it?(pt=f.relatedTarget||f.toElement,it=De,pt=pt?Za(pt):null,pt!==null&&(ii=Rr(pt),pt!==ii||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(it=null,pt=De),it!==pt)){if(wt=$e,Ze="onMouseLeave",Ie="onMouseEnter",Ae="mouse",(o==="pointerout"||o==="pointerover")&&(wt=re,Ze="onPointerLeave",Ie="onPointerEnter",Ae="pointer"),ii=it==null?We:Vl(it),Re=pt==null?We:Vl(pt),We=new wt(Ze,Ae+"leave",it,f,Ge),We.target=ii,We.relatedTarget=Re,Ze=null,Za(Ge)===De&&(wt=new wt(Ie,Ae+"enter",pt,f,Ge),wt.target=Re,wt.relatedTarget=ii,Ze=wt),ii=Ze,it&&pt)t:{for(wt=it,Ie=pt,Ae=0,Re=wt;Re;Re=Ol(Re))Ae++;for(Re=0,Ze=Ie;Ze;Ze=Ol(Ze))Re++;for(;0<Ae-Re;)wt=Ol(wt),Ae--;for(;0<Re-Ae;)Ie=Ol(Ie),Re--;for(;Ae--;){if(wt===Ie||Ie!==null&&wt===Ie.alternate)break t;wt=Ol(wt),Ie=Ol(Ie)}wt=null}else wt=null;it!==null&&Dp(Qe,We,it,wt,!1),pt!==null&&ii!==null&&Dp(Qe,ii,pt,wt,!0)}}e:{if(We=De?Vl(De):window,it=We.nodeName&&We.nodeName.toLowerCase(),it==="select"||it==="input"&&We.type==="file")var St=Yo;else if(Go(We))if(Eo)St=Xa;else{St=Qa;var Ot=Ya}else(it=We.nodeName)&&it.toLowerCase()==="input"&&(We.type==="checkbox"||We.type==="radio")&&(St=Rl);if(St&&(St=St(o,De))){va(Qe,St,f,Ge);break e}Ot&&Ot(o,We,De),o==="focusout"&&(Ot=We._wrapperState)&&Ot.controlled&&We.type==="number"&&Ke(We,"number",We.value)}switch(Ot=De?Vl(De):window,o){case"focusin":(Go(Ot)||Ot.contentEditable==="true")&&(wa=Ot,md=De,yc=null);break;case"focusout":yc=md=wa=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,Bh(Qe,f,Ge);break;case"selectionchange":if(gc)break;case"keydown":case"keyup":Bh(Qe,f,Ge)}var Ft;if(Hn)e:{switch(o){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else ro?fc(o,f)&&(Gt="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Gt="onCompositionStart");Gt&&(mi&&f.locale!=="ko"&&(ro||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&ro&&(Ft=Wa()):(Ci=Ge,to="value"in Ci?Ci.value:Ci.textContent,ro=!0)),Ot=xd(De,Gt),0<Ot.length&&(Gt=new ar(Gt,o,null,f,Ge),Qe.push({event:Gt,listeners:Ot}),Ft?Gt.data=Ft:(Ft=ya(f),Ft!==null&&(Gt.data=Ft)))),(Ft=$i?zs(o,f):qs(o,f))&&(De=xd(De,"onBeforeInput"),0<De.length&&(Ge=new ar("onBeforeInput","beforeinput",null,f,Ge),Qe.push({event:Ge,listeners:De}),Ge.data=Ft))}gu(Qe,l)})}function xu(o,l,f){return{instance:o,listener:l,currentTarget:f}}function xd(o,l){for(var f=l+"Capture",x=[];o!==null;){var N=o,R=N.stateNode;N.tag===5&&R!==null&&(N=R,R=Vn(o,f),R!=null&&x.unshift(xu(o,R,N)),R=Vn(o,l),R!=null&&x.push(xu(o,R,N))),o=o.return}return x}function Ol(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Dp(o,l,f,x,N){for(var R=l._reactName,G=[];f!==null&&f!==x;){var me=f,be=me.alternate,De=me.stateNode;if(be!==null&&be===x)break;me.tag===5&&De!==null&&(me=De,N?(be=Vn(f,R),be!=null&&G.unshift(xu(f,be,me))):N||(be=Vn(f,R),be!=null&&G.push(xu(f,be,me)))),f=f.return}G.length!==0&&o.push({event:l,listeners:G})}var S0=/\r\n?/g,T0=/\u0000|\uFFFD/g;function Mp(o){return(typeof o=="string"?o:""+o).replace(S0,`
`).replace(T0,"")}function bd(o,l,f){if(l=Mp(l),Mp(o)!==l&&f)throw Error(n(425))}function bc(){}var bu=null,Fl=null;function Yh(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Qh=typeof setTimeout=="function"?setTimeout:void 0,Op=typeof clearTimeout=="function"?clearTimeout:void 0,Fp=typeof Promise=="function"?Promise:void 0,k0=typeof queueMicrotask=="function"?queueMicrotask:typeof Fp<"u"?function(o){return Fp.resolve(null).then(o).catch(C0)}:Qh;function C0(o){setTimeout(function(){throw o})}function Xh(o,l){var f=l,x=0;do{var N=f.nextSibling;if(o.removeChild(f),N&&N.nodeType===8)if(f=N.data,f==="/$"){if(x===0){o.removeChild(N),qi(l);return}x--}else f!=="$"&&f!=="$?"&&f!=="$!"||x++;f=N}while(f);qi(l)}function rs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function so(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return o;l--}else f==="/$"&&l++}o=o.previousSibling}return null}var bs=Math.random().toString(36).slice(2),Xo="__reactFiber$"+bs,wc="__reactProps$"+bs,Hi="__reactContainer$"+bs,ws="__reactEvents$"+bs,I0="__reactListeners$"+bs,P0="__reactHandles$"+bs;function Za(o){var l=o[Xo];if(l)return l;for(var f=o.parentNode;f;){if(l=f[Hi]||f[Xo]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(o=so(o);o!==null;){if(f=o[Xo])return f;o=so(o)}return l}o=f,f=o.parentNode}return null}function _c(o){return o=o[Xo]||o[Hi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Vl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function wu(o){return o[wc]||null}var Jh=[],_a=-1;function To(o){return{current:o}}function zn(o){0>_a||(o.current=Jh[_a],Jh[_a]=null,_a--)}function Gn(o,l){_a++,Jh[_a]=o.current,o.current=l}var el={},Li=To(el),_s=To(!1),Ul=el;function Ac(o,l){var f=o.type.contextTypes;if(!f)return el;var x=o.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===l)return x.__reactInternalMemoizedMaskedChildContext;var N={},R;for(R in f)N[R]=l[R];return x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=N),N}function As(o){return o=o.childContextTypes,o!=null}function wd(){zn(_s),zn(Li)}function Vp(o,l,f){if(Li.current!==el)throw Error(n(168));Gn(Li,l),Gn(_s,f)}function Zh(o,l,f){var x=o.stateNode;if(l=l.childContextTypes,typeof x.getChildContext!="function")return f;x=x.getChildContext();for(var N in x)if(!(N in l))throw Error(n(108,ve(o)||"Unknown",N));return we({},f,x)}function Bl(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||el,Ul=Li.current,Gn(Li,o),Gn(_s,_s.current),!0}function Up(o,l,f){var x=o.stateNode;if(!x)throw Error(n(169));f?(o=Zh(o,l,Ul),x.__reactInternalMemoizedMergedChildContext=o,zn(_s),zn(Li),Gn(Li,o)):zn(_s),Gn(_s,f)}var Aa=null,_u=!1,m=!1;function b(o){Aa===null?Aa=[o]:Aa.push(o)}function k(o){_u=!0,b(o)}function M(){if(!m&&Aa!==null){m=!0;var o=0,l=cn;try{var f=Aa;for(cn=1;o<f.length;o++){var x=f[o];do x=x(!0);while(x!==null)}Aa=null,_u=!1}catch(N){throw Aa!==null&&(Aa=Aa.slice(o+1)),xo(Uo,M),N}finally{cn=l,m=!1}}return null}var W=[],K=0,X=null,te=0,ie=[],ce=0,xe=null,Ce=1,ue="";function _e(o,l){W[K++]=te,W[K++]=X,X=o,te=l}function ke(o,l,f){ie[ce++]=Ce,ie[ce++]=ue,ie[ce++]=xe,xe=o;var x=Ce;o=ue;var N=32-Br(x)-1;x&=~(1<<N),f+=1;var R=32-Br(l)+N;if(30<R){var G=N-N%5;R=(x&(1<<G)-1).toString(32),x>>=G,N-=G,Ce=1<<32-Br(l)+N|f<<N|x,ue=R+o}else Ce=1<<R|f<<N|x,ue=o}function Ve(o){o.return!==null&&(_e(o,1),ke(o,1,0))}function Pe(o){for(;o===X;)X=W[--K],W[K]=null,te=W[--K],W[K]=null;for(;o===xe;)xe=ie[--ce],ie[ce]=null,ue=ie[--ce],ie[ce]=null,Ce=ie[--ce],ie[ce]=null}var Oe=null,Fe=null,Be=!1,qe=null;function Et(o,l){var f=na(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=o,l=o.deletions,l===null?(o.deletions=[f],o.flags|=16):l.push(f)}function ot(o,l){switch(o.tag){case 5:var f=o.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Oe=o,Fe=rs(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Oe=o,Fe=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=xe!==null?{id:Ce,overflow:ue}:null,o.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=na(18,null,null,0),f.stateNode=l,f.return=o,o.child=f,Oe=o,Fe=null,!0):!1;default:return!1}}function Jt(o){return(o.mode&1)!==0&&(o.flags&128)===0}function dt(o){if(Be){var l=Fe;if(l){var f=l;if(!ot(o,l)){if(Jt(o))throw Error(n(418));l=rs(f.nextSibling);var x=Oe;l&&ot(o,l)?Et(x,f):(o.flags=o.flags&-4097|2,Be=!1,Oe=o)}}else{if(Jt(o))throw Error(n(418));o.flags=o.flags&-4097|2,Be=!1,Oe=o}}}function gn(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Oe=o}function Sr(o){if(o!==Oe)return!1;if(!Be)return gn(o),Be=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Yh(o.type,o.memoizedProps)),l&&(l=Fe)){if(Jt(o))throw Zt(),Error(n(418));for(;l;)Et(o,l),l=rs(l.nextSibling)}if(gn(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(l===0){Fe=rs(o.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}o=o.nextSibling}Fe=null}}else Fe=Oe?rs(o.stateNode.nextSibling):null;return!0}function Zt(){for(var o=Fe;o;)o=rs(o.nextSibling)}function at(){Fe=Oe=null,Be=!1}function rt(o){qe===null?qe=[o]:qe.push(o)}var Lr=$.ReactCurrentBatchConfig;function qt(o,l,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var x=f.stateNode}if(!x)throw Error(n(147,o));var N=x,R=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===R?l.ref:(l=function(G){var me=N.refs;G===null?delete me[R]:me[R]=G},l._stringRef=R,l)}if(typeof o!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,o))}return o}function dn(o,l){throw o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function ir(o){var l=o._init;return l(o._payload)}function gi(o){function l(Ie,Ae){if(o){var Re=Ie.deletions;Re===null?(Ie.deletions=[Ae],Ie.flags|=16):Re.push(Ae)}}function f(Ie,Ae){if(!o)return null;for(;Ae!==null;)l(Ie,Ae),Ae=Ae.sibling;return null}function x(Ie,Ae){for(Ie=new Map;Ae!==null;)Ae.key!==null?Ie.set(Ae.key,Ae):Ie.set(Ae.index,Ae),Ae=Ae.sibling;return Ie}function N(Ie,Ae){return Ie=jc(Ie,Ae),Ie.index=0,Ie.sibling=null,Ie}function R(Ie,Ae,Re){return Ie.index=Re,o?(Re=Ie.alternate,Re!==null?(Re=Re.index,Re<Ae?(Ie.flags|=2,Ae):Re):(Ie.flags|=2,Ae)):(Ie.flags|=1048576,Ae)}function G(Ie){return o&&Ie.alternate===null&&(Ie.flags|=2),Ie}function me(Ie,Ae,Re,Ze){return Ae===null||Ae.tag!==6?(Ae=oy(Re,Ie.mode,Ze),Ae.return=Ie,Ae):(Ae=N(Ae,Re),Ae.return=Ie,Ae)}function be(Ie,Ae,Re,Ze){var St=Re.type;return St===q?Ge(Ie,Ae,Re.props.children,Ze,Re.key):Ae!==null&&(Ae.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===oe&&ir(St)===Ae.type)?(Ze=N(Ae,Re.props),Ze.ref=qt(Ie,Ae,Re),Ze.return=Ie,Ze):(Ze=om(Re.type,Re.key,Re.props,null,Ie.mode,Ze),Ze.ref=qt(Ie,Ae,Re),Ze.return=Ie,Ze)}function De(Ie,Ae,Re,Ze){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Re.containerInfo||Ae.stateNode.implementation!==Re.implementation?(Ae=ay(Re,Ie.mode,Ze),Ae.return=Ie,Ae):(Ae=N(Ae,Re.children||[]),Ae.return=Ie,Ae)}function Ge(Ie,Ae,Re,Ze,St){return Ae===null||Ae.tag!==7?(Ae=Iu(Re,Ie.mode,Ze,St),Ae.return=Ie,Ae):(Ae=N(Ae,Re),Ae.return=Ie,Ae)}function Qe(Ie,Ae,Re){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=oy(""+Ae,Ie.mode,Re),Ae.return=Ie,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case J:return Re=om(Ae.type,Ae.key,Ae.props,null,Ie.mode,Re),Re.ref=qt(Ie,null,Ae),Re.return=Ie,Re;case le:return Ae=ay(Ae,Ie.mode,Re),Ae.return=Ie,Ae;case oe:var Ze=Ae._init;return Qe(Ie,Ze(Ae._payload),Re)}if(ct(Ae)||pe(Ae))return Ae=Iu(Ae,Ie.mode,Re,null),Ae.return=Ie,Ae;dn(Ie,Ae)}return null}function We(Ie,Ae,Re,Ze){var St=Ae!==null?Ae.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number")return St!==null?null:me(Ie,Ae,""+Re,Ze);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case J:return Re.key===St?be(Ie,Ae,Re,Ze):null;case le:return Re.key===St?De(Ie,Ae,Re,Ze):null;case oe:return St=Re._init,We(Ie,Ae,St(Re._payload),Ze)}if(ct(Re)||pe(Re))return St!==null?null:Ge(Ie,Ae,Re,Ze,null);dn(Ie,Re)}return null}function it(Ie,Ae,Re,Ze,St){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Ie=Ie.get(Re)||null,me(Ae,Ie,""+Ze,St);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case J:return Ie=Ie.get(Ze.key===null?Re:Ze.key)||null,be(Ae,Ie,Ze,St);case le:return Ie=Ie.get(Ze.key===null?Re:Ze.key)||null,De(Ae,Ie,Ze,St);case oe:var Ot=Ze._init;return it(Ie,Ae,Re,Ot(Ze._payload),St)}if(ct(Ze)||pe(Ze))return Ie=Ie.get(Re)||null,Ge(Ae,Ie,Ze,St,null);dn(Ae,Ze)}return null}function pt(Ie,Ae,Re,Ze){for(var St=null,Ot=null,Ft=Ae,Gt=Ae=0,Qi=null;Ft!==null&&Gt<Re.length;Gt++){Ft.index>Gt?(Qi=Ft,Ft=null):Qi=Ft.sibling;var On=We(Ie,Ft,Re[Gt],Ze);if(On===null){Ft===null&&(Ft=Qi);break}o&&Ft&&On.alternate===null&&l(Ie,Ft),Ae=R(On,Ae,Gt),Ot===null?St=On:Ot.sibling=On,Ot=On,Ft=Qi}if(Gt===Re.length)return f(Ie,Ft),Be&&_e(Ie,Gt),St;if(Ft===null){for(;Gt<Re.length;Gt++)Ft=Qe(Ie,Re[Gt],Ze),Ft!==null&&(Ae=R(Ft,Ae,Gt),Ot===null?St=Ft:Ot.sibling=Ft,Ot=Ft);return Be&&_e(Ie,Gt),St}for(Ft=x(Ie,Ft);Gt<Re.length;Gt++)Qi=it(Ft,Ie,Gt,Re[Gt],Ze),Qi!==null&&(o&&Qi.alternate!==null&&Ft.delete(Qi.key===null?Gt:Qi.key),Ae=R(Qi,Ae,Gt),Ot===null?St=Qi:Ot.sibling=Qi,Ot=Qi);return o&&Ft.forEach(function(Lc){return l(Ie,Lc)}),Be&&_e(Ie,Gt),St}function wt(Ie,Ae,Re,Ze){var St=pe(Re);if(typeof St!="function")throw Error(n(150));if(Re=St.call(Re),Re==null)throw Error(n(151));for(var Ot=St=null,Ft=Ae,Gt=Ae=0,Qi=null,On=Re.next();Ft!==null&&!On.done;Gt++,On=Re.next()){Ft.index>Gt?(Qi=Ft,Ft=null):Qi=Ft.sibling;var Lc=We(Ie,Ft,On.value,Ze);if(Lc===null){Ft===null&&(Ft=Qi);break}o&&Ft&&Lc.alternate===null&&l(Ie,Ft),Ae=R(Lc,Ae,Gt),Ot===null?St=Lc:Ot.sibling=Lc,Ot=Lc,Ft=Qi}if(On.done)return f(Ie,Ft),Be&&_e(Ie,Gt),St;if(Ft===null){for(;!On.done;Gt++,On=Re.next())On=Qe(Ie,On.value,Ze),On!==null&&(Ae=R(On,Ae,Gt),Ot===null?St=On:Ot.sibling=On,Ot=On);return Be&&_e(Ie,Gt),St}for(Ft=x(Ie,Ft);!On.done;Gt++,On=Re.next())On=it(Ft,Ie,Gt,On.value,Ze),On!==null&&(o&&On.alternate!==null&&Ft.delete(On.key===null?Gt:On.key),Ae=R(On,Ae,Gt),Ot===null?St=On:Ot.sibling=On,Ot=On);return o&&Ft.forEach(function(oP){return l(Ie,oP)}),Be&&_e(Ie,Gt),St}function ii(Ie,Ae,Re,Ze){if(typeof Re=="object"&&Re!==null&&Re.type===q&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case J:e:{for(var St=Re.key,Ot=Ae;Ot!==null;){if(Ot.key===St){if(St=Re.type,St===q){if(Ot.tag===7){f(Ie,Ot.sibling),Ae=N(Ot,Re.props.children),Ae.return=Ie,Ie=Ae;break e}}else if(Ot.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===oe&&ir(St)===Ot.type){f(Ie,Ot.sibling),Ae=N(Ot,Re.props),Ae.ref=qt(Ie,Ot,Re),Ae.return=Ie,Ie=Ae;break e}f(Ie,Ot);break}else l(Ie,Ot);Ot=Ot.sibling}Re.type===q?(Ae=Iu(Re.props.children,Ie.mode,Ze,Re.key),Ae.return=Ie,Ie=Ae):(Ze=om(Re.type,Re.key,Re.props,null,Ie.mode,Ze),Ze.ref=qt(Ie,Ae,Re),Ze.return=Ie,Ie=Ze)}return G(Ie);case le:e:{for(Ot=Re.key;Ae!==null;){if(Ae.key===Ot)if(Ae.tag===4&&Ae.stateNode.containerInfo===Re.containerInfo&&Ae.stateNode.implementation===Re.implementation){f(Ie,Ae.sibling),Ae=N(Ae,Re.children||[]),Ae.return=Ie,Ie=Ae;break e}else{f(Ie,Ae);break}else l(Ie,Ae);Ae=Ae.sibling}Ae=ay(Re,Ie.mode,Ze),Ae.return=Ie,Ie=Ae}return G(Ie);case oe:return Ot=Re._init,ii(Ie,Ae,Ot(Re._payload),Ze)}if(ct(Re))return pt(Ie,Ae,Re,Ze);if(pe(Re))return wt(Ie,Ae,Re,Ze);dn(Ie,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"?(Re=""+Re,Ae!==null&&Ae.tag===6?(f(Ie,Ae.sibling),Ae=N(Ae,Re),Ae.return=Ie,Ie=Ae):(f(Ie,Ae),Ae=oy(Re,Ie.mode,Ze),Ae.return=Ie,Ie=Ae),G(Ie)):f(Ie,Ae)}return ii}var $r=gi(!0),mr=gi(!1),ni=To(null),yi=null,lr=null,bn=null;function Pn(){bn=lr=yi=null}function cr(o){var l=ni.current;zn(ni),o._currentValue=l}function Rn(o,l,f){for(;o!==null;){var x=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,x!==null&&(x.childLanes|=l)):x!==null&&(x.childLanes&l)!==l&&(x.childLanes|=l),o===f)break;o=o.return}}function Tr(o,l){yi=o,bn=lr=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(ao=!0),o.firstContext=null)}function kr(o){var l=o._currentValue;if(bn!==o)if(o={context:o,memoizedValue:l,next:null},lr===null){if(yi===null)throw Error(n(308));lr=o,yi.dependencies={lanes:0,firstContext:o}}else lr=lr.next=o;return l}var Xn=null;function Wi(o){Xn===null?Xn=[o]:Xn.push(o)}function Kn(o,l,f,x){var N=l.interleaved;return N===null?(f.next=f,Wi(l)):(f.next=N.next,N.next=f),l.interleaved=f,Jn(o,x)}function Jn(o,l){o.lanes|=l;var f=o.alternate;for(f!==null&&(f.lanes|=l),f=o,o=o.return;o!==null;)o.childLanes|=l,f=o.alternate,f!==null&&(f.childLanes|=l),f=o,o=o.return;return f.tag===3?f.stateNode:null}var Hr=!1;function Di(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ns(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Dr(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Mr(o,l,f){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(jn&2)!==0){var N=x.pending;return N===null?l.next=l:(l.next=N.next,N.next=l),x.pending=l,Jn(o,f)}return N=x.interleaved,N===null?(l.next=l,Wi(x)):(l.next=N.next,N.next=l),x.interleaved=l,Jn(o,f)}function Gi(o,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var x=l.lanes;x&=o.pendingLanes,f|=x,l.lanes=f,bo(o,f)}}function Zn(o,l){var f=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var N=null,R=null;if(f=f.firstBaseUpdate,f!==null){do{var G={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};R===null?N=R=G:R=R.next=G,f=f.next}while(f!==null);R===null?N=R=l:R=R.next=l}else N=R=l;f={baseState:x.baseState,firstBaseUpdate:N,lastBaseUpdate:R,shared:x.shared,effects:x.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=l:o.next=l,f.lastBaseUpdate=l}function Ki(o,l,f,x){var N=o.updateQueue;Hr=!1;var R=N.firstBaseUpdate,G=N.lastBaseUpdate,me=N.shared.pending;if(me!==null){N.shared.pending=null;var be=me,De=be.next;be.next=null,G===null?R=De:G.next=De,G=be;var Ge=o.alternate;Ge!==null&&(Ge=Ge.updateQueue,me=Ge.lastBaseUpdate,me!==G&&(me===null?Ge.firstBaseUpdate=De:me.next=De,Ge.lastBaseUpdate=be))}if(R!==null){var Qe=N.baseState;G=0,Ge=De=be=null,me=R;do{var We=me.lane,it=me.eventTime;if((x&We)===We){Ge!==null&&(Ge=Ge.next={eventTime:it,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var pt=o,wt=me;switch(We=l,it=f,wt.tag){case 1:if(pt=wt.payload,typeof pt=="function"){Qe=pt.call(it,Qe,We);break e}Qe=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=wt.payload,We=typeof pt=="function"?pt.call(it,Qe,We):pt,We==null)break e;Qe=we({},Qe,We);break e;case 2:Hr=!0}}me.callback!==null&&me.lane!==0&&(o.flags|=64,We=N.effects,We===null?N.effects=[me]:We.push(me))}else it={eventTime:it,lane:We,tag:me.tag,payload:me.payload,callback:me.callback,next:null},Ge===null?(De=Ge=it,be=Qe):Ge=Ge.next=it,G|=We;if(me=me.next,me===null){if(me=N.shared.pending,me===null)break;We=me,me=We.next,We.next=null,N.lastBaseUpdate=We,N.shared.pending=null}}while(!0);if(Ge===null&&(be=Qe),N.baseState=be,N.firstBaseUpdate=De,N.lastBaseUpdate=Ge,l=N.shared.interleaved,l!==null){N=l;do G|=N.lane,N=N.next;while(N!==l)}else R===null&&(N.shared.lanes=0);Su|=G,o.lanes=G,o.memoizedState=Qe}}function oo(o,l,f){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var x=o[l],N=x.callback;if(N!==null){if(x.callback=null,x=f,typeof N!="function")throw Error(n(191,N));N.call(x)}}}var ko={},vi=To(ko),Or=To(ko),tl=To(ko);function Na(o){if(o===ko)throw Error(n(174));return o}function Nc(o,l){switch(Gn(tl,l),Gn(Or,o),Gn(vi,ko),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ht(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Ht(l,o)}zn(vi),Gn(vi,l)}function Jo(){zn(vi),zn(Or),zn(tl)}function Bp(o){Na(tl.current);var l=Na(vi.current),f=Ht(l,o.type);l!==f&&(Gn(Or,o),Gn(vi,f))}function ef(o){Or.current===o&&(zn(vi),zn(Or))}var sr=To(0);function Co(o){for(var l=o;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var tf=[];function nf(){for(var o=0;o<tf.length;o++)tf[o]._workInProgressVersionPrimary=null;tf.length=0}var _d=$.ReactCurrentDispatcher,Ad=$.ReactCurrentBatchConfig,Zo=0,ur=null,Wr=null,Fr=null,Ec=!1,Ea=!1,Sc=0,R0=0;function ri(){throw Error(n(321))}function Nd(o,l){if(l===null)return!1;for(var f=0;f<l.length&&f<o.length;f++)if(!Nr(o[f],l[f]))return!1;return!0}function Au(o,l,f,x,N,R){if(Zo=R,ur=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,_d.current=o===null||o.memoizedState===null?RI:jI,o=f(x,N),Ea){R=0;do{if(Ea=!1,Sc=0,25<=R)throw Error(n(301));R+=1,Fr=Wr=null,l.updateQueue=null,_d.current=LI,o=f(x,N)}while(Ea)}if(_d.current=Wp,l=Wr!==null&&Wr.next!==null,Zo=0,Fr=Wr=ur=null,Ec=!1,l)throw Error(n(300));return o}function ea(){var o=Sc!==0;return Sc=0,o}function Io(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?ur.memoizedState=Fr=o:Fr=Fr.next=o,Fr}function $s(){if(Wr===null){var o=ur.alternate;o=o!==null?o.memoizedState:null}else o=Wr.next;var l=Fr===null?ur.memoizedState:Fr.next;if(l!==null)Fr=l,Wr=o;else{if(o===null)throw Error(n(310));Wr=o,o={memoizedState:Wr.memoizedState,baseState:Wr.baseState,baseQueue:Wr.baseQueue,queue:Wr.queue,next:null},Fr===null?ur.memoizedState=Fr=o:Fr=Fr.next=o}return Fr}function Nu(o,l){return typeof l=="function"?l(o):l}function Ed(o){var l=$s(),f=l.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var x=Wr,N=x.baseQueue,R=f.pending;if(R!==null){if(N!==null){var G=N.next;N.next=R.next,R.next=G}x.baseQueue=N=R,f.pending=null}if(N!==null){R=N.next,x=x.baseState;var me=G=null,be=null,De=R;do{var Ge=De.lane;if((Zo&Ge)===Ge)be!==null&&(be=be.next={lane:0,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),x=De.hasEagerState?De.eagerState:o(x,De.action);else{var Qe={lane:Ge,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null};be===null?(me=be=Qe,G=x):be=be.next=Qe,ur.lanes|=Ge,Su|=Ge}De=De.next}while(De!==null&&De!==R);be===null?G=x:be.next=me,Nr(x,l.memoizedState)||(ao=!0),l.memoizedState=x,l.baseState=G,l.baseQueue=be,f.lastRenderedState=x}if(o=f.interleaved,o!==null){N=o;do R=N.lane,ur.lanes|=R,Su|=R,N=N.next;while(N!==o)}else N===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function nl(o){var l=$s(),f=l.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var x=f.dispatch,N=f.pending,R=l.memoizedState;if(N!==null){f.pending=null;var G=N=N.next;do R=o(R,G.action),G=G.next;while(G!==N);Nr(R,l.memoizedState)||(ao=!0),l.memoizedState=R,l.baseQueue===null&&(l.baseState=R),f.lastRenderedState=R}return[R,x]}function zp(){}function rf(o,l){var f=ur,x=$s(),N=l(),R=!Nr(x.memoizedState,N);if(R&&(x.memoizedState=N,ao=!0),x=x.queue,kd($p.bind(null,f,x,o),[o]),x.getSnapshot!==l||R||Fr!==null&&Fr.memoizedState.tag&1){if(f.flags|=2048,Hs(9,sf.bind(null,f,x,N,l),void 0,null),Yi===null)throw Error(n(349));(Zo&30)!==0||qp(f,l,N)}return N}function qp(o,l,f){o.flags|=16384,o={getSnapshot:l,value:f},l=ur.updateQueue,l===null?(l={lastEffect:null,stores:null},ur.updateQueue=l,l.stores=[o]):(f=l.stores,f===null?l.stores=[o]:f.push(o))}function sf(o,l,f,x){l.value=f,l.getSnapshot=x,Tc(l)&&Sd(o)}function $p(o,l,f){return f(function(){Tc(l)&&Sd(o)})}function Tc(o){var l=o.getSnapshot;o=o.value;try{var f=l();return!Nr(o,f)}catch{return!0}}function Sd(o){var l=Jn(o,1);l!==null&&Ia(l,o,1,-1)}function Eu(o){var l=Io();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:o},l.queue=o,o=o.dispatch=PI.bind(null,ur,o),[l.memoizedState,o]}function Hs(o,l,f,x){return o={tag:o,create:l,destroy:f,deps:x,next:null},l=ur.updateQueue,l===null?(l={lastEffect:null,stores:null},ur.updateQueue=l,l.lastEffect=o.next=o):(f=l.lastEffect,f===null?l.lastEffect=o.next=o:(x=f.next,f.next=o,o.next=x,l.lastEffect=o)),o}function Sa(){return $s().memoizedState}function Po(o,l,f,x){var N=Io();ur.flags|=o,N.memoizedState=Hs(1|l,f,void 0,x===void 0?null:x)}function zl(o,l,f,x){var N=$s();x=x===void 0?null:x;var R=void 0;if(Wr!==null){var G=Wr.memoizedState;if(R=G.destroy,x!==null&&Nd(x,G.deps)){N.memoizedState=Hs(l,f,R,x);return}}ur.flags|=o,N.memoizedState=Hs(1|l,f,R,x)}function Td(o,l){return Po(8390656,8,o,l)}function kd(o,l){return zl(2048,8,o,l)}function Hp(o,l){return zl(4,2,o,l)}function Cd(o,l){return zl(4,4,o,l)}function Id(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Jx(o,l,f){return f=f!=null?f.concat([o]):null,zl(4,4,Id.bind(null,l,o),f)}function j0(){}function Zx(o,l){var f=$s();l=l===void 0?null:l;var x=f.memoizedState;return x!==null&&l!==null&&Nd(l,x[1])?x[0]:(f.memoizedState=[o,l],o)}function eb(o,l){var f=$s();l=l===void 0?null:l;var x=f.memoizedState;return x!==null&&l!==null&&Nd(l,x[1])?x[0]:(o=o(),f.memoizedState=[o,l],o)}function tb(o,l,f){return(Zo&21)===0?(o.baseState&&(o.baseState=!1,ao=!0),o.memoizedState=f):(Nr(f,l)||(f=ma(),ur.lanes|=f,Su|=f,o.baseState=!0),l)}function CI(o,l){var f=cn;cn=f!==0&&4>f?f:4,o(!0);var x=Ad.transition;Ad.transition={};try{o(!1),l()}finally{cn=f,Ad.transition=x}}function nb(){return $s().memoizedState}function II(o,l,f){var x=Pc(o);if(f={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null},rb(o))ib(l,f);else if(f=Kn(o,l,f,x),f!==null){var N=Gs();Ia(f,o,x,N),sb(f,l,x)}}function PI(o,l,f){var x=Pc(o),N={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null};if(rb(o))ib(l,N);else{var R=o.alternate;if(o.lanes===0&&(R===null||R.lanes===0)&&(R=l.lastRenderedReducer,R!==null))try{var G=l.lastRenderedState,me=R(G,f);if(N.hasEagerState=!0,N.eagerState=me,Nr(me,G)){var be=l.interleaved;be===null?(N.next=N,Wi(l)):(N.next=be.next,be.next=N),l.interleaved=N;return}}catch{}finally{}f=Kn(o,l,N,x),f!==null&&(N=Gs(),Ia(f,o,x,N),sb(f,l,x))}}function rb(o){var l=o.alternate;return o===ur||l!==null&&l===ur}function ib(o,l){Ea=Ec=!0;var f=o.pending;f===null?l.next=l:(l.next=f.next,f.next=l),o.pending=l}function sb(o,l,f){if((f&4194240)!==0){var x=l.lanes;x&=o.pendingLanes,f|=x,l.lanes=f,bo(o,f)}}var Wp={readContext:kr,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},RI={readContext:kr,useCallback:function(o,l){return Io().memoizedState=[o,l===void 0?null:l],o},useContext:kr,useEffect:Td,useImperativeHandle:function(o,l,f){return f=f!=null?f.concat([o]):null,Po(4194308,4,Id.bind(null,l,o),f)},useLayoutEffect:function(o,l){return Po(4194308,4,o,l)},useInsertionEffect:function(o,l){return Po(4,2,o,l)},useMemo:function(o,l){var f=Io();return l=l===void 0?null:l,o=o(),f.memoizedState=[o,l],o},useReducer:function(o,l,f){var x=Io();return l=f!==void 0?f(l):l,x.memoizedState=x.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},x.queue=o,o=o.dispatch=II.bind(null,ur,o),[x.memoizedState,o]},useRef:function(o){var l=Io();return o={current:o},l.memoizedState=o},useState:Eu,useDebugValue:j0,useDeferredValue:function(o){return Io().memoizedState=o},useTransition:function(){var o=Eu(!1),l=o[0];return o=CI.bind(null,o[1]),Io().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,f){var x=ur,N=Io();if(Be){if(f===void 0)throw Error(n(407));f=f()}else{if(f=l(),Yi===null)throw Error(n(349));(Zo&30)!==0||qp(x,l,f)}N.memoizedState=f;var R={value:f,getSnapshot:l};return N.queue=R,Td($p.bind(null,x,R,o),[o]),x.flags|=2048,Hs(9,sf.bind(null,x,R,f,l),void 0,null),f},useId:function(){var o=Io(),l=Yi.identifierPrefix;if(Be){var f=ue,x=Ce;f=(x&~(1<<32-Br(x)-1)).toString(32)+f,l=":"+l+"R"+f,f=Sc++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=R0++,l=":"+l+"r"+f.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},jI={readContext:kr,useCallback:Zx,useContext:kr,useEffect:kd,useImperativeHandle:Jx,useInsertionEffect:Hp,useLayoutEffect:Cd,useMemo:eb,useReducer:Ed,useRef:Sa,useState:function(){return Ed(Nu)},useDebugValue:j0,useDeferredValue:function(o){var l=$s();return tb(l,Wr.memoizedState,o)},useTransition:function(){var o=Ed(Nu)[0],l=$s().memoizedState;return[o,l]},useMutableSource:zp,useSyncExternalStore:rf,useId:nb,unstable_isNewReconciler:!1},LI={readContext:kr,useCallback:Zx,useContext:kr,useEffect:kd,useImperativeHandle:Jx,useInsertionEffect:Hp,useLayoutEffect:Cd,useMemo:eb,useReducer:nl,useRef:Sa,useState:function(){return nl(Nu)},useDebugValue:j0,useDeferredValue:function(o){var l=$s();return Wr===null?l.memoizedState=o:tb(l,Wr.memoizedState,o)},useTransition:function(){var o=nl(Nu)[0],l=$s().memoizedState;return[o,l]},useMutableSource:zp,useSyncExternalStore:rf,useId:nb,unstable_isNewReconciler:!1};function Ta(o,l){if(o&&o.defaultProps){l=we({},l),o=o.defaultProps;for(var f in o)l[f]===void 0&&(l[f]=o[f]);return l}return l}function L0(o,l,f,x){l=o.memoizedState,f=f(x,l),f=f==null?l:we({},l,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Gp={isMounted:function(o){return(o=o._reactInternals)?Rr(o)===o:!1},enqueueSetState:function(o,l,f){o=o._reactInternals;var x=Gs(),N=Pc(o),R=Dr(x,N);R.payload=l,f!=null&&(R.callback=f),l=Mr(o,R,N),l!==null&&(Ia(l,o,N,x),Gi(l,o,N))},enqueueReplaceState:function(o,l,f){o=o._reactInternals;var x=Gs(),N=Pc(o),R=Dr(x,N);R.tag=1,R.payload=l,f!=null&&(R.callback=f),l=Mr(o,R,N),l!==null&&(Ia(l,o,N,x),Gi(l,o,N))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var f=Gs(),x=Pc(o),N=Dr(f,x);N.tag=2,l!=null&&(N.callback=l),l=Mr(o,N,x),l!==null&&(Ia(l,o,x,f),Gi(l,o,x))}};function ob(o,l,f,x,N,R,G){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,R,G):l.prototype&&l.prototype.isPureReactComponent?!xs(f,x)||!xs(N,R):!0}function ab(o,l,f){var x=!1,N=el,R=l.contextType;return typeof R=="object"&&R!==null?R=kr(R):(N=As(l)?Ul:Li.current,x=l.contextTypes,R=(x=x!=null)?Ac(o,N):el),l=new l(f,R),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Gp,o.stateNode=l,l._reactInternals=o,x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=N,o.__reactInternalMemoizedMaskedChildContext=R),l}function lb(o,l,f,x){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,x),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,x),l.state!==o&&Gp.enqueueReplaceState(l,l.state,null)}function D0(o,l,f,x){var N=o.stateNode;N.props=f,N.state=o.memoizedState,N.refs={},Di(o);var R=l.contextType;typeof R=="object"&&R!==null?N.context=kr(R):(R=As(l)?Ul:Li.current,N.context=Ac(o,R)),N.state=o.memoizedState,R=l.getDerivedStateFromProps,typeof R=="function"&&(L0(o,l,R,f),N.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(l=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),l!==N.state&&Gp.enqueueReplaceState(N,N.state,null),Ki(o,f,N,x),N.state=o.memoizedState),typeof N.componentDidMount=="function"&&(o.flags|=4194308)}function Pd(o,l){try{var f="",x=l;do f+=he(x),x=x.return;while(x);var N=f}catch(R){N=`
Error generating stack: `+R.message+`
`+R.stack}return{value:o,source:l,stack:N,digest:null}}function M0(o,l,f){return{value:o,source:null,stack:f??null,digest:l??null}}function O0(o,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var DI=typeof WeakMap=="function"?WeakMap:Map;function cb(o,l,f){f=Dr(-1,f),f.tag=3,f.payload={element:null};var x=l.value;return f.callback=function(){em||(em=!0,J0=x),O0(o,l)},f}function ub(o,l,f){f=Dr(-1,f),f.tag=3;var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var N=l.value;f.payload=function(){return x(N)},f.callback=function(){O0(o,l)}}var R=o.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(f.callback=function(){O0(o,l),typeof x!="function"&&(Cc===null?Cc=new Set([this]):Cc.add(this));var G=l.stack;this.componentDidCatch(l.value,{componentStack:G!==null?G:""})}),f}function db(o,l,f){var x=o.pingCache;if(x===null){x=o.pingCache=new DI;var N=new Set;x.set(l,N)}else N=x.get(l),N===void 0&&(N=new Set,x.set(l,N));N.has(f)||(N.add(f),o=YI.bind(null,o,l,f),l.then(o,o))}function hb(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function fb(o,l,f,x,N){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=Dr(-1,1),l.tag=2,Mr(f,l,1))),f.lanes|=1),o):(o.flags|=65536,o.lanes=N,o)}var MI=$.ReactCurrentOwner,ao=!1;function Ws(o,l,f,x){l.child=o===null?mr(l,null,f,x):$r(l,o.child,f,x)}function pb(o,l,f,x,N){f=f.render;var R=l.ref;return Tr(l,N),x=Au(o,l,f,x,R,N),f=ea(),o!==null&&!ao?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~N,ql(o,l,N)):(Be&&f&&Ve(l),l.flags|=1,Ws(o,l,x,N),l.child)}function mb(o,l,f,x,N){if(o===null){var R=f.type;return typeof R=="function"&&!sy(R)&&R.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=R,gb(o,l,R,x,N)):(o=om(f.type,null,x,l,l.mode,N),o.ref=l.ref,o.return=l,l.child=o)}if(R=o.child,(o.lanes&N)===0){var G=R.memoizedProps;if(f=f.compare,f=f!==null?f:xs,f(G,x)&&o.ref===l.ref)return ql(o,l,N)}return l.flags|=1,o=jc(R,x),o.ref=l.ref,o.return=l,l.child=o}function gb(o,l,f,x,N){if(o!==null){var R=o.memoizedProps;if(xs(R,x)&&o.ref===l.ref)if(ao=!1,l.pendingProps=x=R,(o.lanes&N)!==0)(o.flags&131072)!==0&&(ao=!0);else return l.lanes=o.lanes,ql(o,l,N)}return F0(o,l,f,x,N)}function yb(o,l,f){var x=l.pendingProps,N=x.children,R=o!==null?o.memoizedState:null;if(x.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gn(jd,Ro),Ro|=f;else{if((f&1073741824)===0)return o=R!==null?R.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Gn(jd,Ro),Ro|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=R!==null?R.baseLanes:f,Gn(jd,Ro),Ro|=x}else R!==null?(x=R.baseLanes|f,l.memoizedState=null):x=f,Gn(jd,Ro),Ro|=x;return Ws(o,l,N,f),l.child}function vb(o,l){var f=l.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function F0(o,l,f,x,N){var R=As(f)?Ul:Li.current;return R=Ac(l,R),Tr(l,N),f=Au(o,l,f,x,R,N),x=ea(),o!==null&&!ao?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~N,ql(o,l,N)):(Be&&x&&Ve(l),l.flags|=1,Ws(o,l,f,N),l.child)}function xb(o,l,f,x,N){if(As(f)){var R=!0;Bl(l)}else R=!1;if(Tr(l,N),l.stateNode===null)Yp(o,l),ab(l,f,x),D0(l,f,x,N),x=!0;else if(o===null){var G=l.stateNode,me=l.memoizedProps;G.props=me;var be=G.context,De=f.contextType;typeof De=="object"&&De!==null?De=kr(De):(De=As(f)?Ul:Li.current,De=Ac(l,De));var Ge=f.getDerivedStateFromProps,Qe=typeof Ge=="function"||typeof G.getSnapshotBeforeUpdate=="function";Qe||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(me!==x||be!==De)&&lb(l,G,x,De),Hr=!1;var We=l.memoizedState;G.state=We,Ki(l,x,G,N),be=l.memoizedState,me!==x||We!==be||_s.current||Hr?(typeof Ge=="function"&&(L0(l,f,Ge,x),be=l.memoizedState),(me=Hr||ob(l,f,me,x,We,be,De))?(Qe||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(l.flags|=4194308)):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=x,l.memoizedState=be),G.props=x,G.state=be,G.context=De,x=me):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),x=!1)}else{G=l.stateNode,Ns(o,l),me=l.memoizedProps,De=l.type===l.elementType?me:Ta(l.type,me),G.props=De,Qe=l.pendingProps,We=G.context,be=f.contextType,typeof be=="object"&&be!==null?be=kr(be):(be=As(f)?Ul:Li.current,be=Ac(l,be));var it=f.getDerivedStateFromProps;(Ge=typeof it=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(me!==Qe||We!==be)&&lb(l,G,x,be),Hr=!1,We=l.memoizedState,G.state=We,Ki(l,x,G,N);var pt=l.memoizedState;me!==Qe||We!==pt||_s.current||Hr?(typeof it=="function"&&(L0(l,f,it,x),pt=l.memoizedState),(De=Hr||ob(l,f,De,x,We,pt,be)||!1)?(Ge||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(x,pt,be),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(x,pt,be)),typeof G.componentDidUpdate=="function"&&(l.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof G.componentDidUpdate!="function"||me===o.memoizedProps&&We===o.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||me===o.memoizedProps&&We===o.memoizedState||(l.flags|=1024),l.memoizedProps=x,l.memoizedState=pt),G.props=x,G.state=pt,G.context=be,x=De):(typeof G.componentDidUpdate!="function"||me===o.memoizedProps&&We===o.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||me===o.memoizedProps&&We===o.memoizedState||(l.flags|=1024),x=!1)}return V0(o,l,f,x,R,N)}function V0(o,l,f,x,N,R){vb(o,l);var G=(l.flags&128)!==0;if(!x&&!G)return N&&Up(l,f,!1),ql(o,l,R);x=l.stateNode,MI.current=l;var me=G&&typeof f.getDerivedStateFromError!="function"?null:x.render();return l.flags|=1,o!==null&&G?(l.child=$r(l,o.child,null,R),l.child=$r(l,null,me,R)):Ws(o,l,me,R),l.memoizedState=x.state,N&&Up(l,f,!0),l.child}function bb(o){var l=o.stateNode;l.pendingContext?Vp(o,l.pendingContext,l.pendingContext!==l.context):l.context&&Vp(o,l.context,!1),Nc(o,l.containerInfo)}function wb(o,l,f,x,N){return at(),rt(N),l.flags|=256,Ws(o,l,f,x),l.child}var U0={dehydrated:null,treeContext:null,retryLane:0};function B0(o){return{baseLanes:o,cachePool:null,transitions:null}}function _b(o,l,f){var x=l.pendingProps,N=sr.current,R=!1,G=(l.flags&128)!==0,me;if((me=G)||(me=o!==null&&o.memoizedState===null?!1:(N&2)!==0),me?(R=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(N|=1),Gn(sr,N&1),o===null)return dt(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(G=x.children,o=x.fallback,R?(x=l.mode,R=l.child,G={mode:"hidden",children:G},(x&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=G):R=am(G,x,0,null),o=Iu(o,x,f,null),R.return=l,o.return=l,R.sibling=o,l.child=R,l.child.memoizedState=B0(f),l.memoizedState=U0,o):z0(l,G));if(N=o.memoizedState,N!==null&&(me=N.dehydrated,me!==null))return OI(o,l,G,x,me,N,f);if(R){R=x.fallback,G=l.mode,N=o.child,me=N.sibling;var be={mode:"hidden",children:x.children};return(G&1)===0&&l.child!==N?(x=l.child,x.childLanes=0,x.pendingProps=be,l.deletions=null):(x=jc(N,be),x.subtreeFlags=N.subtreeFlags&14680064),me!==null?R=jc(me,R):(R=Iu(R,G,f,null),R.flags|=2),R.return=l,x.return=l,x.sibling=R,l.child=x,x=R,R=l.child,G=o.child.memoizedState,G=G===null?B0(f):{baseLanes:G.baseLanes|f,cachePool:null,transitions:G.transitions},R.memoizedState=G,R.childLanes=o.childLanes&~f,l.memoizedState=U0,x}return R=o.child,o=R.sibling,x=jc(R,{mode:"visible",children:x.children}),(l.mode&1)===0&&(x.lanes=f),x.return=l,x.sibling=null,o!==null&&(f=l.deletions,f===null?(l.deletions=[o],l.flags|=16):f.push(o)),l.child=x,l.memoizedState=null,x}function z0(o,l){return l=am({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Kp(o,l,f,x){return x!==null&&rt(x),$r(l,o.child,null,f),o=z0(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function OI(o,l,f,x,N,R,G){if(f)return l.flags&256?(l.flags&=-257,x=M0(Error(n(422))),Kp(o,l,G,x)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(R=x.fallback,N=l.mode,x=am({mode:"visible",children:x.children},N,0,null),R=Iu(R,N,G,null),R.flags|=2,x.return=l,R.return=l,x.sibling=R,l.child=x,(l.mode&1)!==0&&$r(l,o.child,null,G),l.child.memoizedState=B0(G),l.memoizedState=U0,R);if((l.mode&1)===0)return Kp(o,l,G,null);if(N.data==="$!"){if(x=N.nextSibling&&N.nextSibling.dataset,x)var me=x.dgst;return x=me,R=Error(n(419)),x=M0(R,x,void 0),Kp(o,l,G,x)}if(me=(G&o.childLanes)!==0,ao||me){if(x=Yi,x!==null){switch(G&-G){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(x.suspendedLanes|G))!==0?0:N,N!==0&&N!==R.retryLane&&(R.retryLane=N,Jn(o,N),Ia(x,o,N,-1))}return iy(),x=M0(Error(n(421))),Kp(o,l,G,x)}return N.data==="$?"?(l.flags|=128,l.child=o.child,l=QI.bind(null,o),N._reactRetry=l,null):(o=R.treeContext,Fe=rs(N.nextSibling),Oe=l,Be=!0,qe=null,o!==null&&(ie[ce++]=Ce,ie[ce++]=ue,ie[ce++]=xe,Ce=o.id,ue=o.overflow,xe=l),l=z0(l,x.children),l.flags|=4096,l)}function Ab(o,l,f){o.lanes|=l;var x=o.alternate;x!==null&&(x.lanes|=l),Rn(o.return,l,f)}function q0(o,l,f,x,N){var R=o.memoizedState;R===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:N}:(R.isBackwards=l,R.rendering=null,R.renderingStartTime=0,R.last=x,R.tail=f,R.tailMode=N)}function Nb(o,l,f){var x=l.pendingProps,N=x.revealOrder,R=x.tail;if(Ws(o,l,x.children,f),x=sr.current,(x&2)!==0)x=x&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Ab(o,f,l);else if(o.tag===19)Ab(o,f,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}if(Gn(sr,x),(l.mode&1)===0)l.memoizedState=null;else switch(N){case"forwards":for(f=l.child,N=null;f!==null;)o=f.alternate,o!==null&&Co(o)===null&&(N=f),f=f.sibling;f=N,f===null?(N=l.child,l.child=null):(N=f.sibling,f.sibling=null),q0(l,!1,N,f,R);break;case"backwards":for(f=null,N=l.child,l.child=null;N!==null;){if(o=N.alternate,o!==null&&Co(o)===null){l.child=N;break}o=N.sibling,N.sibling=f,f=N,N=o}q0(l,!0,f,null,R);break;case"together":q0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Yp(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function ql(o,l,f){if(o!==null&&(l.dependencies=o.dependencies),Su|=l.lanes,(f&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,f=jc(o,o.pendingProps),l.child=f,f.return=l;o.sibling!==null;)o=o.sibling,f=f.sibling=jc(o,o.pendingProps),f.return=l;f.sibling=null}return l.child}function FI(o,l,f){switch(l.tag){case 3:bb(l),at();break;case 5:Bp(l);break;case 1:As(l.type)&&Bl(l);break;case 4:Nc(l,l.stateNode.containerInfo);break;case 10:var x=l.type._context,N=l.memoizedProps.value;Gn(ni,x._currentValue),x._currentValue=N;break;case 13:if(x=l.memoizedState,x!==null)return x.dehydrated!==null?(Gn(sr,sr.current&1),l.flags|=128,null):(f&l.child.childLanes)!==0?_b(o,l,f):(Gn(sr,sr.current&1),o=ql(o,l,f),o!==null?o.sibling:null);Gn(sr,sr.current&1);break;case 19:if(x=(f&l.childLanes)!==0,(o.flags&128)!==0){if(x)return Nb(o,l,f);l.flags|=128}if(N=l.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Gn(sr,sr.current),x)break;return null;case 22:case 23:return l.lanes=0,yb(o,l,f)}return ql(o,l,f)}var Eb,$0,Sb,Tb;Eb=function(o,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},$0=function(){},Sb=function(o,l,f,x){var N=o.memoizedProps;if(N!==x){o=l.stateNode,Na(vi.current);var R=null;switch(f){case"input":N=Me(o,N),x=Me(o,x),R=[];break;case"select":N=we({},N,{value:void 0}),x=we({},x,{value:void 0}),R=[];break;case"textarea":N=$t(o,N),x=$t(o,x),R=[];break;default:typeof N.onClick!="function"&&typeof x.onClick=="function"&&(o.onclick=bc)}kn(f,x);var G;f=null;for(De in N)if(!x.hasOwnProperty(De)&&N.hasOwnProperty(De)&&N[De]!=null)if(De==="style"){var me=N[De];for(G in me)me.hasOwnProperty(G)&&(f||(f={}),f[G]="")}else De!=="dangerouslySetInnerHTML"&&De!=="children"&&De!=="suppressContentEditableWarning"&&De!=="suppressHydrationWarning"&&De!=="autoFocus"&&(i.hasOwnProperty(De)?R||(R=[]):(R=R||[]).push(De,null));for(De in x){var be=x[De];if(me=N?.[De],x.hasOwnProperty(De)&&be!==me&&(be!=null||me!=null))if(De==="style")if(me){for(G in me)!me.hasOwnProperty(G)||be&&be.hasOwnProperty(G)||(f||(f={}),f[G]="");for(G in be)be.hasOwnProperty(G)&&me[G]!==be[G]&&(f||(f={}),f[G]=be[G])}else f||(R||(R=[]),R.push(De,f)),f=be;else De==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,me=me?me.__html:void 0,be!=null&&me!==be&&(R=R||[]).push(De,be)):De==="children"?typeof be!="string"&&typeof be!="number"||(R=R||[]).push(De,""+be):De!=="suppressContentEditableWarning"&&De!=="suppressHydrationWarning"&&(i.hasOwnProperty(De)?(be!=null&&De==="onScroll"&&Qn("scroll",o),R||me===be||(R=[])):(R=R||[]).push(De,be))}f&&(R=R||[]).push("style",f);var De=R;(l.updateQueue=De)&&(l.flags|=4)}},Tb=function(o,l,f,x){f!==x&&(l.flags|=4)};function of(o,l){if(!Be)switch(o.tailMode){case"hidden":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function Es(o){var l=o.alternate!==null&&o.alternate.child===o.child,f=0,x=0;if(l)for(var N=o.child;N!==null;)f|=N.lanes|N.childLanes,x|=N.subtreeFlags&14680064,x|=N.flags&14680064,N.return=o,N=N.sibling;else for(N=o.child;N!==null;)f|=N.lanes|N.childLanes,x|=N.subtreeFlags,x|=N.flags,N.return=o,N=N.sibling;return o.subtreeFlags|=x,o.childLanes=f,l}function VI(o,l,f){var x=l.pendingProps;switch(Pe(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Es(l),null;case 1:return As(l.type)&&wd(),Es(l),null;case 3:return x=l.stateNode,Jo(),zn(_s),zn(Li),nf(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(Sr(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,qe!==null&&(ty(qe),qe=null))),$0(o,l),Es(l),null;case 5:ef(l);var N=Na(tl.current);if(f=l.type,o!==null&&l.stateNode!=null)Sb(o,l,f,x,N),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!x){if(l.stateNode===null)throw Error(n(166));return Es(l),null}if(o=Na(vi.current),Sr(l)){x=l.stateNode,f=l.type;var R=l.memoizedProps;switch(x[Xo]=l,x[wc]=R,o=(l.mode&1)!==0,f){case"dialog":Qn("cancel",x),Qn("close",x);break;case"iframe":case"object":case"embed":Qn("load",x);break;case"video":case"audio":for(N=0;N<Ja.length;N++)Qn(Ja[N],x);break;case"source":Qn("error",x);break;case"img":case"image":case"link":Qn("error",x),Qn("load",x);break;case"details":Qn("toggle",x);break;case"input":fe(x,R),Qn("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!R.multiple},Qn("invalid",x);break;case"textarea":At(x,R),Qn("invalid",x)}kn(f,R),N=null;for(var G in R)if(R.hasOwnProperty(G)){var me=R[G];G==="children"?typeof me=="string"?x.textContent!==me&&(R.suppressHydrationWarning!==!0&&bd(x.textContent,me,o),N=["children",me]):typeof me=="number"&&x.textContent!==""+me&&(R.suppressHydrationWarning!==!0&&bd(x.textContent,me,o),N=["children",""+me]):i.hasOwnProperty(G)&&me!=null&&G==="onScroll"&&Qn("scroll",x)}switch(f){case"input":ze(x),bt(x,R,!0);break;case"textarea":ze(x),Bt(x);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(x.onclick=bc)}x=N,l.updateQueue=x,x!==null&&(l.flags|=4)}else{G=N.nodeType===9?N:N.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=vt(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=G.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof x.is=="string"?o=G.createElement(f,{is:x.is}):(o=G.createElement(f),f==="select"&&(G=o,x.multiple?G.multiple=!0:x.size&&(G.size=x.size))):o=G.createElementNS(o,f),o[Xo]=l,o[wc]=x,Eb(o,l,!1,!1),l.stateNode=o;e:{switch(G=Ct(f,x),f){case"dialog":Qn("cancel",o),Qn("close",o),N=x;break;case"iframe":case"object":case"embed":Qn("load",o),N=x;break;case"video":case"audio":for(N=0;N<Ja.length;N++)Qn(Ja[N],o);N=x;break;case"source":Qn("error",o),N=x;break;case"img":case"image":case"link":Qn("error",o),Qn("load",o),N=x;break;case"details":Qn("toggle",o),N=x;break;case"input":fe(o,x),N=Me(o,x),Qn("invalid",o);break;case"option":N=x;break;case"select":o._wrapperState={wasMultiple:!!x.multiple},N=we({},x,{value:void 0}),Qn("invalid",o);break;case"textarea":At(o,x),N=$t(o,x),Qn("invalid",o);break;default:N=x}kn(f,N),me=N;for(R in me)if(me.hasOwnProperty(R)){var be=me[R];R==="style"?ht(o,be):R==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,be!=null&&Nt(o,be)):R==="children"?typeof be=="string"?(f!=="textarea"||be!=="")&&kt(o,be):typeof be=="number"&&kt(o,""+be):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(i.hasOwnProperty(R)?be!=null&&R==="onScroll"&&Qn("scroll",o):be!=null&&z(o,R,be,G))}switch(f){case"input":ze(o),bt(o,x,!1);break;case"textarea":ze(o),Bt(o);break;case"option":x.value!=null&&o.setAttribute("value",""+Ee(x.value));break;case"select":o.multiple=!!x.multiple,R=x.value,R!=null?nt(o,!!x.multiple,R,!1):x.defaultValue!=null&&nt(o,!!x.multiple,x.defaultValue,!0);break;default:typeof N.onClick=="function"&&(o.onclick=bc)}switch(f){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Es(l),null;case 6:if(o&&l.stateNode!=null)Tb(o,l,o.memoizedProps,x);else{if(typeof x!="string"&&l.stateNode===null)throw Error(n(166));if(f=Na(tl.current),Na(vi.current),Sr(l)){if(x=l.stateNode,f=l.memoizedProps,x[Xo]=l,(R=x.nodeValue!==f)&&(o=Oe,o!==null))switch(o.tag){case 3:bd(x.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&bd(x.nodeValue,f,(o.mode&1)!==0)}R&&(l.flags|=4)}else x=(f.nodeType===9?f:f.ownerDocument).createTextNode(x),x[Xo]=l,l.stateNode=x}return Es(l),null;case 13:if(zn(sr),x=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Be&&Fe!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Zt(),at(),l.flags|=98560,R=!1;else if(R=Sr(l),x!==null&&x.dehydrated!==null){if(o===null){if(!R)throw Error(n(318));if(R=l.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(n(317));R[Xo]=l}else at(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Es(l),R=!1}else qe!==null&&(ty(qe),qe=null),R=!0;if(!R)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=f,l):(x=x!==null,x!==(o!==null&&o.memoizedState!==null)&&x&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(sr.current&1)!==0?Mi===0&&(Mi=3):iy())),l.updateQueue!==null&&(l.flags|=4),Es(l),null);case 4:return Jo(),$0(o,l),o===null&&Ml(l.stateNode.containerInfo),Es(l),null;case 10:return cr(l.type._context),Es(l),null;case 17:return As(l.type)&&wd(),Es(l),null;case 19:if(zn(sr),R=l.memoizedState,R===null)return Es(l),null;if(x=(l.flags&128)!==0,G=R.rendering,G===null)if(x)of(R,!1);else{if(Mi!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(G=Co(o),G!==null){for(l.flags|=128,of(R,!1),x=G.updateQueue,x!==null&&(l.updateQueue=x,l.flags|=4),l.subtreeFlags=0,x=f,f=l.child;f!==null;)R=f,o=x,R.flags&=14680066,G=R.alternate,G===null?(R.childLanes=0,R.lanes=o,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=G.childLanes,R.lanes=G.lanes,R.child=G.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=G.memoizedProps,R.memoizedState=G.memoizedState,R.updateQueue=G.updateQueue,R.type=G.type,o=G.dependencies,R.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return Gn(sr,sr.current&1|2),l.child}o=o.sibling}R.tail!==null&&Mn()>Ld&&(l.flags|=128,x=!0,of(R,!1),l.lanes=4194304)}else{if(!x)if(o=Co(G),o!==null){if(l.flags|=128,x=!0,f=o.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),of(R,!0),R.tail===null&&R.tailMode==="hidden"&&!G.alternate&&!Be)return Es(l),null}else 2*Mn()-R.renderingStartTime>Ld&&f!==1073741824&&(l.flags|=128,x=!0,of(R,!1),l.lanes=4194304);R.isBackwards?(G.sibling=l.child,l.child=G):(f=R.last,f!==null?f.sibling=G:l.child=G,R.last=G)}return R.tail!==null?(l=R.tail,R.rendering=l,R.tail=l.sibling,R.renderingStartTime=Mn(),l.sibling=null,f=sr.current,Gn(sr,x?f&1|2:f&1),l):(Es(l),null);case 22:case 23:return ry(),x=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==x&&(l.flags|=8192),x&&(l.mode&1)!==0?(Ro&1073741824)!==0&&(Es(l),l.subtreeFlags&6&&(l.flags|=8192)):Es(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function UI(o,l){switch(Pe(l),l.tag){case 1:return As(l.type)&&wd(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Jo(),zn(_s),zn(Li),nf(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return ef(l),null;case 13:if(zn(sr),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));at()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return zn(sr),null;case 4:return Jo(),null;case 10:return cr(l.type._context),null;case 22:case 23:return ry(),null;case 24:return null;default:return null}}var Qp=!1,Ss=!1,BI=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Rd(o,l){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(x){Gr(o,l,x)}else f.current=null}function H0(o,l,f){try{f()}catch(x){Gr(o,l,x)}}var kb=!1;function zI(o,l){if(bu=$o,o=qr(),So(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var N=x.anchorOffset,R=x.focusNode;x=x.focusOffset;try{f.nodeType,R.nodeType}catch{f=null;break e}var G=0,me=-1,be=-1,De=0,Ge=0,Qe=o,We=null;t:for(;;){for(var it;Qe!==f||N!==0&&Qe.nodeType!==3||(me=G+N),Qe!==R||x!==0&&Qe.nodeType!==3||(be=G+x),Qe.nodeType===3&&(G+=Qe.nodeValue.length),(it=Qe.firstChild)!==null;)We=Qe,Qe=it;for(;;){if(Qe===o)break t;if(We===f&&++De===N&&(me=G),We===R&&++Ge===x&&(be=G),(it=Qe.nextSibling)!==null)break;Qe=We,We=Qe.parentNode}Qe=it}f=me===-1||be===-1?null:{start:me,end:be}}else f=null}f=f||{start:0,end:0}}else f=null;for(Fl={focusedElem:o,selectionRange:f},$o=!1,ut=l;ut!==null;)if(l=ut,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,ut=o;else for(;ut!==null;){l=ut;try{var pt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var wt=pt.memoizedProps,ii=pt.memoizedState,Ie=l.stateNode,Ae=Ie.getSnapshotBeforeUpdate(l.elementType===l.type?wt:Ta(l.type,wt),ii);Ie.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Re=l.stateNode.containerInfo;Re.nodeType===1?Re.textContent="":Re.nodeType===9&&Re.documentElement&&Re.removeChild(Re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ze){Gr(l,l.return,Ze)}if(o=l.sibling,o!==null){o.return=l.return,ut=o;break}ut=l.return}return pt=kb,kb=!1,pt}function af(o,l,f){var x=l.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var N=x=x.next;do{if((N.tag&o)===o){var R=N.destroy;N.destroy=void 0,R!==void 0&&H0(l,f,R)}N=N.next}while(N!==x)}}function Xp(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&o)===o){var x=f.create;f.destroy=x()}f=f.next}while(f!==l)}}function W0(o){var l=o.ref;if(l!==null){var f=o.stateNode;switch(o.tag){case 5:o=f;break;default:o=f}typeof l=="function"?l(o):l.current=o}}function Cb(o){var l=o.alternate;l!==null&&(o.alternate=null,Cb(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Xo],delete l[wc],delete l[ws],delete l[I0],delete l[P0])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Ib(o){return o.tag===5||o.tag===3||o.tag===4}function Pb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ib(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function G0(o,l,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(o,l):f.insertBefore(o,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(o,f)):(l=f,l.appendChild(o)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=bc));else if(x!==4&&(o=o.child,o!==null))for(G0(o,l,f),o=o.sibling;o!==null;)G0(o,l,f),o=o.sibling}function K0(o,l,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,l?f.insertBefore(o,l):f.appendChild(o);else if(x!==4&&(o=o.child,o!==null))for(K0(o,l,f),o=o.sibling;o!==null;)K0(o,l,f),o=o.sibling}var is=null,ka=!1;function kc(o,l,f){for(f=f.child;f!==null;)Rb(o,l,f),f=f.sibling}function Rb(o,l,f){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(Bo,f)}catch{}switch(f.tag){case 5:Ss||Rd(f,l);case 6:var x=is,N=ka;is=null,kc(o,l,f),is=x,ka=N,is!==null&&(ka?(o=is,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):is.removeChild(f.stateNode));break;case 18:is!==null&&(ka?(o=is,f=f.stateNode,o.nodeType===8?Xh(o.parentNode,f):o.nodeType===1&&Xh(o,f),qi(o)):Xh(is,f.stateNode));break;case 4:x=is,N=ka,is=f.stateNode.containerInfo,ka=!0,kc(o,l,f),is=x,ka=N;break;case 0:case 11:case 14:case 15:if(!Ss&&(x=f.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){N=x=x.next;do{var R=N,G=R.destroy;R=R.tag,G!==void 0&&((R&2)!==0||(R&4)!==0)&&H0(f,l,G),N=N.next}while(N!==x)}kc(o,l,f);break;case 1:if(!Ss&&(Rd(f,l),x=f.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=f.memoizedProps,x.state=f.memoizedState,x.componentWillUnmount()}catch(me){Gr(f,l,me)}kc(o,l,f);break;case 21:kc(o,l,f);break;case 22:f.mode&1?(Ss=(x=Ss)||f.memoizedState!==null,kc(o,l,f),Ss=x):kc(o,l,f);break;default:kc(o,l,f)}}function jb(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new BI),l.forEach(function(x){var N=XI.bind(null,o,x);f.has(x)||(f.add(x),x.then(N,N))})}}function Ca(o,l){var f=l.deletions;if(f!==null)for(var x=0;x<f.length;x++){var N=f[x];try{var R=o,G=l,me=G;e:for(;me!==null;){switch(me.tag){case 5:is=me.stateNode,ka=!1;break e;case 3:is=me.stateNode.containerInfo,ka=!0;break e;case 4:is=me.stateNode.containerInfo,ka=!0;break e}me=me.return}if(is===null)throw Error(n(160));Rb(R,G,N),is=null,ka=!1;var be=N.alternate;be!==null&&(be.return=null),N.return=null}catch(De){Gr(N,l,De)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Lb(l,o),l=l.sibling}function Lb(o,l){var f=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ca(l,o),rl(o),x&4){try{af(3,o,o.return),Xp(3,o)}catch(wt){Gr(o,o.return,wt)}try{af(5,o,o.return)}catch(wt){Gr(o,o.return,wt)}}break;case 1:Ca(l,o),rl(o),x&512&&f!==null&&Rd(f,f.return);break;case 5:if(Ca(l,o),rl(o),x&512&&f!==null&&Rd(f,f.return),o.flags&32){var N=o.stateNode;try{kt(N,"")}catch(wt){Gr(o,o.return,wt)}}if(x&4&&(N=o.stateNode,N!=null)){var R=o.memoizedProps,G=f!==null?f.memoizedProps:R,me=o.type,be=o.updateQueue;if(o.updateQueue=null,be!==null)try{me==="input"&&R.type==="radio"&&R.name!=null&&Xt(N,R),Ct(me,G);var De=Ct(me,R);for(G=0;G<be.length;G+=2){var Ge=be[G],Qe=be[G+1];Ge==="style"?ht(N,Qe):Ge==="dangerouslySetInnerHTML"?Nt(N,Qe):Ge==="children"?kt(N,Qe):z(N,Ge,Qe,De)}switch(me){case"input":Pt(N,R);break;case"textarea":fn(N,R);break;case"select":var We=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!R.multiple;var it=R.value;it!=null?nt(N,!!R.multiple,it,!1):We!==!!R.multiple&&(R.defaultValue!=null?nt(N,!!R.multiple,R.defaultValue,!0):nt(N,!!R.multiple,R.multiple?[]:"",!1))}N[wc]=R}catch(wt){Gr(o,o.return,wt)}}break;case 6:if(Ca(l,o),rl(o),x&4){if(o.stateNode===null)throw Error(n(162));N=o.stateNode,R=o.memoizedProps;try{N.nodeValue=R}catch(wt){Gr(o,o.return,wt)}}break;case 3:if(Ca(l,o),rl(o),x&4&&f!==null&&f.memoizedState.isDehydrated)try{qi(l.containerInfo)}catch(wt){Gr(o,o.return,wt)}break;case 4:Ca(l,o),rl(o);break;case 13:Ca(l,o),rl(o),N=o.child,N.flags&8192&&(R=N.memoizedState!==null,N.stateNode.isHidden=R,!R||N.alternate!==null&&N.alternate.memoizedState!==null||(X0=Mn())),x&4&&jb(o);break;case 22:if(Ge=f!==null&&f.memoizedState!==null,o.mode&1?(Ss=(De=Ss)||Ge,Ca(l,o),Ss=De):Ca(l,o),rl(o),x&8192){if(De=o.memoizedState!==null,(o.stateNode.isHidden=De)&&!Ge&&(o.mode&1)!==0)for(ut=o,Ge=o.child;Ge!==null;){for(Qe=ut=Ge;ut!==null;){switch(We=ut,it=We.child,We.tag){case 0:case 11:case 14:case 15:af(4,We,We.return);break;case 1:Rd(We,We.return);var pt=We.stateNode;if(typeof pt.componentWillUnmount=="function"){x=We,f=We.return;try{l=x,pt.props=l.memoizedProps,pt.state=l.memoizedState,pt.componentWillUnmount()}catch(wt){Gr(x,f,wt)}}break;case 5:Rd(We,We.return);break;case 22:if(We.memoizedState!==null){Ob(Qe);continue}}it!==null?(it.return=We,ut=it):Ob(Qe)}Ge=Ge.sibling}e:for(Ge=null,Qe=o;;){if(Qe.tag===5){if(Ge===null){Ge=Qe;try{N=Qe.stateNode,De?(R=N.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(me=Qe.stateNode,be=Qe.memoizedProps.style,G=be!=null&&be.hasOwnProperty("display")?be.display:null,me.style.display=vn("display",G))}catch(wt){Gr(o,o.return,wt)}}}else if(Qe.tag===6){if(Ge===null)try{Qe.stateNode.nodeValue=De?"":Qe.memoizedProps}catch(wt){Gr(o,o.return,wt)}}else if((Qe.tag!==22&&Qe.tag!==23||Qe.memoizedState===null||Qe===o)&&Qe.child!==null){Qe.child.return=Qe,Qe=Qe.child;continue}if(Qe===o)break e;for(;Qe.sibling===null;){if(Qe.return===null||Qe.return===o)break e;Ge===Qe&&(Ge=null),Qe=Qe.return}Ge===Qe&&(Ge=null),Qe.sibling.return=Qe.return,Qe=Qe.sibling}}break;case 19:Ca(l,o),rl(o),x&4&&jb(o);break;case 21:break;default:Ca(l,o),rl(o)}}function rl(o){var l=o.flags;if(l&2){try{e:{for(var f=o.return;f!==null;){if(Ib(f)){var x=f;break e}f=f.return}throw Error(n(160))}switch(x.tag){case 5:var N=x.stateNode;x.flags&32&&(kt(N,""),x.flags&=-33);var R=Pb(o);K0(o,R,N);break;case 3:case 4:var G=x.stateNode.containerInfo,me=Pb(o);G0(o,me,G);break;default:throw Error(n(161))}}catch(be){Gr(o,o.return,be)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function qI(o,l,f){ut=o,Db(o)}function Db(o,l,f){for(var x=(o.mode&1)!==0;ut!==null;){var N=ut,R=N.child;if(N.tag===22&&x){var G=N.memoizedState!==null||Qp;if(!G){var me=N.alternate,be=me!==null&&me.memoizedState!==null||Ss;me=Qp;var De=Ss;if(Qp=G,(Ss=be)&&!De)for(ut=N;ut!==null;)G=ut,be=G.child,G.tag===22&&G.memoizedState!==null?Fb(N):be!==null?(be.return=G,ut=be):Fb(N);for(;R!==null;)ut=R,Db(R),R=R.sibling;ut=N,Qp=me,Ss=De}Mb(o)}else(N.subtreeFlags&8772)!==0&&R!==null?(R.return=N,ut=R):Mb(o)}}function Mb(o){for(;ut!==null;){var l=ut;if((l.flags&8772)!==0){var f=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ss||Xp(5,l);break;case 1:var x=l.stateNode;if(l.flags&4&&!Ss)if(f===null)x.componentDidMount();else{var N=l.elementType===l.type?f.memoizedProps:Ta(l.type,f.memoizedProps);x.componentDidUpdate(N,f.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var R=l.updateQueue;R!==null&&oo(l,R,x);break;case 3:var G=l.updateQueue;if(G!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}oo(l,G,f)}break;case 5:var me=l.stateNode;if(f===null&&l.flags&4){f=me;var be=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":be.autoFocus&&f.focus();break;case"img":be.src&&(f.src=be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var De=l.alternate;if(De!==null){var Ge=De.memoizedState;if(Ge!==null){var Qe=Ge.dehydrated;Qe!==null&&qi(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ss||l.flags&512&&W0(l)}catch(We){Gr(l,l.return,We)}}if(l===o){ut=null;break}if(f=l.sibling,f!==null){f.return=l.return,ut=f;break}ut=l.return}}function Ob(o){for(;ut!==null;){var l=ut;if(l===o){ut=null;break}var f=l.sibling;if(f!==null){f.return=l.return,ut=f;break}ut=l.return}}function Fb(o){for(;ut!==null;){var l=ut;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{Xp(4,l)}catch(be){Gr(l,f,be)}break;case 1:var x=l.stateNode;if(typeof x.componentDidMount=="function"){var N=l.return;try{x.componentDidMount()}catch(be){Gr(l,N,be)}}var R=l.return;try{W0(l)}catch(be){Gr(l,R,be)}break;case 5:var G=l.return;try{W0(l)}catch(be){Gr(l,G,be)}}}catch(be){Gr(l,l.return,be)}if(l===o){ut=null;break}var me=l.sibling;if(me!==null){me.return=l.return,ut=me;break}ut=l.return}}var $I=Math.ceil,Jp=$.ReactCurrentDispatcher,Y0=$.ReactCurrentOwner,ta=$.ReactCurrentBatchConfig,jn=0,Yi=null,xi=null,ss=0,Ro=0,jd=To(0),Mi=0,lf=null,Su=0,Zp=0,Q0=0,cf=null,lo=null,X0=0,Ld=1/0,$l=null,em=!1,J0=null,Cc=null,tm=!1,Ic=null,nm=0,uf=0,Z0=null,rm=-1,im=0;function Gs(){return(jn&6)!==0?Mn():rm!==-1?rm:rm=Mn()}function Pc(o){return(o.mode&1)===0?1:(jn&2)!==0&&ss!==0?ss&-ss:Lr.transition!==null?(im===0&&(im=ma()),im):(o=cn,o!==0||(o=window.event,o=o===void 0?16:Wo(o.type)),o)}function Ia(o,l,f,x){if(50<uf)throw uf=0,Z0=null,Error(n(185));qo(o,f,x),((jn&2)===0||o!==Yi)&&(o===Yi&&((jn&2)===0&&(Zp|=f),Mi===4&&Rc(o,ss)),co(o,x),f===1&&jn===0&&(l.mode&1)===0&&(Ld=Mn()+500,_u&&M()))}function co(o,l){var f=o.callbackNode;Un(o,l);var x=Ni(o,o===Yi?ss:0);if(x===0)f!==null&&Vo(f),o.callbackNode=null,o.callbackPriority=0;else if(l=x&-x,o.callbackPriority!==l){if(f!=null&&Vo(f),l===1)o.tag===0?k(Ub.bind(null,o)):b(Ub.bind(null,o)),k0(function(){(jn&6)===0&&M()}),f=null;else{switch(Zi(x)){case 1:f=Uo;break;case 4:f=ei;break;case 16:f=Bi;break;case 536870912:f=Ba;break;default:f=Bi}f=Kb(f,Vb.bind(null,o))}o.callbackPriority=l,o.callbackNode=f}}function Vb(o,l){if(rm=-1,im=0,(jn&6)!==0)throw Error(n(327));var f=o.callbackNode;if(Dd()&&o.callbackNode!==f)return null;var x=Ni(o,o===Yi?ss:0);if(x===0)return null;if((x&30)!==0||(x&o.expiredLanes)!==0||l)l=sm(o,x);else{l=x;var N=jn;jn|=2;var R=zb();(Yi!==o||ss!==l)&&($l=null,Ld=Mn()+500,ku(o,l));do try{GI();break}catch(me){Bb(o,me)}while(!0);Pn(),Jp.current=R,jn=N,xi!==null?l=0:(Yi=null,ss=0,l=Mi)}if(l!==0){if(l===2&&(N=Ei(o),N!==0&&(x=N,l=ey(o,N))),l===1)throw f=lf,ku(o,0),Rc(o,x),co(o,Mn()),f;if(l===6)Rc(o,x);else{if(N=o.current.alternate,(x&30)===0&&!HI(N)&&(l=sm(o,x),l===2&&(R=Ei(o),R!==0&&(x=R,l=ey(o,R))),l===1))throw f=lf,ku(o,0),Rc(o,x),co(o,Mn()),f;switch(o.finishedWork=N,o.finishedLanes=x,l){case 0:case 1:throw Error(n(345));case 2:Cu(o,lo,$l);break;case 3:if(Rc(o,x),(x&130023424)===x&&(l=X0+500-Mn(),10<l)){if(Ni(o,0)!==0)break;if(N=o.suspendedLanes,(N&x)!==x){Gs(),o.pingedLanes|=o.suspendedLanes&N;break}o.timeoutHandle=Qh(Cu.bind(null,o,lo,$l),l);break}Cu(o,lo,$l);break;case 4:if(Rc(o,x),(x&4194240)===x)break;for(l=o.eventTimes,N=-1;0<x;){var G=31-Br(x);R=1<<G,G=l[G],G>N&&(N=G),x&=~R}if(x=N,x=Mn()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*$I(x/1960))-x,10<x){o.timeoutHandle=Qh(Cu.bind(null,o,lo,$l),x);break}Cu(o,lo,$l);break;case 5:Cu(o,lo,$l);break;default:throw Error(n(329))}}}return co(o,Mn()),o.callbackNode===f?Vb.bind(null,o):null}function ey(o,l){var f=cf;return o.current.memoizedState.isDehydrated&&(ku(o,l).flags|=256),o=sm(o,l),o!==2&&(l=lo,lo=f,l!==null&&ty(l)),o}function ty(o){lo===null?lo=o:lo.push.apply(lo,o)}function HI(o){for(var l=o;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var x=0;x<f.length;x++){var N=f[x],R=N.getSnapshot;N=N.value;try{if(!Nr(R(),N))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Rc(o,l){for(l&=~Q0,l&=~Zp,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var f=31-Br(l),x=1<<f;o[f]=-1,l&=~x}}function Ub(o){if((jn&6)!==0)throw Error(n(327));Dd();var l=Ni(o,0);if((l&1)===0)return co(o,Mn()),null;var f=sm(o,l);if(o.tag!==0&&f===2){var x=Ei(o);x!==0&&(l=x,f=ey(o,x))}if(f===1)throw f=lf,ku(o,0),Rc(o,l),co(o,Mn()),f;if(f===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Cu(o,lo,$l),co(o,Mn()),null}function ny(o,l){var f=jn;jn|=1;try{return o(l)}finally{jn=f,jn===0&&(Ld=Mn()+500,_u&&M())}}function Tu(o){Ic!==null&&Ic.tag===0&&(jn&6)===0&&Dd();var l=jn;jn|=1;var f=ta.transition,x=cn;try{if(ta.transition=null,cn=1,o)return o()}finally{cn=x,ta.transition=f,jn=l,(jn&6)===0&&M()}}function ry(){Ro=jd.current,zn(jd)}function ku(o,l){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,Op(f)),xi!==null)for(f=xi.return;f!==null;){var x=f;switch(Pe(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&wd();break;case 3:Jo(),zn(_s),zn(Li),nf();break;case 5:ef(x);break;case 4:Jo();break;case 13:zn(sr);break;case 19:zn(sr);break;case 10:cr(x.type._context);break;case 22:case 23:ry()}f=f.return}if(Yi=o,xi=o=jc(o.current,null),ss=Ro=l,Mi=0,lf=null,Q0=Zp=Su=0,lo=cf=null,Xn!==null){for(l=0;l<Xn.length;l++)if(f=Xn[l],x=f.interleaved,x!==null){f.interleaved=null;var N=x.next,R=f.pending;if(R!==null){var G=R.next;R.next=N,x.next=G}f.pending=x}Xn=null}return o}function Bb(o,l){do{var f=xi;try{if(Pn(),_d.current=Wp,Ec){for(var x=ur.memoizedState;x!==null;){var N=x.queue;N!==null&&(N.pending=null),x=x.next}Ec=!1}if(Zo=0,Fr=Wr=ur=null,Ea=!1,Sc=0,Y0.current=null,f===null||f.return===null){Mi=1,lf=l,xi=null;break}e:{var R=o,G=f.return,me=f,be=l;if(l=ss,me.flags|=32768,be!==null&&typeof be=="object"&&typeof be.then=="function"){var De=be,Ge=me,Qe=Ge.tag;if((Ge.mode&1)===0&&(Qe===0||Qe===11||Qe===15)){var We=Ge.alternate;We?(Ge.updateQueue=We.updateQueue,Ge.memoizedState=We.memoizedState,Ge.lanes=We.lanes):(Ge.updateQueue=null,Ge.memoizedState=null)}var it=hb(G);if(it!==null){it.flags&=-257,fb(it,G,me,R,l),it.mode&1&&db(R,De,l),l=it,be=De;var pt=l.updateQueue;if(pt===null){var wt=new Set;wt.add(be),l.updateQueue=wt}else pt.add(be);break e}else{if((l&1)===0){db(R,De,l),iy();break e}be=Error(n(426))}}else if(Be&&me.mode&1){var ii=hb(G);if(ii!==null){(ii.flags&65536)===0&&(ii.flags|=256),fb(ii,G,me,R,l),rt(Pd(be,me));break e}}R=be=Pd(be,me),Mi!==4&&(Mi=2),cf===null?cf=[R]:cf.push(R),R=G;do{switch(R.tag){case 3:R.flags|=65536,l&=-l,R.lanes|=l;var Ie=cb(R,be,l);Zn(R,Ie);break e;case 1:me=be;var Ae=R.type,Re=R.stateNode;if((R.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||Re!==null&&typeof Re.componentDidCatch=="function"&&(Cc===null||!Cc.has(Re)))){R.flags|=65536,l&=-l,R.lanes|=l;var Ze=ub(R,me,l);Zn(R,Ze);break e}}R=R.return}while(R!==null)}$b(f)}catch(St){l=St,xi===f&&f!==null&&(xi=f=f.return);continue}break}while(!0)}function zb(){var o=Jp.current;return Jp.current=Wp,o===null?Wp:o}function iy(){(Mi===0||Mi===3||Mi===2)&&(Mi=4),Yi===null||(Su&268435455)===0&&(Zp&268435455)===0||Rc(Yi,ss)}function sm(o,l){var f=jn;jn|=2;var x=zb();(Yi!==o||ss!==l)&&($l=null,ku(o,l));do try{WI();break}catch(N){Bb(o,N)}while(!0);if(Pn(),jn=f,Jp.current=x,xi!==null)throw Error(n(261));return Yi=null,ss=0,Mi}function WI(){for(;xi!==null;)qb(xi)}function GI(){for(;xi!==null&&!ha();)qb(xi)}function qb(o){var l=Gb(o.alternate,o,Ro);o.memoizedProps=o.pendingProps,l===null?$b(o):xi=l,Y0.current=null}function $b(o){var l=o;do{var f=l.alternate;if(o=l.return,(l.flags&32768)===0){if(f=VI(f,l,Ro),f!==null){xi=f;return}}else{if(f=UI(f,l),f!==null){f.flags&=32767,xi=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Mi=6,xi=null;return}}if(l=l.sibling,l!==null){xi=l;return}xi=l=o}while(l!==null);Mi===0&&(Mi=5)}function Cu(o,l,f){var x=cn,N=ta.transition;try{ta.transition=null,cn=1,KI(o,l,f,x)}finally{ta.transition=N,cn=x}return null}function KI(o,l,f,x){do Dd();while(Ic!==null);if((jn&6)!==0)throw Error(n(327));f=o.finishedWork;var N=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var R=f.lanes|f.childLanes;if(mn(o,R),o===Yi&&(xi=Yi=null,ss=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||tm||(tm=!0,Kb(Bi,function(){return Dd(),null})),R=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||R){R=ta.transition,ta.transition=null;var G=cn;cn=1;var me=jn;jn|=4,Y0.current=null,zI(o,f),Lb(f,o),hu(Fl),$o=!!bu,Fl=bu=null,o.current=f,qI(f),uu(),jn=me,cn=G,ta.transition=R}else o.current=f;if(tm&&(tm=!1,Ic=o,nm=N),R=o.pendingLanes,R===0&&(Cc=null),Nl(f.stateNode),co(o,Mn()),l!==null)for(x=o.onRecoverableError,f=0;f<l.length;f++)N=l[f],x(N.value,{componentStack:N.stack,digest:N.digest});if(em)throw em=!1,o=J0,J0=null,o;return(nm&1)!==0&&o.tag!==0&&Dd(),R=o.pendingLanes,(R&1)!==0?o===Z0?uf++:(uf=0,Z0=o):uf=0,M(),null}function Dd(){if(Ic!==null){var o=Zi(nm),l=ta.transition,f=cn;try{if(ta.transition=null,cn=16>o?16:o,Ic===null)var x=!1;else{if(o=Ic,Ic=null,nm=0,(jn&6)!==0)throw Error(n(331));var N=jn;for(jn|=4,ut=o.current;ut!==null;){var R=ut,G=R.child;if((ut.flags&16)!==0){var me=R.deletions;if(me!==null){for(var be=0;be<me.length;be++){var De=me[be];for(ut=De;ut!==null;){var Ge=ut;switch(Ge.tag){case 0:case 11:case 15:af(8,Ge,R)}var Qe=Ge.child;if(Qe!==null)Qe.return=Ge,ut=Qe;else for(;ut!==null;){Ge=ut;var We=Ge.sibling,it=Ge.return;if(Cb(Ge),Ge===De){ut=null;break}if(We!==null){We.return=it,ut=We;break}ut=it}}}var pt=R.alternate;if(pt!==null){var wt=pt.child;if(wt!==null){pt.child=null;do{var ii=wt.sibling;wt.sibling=null,wt=ii}while(wt!==null)}}ut=R}}if((R.subtreeFlags&2064)!==0&&G!==null)G.return=R,ut=G;else e:for(;ut!==null;){if(R=ut,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:af(9,R,R.return)}var Ie=R.sibling;if(Ie!==null){Ie.return=R.return,ut=Ie;break e}ut=R.return}}var Ae=o.current;for(ut=Ae;ut!==null;){G=ut;var Re=G.child;if((G.subtreeFlags&2064)!==0&&Re!==null)Re.return=G,ut=Re;else e:for(G=Ae;ut!==null;){if(me=ut,(me.flags&2048)!==0)try{switch(me.tag){case 0:case 11:case 15:Xp(9,me)}}catch(St){Gr(me,me.return,St)}if(me===G){ut=null;break e}var Ze=me.sibling;if(Ze!==null){Ze.return=me.return,ut=Ze;break e}ut=me.return}}if(jn=N,M(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(Bo,o)}catch{}x=!0}return x}finally{cn=f,ta.transition=l}}return!1}function Hb(o,l,f){l=Pd(f,l),l=cb(o,l,1),o=Mr(o,l,1),l=Gs(),o!==null&&(qo(o,1,l),co(o,l))}function Gr(o,l,f){if(o.tag===3)Hb(o,o,f);else for(;l!==null;){if(l.tag===3){Hb(l,o,f);break}else if(l.tag===1){var x=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Cc===null||!Cc.has(x))){o=Pd(f,o),o=ub(l,o,1),l=Mr(l,o,1),o=Gs(),l!==null&&(qo(l,1,o),co(l,o));break}}l=l.return}}function YI(o,l,f){var x=o.pingCache;x!==null&&x.delete(l),l=Gs(),o.pingedLanes|=o.suspendedLanes&f,Yi===o&&(ss&f)===f&&(Mi===4||Mi===3&&(ss&130023424)===ss&&500>Mn()-X0?ku(o,0):Q0|=f),co(o,l)}function Wb(o,l){l===0&&((o.mode&1)===0?l=1:(l=ps,ps<<=1,(ps&130023424)===0&&(ps=4194304)));var f=Gs();o=Jn(o,l),o!==null&&(qo(o,l,f),co(o,f))}function QI(o){var l=o.memoizedState,f=0;l!==null&&(f=l.retryLane),Wb(o,f)}function XI(o,l){var f=0;switch(o.tag){case 13:var x=o.stateNode,N=o.memoizedState;N!==null&&(f=N.retryLane);break;case 19:x=o.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(l),Wb(o,f)}var Gb;Gb=function(o,l,f){if(o!==null)if(o.memoizedProps!==l.pendingProps||_s.current)ao=!0;else{if((o.lanes&f)===0&&(l.flags&128)===0)return ao=!1,FI(o,l,f);ao=(o.flags&131072)!==0}else ao=!1,Be&&(l.flags&1048576)!==0&&ke(l,te,l.index);switch(l.lanes=0,l.tag){case 2:var x=l.type;Yp(o,l),o=l.pendingProps;var N=Ac(l,Li.current);Tr(l,f),N=Au(null,l,x,o,N,f);var R=ea();return l.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,As(x)?(R=!0,Bl(l)):R=!1,l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Di(l),N.updater=Gp,l.stateNode=N,N._reactInternals=l,D0(l,x,o,f),l=V0(null,l,x,!0,R,f)):(l.tag=0,Be&&R&&Ve(l),Ws(null,l,N,f),l=l.child),l;case 16:x=l.elementType;e:{switch(Yp(o,l),o=l.pendingProps,N=x._init,x=N(x._payload),l.type=x,N=l.tag=ZI(x),o=Ta(x,o),N){case 0:l=F0(null,l,x,o,f);break e;case 1:l=xb(null,l,x,o,f);break e;case 11:l=pb(null,l,x,o,f);break e;case 14:l=mb(null,l,x,Ta(x.type,o),f);break e}throw Error(n(306,x,""))}return l;case 0:return x=l.type,N=l.pendingProps,N=l.elementType===x?N:Ta(x,N),F0(o,l,x,N,f);case 1:return x=l.type,N=l.pendingProps,N=l.elementType===x?N:Ta(x,N),xb(o,l,x,N,f);case 3:e:{if(bb(l),o===null)throw Error(n(387));x=l.pendingProps,R=l.memoizedState,N=R.element,Ns(o,l),Ki(l,x,null,f);var G=l.memoizedState;if(x=G.element,R.isDehydrated)if(R={element:x,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},l.updateQueue.baseState=R,l.memoizedState=R,l.flags&256){N=Pd(Error(n(423)),l),l=wb(o,l,x,f,N);break e}else if(x!==N){N=Pd(Error(n(424)),l),l=wb(o,l,x,f,N);break e}else for(Fe=rs(l.stateNode.containerInfo.firstChild),Oe=l,Be=!0,qe=null,f=mr(l,null,x,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(at(),x===N){l=ql(o,l,f);break e}Ws(o,l,x,f)}l=l.child}return l;case 5:return Bp(l),o===null&&dt(l),x=l.type,N=l.pendingProps,R=o!==null?o.memoizedProps:null,G=N.children,Yh(x,N)?G=null:R!==null&&Yh(x,R)&&(l.flags|=32),vb(o,l),Ws(o,l,G,f),l.child;case 6:return o===null&&dt(l),null;case 13:return _b(o,l,f);case 4:return Nc(l,l.stateNode.containerInfo),x=l.pendingProps,o===null?l.child=$r(l,null,x,f):Ws(o,l,x,f),l.child;case 11:return x=l.type,N=l.pendingProps,N=l.elementType===x?N:Ta(x,N),pb(o,l,x,N,f);case 7:return Ws(o,l,l.pendingProps,f),l.child;case 8:return Ws(o,l,l.pendingProps.children,f),l.child;case 12:return Ws(o,l,l.pendingProps.children,f),l.child;case 10:e:{if(x=l.type._context,N=l.pendingProps,R=l.memoizedProps,G=N.value,Gn(ni,x._currentValue),x._currentValue=G,R!==null)if(Nr(R.value,G)){if(R.children===N.children&&!_s.current){l=ql(o,l,f);break e}}else for(R=l.child,R!==null&&(R.return=l);R!==null;){var me=R.dependencies;if(me!==null){G=R.child;for(var be=me.firstContext;be!==null;){if(be.context===x){if(R.tag===1){be=Dr(-1,f&-f),be.tag=2;var De=R.updateQueue;if(De!==null){De=De.shared;var Ge=De.pending;Ge===null?be.next=be:(be.next=Ge.next,Ge.next=be),De.pending=be}}R.lanes|=f,be=R.alternate,be!==null&&(be.lanes|=f),Rn(R.return,f,l),me.lanes|=f;break}be=be.next}}else if(R.tag===10)G=R.type===l.type?null:R.child;else if(R.tag===18){if(G=R.return,G===null)throw Error(n(341));G.lanes|=f,me=G.alternate,me!==null&&(me.lanes|=f),Rn(G,f,l),G=R.sibling}else G=R.child;if(G!==null)G.return=R;else for(G=R;G!==null;){if(G===l){G=null;break}if(R=G.sibling,R!==null){R.return=G.return,G=R;break}G=G.return}R=G}Ws(o,l,N.children,f),l=l.child}return l;case 9:return N=l.type,x=l.pendingProps.children,Tr(l,f),N=kr(N),x=x(N),l.flags|=1,Ws(o,l,x,f),l.child;case 14:return x=l.type,N=Ta(x,l.pendingProps),N=Ta(x.type,N),mb(o,l,x,N,f);case 15:return gb(o,l,l.type,l.pendingProps,f);case 17:return x=l.type,N=l.pendingProps,N=l.elementType===x?N:Ta(x,N),Yp(o,l),l.tag=1,As(x)?(o=!0,Bl(l)):o=!1,Tr(l,f),ab(l,x,N),D0(l,x,N,f),V0(null,l,x,!0,o,f);case 19:return Nb(o,l,f);case 22:return yb(o,l,f)}throw Error(n(156,l.tag))};function Kb(o,l){return xo(o,l)}function JI(o,l,f,x){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(o,l,f,x){return new JI(o,l,f,x)}function sy(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ZI(o){if(typeof o=="function")return sy(o)?1:0;if(o!=null){if(o=o.$$typeof,o===L)return 11;if(o===se)return 14}return 2}function jc(o,l){var f=o.alternate;return f===null?(f=na(o.tag,l,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=l,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,l=o.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function om(o,l,f,x,N,R){var G=2;if(x=o,typeof o=="function")sy(o)&&(G=1);else if(typeof o=="string")G=5;else e:switch(o){case q:return Iu(f.children,N,R,l);case E:G=8,N|=8;break;case T:return o=na(12,f,l,N|2),o.elementType=T,o.lanes=R,o;case D:return o=na(13,f,l,N),o.elementType=D,o.lanes=R,o;case ne:return o=na(19,f,l,N),o.elementType=ne,o.lanes=R,o;case Z:return am(f,N,R,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case U:G=10;break e;case C:G=9;break e;case L:G=11;break e;case se:G=14;break e;case oe:G=16,x=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return l=na(G,f,l,N),l.elementType=o,l.type=x,l.lanes=R,l}function Iu(o,l,f,x){return o=na(7,o,x,l),o.lanes=f,o}function am(o,l,f,x){return o=na(22,o,x,l),o.elementType=Z,o.lanes=f,o.stateNode={isHidden:!1},o}function oy(o,l,f){return o=na(6,o,null,l),o.lanes=f,o}function ay(o,l,f){return l=na(4,o.children!==null?o.children:[],o.key,l),l.lanes=f,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function eP(o,l,f,x,N){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zo(0),this.expirationTimes=zo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zo(0),this.identifierPrefix=x,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function ly(o,l,f,x,N,R,G,me,be){return o=new eP(o,l,f,me,be),l===1?(l=1,R===!0&&(l|=8)):l=0,R=na(3,null,null,l),o.current=R,R.stateNode=o,R.memoizedState={element:x,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(R),o}function tP(o,l,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:x==null?null:""+x,children:o,containerInfo:l,implementation:f}}function Yb(o){if(!o)return el;o=o._reactInternals;e:{if(Rr(o)!==o||o.tag!==1)throw Error(n(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(As(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(o.tag===1){var f=o.type;if(As(f))return Zh(o,f,l)}return l}function Qb(o,l,f,x,N,R,G,me,be){return o=ly(f,x,!0,o,N,R,G,me,be),o.context=Yb(null),f=o.current,x=Gs(),N=Pc(f),R=Dr(x,N),R.callback=l??null,Mr(f,R,N),o.current.lanes=N,qo(o,N,x),co(o,x),o}function lm(o,l,f,x){var N=l.current,R=Gs(),G=Pc(N);return f=Yb(f),l.context===null?l.context=f:l.pendingContext=f,l=Dr(R,G),l.payload={element:o},x=x===void 0?null:x,x!==null&&(l.callback=x),o=Mr(N,l,G),o!==null&&(Ia(o,N,G,R),Gi(o,N,G)),G}function cm(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Xb(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<l?f:l}}function cy(o,l){Xb(o,l),(o=o.alternate)&&Xb(o,l)}function nP(){return null}var Jb=typeof reportError=="function"?reportError:function(o){console.error(o)};function uy(o){this._internalRoot=o}um.prototype.render=uy.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));lm(o,l,null,null)},um.prototype.unmount=uy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Tu(function(){lm(null,o,null,null)}),l[Hi]=null}};function um(o){this._internalRoot=o}um.prototype.unstable_scheduleHydration=function(o){if(o){var l=cc();o={blockedOn:null,target:o,priority:l};for(var f=0;f<Zs.length&&l!==0&&l<Zs[f].priority;f++);Zs.splice(f,0,o),f===0&&dc(o)}};function dy(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function dm(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Zb(){}function rP(o,l,f,x,N){if(N){if(typeof x=="function"){var R=x;x=function(){var De=cm(G);R.call(De)}}var G=Qb(l,x,o,0,null,!1,!1,"",Zb);return o._reactRootContainer=G,o[Hi]=G.current,Ml(o.nodeType===8?o.parentNode:o),Tu(),G}for(;N=o.lastChild;)o.removeChild(N);if(typeof x=="function"){var me=x;x=function(){var De=cm(be);me.call(De)}}var be=ly(o,0,!1,null,null,!1,!1,"",Zb);return o._reactRootContainer=be,o[Hi]=be.current,Ml(o.nodeType===8?o.parentNode:o),Tu(function(){lm(l,be,f,x)}),be}function hm(o,l,f,x,N){var R=f._reactRootContainer;if(R){var G=R;if(typeof N=="function"){var me=N;N=function(){var be=cm(G);me.call(be)}}lm(l,G,o,N)}else G=rP(f,l,o,N,x);return cm(G)}za=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var f=ms(l.pendingLanes);f!==0&&(bo(l,f|1),co(l,Mn()),(jn&6)===0&&(Ld=Mn()+500,M()))}break;case 13:Tu(function(){var x=Jn(o,1);if(x!==null){var N=Gs();Ia(x,o,1,N)}}),cy(o,1)}},qa=function(o){if(o.tag===13){var l=Jn(o,134217728);if(l!==null){var f=Gs();Ia(l,o,134217728,f)}cy(o,134217728)}},lc=function(o){if(o.tag===13){var l=Pc(o),f=Jn(o,l);if(f!==null){var x=Gs();Ia(f,o,l,x)}cy(o,l)}},cc=function(){return cn},$a=function(o,l){var f=cn;try{return cn=o,l()}finally{cn=f}},nr=function(o,l,f){switch(l){case"input":if(Pt(o,f),l=f.name,f.type==="radio"&&l!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var x=f[l];if(x!==o&&x.form===o.form){var N=wu(x);if(!N)throw Error(n(90));Je(x),Pt(x,N)}}}break;case"textarea":fn(o,f);break;case"select":l=f.value,l!=null&&nt(o,!!f.multiple,l,!1)}},vr=ny,Vs=Tu;var iP={usingClientEntryPoint:!1,Events:[_c,Vl,wu,an,yo,ny]},df={findFiberByHostInstance:Za,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sP={bundleType:df.bundleType,version:df.version,rendererPackageName:df.rendererPackageName,rendererConfig:df.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=fs(o),o===null?null:o.stateNode},findFiberByHostInstance:df.findFiberByHostInstance||nP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fm.isDisabled&&fm.supportsFiber)try{Bo=fm.inject(sP),zi=fm}catch{}}return uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iP,uo.createPortal=function(o,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dy(l))throw Error(n(200));return tP(o,l,null,f)},uo.createRoot=function(o,l){if(!dy(o))throw Error(n(299));var f=!1,x="",N=Jb;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=ly(o,1,!1,null,null,f,!1,x,N),o[Hi]=l.current,Ml(o.nodeType===8?o.parentNode:o),new uy(l)},uo.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=fs(l),o=o===null?null:o.stateNode,o},uo.flushSync=function(o){return Tu(o)},uo.hydrate=function(o,l,f){if(!dm(l))throw Error(n(200));return hm(null,o,l,!0,f)},uo.hydrateRoot=function(o,l,f){if(!dy(o))throw Error(n(405));var x=f!=null&&f.hydratedSources||null,N=!1,R="",G=Jb;if(f!=null&&(f.unstable_strictMode===!0&&(N=!0),f.identifierPrefix!==void 0&&(R=f.identifierPrefix),f.onRecoverableError!==void 0&&(G=f.onRecoverableError)),l=Qb(l,null,o,1,f??null,N,!1,R,G),o[Hi]=l.current,Ml(o),x)for(o=0;o<x.length;o++)f=x[o],N=f._getVersion,N=N(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,N]:l.mutableSourceEagerHydrationData.push(f,N);return new um(l)},uo.render=function(o,l,f){if(!dm(l))throw Error(n(200));return hm(null,o,l,!1,f)},uo.unmountComponentAtNode=function(o){if(!dm(o))throw Error(n(40));return o._reactRootContainer?(Tu(function(){hm(null,null,o,!1,function(){o._reactRootContainer=null,o[Hi]=null})}),!0):!1},uo.unstable_batchedUpdates=ny,uo.unstable_renderSubtreeIntoContainer=function(o,l,f,x){if(!dm(f))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return hm(o,l,f,!1,x)},uo.version="18.3.1-next-f1338f8080-20240426",uo}var aw;function YN(){if(aw)return py.exports;aw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),py.exports=fP(),py.exports}var lw;function pP(){if(lw)return pm;lw=1;var t=YN();return pm.createRoot=t.createRoot,pm.hydrateRoot=t.hydrateRoot,pm}var mP=pP();const gP=Ug(mP);var QN=YN();const yP=Ug(QN);/**
 * @remix-run/router v1.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zf(){return zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zf.apply(this,arguments)}var Wc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wc||(Wc={}));const cw="popstate";function vP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:c}=r.location;return Tv("",{pathname:s,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:JN(i)}return bP(e,n,null,t)}function Fi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function XN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xP(){return Math.random().toString(36).substr(2,8)}function uw(t,e){return{usr:t.state,key:t.key,idx:e}}function Tv(t,e,n,r){return n===void 0&&(n=null),zf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sh(e):e,{state:n,key:e&&e.key||r||xP()})}function JN(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function bP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c=Wc.Pop,u=null,h=p();h==null&&(h=0,a.replaceState(zf({},a.state,{idx:h}),""));function p(){return(a.state||{idx:null}).idx}function y(){c=Wc.Pop;let _=p(),I=_==null?null:_-h;h=_,u&&u({action:c,location:S.location,delta:I})}function w(_,I){c=Wc.Push;let V=Tv(S.location,_,I);h=p()+1;let z=uw(V,h),$=S.createHref(V);try{a.pushState(z,"",$)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;i.location.assign($)}s&&u&&u({action:c,location:S.location,delta:1})}function v(_,I){c=Wc.Replace;let V=Tv(S.location,_,I);h=p();let z=uw(V,h),$=S.createHref(V);a.replaceState(z,"",$),s&&u&&u({action:c,location:S.location,delta:0})}function j(_){let I=i.location.origin!=="null"?i.location.origin:i.location.href,V=typeof _=="string"?_:JN(_);return V=V.replace(/ $/,"%20"),Fi(I,"No window.location.(origin|href) available to create URL for href: "+V),new URL(V,I)}let S={get action(){return c},get location(){return t(i,a)},listen(_){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(cw,y),u=_,()=>{i.removeEventListener(cw,y),u=null}},createHref(_){return e(i,_)},createURL:j,encodeLocation(_){let I=j(_);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:w,replace:v,go(_){return a.go(_)}};return S}var dw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dw||(dw={}));function wP(t,e,n){return n===void 0&&(n="/"),_P(t,e,n)}function _P(t,e,n,r){let i=typeof e=="string"?Sh(e):e,s=tE(i.pathname||"/",n);if(s==null)return null;let a=ZN(t);AP(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let h=DP(s);c=RP(a[u],h)}return c}function ZN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(Fi(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=Bu([r,u.relativePath]),p=n.concat(u);s.children&&s.children.length>0&&(Fi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),ZN(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:IP(h,s.index),routesMeta:p})};return t.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,a);else for(let u of eE(s.path))i(s,a,u)}),e}function eE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=eE(r.join("/")),c=[];return c.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function AP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const NP=/^:[\w-]+$/,EP=3,SP=2,TP=1,kP=10,CP=-2,hw=t=>t==="*";function IP(t,e){let n=t.split("/"),r=n.length;return n.some(hw)&&(r+=CP),e&&(r+=SP),n.filter(i=>!hw(i)).reduce((i,s)=>i+(NP.test(s)?EP:s===""?TP:kP),r)}function PP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function RP(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",y=jP({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),w=u.route;if(!y)return null;Object.assign(i,y.params),a.push({params:i,pathname:Bu([s,y.pathname]),pathnameBase:BP(Bu([s,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(s=Bu([s,y.pathnameBase]))}return a}function jP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=LP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,p,y)=>{let{paramName:w,isOptional:v}=p;if(w==="*"){let S=c[y]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const j=c[y];return v&&!j?h[w]=void 0:h[w]=(j||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:t}}function LP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),XN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function DP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return XN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function tE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function MP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Sh(t):t;return{pathname:n?n.startsWith("/")?n:OP(n,e):e,search:zP(r),hash:qP(i)}}function OP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function yy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function VP(t,e){let n=FP(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function UP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Sh(t):(i=zf({},t),Fi(!i.pathname||!i.pathname.includes("?"),yy("?","pathname","search",i)),Fi(!i.pathname||!i.pathname.includes("#"),yy("#","pathname","hash",i)),Fi(!i.search||!i.search.includes("#"),yy("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=n;else{let y=e.length-1;if(!r&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),y-=1;i.pathname=w.join("/")}c=y>=0?e[y]:"/"}let u=MP(i,c),h=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}const Bu=t=>t.join("/").replace(/\/\/+/g,"/"),BP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $P(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nE=["post","put","patch","delete"];new Set(nE);const HP=["get",...nE];new Set(HP);/**
 * React Router v6.24.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qf(){return qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qf.apply(this,arguments)}const G1=O.createContext(null),WP=O.createContext(null),Bg=O.createContext(null),zg=O.createContext(null),rd=O.createContext({outlet:null,matches:[],isDataRoute:!1}),rE=O.createContext(null);function qg(){return O.useContext(zg)!=null}function Th(){return qg()||Fi(!1),O.useContext(zg).location}function iE(t){O.useContext(Bg).static||O.useLayoutEffect(t)}function ua(){let{isDataRoute:t}=O.useContext(rd);return t?aR():GP()}function GP(){qg()||Fi(!1);let t=O.useContext(G1),{basename:e,future:n,navigator:r}=O.useContext(Bg),{matches:i}=O.useContext(rd),{pathname:s}=Th(),a=JSON.stringify(VP(i,n.v7_relativeSplatPath)),c=O.useRef(!1);return iE(()=>{c.current=!0}),O.useCallback(function(h,p){if(p===void 0&&(p={}),!c.current)return;if(typeof h=="number"){r.go(h);return}let y=UP(h,JSON.parse(a),s,p.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Bu([e,y.pathname])),(p.replace?r.replace:r.push)(y,p.state,p)},[e,r,a,s,t])}const KP=O.createContext(null);function YP(t){let e=O.useContext(rd).outlet;return e&&O.createElement(KP.Provider,{value:t},e)}function QP(t,e){return XP(t,e)}function XP(t,e,n,r){qg()||Fi(!1);let{navigator:i}=O.useContext(Bg),{matches:s}=O.useContext(rd),a=s[s.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let h=Th(),p;if(e){var y;let _=typeof e=="string"?Sh(e):e;u==="/"||(y=_.pathname)!=null&&y.startsWith(u)||Fi(!1),p=_}else p=h;let w=p.pathname||"/",v=w;if(u!=="/"){let _=u.replace(/^\//,"").split("/");v="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let j=wP(t,{pathname:v}),S=nR(j&&j.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:Bu([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Bu([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&S?O.createElement(zg.Provider,{value:{location:qf({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Wc.Pop}},S):S}function JP(){let t=oR(),e=$P(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const ZP=O.createElement(JP,null);class eR extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(rd.Provider,{value:this.props.routeContext},O.createElement(rE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tR(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(G1);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(rd.Provider,{value:e},r)}function nR(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let a=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let p=a.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);p>=0||Fi(!1),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let y=a[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=p),y.route.id){let{loaderData:w,errors:v}=n,j=y.route.loader&&w[y.route.id]===void 0&&(!v||v[y.route.id]===void 0);if(y.route.lazy||j){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((p,y,w)=>{let v,j=!1,S=null,_=null;n&&(v=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||ZP,u&&(h<0&&w===0?(lR("route-fallback"),j=!0,_=null):h===w&&(j=!0,_=y.route.hydrateFallbackElement||null)));let I=e.concat(a.slice(0,w+1)),V=()=>{let z;return v?z=S:j?z=_:y.route.Component?z=O.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=p,O.createElement(tR,{match:y,routeContext:{outlet:p,matches:I,isDataRoute:n!=null},children:z})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?O.createElement(eR,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:V(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):V()},null)}var sE=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(sE||{}),oE=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(oE||{});function rR(t){let e=O.useContext(G1);return e||Fi(!1),e}function iR(t){let e=O.useContext(WP);return e||Fi(!1),e}function sR(t){let e=O.useContext(rd);return e||Fi(!1),e}function aE(t){let e=sR(),n=e.matches[e.matches.length-1];return n.route.id||Fi(!1),n.route.id}function oR(){var t;let e=O.useContext(rE),n=iR(),r=aE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function aR(){let{router:t}=rR(sE.UseNavigateStable),e=aE(oE.UseNavigateStable),n=O.useRef(!1);return iE(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,qf({fromRouteId:e},s)))},[t,e])}const fw={};function lR(t,e,n){fw[t]||(fw[t]=!0)}function pw(t){return YP(t.context)}function Ys(t){Fi(!1)}function cR(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Wc.Pop,navigator:s,static:a=!1,future:c}=t;qg()&&Fi(!1);let u=e.replace(/^\/*/,"/"),h=O.useMemo(()=>({basename:u,navigator:s,static:a,future:qf({v7_relativeSplatPath:!1},c)}),[u,c,s,a]);typeof r=="string"&&(r=Sh(r));let{pathname:p="/",search:y="",hash:w="",state:v=null,key:j="default"}=r,S=O.useMemo(()=>{let _=tE(p,u);return _==null?null:{location:{pathname:_,search:y,hash:w,state:v,key:j},navigationType:i}},[u,p,y,w,v,j,i]);return S==null?null:O.createElement(Bg.Provider,{value:h},O.createElement(zg.Provider,{children:n,value:S}))}function uR(t){let{children:e,location:n}=t;return QP(kv(e),n)}new Promise(()=>{});function kv(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,kv(r.props.children,s));return}r.type!==Ys&&Fi(!1),!r.props.index||!r.props.children||Fi(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=kv(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.24.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function dR(t,e){let n=Cv(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const hR="6";try{window.__reactRouterVersion=hR}catch{}const fR="startTransition",mw=hp[fR];function pR(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=vP({window:i,v5Compat:!0}));let a=s.current,[c,u]=O.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},p=O.useCallback(y=>{h&&mw?mw(()=>u(y)):u(y)},[u,h]);return O.useLayoutEffect(()=>a.listen(p),[a,p]),O.createElement(cR,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}var gw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gw||(gw={}));var yw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yw||(yw={}));function mR(t){let e=O.useRef(Cv(t)),n=O.useRef(!1),r=Th(),i=O.useMemo(()=>dR(r.search,n.current?null:e.current),[r.search]),s=ua(),a=O.useCallback((c,u)=>{const h=Cv(typeof c=="function"?c(i):c);n.current=!0,s("?"+h,u)},[s,i]);return[i,a]}const Iv={query:"",mode:"name",filters:{category:"all",intensity:"all",isAlergicOnly:!1,showSafeFoods:!0},behavior:{minQueryLength:4,debounceDelay:300,includePartialMatches:!1,caseSensitive:!1},results:{items:[],totalCount:0,filteredCount:0,isLoading:!1,hasError:!1},metadata:{lastSearchTime:0,searchCount:0,recentSearches:[],suggestions:[]},ui:{isSearchActive:!1,showAdvancedOptions:!1,highlightedResultIndex:-1}},gR={allergies:[],search:Iv,sort:{field:"name",order:"asc"},ui:{isLoading:!1,error:null,theme:"light"}};function yR(t,e){if("type"in e&&e.type.startsWith("SEARCH_"))return{...t,search:vR(t.search,e)};if(e.type.startsWith("SORT_"))return{...t,sort:xR(t.sort,e)};switch(e.type){case"SET_ALLERGIES":return{...t,allergies:e.payload};case"SET_LOADING":return{...t,ui:{...t.ui,isLoading:e.payload}};case"SET_ERROR":return{...t,ui:{...t.ui,error:e.payload}};case"SET_THEME":return{...t,ui:{...t.ui,theme:e.payload}};default:return t}}function vR(t,e){switch(e.type){case"SEARCH_SET_QUERY":return{...t,query:e.payload,ui:{...t.ui,isSearchActive:e.payload.length>0,highlightedResultIndex:-1}};case"SEARCH_SET_MODE":return{...t,mode:e.payload,query:e.payload==="category"?t.query:"",ui:{...t.ui,highlightedResultIndex:-1}};case"SEARCH_SET_CATEGORY_FILTER":return{...t,filters:{...t.filters,category:e.payload}};case"SEARCH_SET_INTENSITY_FILTER":return{...t,filters:{...t.filters,intensity:e.payload}};case"SEARCH_RESET_ALL":return{...Iv,metadata:{...Iv.metadata,searchCount:t.metadata.searchCount}};case"SEARCH_CLEAR":return{...t,query:"",mode:"name",ui:{...t.ui,isSearchActive:!1,highlightedResultIndex:-1}};case"SEARCH_SET_UI_ACTIVE":return{...t,ui:{...t.ui,isSearchActive:e.payload}};default:return t}}function xR(t,e){switch(e.type){case"SORT_SET_FIELD":return{...t,field:e.payload};case"SORT_SET_ORDER":return{...t,order:e.payload};case"SORT_TOGGLE_ORDER":return{...t,order:t.order==="asc"?"desc":"asc"};default:return t}}const lE=O.createContext(null);O.createContext(null);function bR({children:t}){const[e,n]=O.useReducer(yR,gR),r=O.useMemo(()=>({setAllergies:i=>{n({type:"SET_ALLERGIES",payload:i})},setLoading:i=>{n({type:"SET_LOADING",payload:i})},setError:i=>{n({type:"SET_ERROR",payload:i})},setTheme:i=>{n({type:"SET_THEME",payload:i})},search:{setQuery:i=>{n({type:"SEARCH_SET_QUERY",payload:i})},setMode:i=>{n({type:"SEARCH_SET_MODE",payload:i})},setCategoryFilter:i=>{n({type:"SEARCH_SET_CATEGORY_FILTER",payload:i})},clearSearch:()=>{n({type:"SEARCH_CLEAR"})},resetAll:()=>{n({type:"SEARCH_RESET_ALL"})}},sort:{setField:i=>{n({type:"SORT_SET_FIELD",payload:i})},setOrder:i=>{n({type:"SORT_SET_ORDER",payload:i})},toggleOrder:()=>{n({type:"SORT_TOGGLE_ORDER"})}}}),[n]);return d.jsx(lE.Provider,{value:{state:e,dispatch:n,actions:r},children:t})}function cE(){const t=O.useContext(lE);if(!t)throw new Error("useApp must be used within an AppProvider");return t}function wR(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function _R(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function AR(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var vw=t=>Array.isArray(t)?t:[t];function NR(t){const e=Array.isArray(t[0])?t[0]:t;return AR(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ER(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var SR=class{constructor(t){this.value=t}deref(){return this.value}},TR=typeof WeakRef<"u"?WeakRef:SR,kR=0,xw=1;function mm(){return{s:kR,v:void 0,o:null,p:null}}function uE(t,e={}){let n=mm();const{resultEqualityCheck:r}=e;let i,s=0;function a(){let c=n;const{length:u}=arguments;for(let y=0,w=u;y<w;y++){const v=arguments[y];if(typeof v=="function"||typeof v=="object"&&v!==null){let j=c.o;j===null&&(c.o=j=new WeakMap);const S=j.get(v);S===void 0?(c=mm(),j.set(v,c)):c=S}else{let j=c.p;j===null&&(c.p=j=new Map);const S=j.get(v);S===void 0?(c=mm(),j.set(v,c)):c=S}}const h=c;let p;if(c.s===xw)p=c.v;else if(p=t.apply(null,arguments),s++,r){const y=i?.deref?.()??i;y!=null&&r(y,p)&&(p=y,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new TR(p):p}return h.s=xw,h.v=p,p}return a.clearCache=()=>{n=mm(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function CR(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,a=0,c,u={},h=i.pop();typeof h=="object"&&(u=h,h=i.pop()),wR(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...u},{memoize:y,memoizeOptions:w=[],argsMemoize:v=uE,argsMemoizeOptions:j=[]}=p,S=vw(w),_=vw(j),I=NR(i),V=y(function(){return s++,h.apply(null,arguments)},...S),z=v(function(){a++;const J=ER(I,arguments);return c=V.apply(null,J),c},..._);return Object.assign(z,{resultFunc:h,memoizedResultFunc:V,dependencies:I,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>c,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:y,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var Kl=CR(uE),IR=Object.assign((t,e=Kl)=>{_R(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((a,c,u)=>(a[n[u]]=c,a),{}))},{withTypes:()=>IR});const gm={getQuery:t=>t.search.query,getSearchMode:t=>t.search.mode,getFilters:t=>t.search.filters,getResults:t=>t.search.results,getSearchState:t=>t.search,getSearchResults:Kl([t=>t.search.results.items],t=>t),getFilteredAllergies:Kl([t=>t.allergies,t=>t.search.query,t=>t.search.mode,t=>t.search.filters,t=>t.sort],(t,e,n,r,i)=>{let s=[...t];return n==="name"&&e.trim().length>=4?s=s.filter(a=>a.name.toLowerCase().includes(e.toLowerCase())&&a.isAlergic):n==="category"&&r.category!=="all"&&(s=s.filter(a=>a.category.toLowerCase()===r.category.toLowerCase())),r.isAlergicOnly&&(s=s.filter(a=>a.isAlergic)),r.intensity!=="all"&&(s=s.filter(a=>a.intensity.toLowerCase()===r.intensity.toLowerCase())),s.sort((a,c)=>{const u=a[i.field],h=c[i.field];return typeof u=="string"&&typeof h=="string"?i.order==="asc"?u.localeCompare(h):h.localeCompare(u):typeof u=="number"&&typeof h=="number"?i.order==="asc"?u-h:h-u:0})}),getIsSearchActive:t=>t.search.ui.isSearchActive,getSearchStats:Kl([t=>t.search.results.items,t=>t.allergies,t=>t.search.mode,t=>t.search.query],(t,e,n,r)=>({resultCount:t.length,totalCount:e.length,allergenicCount:t.filter(i=>i.isAlergic).length,safeCount:t.filter(i=>!i.isAlergic).length,hasQuery:r.trim().length>0,isNameSearch:n==="name",isCategorySearch:n==="category"})),getSearchPerformance:Kl([t=>t.search.metadata.lastSearchTime,t=>t.search.metadata.searchCount,t=>t.search.results.isLoading],(t,e,n)=>({lastSearchTime:t,searchCount:e,isLoading:n,averageSearchTime:e>0?Date.now()-t:0})),getActiveFilters:Kl([t=>t.search.filters],t=>{const e=[];return t.category!=="all"&&e.push(`Categora: ${t.category}`),t.intensity!=="all"&&e.push(`Intensidad: ${t.intensity}`),t.isAlergicOnly&&e.push("Solo alrgicos"),t.showSafeFoods||e.push("Ocultar seguros"),e}),getCategoriesWithCount:Kl([t=>t.allergies],t=>{const e=t.reduce((n,r)=>(n[r.category]=(n[r.category]||0)+1,n),{});return Object.entries(e).map(([n,r])=>({category:n,count:r,allergenicCount:t.filter(i=>i.category===n&&i.isAlergic).length,safeCount:t.filter(i=>i.category===n&&!i.isAlergic).length}))}),getRecentSearches:Kl([t=>t.search.metadata.recentSearches],t=>t.slice(0,5)),getSearchSuggestions:Kl([t=>t.search.metadata.suggestions,t=>t.search.query],(t,e)=>e.trim()?t.filter(n=>n.toLowerCase().includes(e.toLowerCase())):[])},PR=()=>{const{state:t}=cE(),e=gm.getFilteredAllergies(t),n=gm.getSearchStats(t),r=gm.getActiveFilters(t);return{results:e,stats:n,activeFilters:r,isLoading:t.search.results.isLoading,hasError:t.search.results.hasError,error:t.search.results.error,categoriesWithCount:gm.getCategoriesWithCount(t)}};var ff={exports:{}},vy,bw;function RR(){if(bw)return vy;bw=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}vy=e;function e(n,r,i){var s=i&&i.stringify||t,a=1;if(typeof n=="object"&&n!==null){var c=r.length+a;if(c===1)return n;var u=new Array(c);u[0]=s(n);for(var h=1;h<c;h++)u[h]=s(r[h]);return u.join(" ")}if(typeof n!="string")return n;var p=r.length;if(p===0)return n;for(var y="",w=1-a,v=-1,j=n&&n.length||0,S=0;S<j;){if(n.charCodeAt(S)===37&&S+1<j){switch(v=v>-1?v:0,n.charCodeAt(S+1)){case 100:case 102:if(w>=p||r[w]==null)break;v<S&&(y+=n.slice(v,S)),y+=Number(r[w]),v=S+2,S++;break;case 105:if(w>=p||r[w]==null)break;v<S&&(y+=n.slice(v,S)),y+=Math.floor(Number(r[w])),v=S+2,S++;break;case 79:case 111:case 106:if(w>=p||r[w]===void 0)break;v<S&&(y+=n.slice(v,S));var _=typeof r[w];if(_==="string"){y+="'"+r[w]+"'",v=S+2,S++;break}if(_==="function"){y+=r[w].name||"<anonymous>",v=S+2,S++;break}y+=s(r[w]),v=S+2,S++;break;case 115:if(w>=p)break;v<S&&(y+=n.slice(v,S)),y+=String(r[w]),v=S+2,S++;break;case 37:v<S&&(y+=n.slice(v,S)),y+="%",v=S+2,S++,w--;break}++w}++S}return v===-1?n:(v<j&&(y+=n.slice(v)),y)}return vy}var ww;function jR(){if(ww)return ff.exports;ww=1;const t=RR();ff.exports=p;const e=ne().console||{},n={mapHttpRequest:q,mapHttpResponse:q,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:q,res:q,err:J,errWithCause:J};function r(se,oe){return se==="silent"?1/0:oe.levels.values[se]}const i=Symbol("pino.logFuncs"),s=Symbol("pino.hierarchy"),a={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(se,oe){const Z={logger:oe,parent:se[s]};oe[s]=Z}function u(se,oe,Z){const Y={};oe.forEach(pe=>{Y[pe]=Z[pe]?Z[pe]:e[pe]||e[a[pe]||"log"]||T}),se[i]=Y}function h(se,oe){return Array.isArray(se)?se.filter(function(Y){return Y!=="!stdSerializers.err"}):se===!0?Object.keys(oe):!1}function p(se){se=se||{},se.browser=se.browser||{};const oe=se.browser.transmit;if(oe&&typeof oe.send!="function")throw Error("pino: transmit option must have a send function");const Z=se.browser.write||e;se.browser.write&&(se.browser.asObject=!0);const Y=se.serializers||{},pe=h(se.browser.serialize,Y);let we=se.browser.serialize;Array.isArray(se.browser.serialize)&&se.browser.serialize.indexOf("!stdSerializers.err")>-1&&(we=!1);const ae=Object.keys(se.customLevels||{}),F=["error","fatal","warn","info","debug","trace"].concat(ae);typeof Z=="function"&&F.forEach(function(je){Z[je]=Z}),(se.enabled===!1||se.browser.disabled)&&(se.level="silent");const ee=se.level||"info",Q=Object.create(Z);Q.log||(Q.log=T),u(Q,F,Z),c({},Q),Object.defineProperty(Q,"levelVal",{get:ge}),Object.defineProperty(Q,"level",{get:ve,set:Ee});const he={transmit:oe,serialize:pe,asObject:se.browser.asObject,asObjectBindingsOnly:se.browser.asObjectBindingsOnly,formatters:se.browser.formatters,levels:F,timestamp:le(se),messageKey:se.messageKey||"msg",onChild:se.onChild||T};Q.levels=y(se),Q.level=ee,Q.isLevelEnabled=function(je){return this.levels.values[je]?this.levels.values[je]>=this.levels.values[this.level]:!1},Q.setMaxListeners=Q.getMaxListeners=Q.emit=Q.addListener=Q.on=Q.prependListener=Q.once=Q.prependOnceListener=Q.removeListener=Q.removeAllListeners=Q.listeners=Q.listenerCount=Q.eventNames=Q.write=Q.flush=T,Q.serializers=Y,Q._serialize=pe,Q._stdErrSerialize=we,Q.child=function(...je){return Te.call(this,he,...je)},oe&&(Q._logEvent=$());function ge(){return r(this.level,this)}function ve(){return this._level}function Ee(je){if(je!=="silent"&&!this.levels.values[je])throw Error("unknown level "+je);this._level=je,j(this,he,Q,"error"),j(this,he,Q,"fatal"),j(this,he,Q,"warn"),j(this,he,Q,"info"),j(this,he,Q,"debug"),j(this,he,Q,"trace"),ae.forEach(ze=>{j(this,he,Q,ze)})}function Te(je,ze,Je){if(!ze)throw new Error("missing bindings for child Pino");Je=Je||{},pe&&ze.serializers&&(Je.serializers=ze.serializers);const tt=Je.serializers;if(pe&&tt){var Me=Object.assign({},Y,tt),fe=se.browser.serialize===!0?Object.keys(Me):pe;delete ze.serializers,V([ze],fe,Me,this._stdErrSerialize)}function Xt(bt){this._childLevel=(bt._childLevel|0)+1,this.bindings=ze,Me&&(this.serializers=Me,this._serialize=fe),oe&&(this._logEvent=$([].concat(bt._logEvent.bindings,ze)))}Xt.prototype=this;const Pt=new Xt(this);return c(this,Pt),Pt.child=function(...bt){return Te.call(this,je,...bt)},Pt.level=Je.level||this.level,je.onChild(Pt),Pt}return Q}function y(se){const oe=se.customLevels||{},Z=Object.assign({},p.levels.values,oe),Y=Object.assign({},p.levels.labels,w(oe));return{values:Z,labels:Y}}function w(se){const oe={};return Object.keys(se).forEach(function(Z){oe[se[Z]]=Z}),oe}p.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},p.stdSerializers=n,p.stdTimeFunctions=Object.assign({},{nullTime:U,epochTime:C,unixTime:L,isoTime:D});function v(se){const oe=[];se.bindings&&oe.push(se.bindings);let Z=se[s];for(;Z.parent;)Z=Z.parent,Z.logger.bindings&&oe.push(Z.logger.bindings);return oe.reverse()}function j(se,oe,Z,Y){if(Object.defineProperty(se,Y,{value:r(se.level,Z)>r(Y,Z)?T:Z[i][Y],writable:!0,enumerable:!0,configurable:!0}),se[Y]===T){if(!oe.transmit)return;const we=oe.transmit.level||se.level,ae=r(we,Z);if(r(Y,Z)<ae)return}se[Y]=_(se,oe,Z,Y);const pe=v(se);pe.length!==0&&(se[Y]=S(pe,se[Y]))}function S(se,oe){return function(){return oe.apply(this,[...se,...arguments])}}function _(se,oe,Z,Y){return(function(pe){return function(){const ae=oe.timestamp(),F=new Array(arguments.length),ee=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var Q=0;Q<F.length;Q++)F[Q]=arguments[Q];var he=!1;if(oe.serialize&&(V(F,this._serialize,this.serializers,this._stdErrSerialize),he=!0),oe.asObject||oe.formatters?pe.call(ee,...I(this,Y,F,ae,oe)):pe.apply(ee,F),oe.transmit){const ge=oe.transmit.level||se._level,ve=r(ge,Z),Ee=r(Y,Z);if(Ee<ve)return;z(this,{ts:ae,methodLevel:Y,methodValue:Ee,transmitValue:Z.levels.values[oe.transmit.level||se._level],send:oe.transmit.send,val:r(se._level,Z)},F,he)}}})(se[i][Y])}function I(se,oe,Z,Y,pe){const{level:we,log:ae=ge=>ge}=pe.formatters||{},F=Z.slice();let ee=F[0];const Q={};let he=(se._childLevel|0)+1;if(he<1&&(he=1),Y&&(Q.time=Y),we){const ge=we(oe,se.levels.values[oe]);Object.assign(Q,ge)}else Q.level=se.levels.values[oe];if(pe.asObjectBindingsOnly){if(ee!==null&&typeof ee=="object")for(;he--&&typeof F[0]=="object";)Object.assign(Q,F.shift());return[ae(Q),...F]}else{if(ee!==null&&typeof ee=="object"){for(;he--&&typeof F[0]=="object";)Object.assign(Q,F.shift());ee=F.length?t(F.shift(),F):void 0}else typeof ee=="string"&&(ee=t(F.shift(),F));return ee!==void 0&&(Q[pe.messageKey]=ee),[ae(Q)]}}function V(se,oe,Z,Y){for(const pe in se)if(Y&&se[pe]instanceof Error)se[pe]=p.stdSerializers.err(se[pe]);else if(typeof se[pe]=="object"&&!Array.isArray(se[pe])&&oe)for(const we in se[pe])oe.indexOf(we)>-1&&we in Z&&(se[pe][we]=Z[we](se[pe][we]))}function z(se,oe,Z,Y=!1){const pe=oe.send,we=oe.ts,ae=oe.methodLevel,F=oe.methodValue,ee=oe.val,Q=se._logEvent.bindings;Y||V(Z,se._serialize||Object.keys(se.serializers),se.serializers,se._stdErrSerialize===void 0?!0:se._stdErrSerialize),se._logEvent.ts=we,se._logEvent.messages=Z.filter(function(he){return Q.indexOf(he)===-1}),se._logEvent.level.label=ae,se._logEvent.level.value=F,pe(ae,se._logEvent,ee),se._logEvent=$(Q)}function $(se){return{ts:0,messages:[],bindings:se||[],level:{label:"",value:0}}}function J(se){const oe={type:se.constructor.name,msg:se.message,stack:se.stack};for(const Z in se)oe[Z]===void 0&&(oe[Z]=se[Z]);return oe}function le(se){return typeof se.timestamp=="function"?se.timestamp:se.timestamp===!1?U:C}function q(){return{}}function E(se){return se}function T(){}function U(){return!1}function C(){return Date.now()}function L(){return Math.round(Date.now()/1e3)}function D(){return new Date(Date.now()).toISOString()}function ne(){function se(oe){return typeof oe<"u"&&oe}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return se(self)||se(window)||se(this)||{}}}return ff.exports.default=p,ff.exports.pino=p,ff.exports}var LR=jR();const dE=Ug(LR),DR={level:"info",transport:void 0,browser:{asObject:!0,serialize:!0,transmit:{level:"error",send:(t,e)=>{console.error("[PINO ERROR]",e)}}},base:{pid:void 0,hostname:void 0,env:"production",app:"BlancAlergic-APP",version:"10.0.2",session:crypto.randomUUID?.()||Math.random().toString(36).substr(2,9)},timestamp:dE.stdTimeFunctions.isoTime},et=dE(DR);et.child({module:"medical",category:"healthcare",compliance:"HIPAA"});et.child({module:"authentication",category:"security"});et.child({module:"performance",category:"metrics"});et.child({module:"error-boundary",category:"error-handling"});function K1(){const{state:t,actions:e,dispatch:n}=cE(),{results:r}=PR();return{allergies:t.allergies,filteredAllergies:r.length>0?r:t.allergies.filter(i=>i.isAlergic),searchQuery:t.search.query,selectedCategory:t.search.filters.category,selectedIntensity:t.search.filters.intensity,sortBy:t.sort.field,sortOrder:t.sort.order,isLoading:t.ui.isLoading,error:t.ui.error,setAllergies:e.setAllergies,setLoading:e.setLoading,setError:e.setError,setSearchQuery:i=>e.search.setQuery(i),setCategoryFilter:i=>e.search.setCategoryFilter(i),setIntensityFilter:i=>{n({type:"SEARCH_SET_INTENSITY_FILTER",payload:i})},setSortBy:i=>e.sort.setField(i),setSortOrder:i=>e.sort.setOrder(i),filterAllergies:()=>{et.info("filterAllergies using new search architecture")}}}function hE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=hE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function fE(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=hE(t))&&(r&&(r+=" "),r+=e);return r}const Y1="-",MR=t=>{const e=FR(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const c=a.split(Y1);return c[0]===""&&c.length!==1&&c.shift(),pE(c,e)||OR(a)},getConflictingClassGroupIds:(a,c)=>{const u=n[a]||[];return c&&r[a]?[...u,...r[a]]:u}}},pE=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?pE(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Y1);return e.validators.find(({validator:a})=>a(s))?.classGroupId},_w=/^\[(.+)\]$/,OR=t=>{if(_w.test(t)){const e=_w.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},FR=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)Pv(n[i],r,i,e);return r},Pv=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Aw(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(VR(i)){Pv(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{Pv(a,Aw(e,s),n,r)})})},Aw=(t,e)=>{let n=t;return e.split(Y1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},VR=t=>t.isThemeGetter,UR=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},Rv="!",jv=":",BR=jv.length,zR=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let a=0,c=0,u=0,h;for(let j=0;j<i.length;j++){let S=i[j];if(a===0&&c===0){if(S===jv){s.push(i.slice(u,j)),u=j+BR;continue}if(S==="/"){h=j;continue}}S==="["?a++:S==="]"?a--:S==="("?c++:S===")"&&c--}const p=s.length===0?i:i.substring(u),y=qR(p),w=y!==p,v=h&&h>u?h-u:void 0;return{modifiers:s,hasImportantModifier:w,baseClassName:y,maybePostfixModifierPosition:v}};if(e){const i=e+jv,s=r;r=a=>a.startsWith(i)?s(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},qR=t=>t.endsWith(Rv)?t.substring(0,t.length-1):t.startsWith(Rv)?t.substring(1):t,$R=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(a=>{a[0]==="["||e[a]?(i.push(...s.sort(),a),s=[]):s.push(a)}),i.push(...s.sort()),i}},HR=t=>({cache:UR(t.cacheSize),parseClassName:zR(t),sortModifiers:$R(t),...MR(t)}),WR=/\s+/,GR=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,a=[],c=t.trim().split(WR);let u="";for(let h=c.length-1;h>=0;h-=1){const p=c[h],{isExternal:y,modifiers:w,hasImportantModifier:v,baseClassName:j,maybePostfixModifierPosition:S}=n(p);if(y){u=p+(u.length>0?" "+u:u);continue}let _=!!S,I=r(_?j.substring(0,S):j);if(!I){if(!_){u=p+(u.length>0?" "+u:u);continue}if(I=r(j),!I){u=p+(u.length>0?" "+u:u);continue}_=!1}const V=s(w).join(":"),z=v?V+Rv:V,$=z+I;if(a.includes($))continue;a.push($);const J=i(I,_);for(let le=0;le<J.length;++le){const q=J[le];a.push(z+q)}u=p+(u.length>0?" "+u:u)}return u};function KR(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=mE(e))&&(r&&(r+=" "),r+=n);return r}const mE=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=mE(t[r]))&&(n&&(n+=" "),n+=e);return n};function YR(t,...e){let n,r,i,s=a;function a(u){const h=e.reduce((p,y)=>y(p),t());return n=HR(h),r=n.cache.get,i=n.cache.set,s=c,c(u)}function c(u){const h=r(u);if(h)return h;const p=GR(u,n);return i(u,p),p}return function(){return s(KR.apply(null,arguments))}}const Oi=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},gE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,yE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,QR=/^\d+\/\d+$/,XR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ZR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,e6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,t6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Md=t=>QR.test(t),hn=t=>!!t&&!Number.isNaN(Number(t)),Dc=t=>!!t&&Number.isInteger(Number(t)),xy=t=>t.endsWith("%")&&hn(t.slice(0,-1)),Hl=t=>XR.test(t),n6=()=>!0,r6=t=>JR.test(t)&&!ZR.test(t),vE=()=>!1,i6=t=>e6.test(t),s6=t=>t6.test(t),o6=t=>!mt(t)&&!gt(t),a6=t=>kh(t,wE,vE),mt=t=>gE.test(t),Pu=t=>kh(t,_E,r6),by=t=>kh(t,h6,hn),Nw=t=>kh(t,xE,vE),l6=t=>kh(t,bE,s6),ym=t=>kh(t,AE,i6),gt=t=>yE.test(t),pf=t=>Ch(t,_E),c6=t=>Ch(t,f6),Ew=t=>Ch(t,xE),u6=t=>Ch(t,wE),d6=t=>Ch(t,bE),vm=t=>Ch(t,AE,!0),kh=(t,e,n)=>{const r=gE.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Ch=(t,e,n=!1)=>{const r=yE.exec(t);return r?r[1]?e(r[1]):n:!1},xE=t=>t==="position"||t==="percentage",bE=t=>t==="image"||t==="url",wE=t=>t==="length"||t==="size"||t==="bg-size",_E=t=>t==="length",h6=t=>t==="number",f6=t=>t==="family-name",AE=t=>t==="shadow",p6=()=>{const t=Oi("color"),e=Oi("font"),n=Oi("text"),r=Oi("font-weight"),i=Oi("tracking"),s=Oi("leading"),a=Oi("breakpoint"),c=Oi("container"),u=Oi("spacing"),h=Oi("radius"),p=Oi("shadow"),y=Oi("inset-shadow"),w=Oi("text-shadow"),v=Oi("drop-shadow"),j=Oi("blur"),S=Oi("perspective"),_=Oi("aspect"),I=Oi("ease"),V=Oi("animate"),z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...$(),gt,mt],le=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto","contain","none"],E=()=>[gt,mt,u],T=()=>[Md,"full","auto",...E()],U=()=>[Dc,"none","subgrid",gt,mt],C=()=>["auto",{span:["full",Dc,gt,mt]},Dc,gt,mt],L=()=>[Dc,"auto",gt,mt],D=()=>["auto","min","max","fr",gt,mt],ne=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],oe=()=>["auto",...E()],Z=()=>[Md,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],Y=()=>[t,gt,mt],pe=()=>[...$(),Ew,Nw,{position:[gt,mt]}],we=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ae=()=>["auto","cover","contain",u6,a6,{size:[gt,mt]}],F=()=>[xy,pf,Pu],ee=()=>["","none","full",h,gt,mt],Q=()=>["",hn,pf,Pu],he=()=>["solid","dashed","dotted","double"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ve=()=>[hn,xy,Ew,Nw],Ee=()=>["","none",j,gt,mt],Te=()=>["none",hn,gt,mt],je=()=>["none",hn,gt,mt],ze=()=>[hn,gt,mt],Je=()=>[Md,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Hl],breakpoint:[Hl],color:[n6],container:[Hl],"drop-shadow":[Hl],ease:["in","out","in-out"],font:[o6],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Hl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Hl],shadow:[Hl],spacing:["px",hn],text:[Hl],"text-shadow":[Hl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Md,mt,gt,_]}],container:["container"],columns:[{columns:[hn,mt,gt,c]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:le()}],"overflow-x":[{"overflow-x":le()}],"overflow-y":[{"overflow-y":le()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[Dc,"auto",gt,mt]}],basis:[{basis:[Md,"full","auto",c,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[hn,Md,"auto","initial","none",mt]}],grow:[{grow:["",hn,gt,mt]}],shrink:[{shrink:["",hn,gt,mt]}],order:[{order:[Dc,"first","last","none",gt,mt]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:C()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:C()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...ne(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...ne()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":ne()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:oe()}],mx:[{mx:oe()}],my:[{my:oe()}],ms:[{ms:oe()}],me:[{me:oe()}],mt:[{mt:oe()}],mr:[{mr:oe()}],mb:[{mb:oe()}],ml:[{ml:oe()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[c,"screen",...Z()]}],"min-w":[{"min-w":[c,"screen","none",...Z()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...Z()]}],h:[{h:["screen","lh",...Z()]}],"min-h":[{"min-h":["screen","lh","none",...Z()]}],"max-h":[{"max-h":["screen","lh",...Z()]}],"font-size":[{text:["base",n,pf,Pu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,gt,by]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",xy,mt]}],"font-family":[{font:[c6,mt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,gt,mt]}],"line-clamp":[{"line-clamp":[hn,"none",gt,by]}],leading:[{leading:[s,...E()]}],"list-image":[{"list-image":["none",gt,mt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",gt,mt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[hn,"from-font","auto",gt,Pu]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[hn,"auto",gt,mt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gt,mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gt,mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pe()}],"bg-repeat":[{bg:we()}],"bg-size":[{bg:ae()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Dc,gt,mt],radial:["",gt,mt],conic:[Dc,gt,mt]},d6,l6]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:F()}],"gradient-via-pos":[{via:F()}],"gradient-to-pos":[{to:F()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:Q()}],"border-w-x":[{"border-x":Q()}],"border-w-y":[{"border-y":Q()}],"border-w-s":[{"border-s":Q()}],"border-w-e":[{"border-e":Q()}],"border-w-t":[{"border-t":Q()}],"border-w-r":[{"border-r":Q()}],"border-w-b":[{"border-b":Q()}],"border-w-l":[{"border-l":Q()}],"divide-x":[{"divide-x":Q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[hn,gt,mt]}],"outline-w":[{outline:["",hn,pf,Pu]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",p,vm,ym]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",y,vm,ym]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[hn,Pu]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":Q()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",w,vm,ym]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[hn,gt,mt]}],"mix-blend":[{"mix-blend":[...ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[hn]}],"mask-image-linear-from-pos":[{"mask-linear-from":ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":ve()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":ve()}],"mask-image-t-to-pos":[{"mask-t-to":ve()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":ve()}],"mask-image-r-to-pos":[{"mask-r-to":ve()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":ve()}],"mask-image-b-to-pos":[{"mask-b-to":ve()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":ve()}],"mask-image-l-to-pos":[{"mask-l-to":ve()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":ve()}],"mask-image-x-to-pos":[{"mask-x-to":ve()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":ve()}],"mask-image-y-to-pos":[{"mask-y-to":ve()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[gt,mt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":ve()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":$()}],"mask-image-conic-pos":[{"mask-conic":[hn]}],"mask-image-conic-from-pos":[{"mask-conic-from":ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":ve()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pe()}],"mask-repeat":[{mask:we()}],"mask-size":[{mask:ae()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",gt,mt]}],filter:[{filter:["","none",gt,mt]}],blur:[{blur:Ee()}],brightness:[{brightness:[hn,gt,mt]}],contrast:[{contrast:[hn,gt,mt]}],"drop-shadow":[{"drop-shadow":["","none",v,vm,ym]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",hn,gt,mt]}],"hue-rotate":[{"hue-rotate":[hn,gt,mt]}],invert:[{invert:["",hn,gt,mt]}],saturate:[{saturate:[hn,gt,mt]}],sepia:[{sepia:["",hn,gt,mt]}],"backdrop-filter":[{"backdrop-filter":["","none",gt,mt]}],"backdrop-blur":[{"backdrop-blur":Ee()}],"backdrop-brightness":[{"backdrop-brightness":[hn,gt,mt]}],"backdrop-contrast":[{"backdrop-contrast":[hn,gt,mt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",hn,gt,mt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[hn,gt,mt]}],"backdrop-invert":[{"backdrop-invert":["",hn,gt,mt]}],"backdrop-opacity":[{"backdrop-opacity":[hn,gt,mt]}],"backdrop-saturate":[{"backdrop-saturate":[hn,gt,mt]}],"backdrop-sepia":[{"backdrop-sepia":["",hn,gt,mt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",gt,mt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[hn,"initial",gt,mt]}],ease:[{ease:["linear","initial",I,gt,mt]}],delay:[{delay:[hn,gt,mt]}],animate:[{animate:["none",V,gt,mt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,gt,mt]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:Te()}],"rotate-x":[{"rotate-x":Te()}],"rotate-y":[{"rotate-y":Te()}],"rotate-z":[{"rotate-z":Te()}],scale:[{scale:je()}],"scale-x":[{"scale-x":je()}],"scale-y":[{"scale-y":je()}],"scale-z":[{"scale-z":je()}],"scale-3d":["scale-3d"],skew:[{skew:ze()}],"skew-x":[{"skew-x":ze()}],"skew-y":[{"skew-y":ze()}],transform:[{transform:[gt,mt,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Je()}],"translate-x":[{"translate-x":Je()}],"translate-y":[{"translate-y":Je()}],"translate-z":[{"translate-z":Je()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gt,mt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gt,mt]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[hn,pf,Pu,by]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},m6=YR(p6);function nn(...t){return m6(fE(t))}const fp=O.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:nn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));fp.displayName="Input";function Sw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $g(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Sw(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Sw(t[i],null)}}}}function yl(...t){return O.useCallback($g(...t),t)}function $f(t){const e=y6(t),n=O.forwardRef((r,i)=>{const{children:s,...a}=r,c=O.Children.toArray(s),u=c.find(x6);if(u){const h=u.props.children,p=c.map(y=>y===u?O.Children.count(h)>1?O.Children.only(null):O.isValidElement(h)?h.props.children:null:y);return d.jsx(e,{...a,ref:i,children:O.isValidElement(h)?O.cloneElement(h,void 0,p):null})}return d.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var g6=$f("Slot");function y6(t){const e=O.forwardRef((n,r)=>{const{children:i,...s}=n;if(O.isValidElement(i)){const a=w6(i),c=b6(s,i.props);return i.type!==O.Fragment&&(c.ref=r?$g(r,a):a),O.cloneElement(i,c)}return O.Children.count(i)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var v6=Symbol("radix.slottable");function x6(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===v6}function b6(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...c)=>{const u=s(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function w6(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Tw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,kw=fE,Q1=(t,e)=>n=>{var r;if(e?.variants==null)return kw(t,n?.class,n?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const p=n?.[h],y=s?.[h];if(p===null)return null;const w=Tw(p)||Tw(y);return i[h][w]}),c=n&&Object.entries(n).reduce((h,p)=>{let[y,w]=p;return w===void 0||(h[y]=w),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,p)=>{let{class:y,className:w,...v}=p;return Object.entries(v).every(j=>{let[S,_]=j;return Array.isArray(_)?_.includes({...s,...c}[S]):{...s,...c}[S]===_})?[...h,y,w]:h},[]);return kw(t,a,u,n?.class,n?.className)},_6=Q1("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:border-border/60 dark:bg-background/80 dark:text-foreground/90 dark:hover:bg-accent/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 dark:bg-secondary/80 dark:text-secondary-foreground",ghost:"text-foreground hover:bg-accent hover:text-accent-foreground dark:text-foreground/90 dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Nn=O.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const a=r?g6:"button";return d.jsx(a,{className:nn(_6({variant:e,size:n,className:t})),ref:s,...i})});Nn.displayName="Button";const En=O.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:nn("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));En.displayName="Card";const ai=O.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:nn("flex flex-col space-y-1.5 p-6",t),...e}));ai.displayName="CardHeader";const Qr=O.forwardRef(({className:t,...e},n)=>d.jsx("h3",{ref:n,className:nn("text-2xl font-semibold leading-none tracking-tight",t),...e}));Qr.displayName="CardTitle";const fo=O.forwardRef(({className:t,...e},n)=>d.jsx("p",{ref:n,className:nn("text-sm text-muted-foreground",t),...e}));fo.displayName="CardDescription";const Ln=O.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:nn("p-6 pt-0",t),...e}));Ln.displayName="CardContent";const A6=O.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:nn("flex items-center p-6 pt-0",t),...e}));A6.displayName="CardFooter";const N6=Q1("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80 dark:bg-secondary/80 dark:text-secondary-foreground shadow-sm dark:shadow",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input bg-background/50 text-foreground hover:bg-accent hover:text-accent-foreground dark:border-border/60 dark:bg-background/80 dark:text-foreground/90 dark:hover:bg-accent/50"}},defaultVariants:{variant:"default"}});function Ir({className:t,variant:e,...n}){return d.jsx("div",{className:nn(N6({variant:e}),t),...n})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Cw=t=>{const e=S6(t);return e.charAt(0).toUpperCase()+e.slice(1)},NE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),T6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...c},u)=>O.createElement("svg",{ref:u,...k6,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:NE("lucide",i),...!s&&!T6(c)&&{"aria-hidden":"true"},...c},[...a.map(([h,p])=>O.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=(t,e)=>{const n=O.forwardRef(({className:r,...i},s)=>O.createElement(C6,{ref:s,iconNode:e,className:NE(`lucide-${E6(Cw(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Cw(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],EE=on("activity",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],R6=on("arrow-left",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],X1=on("calendar",j6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],D6=on("camera",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],O6=on("chart-column",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],V6=on("check",F6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],SE=on("chevron-down",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Iw=on("chevron-right",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],q6=on("chevron-up",z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],TE=on("circle-alert",$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],W6=on("circle-check-big",H6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],K6=on("clock",G6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Q6=on("database",Y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],hh=on("download",X6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Z6=on("eye",J6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],tj=on("file-image",ej);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Hf=on("file-text",nj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],ij=on("flask-conical",rj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],J1=on("funnel",sj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],id=on("heart",oj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Z1=on("house",aj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Wf=on("info",lj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],uj=on("log-out",cj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],hj=on("map-pin",dj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],kE=on("menu",fj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Pw=on("moon",pj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],tc=on("phone",mj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],yj=on("printer",gj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Rw=on("refresh-cw",vj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],bj=on("save",xj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Zc=on("search",wj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],Aj=on("share",_j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],pp=on("shield",Nj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],jw=on("sun",Ej);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]],Tj=on("syringe",Sj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],e2=on("table",kj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],CE=on("test-tube",Cj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Pj=on("timer",Ij);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],jj=on("trending-up",Rj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ms=on("triangle-alert",Lj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Mj=on("upload",Dj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fh=on("user",Oj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],t2=on("x",Fj);function Vj(t){switch(t){case"Alta":return"destructive";case"Media":return"default";case"Baja":return"secondary";default:return"outline"}}function Uj(t,e){if(!t)return"border-teal-200 dark:border-teal-800 bg-teal-50 dark:bg-teal-950/20";if(e)switch(e.toLowerCase()){case"alta":case"alto":return"border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-950/20";case"media":case"medio":return"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20";case"baja":case"bajo":return"border-indigo-200 dark:border-indigo-800 bg-indigo-50 dark:bg-indigo-950/20";default:return"border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950/20"}return"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"}function Bj(t){switch(t.toLowerCase()){case"alta":case"alto":return d.jsx(Ms,{className:"h-4 w-4 text-purple-600 dark:text-purple-400","aria-hidden":"true"});case"media":case"medio":return d.jsx(TE,{className:"h-4 w-4 text-blue-600 dark:text-blue-400","aria-hidden":"true"});case"baja":case"bajo":return d.jsx(Wf,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400","aria-hidden":"true"});default:return null}}function zj(t){return t?d.jsx(t2,{className:"h-4 w-4 text-blue-600 dark:text-blue-400","aria-hidden":"true"}):d.jsx(V6,{className:"h-4 w-4 text-teal-600 dark:text-teal-400","aria-hidden":"true"})}function IE(t,e){if(!t)return"SEGURO PARA CONSUMIR";if(e)switch(e.toLowerCase()){case"alta":case"alto":return"ALRGICO - ALTA INTENSIDAD";case"media":case"medio":return"ALRGICO - MEDIA INTENSIDAD";case"baja":case"bajo":return"ALRGICO - BAJA INTENSIDAD";default:return"ALRGICO"}return"ALRGICO"}function qj(t,e,n){return{"aria-label":IE(t,n),"aria-describedby":`allergy-${e.replace(/\s+/g,"-").toLowerCase()}-status`,role:"article"}}function $j(t){return`allergy-${t.replace(/\s+/g,"-").toLowerCase()}-status`}const mf=3,Hj=300,Lv="112",Wj=`tel:${Lv}`,Gj="blancalergic-theme",Lw={MAX_SIZE_MB:5},Kj=["A+","A-","B+","B-","AB+","AB-","O+","O-"],Yj=["Crustceos","Mariscos","Pescados","Frutas","Vegetales","Frutos secos","rboles","Hongos","Animales","Especias","Semillas","Proteinas"];class Tf extends O.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){const{mode:r,componentName:i,onError:s}=this.props;r==="medical"?(et.error({error:e,errorInfo:n,componentName:i,mode:"medical"},`MedicalErrorBoundary triggered for component: ${i}`),et.error({component:i,error:e.message,stack:e.stack,errorInfo:n,timestamp:new Date().toISOString(),severity:"critical"},"CRITICAL MEDICAL COMPONENT ERROR")):et.error({error:e,errorInfo:n,componentName:i,mode:r},"ErrorBoundary caught an error"),this.setState({error:e,errorInfo:n}),s&&s(e,n),et.warn({message:e.message,stack:e.stack,componentStack:n.componentStack,mode:r,componentName:i},"Production error detected")}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};renderSimpleError(){const{error:e}=this.state;return d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:d.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg border border-red-200 p-6",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h1",{className:"text-xl font-bold text-red-600 mb-2",children:"Ups! Algo sali mal"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Ha ocurrido un error inesperado. Por favor, recarga la pgina e intntalo de nuevo."}),!1,d.jsxs("div",{className:"space-x-2",children:[d.jsx("button",{onClick:this.handleReset,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Intentar de nuevo"}),d.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Recargar pgina"})]})]})})})}renderMedicalError(){const{componentName:e,showEmergencyInfo:n=!0,emergencyNumber:r=Lv}=this.props,{error:i}=this.state;return d.jsxs(En,{className:"border-red-500/50 bg-red-50 dark:bg-red-950/20",children:[d.jsx(ai,{children:d.jsxs(Qr,{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[d.jsx(Ms,{className:"h-5 w-5"}),"Error Crtico en Componente Mdico"]})}),d.jsxs(Ln,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["El componente ",d.jsx("strong",{children:e})," ha encontrado un error crtico."]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:n&&d.jsxs(d.Fragment,{children:[d.jsx("strong",{children:"Importante:"})," Si necesita informacin mdica de emergencia mientras solucionamos este problema, por favor:"]})})]}),n&&d.jsx(En,{className:"bg-orange-50 dark:bg-orange-950/20 border-orange-200 dark:border-orange-800",children:d.jsx(Ln,{className:"pt-4",children:d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(tc,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-orange-800 dark:text-orange-200",children:"Emergencia Mdica"}),d.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:["Llame inmediatamente al ",d.jsx("strong",{children:r})]})]})]}),d.jsxs(Nn,{onClick:()=>window.location.href=`${Wj}`.replace("112",r),variant:"destructive",size:"sm",className:"w-full",children:[d.jsx(tc,{className:"mr-2 h-4 w-4"}),"Llamar al ",r]})]})})}),d.jsxs("div",{className:"flex gap-2 pt-2",children:[d.jsxs(Nn,{onClick:this.handleReset,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[d.jsx(Rw,{className:"h-4 w-4"}),"Reintentar Componente"]}),d.jsx(Nn,{onClick:()=>window.location.reload(),variant:"default",size:"sm",children:"Recargar Aplicacin"})]}),d.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-lg",children:d.jsxs("p",{children:["Este error ha sido registrado. Si el problema persiste, contacte al soporte tcnico con referencia: ",d.jsx("strong",{children:e})]})}),!1]})]})}renderDefaultError(){const{customTitle:e,customMessage:n,emergencyNumber:r=Lv}=this.props,{error:i}=this.state;return d.jsxs(En,{className:"border-destructive/50 bg-destructive/5",children:[d.jsx(ai,{children:d.jsxs(Qr,{className:"flex items-center gap-2 text-destructive",children:[d.jsx(Ms,{className:"h-5 w-5"}),e||"Error en la Aplicacin"]})}),d.jsxs(Ln,{className:"space-y-4",children:[d.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.jsx("p",{className:"mb-2",children:n||"Ha ocurrido un error inesperado en la aplicacin."}),i&&d.jsxs("details",{className:"mt-2",children:[d.jsx("summary",{className:"cursor-pointer text-xs font-mono",children:"Detalles del error (desarrollo)"}),d.jsxs("pre",{className:"mt-2 text-xs bg-muted p-2 rounded overflow-auto max-h-32",children:[i.message,i.stack]})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(Nn,{onClick:this.handleReset,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[d.jsx(Rw,{className:"h-4 w-4"}),"Reintentar"]}),d.jsx(Nn,{onClick:()=>window.location.reload(),variant:"default",size:"sm",children:"Recargar Pgina"})]}),d.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Si el problema persiste, por favor contacte al soporte tcnico.",d.jsx("br",{}),d.jsx("strong",{children:"Importante:"})," En caso de emergencia mdica, llame al ",r,"."]})})]})]})}render(){const{hasError:e}=this.state,{fallback:n,mode:r="default"}=this.props;if(e){if(n)return n;switch(r){case"simple":return this.renderSimpleError();case"medical":return this.renderMedicalError();default:return this.renderDefaultError()}}return this.props.children}}const wy=js.memo(({allergy:t,showCategoryInfo:e=!1})=>{const n=$j(t.name),r=qj(t.isAlergic,t.name,t.intensity),i=IE(t.isAlergic,t.intensity);return d.jsxs(En,{className:`hover:shadow-md transition-shadow duration-200 ${Uj(t.isAlergic,t.intensity)}`,...r,children:[d.jsxs(ai,{className:"pb-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(Qr,{className:"text-lg",children:t.name}),d.jsxs("div",{className:"flex items-center gap-2",children:[zj(t.isAlergic),t.isAlergic&&Bj(t.intensity)]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[e&&d.jsx(Ir,{variant:"outline",children:t.category}),d.jsx(Ir,{variant:t.isAlergic?Vj(t.intensity):"secondary",children:i})]})]}),d.jsxs(Ln,{className:"pt-0",children:[d.jsxs("div",{id:n,className:"sr-only",children:[t.name," - ",t.isAlergic?`ALRGICO - Intensidad: ${t.intensity}. NO CONSUMIR - Reaccin alrgica confirmada`:"SEGURO - Sin alergia detectada. Blanca puede consumir este alimento"]}),t.KUA_Litro&&d.jsxs(fo,{className:"text-sm",children:["Nivel de alergia: ",t.KUA_Litro," KUA/L"]}),!t.isAlergic&&d.jsx(fo,{className:"text-sm text-teal-600 dark:text-teal-400 mt-2",children:" Blanca puede consumir este alimento"})]})]})},(t,e)=>t.allergy.name===e.allergy.name&&t.allergy.isAlergic===e.allergy.isAlergic&&t.allergy.intensity===e.allergy.intensity&&t.allergy.KUA_Litro===e.allergy.KUA_Litro&&t.showCategoryInfo===e.showCategoryInfo);function Qj(){const{allergies:t,setSearchQuery:e,filterAllergies:n}=K1(),[r,i]=O.useState("name"),[s,a]=O.useState(null),[c,u]=O.useState(""),p=O.useCallback(()=>r==="category"&&s?t.filter(_=>_.category.toLowerCase()===s.toLowerCase()):r==="name"&&c.length>mf?t.filter(_=>_.isAlergic&&_.name.toLowerCase().includes(c.toLowerCase())):[],[t,r,s,c])(),y=r==="category"&&s||r==="name"&&c.length>mf;O.useEffect(()=>{const _=setTimeout(()=>{(r==="category"&&s||r==="name"&&c.length>mf)&&(e(c),n())},Hj);return()=>clearTimeout(_)},[c,r,s,e,n]);const w=_=>{const I=_.target.value;u(I),i("name"),a(null)},v=O.useCallback(_=>{i("category"),a(_.toLowerCase()),u(_.toLowerCase()),e(_.toLowerCase()),n()},[e,n]),j=()=>{u(""),i("name"),a(null),e(""),n()},S=()=>{i("name"),a(null),u(""),e(""),n()};return d.jsx(Tf,{mode:"medical",componentName:"InputSearch",showEmergencyInfo:!0,children:d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Buscar Alergias"}),d.jsx("p",{className:"text-muted-foreground dark:text-gray-300",children:"Consulta si un alimento es alergnico para Blanca"})]}),d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Zc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground dark:text-gray-400 h-4 w-4"}),d.jsx(fp,{type:"text",placeholder:r==="category"?`Buscando en categora: ${s}...`:"Escribe el nombre de un alimento...",value:c,onChange:w,className:"pl-10 pr-10 h-12 text-base"}),c&&d.jsx(Nn,{variant:"ghost",size:"sm",onClick:j,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",children:""})]}),r==="name"&&c.length>0&&c.length<=mf&&d.jsxs("p",{className:"text-sm text-muted-foreground dark:text-gray-300 mt-2",children:["Escribe al menos ",mf+1," caracteres para buscar..."]})]}),!y&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Buscar por categora:"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",role:"tablist","aria-label":"Categoras de alergias",children:Yj.map(_=>d.jsx(Nn,{variant:"outline",size:"sm",onClick:()=>v(_),role:"tab","aria-selected":s===_.toLowerCase(),"aria-controls":"search-results",className:"justify-start text-sm",children:_},_))})]}),y&&d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx(Ir,{variant:r==="category"?"default":"outline",children:r==="category"?`Categora: ${s}`:"Bsqueda por nombre"}),r==="category"&&d.jsxs(Nn,{variant:"ghost",size:"sm",onClick:S,className:"text-sm",children:[d.jsx(t2,{className:"h-4 w-4 mr-1"}),"Buscar por nombre"]})]}),y&&d.jsx("div",{className:"space-y-4",children:p.length>0?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("h2",{className:"text-xl font-semibold text-foreground",children:[r==="category"?"Alimentos en esta categora":"Resultados"," (",p.length,")"]}),r==="category"&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(Ir,{variant:"destructive",children:["Alrgicos: ",p.filter(_=>_.isAlergic).length]}),d.jsxs(Ir,{variant:"secondary",children:["Seguros: ",p.filter(_=>!_.isAlergic).length]})]}),r==="name"&&d.jsx(Ir,{variant:"outline",children:"Alrgico: S"})]}),r==="category"?d.jsxs("div",{className:"space-y-6",children:[p.filter(_=>_.isAlergic).length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-purple-600 dark:text-purple-400 mb-3",children:" NO PUEDE COMER - Alrgico"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.filter(_=>_.isAlergic).map((_,I)=>d.jsx(wy,{allergy:_,showCategoryInfo:!1},`alergic-${I}`))})]}),p.filter(_=>!_.isAlergic).length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-teal-600 dark:text-teal-400 mb-3",children:" S PUEDE COMER - Seguro"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.filter(_=>!_.isAlergic).map((_,I)=>d.jsx(wy,{allergy:_,showCategoryInfo:!1},`safe-${I}`))})]})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map((_,I)=>d.jsx(wy,{allergy:_},I))})]}):d.jsx(En,{className:"text-center p-8",children:d.jsxs(Ln,{className:"space-y-4",children:[d.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:d.jsx(W6,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-green-800 dark:text-green-200",children:r==="category"?"Categora segura":"Buena noticia!"}),d.jsx("p",{className:"text-muted-foreground dark:text-gray-300",children:r==="category"?`Blanca no tiene alergias en la categora ${s}`:d.jsxs(d.Fragment,{children:["Blanca no es alrgica a ",d.jsx("strong",{children:c})]})})]})]})})})]})})}const n2=O.createContext({});function r2(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const i2=typeof window<"u",PE=i2?O.useLayoutEffect:O.useEffect,Hg=O.createContext(null);function s2(t,e){t.indexOf(e)===-1&&t.push(e)}function o2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const nc=(t,e,n)=>n>e?e:n<t?t:n;let a2=()=>{};const rc={},RE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function jE(t){return typeof t=="object"&&t!==null}const LE=t=>/^0[^.\s]+$/u.test(t);function l2(t){let e;return()=>(e===void 0&&(e=t()),e)}const aa=t=>t,Xj=(t,e)=>n=>e(t(n)),mp=(...t)=>t.reduce(Xj),Gf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class c2{constructor(){this.subscriptions=[]}add(e){return s2(this.subscriptions,e),()=>o2(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dl=t=>t*1e3,oa=t=>t/1e3;function DE(t,e){return e?t*(1e3/e):0}const ME=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Jj=1e-7,Zj=12;function eL(t,e,n,r,i){let s,a,c=0;do a=e+(n-e)/2,s=ME(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>Jj&&++c<Zj);return a}function gp(t,e,n,r){if(t===e&&n===r)return aa;const i=s=>eL(s,0,1,t,n);return s=>s===0||s===1?s:ME(i(s),e,r)}const OE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,FE=t=>e=>1-t(1-e),VE=gp(.33,1.53,.69,.99),u2=FE(VE),UE=OE(u2),BE=t=>(t*=2)<1?.5*u2(t):.5*(2-Math.pow(2,-10*(t-1))),d2=t=>1-Math.sin(Math.acos(t)),zE=FE(d2),qE=OE(d2),tL=gp(.42,0,1,1),nL=gp(0,0,.58,1),$E=gp(.42,0,.58,1),rL=t=>Array.isArray(t)&&typeof t[0]!="number",HE=t=>Array.isArray(t)&&typeof t[0]=="number",iL={linear:aa,easeIn:tL,easeInOut:$E,easeOut:nL,circIn:d2,circInOut:qE,circOut:zE,backIn:u2,backInOut:UE,backOut:VE,anticipate:BE},sL=t=>typeof t=="string",Dw=t=>{if(HE(t)){a2(t.length===4);const[e,n,r,i]=t;return gp(e,n,r,i)}else if(sL(t))return iL[t];return t},xm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oL(t,e){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(p){a.has(p)&&(h.schedule(p),t()),p(c)}const h={schedule:(p,y=!1,w=!1)=>{const j=w&&i?n:r;return y&&a.add(p),j.has(p)||j.add(p),p},cancel:p=>{r.delete(p),a.delete(p)},process:p=>{if(c=p,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,h.process(p))}};return h}const aL=40;function WE(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=xm.reduce((z,$)=>(z[$]=oL(s),z),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:p,update:y,preRender:w,render:v,postRender:j}=a,S=()=>{const z=rc.useManualTiming?i.timestamp:performance.now();n=!1,rc.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(z-i.timestamp,aL),1)),i.timestamp=z,i.isProcessing=!0,c.process(i),u.process(i),h.process(i),p.process(i),y.process(i),w.process(i),v.process(i),j.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(S))},_=()=>{n=!0,r=!0,i.isProcessing||t(S)};return{schedule:xm.reduce((z,$)=>{const J=a[$];return z[$]=(le,q=!1,E=!1)=>(n||_(),J.schedule(le,q,E)),z},{}),cancel:z=>{for(let $=0;$<xm.length;$++)a[xm[$]].cancel(z)},state:i,steps:a}}const{schedule:Pr,cancel:eu,state:os,steps:_y}=WE(typeof requestAnimationFrame<"u"?requestAnimationFrame:aa,!0);let $m;function lL(){$m=void 0}const po={now:()=>($m===void 0&&po.set(os.isProcessing||rc.useManualTiming?os.timestamp:performance.now()),$m),set:t=>{$m=t,queueMicrotask(lL)}},GE=t=>e=>typeof e=="string"&&e.startsWith(t),h2=GE("--"),cL=GE("var(--"),f2=t=>cL(t)?uL.test(t.split("/*")[0].trim()):!1,uL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ih={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Kf={...Ih,transform:t=>nc(0,1,t)},bm={...Ih,default:1},kf=t=>Math.round(t*1e5)/1e5,p2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dL(t){return t==null}const hL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,m2=(t,e)=>n=>!!(typeof n=="string"&&hL.test(n)&&n.startsWith(t)||e&&!dL(n)&&Object.prototype.hasOwnProperty.call(n,e)),KE=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,c]=r.match(p2);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},fL=t=>nc(0,255,t),Ay={...Ih,transform:t=>Math.round(fL(t))},Ou={test:m2("rgb","red"),parse:KE("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ay.transform(t)+", "+Ay.transform(e)+", "+Ay.transform(n)+", "+kf(Kf.transform(r))+")"};function pL(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Dv={test:m2("#"),parse:pL,transform:Ou.transform},yp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Uc=yp("deg"),hl=yp("%"),Wt=yp("px"),mL=yp("vh"),gL=yp("vw"),Mw={...hl,parse:t=>hl.parse(t)/100,transform:t=>hl.transform(t*100)},Kd={test:m2("hsl","hue"),parse:KE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+hl.transform(kf(e))+", "+hl.transform(kf(n))+", "+kf(Kf.transform(r))+")"},wi={test:t=>Ou.test(t)||Dv.test(t)||Kd.test(t),parse:t=>Ou.test(t)?Ou.parse(t):Kd.test(t)?Kd.parse(t):Dv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ou.transform(t):Kd.transform(t),getAnimatableNone:t=>{const e=wi.parse(t);return e.alpha=0,wi.transform(e)}},yL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vL(t){return isNaN(t)&&typeof t=="string"&&(t.match(p2)?.length||0)+(t.match(yL)?.length||0)>0}const YE="number",QE="color",xL="var",bL="var(",Ow="${}",wL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const c=e.replace(wL,u=>(wi.test(u)?(r.color.push(s),i.push(QE),n.push(wi.parse(u))):u.startsWith(bL)?(r.var.push(s),i.push(xL),n.push(u)):(r.number.push(s),i.push(YE),n.push(parseFloat(u))),++s,Ow)).split(Ow);return{values:n,split:c,indexes:r,types:i}}function XE(t){return Yf(t).values}function JE(t){const{split:e,types:n}=Yf(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const c=n[a];c===YE?s+=kf(i[a]):c===QE?s+=wi.transform(i[a]):s+=i[a]}return s}}const _L=t=>typeof t=="number"?0:wi.test(t)?wi.getAnimatableNone(t):t;function AL(t){const e=XE(t);return JE(t)(e.map(_L))}const tu={test:vL,parse:XE,createTransformer:JE,getAnimatableNone:AL};function Ny(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function NL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=Ny(u,c,t+1/3),s=Ny(u,c,t),a=Ny(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function hg(t,e){return n=>n>0?e:t}const Vr=(t,e,n)=>t+(e-t)*n,Ey=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},EL=[Dv,Ou,Kd],SL=t=>EL.find(e=>e.test(t));function Fw(t){const e=SL(t);if(!e)return!1;let n=e.parse(t);return e===Kd&&(n=NL(n)),n}const Vw=(t,e)=>{const n=Fw(t),r=Fw(e);if(!n||!r)return hg(t,e);const i={...n};return s=>(i.red=Ey(n.red,r.red,s),i.green=Ey(n.green,r.green,s),i.blue=Ey(n.blue,r.blue,s),i.alpha=Vr(n.alpha,r.alpha,s),Ou.transform(i))},Mv=new Set(["none","hidden"]);function TL(t,e){return Mv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function kL(t,e){return n=>Vr(t,e,n)}function g2(t){return typeof t=="number"?kL:typeof t=="string"?f2(t)?hg:wi.test(t)?Vw:PL:Array.isArray(t)?ZE:typeof t=="object"?wi.test(t)?Vw:CL:hg}function ZE(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>g2(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function CL(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=g2(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function IL(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=t.indexes[s][r[s]],c=t.values[a]??0;n[i]=c,r[s]++}return n}const PL=(t,e)=>{const n=tu.createTransformer(e),r=Yf(t),i=Yf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Mv.has(t)&&!i.values.length||Mv.has(e)&&!r.values.length?TL(t,e):mp(ZE(IL(r,i),i.values),n):hg(t,e)};function eS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Vr(t,e,n):g2(t)(t,e)}const RL=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Pr.update(e,n),stop:()=>eu(e),now:()=>os.isProcessing?os.timestamp:po.now()}},tS=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},fg=2e4;function y2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<fg;)e+=n,r=t.next(e);return e>=fg?1/0:e}function jL(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(y2(r),fg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:oa(i)}}const LL=5;function nS(t,e,n){const r=Math.max(e-LL,0);return DE(n-t(r),e-r)}const Yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Sy=.001;function DL({duration:t=Yr.duration,bounce:e=Yr.bounce,velocity:n=Yr.velocity,mass:r=Yr.mass}){let i,s,a=1-e;a=nc(Yr.minDamping,Yr.maxDamping,a),t=nc(Yr.minDuration,Yr.maxDuration,oa(t)),a<1?(i=h=>{const p=h*a,y=p*t,w=p-n,v=Ov(h,a),j=Math.exp(-y);return Sy-w/v*j},s=h=>{const y=h*a*t,w=y*n+n,v=Math.pow(a,2)*Math.pow(h,2)*t,j=Math.exp(-y),S=Ov(Math.pow(h,2),a);return(-i(h)+Sy>0?-1:1)*((w-v)*j)/S}):(i=h=>{const p=Math.exp(-h*t),y=(h-n)*t+1;return-Sy+p*y},s=h=>{const p=Math.exp(-h*t),y=(n-h)*(t*t);return p*y});const c=5/t,u=OL(i,s,c);if(t=dl(t),isNaN(u))return{stiffness:Yr.stiffness,damping:Yr.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:t}}}const ML=12;function OL(t,e,n){let r=n;for(let i=1;i<ML;i++)r=r-t(r)/e(r);return r}function Ov(t,e){return t*Math.sqrt(1-e*e)}const FL=["duration","bounce"],VL=["stiffness","damping","mass"];function Uw(t,e){return e.some(n=>t[n]!==void 0)}function UL(t){let e={velocity:Yr.velocity,stiffness:Yr.stiffness,damping:Yr.damping,mass:Yr.mass,isResolvedFromDuration:!1,...t};if(!Uw(t,VL)&&Uw(t,FL))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*nc(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Yr.mass,stiffness:i,damping:s}}else{const n=DL(t);e={...e,...n,mass:Yr.mass},e.isResolvedFromDuration=!0}return e}function pg(t=Yr.visualDuration,e=Yr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],c={done:!1,value:s},{stiffness:u,damping:h,mass:p,duration:y,velocity:w,isResolvedFromDuration:v}=UL({...n,velocity:-oa(n.velocity||0)}),j=w||0,S=h/(2*Math.sqrt(u*p)),_=a-s,I=oa(Math.sqrt(u/p)),V=Math.abs(_)<5;r||(r=V?Yr.restSpeed.granular:Yr.restSpeed.default),i||(i=V?Yr.restDelta.granular:Yr.restDelta.default);let z;if(S<1){const J=Ov(I,S);z=le=>{const q=Math.exp(-S*I*le);return a-q*((j+S*I*_)/J*Math.sin(J*le)+_*Math.cos(J*le))}}else if(S===1)z=J=>a-Math.exp(-I*J)*(_+(j+I*_)*J);else{const J=I*Math.sqrt(S*S-1);z=le=>{const q=Math.exp(-S*I*le),E=Math.min(J*le,300);return a-q*((j+S*I*_)*Math.sinh(E)+J*_*Math.cosh(E))/J}}const $={calculatedDuration:v&&y||null,next:J=>{const le=z(J);if(v)c.done=J>=y;else{let q=J===0?j:0;S<1&&(q=J===0?dl(j):nS(z,J,le));const E=Math.abs(q)<=r,T=Math.abs(a-le)<=i;c.done=E&&T}return c.value=c.done?a:le,c},toString:()=>{const J=Math.min(y2($),fg),le=tS(q=>$.next(J*q).value,J,30);return J+"ms "+le},toTransition:()=>{}};return $}pg.applyToOptions=t=>{const e=jL(t,100,pg);return t.ease=e.ease,t.duration=dl(e.duration),t.type="keyframes",t};function Fv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:c,max:u,restDelta:h=.5,restSpeed:p}){const y=t[0],w={done:!1,value:y},v=E=>c!==void 0&&E<c||u!==void 0&&E>u,j=E=>c===void 0?u:u===void 0||Math.abs(c-E)<Math.abs(u-E)?c:u;let S=n*e;const _=y+S,I=a===void 0?_:a(_);I!==_&&(S=I-y);const V=E=>-S*Math.exp(-E/r),z=E=>I+V(E),$=E=>{const T=V(E),U=z(E);w.done=Math.abs(T)<=h,w.value=w.done?I:U};let J,le;const q=E=>{v(w.value)&&(J=E,le=pg({keyframes:[w.value,j(w.value)],velocity:nS(z,E,w.value),damping:i,stiffness:s,restDelta:h,restSpeed:p}))};return q(0),{calculatedDuration:null,next:E=>{let T=!1;return!le&&J===void 0&&(T=!0,$(E),q(E)),J!==void 0&&E>=J?le.next(E-J):(!T&&$(E),w)}}}function BL(t,e,n){const r=[],i=n||rc.mix||eS,s=t.length-1;for(let a=0;a<s;a++){let c=i(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||aa:e;c=mp(u,c)}r.push(c)}return r}function zL(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(a2(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=BL(e,r,i),u=c.length,h=p=>{if(a&&p<t[0])return e[0];let y=0;if(u>1)for(;y<t.length-2&&!(p<t[y+1]);y++);const w=Gf(t[y],t[y+1],p);return c[y](w)};return n?p=>h(nc(t[0],t[s-1],p)):h}function qL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Gf(0,e,r);t.push(Vr(n,1,i))}}function $L(t){const e=[0];return qL(e,t.length-1),e}function HL(t,e){return t.map(n=>n*e)}function WL(t,e){return t.map(()=>e||$E).splice(0,t.length-1)}function Cf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=rL(r)?r.map(Dw):Dw(r),s={done:!1,value:e[0]},a=HL(n&&n.length===e.length?n:$L(e),t),c=zL(a,e,{ease:Array.isArray(i)?i:WL(e,i)});return{calculatedDuration:t,next:u=>(s.value=c(u),s.done=u>=t,s)}}const GL=t=>t!==null;function v2(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(GL),c=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!c||r===void 0?s[c]:r}const KL={decay:Fv,inertia:Fv,tween:Cf,keyframes:Cf,spring:pg};function rS(t){typeof t.type=="string"&&(t.type=KL[t.type])}class x2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const YL=t=>t/100;class b2 extends x2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==po.now()&&this.tick(po.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;rS(e);const{type:n=Cf,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:c}=e;const u=n||Cf;u!==Cf&&typeof c[0]!="number"&&(this.mixKeyframes=mp(YL,eS(c[0],c[1])),c=[0,100]);const h=u({...e,keyframes:c});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=y2(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:p,repeat:y,repeatType:w,repeatDelay:v,type:j,onUpdate:S,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const I=this.currentTime-h*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?I<0:I>i;this.currentTime=Math.max(I,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let z=this.currentTime,$=r;if(y){const E=Math.min(this.currentTime,i)/c;let T=Math.floor(E),U=E%1;!U&&E>=1&&(U=1),U===1&&T--,T=Math.min(T,y+1),!!(T%2)&&(w==="reverse"?(U=1-U,v&&(U-=v/c)):w==="mirror"&&($=a)),z=nc(0,1,U)*c}const J=V?{done:!1,value:p[0]}:$.next(z);s&&(J.value=s(J.value));let{done:le}=J;!V&&u!==null&&(le=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&le);return q&&j!==Fv&&(J.value=v2(p,this.options,_,this.speed)),S&&S(J.value),q&&this.finish(),J}then(e,n){return this.finished.then(e,n)}get duration(){return oa(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+oa(e)}get time(){return oa(this.currentTime)}set time(e){e=dl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(po.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=oa(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=RL,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(po.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function QL(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Fu=t=>t*180/Math.PI,Vv=t=>{const e=Fu(Math.atan2(t[1],t[0]));return Uv(e)},XL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Vv,rotateZ:Vv,skewX:t=>Fu(Math.atan(t[1])),skewY:t=>Fu(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Uv=t=>(t=t%360,t<0&&(t+=360),t),Bw=Vv,zw=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),qw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),JL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zw,scaleY:qw,scale:t=>(zw(t)+qw(t))/2,rotateX:t=>Uv(Fu(Math.atan2(t[6],t[5]))),rotateY:t=>Uv(Fu(Math.atan2(-t[2],t[0]))),rotateZ:Bw,rotate:Bw,skewX:t=>Fu(Math.atan(t[4])),skewY:t=>Fu(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Bv(t){return t.includes("scale")?1:0}function zv(t,e){if(!t||t==="none")return Bv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=JL,i=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=XL,i=c}if(!i)return Bv(e);const s=r[e],a=i[1].split(",").map(eD);return typeof s=="function"?s(a):a[s]}const ZL=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return zv(n,e)};function eD(t){return parseFloat(t.trim())}const Ph=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rh=new Set(Ph),$w=t=>t===Ih||t===Wt,tD=new Set(["x","y","z"]),nD=Ph.filter(t=>!tD.has(t));function rD(t){const e=[];return nD.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const zu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>zv(e,"x"),y:(t,{transform:e})=>zv(e,"y")};zu.translateX=zu.x;zu.translateY=zu.y;const qu=new Set;let qv=!1,$v=!1,Hv=!1;function iS(){if($v){const t=Array.from(qu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=rD(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{r.getValue(s)?.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}$v=!1,qv=!1,qu.forEach(t=>t.complete(Hv)),qu.clear()}function sS(){qu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&($v=!0)})}function iD(){Hv=!0,sS(),iS(),Hv=!1}class w2{constructor(e,n,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(qu.add(this),qv||(qv=!0,Pr.read(sS),Pr.resolveKeyframes(iS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const c=r.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}QL(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qu.delete(this)}cancel(){this.state==="scheduled"&&(qu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sD=t=>t.startsWith("--");function oD(t,e,n){sD(e)?t.style.setProperty(e,n):t.style[e]=n}const aD=l2(()=>window.ScrollTimeline!==void 0),lD={};function cD(t,e){const n=l2(t);return()=>lD[e]??n()}const oS=cD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wf=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Hw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wf([0,.65,.55,1]),circOut:wf([.55,0,1,.45]),backIn:wf([.31,.01,.66,-.59]),backOut:wf([.33,1.53,.69,.99])};function aS(t,e){if(t)return typeof t=="function"?oS()?tS(t,e):"ease-out":HE(t)?wf(t):Array.isArray(t)?t.map(n=>aS(n,e)||Hw.easeOut):Hw[t]}function uD(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:c="easeOut",times:u}={},h=void 0){const p={[e]:n};u&&(p.offset=u);const y=aS(c,i);Array.isArray(y)&&(p.easing=y);const w={delay:r,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return h&&(w.pseudoElement=h),t.animate(p,w)}function lS(t){return typeof t=="function"&&"applyToOptions"in t}function dD({type:t,...e}){return lS(t)&&oS()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class hD extends x2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,a2(typeof e.type!="string");const h=dD(e);this.animation=uD(n,r,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const p=v2(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):oD(n,r,p),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return oa(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+oa(e)}get time(){return oa(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=dl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&aD()?(this.animation.timeline=e,aa):n(this)}}const cS={anticipate:BE,backInOut:UE,circInOut:qE};function fD(t){return t in cS}function pD(t){typeof t.ease=="string"&&fD(t.ease)&&(t.ease=cS[t.ease])}const Ww=10;class mD extends hD{constructor(e){pD(e),rS(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new b2({...a,autoplay:!1}),u=dl(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-Ww).value,c.sample(u).value,Ww),c.stop()}}const Gw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(tu.test(t)||t==="0")&&!t.startsWith("url("));function gD(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yD(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=Gw(i,e),c=Gw(s,e);return!a||!c?!1:gD(t)||(n==="spring"||lS(n))&&r}function Wv(t){t.duration=0,t.type="keyframes"}const vD=new Set(["opacity","clipPath","filter","transform"]),xD=l2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function bD(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return xD()&&n&&vD.has(n)&&(n!=="transform"||!h)&&!u&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const wD=40;class _D extends x2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:c,name:u,motionValue:h,element:p,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=po.now();const w={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:u,motionValue:h,element:p,...y},v=p?.KeyframeResolver||w2;this.keyframeResolver=new v(c,(j,S,_)=>this.onKeyframesResolved(j,S,w,!_),u,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:c,delay:u,isHandoff:h,onUpdate:p}=r;this.resolvedAt=po.now(),yD(e,s,a,c)||((rc.instantAnimations||!u)&&p?.(v2(e,r,n)),e[0]=e[e.length-1],Wv(r),r.repeat=0);const w={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>wD?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!h&&bD(w)?new mD({...w,element:w.motionValue.owner.current}):new b2(w);v.finished.then(()=>this.notifyFinished()).catch(aa),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),iD()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const AD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ND(t){const e=AD.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function uS(t,e,n=1){const[r,i]=ND(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return RE(a)?parseFloat(a):a}return f2(i)?uS(i,e,n+1):i}function _2(t,e){return t?.[e]??t?.default??t}const dS=new Set(["width","height","top","left","right","bottom",...Ph]),ED={test:t=>t==="auto",parse:t=>t},hS=t=>e=>e.test(t),fS=[Ih,Wt,hl,Uc,gL,mL,ED],Kw=t=>fS.find(hS(t));function SD(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LE(t):!0}const TD=new Set(["brightness","contrast","saturate","opacity"]);function kD(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(p2)||[];if(!r)return t;const i=n.replace(r,"");let s=TD.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const CD=/\b([a-z-]*)\(.*?\)/gu,Gv={...tu,getAnimatableNone:t=>{const e=t.match(CD);return e?e.map(kD).join(" "):t}},Yw={...Ih,transform:Math.round},ID={rotate:Uc,rotateX:Uc,rotateY:Uc,rotateZ:Uc,scale:bm,scaleX:bm,scaleY:bm,scaleZ:bm,skew:Uc,skewX:Uc,skewY:Uc,distance:Wt,translateX:Wt,translateY:Wt,translateZ:Wt,x:Wt,y:Wt,z:Wt,perspective:Wt,transformPerspective:Wt,opacity:Kf,originX:Mw,originY:Mw,originZ:Wt},A2={borderWidth:Wt,borderTopWidth:Wt,borderRightWidth:Wt,borderBottomWidth:Wt,borderLeftWidth:Wt,borderRadius:Wt,radius:Wt,borderTopLeftRadius:Wt,borderTopRightRadius:Wt,borderBottomRightRadius:Wt,borderBottomLeftRadius:Wt,width:Wt,maxWidth:Wt,height:Wt,maxHeight:Wt,top:Wt,right:Wt,bottom:Wt,left:Wt,padding:Wt,paddingTop:Wt,paddingRight:Wt,paddingBottom:Wt,paddingLeft:Wt,margin:Wt,marginTop:Wt,marginRight:Wt,marginBottom:Wt,marginLeft:Wt,backgroundPositionX:Wt,backgroundPositionY:Wt,...ID,zIndex:Yw,fillOpacity:Kf,strokeOpacity:Kf,numOctaves:Yw},PD={...A2,color:wi,backgroundColor:wi,outlineColor:wi,fill:wi,stroke:wi,borderColor:wi,borderTopColor:wi,borderRightColor:wi,borderBottomColor:wi,borderLeftColor:wi,filter:Gv,WebkitFilter:Gv},pS=t=>PD[t];function mS(t,e){let n=pS(t);return n!==Gv&&(n=tu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const RD=new Set(["auto","none","0"]);function jD(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!RD.has(s)&&Yf(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=mS(n,i)}class LD extends w2{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),f2(h))){const p=uS(h,n.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!dS.has(r)||e.length!==2)return;const[i,s]=e,a=Kw(i),c=Kw(s);if(a!==c)if($w(a)&&$w(c))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else zu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||SD(e[i]))&&r.push(i);r.length&&jD(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=zu[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function DD(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const gS=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function yS(t){return jE(t)&&"offsetHeight"in t}const Qw=30,MD=t=>!isNaN(parseFloat(t));class OD{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=po.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=po.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=MD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new c2);const r=this.events[e].add(n);return e==="change"?()=>{r(),Pr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=po.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Qw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Qw);return DE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ph(t,e){return new OD(t,e)}const{schedule:N2}=WE(queueMicrotask,!1),Ra={x:!1,y:!1};function vS(){return Ra.x||Ra.y}function FD(t){return t==="x"||t==="y"?Ra[t]?null:(Ra[t]=!0,()=>{Ra[t]=!1}):Ra.x||Ra.y?null:(Ra.x=Ra.y=!0,()=>{Ra.x=Ra.y=!1})}function xS(t,e){const n=DD(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Xw(t){return!(t.pointerType==="touch"||vS())}function VD(t,e,n={}){const[r,i,s]=xS(t,n),a=c=>{if(!Xw(c))return;const{target:u}=c,h=e(u,c);if(typeof h!="function"||!u)return;const p=y=>{Xw(y)&&(h(y),u.removeEventListener("pointerleave",p))};u.addEventListener("pointerleave",p,i)};return r.forEach(c=>{c.addEventListener("pointerenter",a,i)}),s}const bS=(t,e)=>e?t===e?!0:bS(t,e.parentElement):!1,E2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,UD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BD(t){return UD.has(t.tagName)||t.tabIndex!==-1}const Hm=new WeakSet;function Jw(t){return e=>{e.key==="Enter"&&t(e)}}function Ty(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zD=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Jw(()=>{if(Hm.has(n))return;Ty(n,"down");const i=Jw(()=>{Ty(n,"up")}),s=()=>Ty(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Zw(t){return E2(t)&&!vS()}function qD(t,e,n={}){const[r,i,s]=xS(t,n),a=c=>{const u=c.currentTarget;if(!Zw(c))return;Hm.add(u);const h=e(u,c),p=(v,j)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",w),Hm.has(u)&&Hm.delete(u),Zw(v)&&typeof h=="function"&&h(v,{success:j})},y=v=>{p(v,u===window||u===document||n.useGlobalTarget||bS(u,v.target))},w=v=>{p(v,!1)};window.addEventListener("pointerup",y,i),window.addEventListener("pointercancel",w,i)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",a,i),yS(c)&&(c.addEventListener("focus",h=>zD(h,i)),!BD(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),s}function wS(t){return jE(t)&&"ownerSVGElement"in t}function $D(t){return wS(t)&&t.tagName==="svg"}const Ds=t=>!!(t&&t.getVelocity),HD=[...fS,wi,tu],WD=t=>HD.find(hS(t)),S2=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function e5(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function GD(...t){return e=>{let n=!1;const r=t.map(i=>{const s=e5(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():e5(t[i],null)}}}}function KD(...t){return O.useCallback(GD(...t),t)}class YD extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=yS(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function QD({children:t,isPresent:e,anchorX:n,root:r}){const i=O.useId(),s=O.useRef(null),a=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=O.useContext(S2),u=KD(s,t?.ref);return O.useInsertionEffect(()=>{const{width:h,height:p,top:y,left:w,right:v}=a.current;if(e||!s.current||!h||!p)return;const j=n==="left"?`left: ${w}`:`right: ${v}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");c&&(S.nonce=c);const _=r??document.head;return _.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${p}px !important;
            ${j}px !important;
            top: ${y}px !important;
          }
        `),()=>{_.contains(S)&&_.removeChild(S)}},[e]),d.jsx(YD,{isPresent:e,childRef:s,sizeRef:a,children:O.cloneElement(t,{ref:u})})}const XD=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:c,root:u})=>{const h=r2(JD),p=O.useId();let y=!0,w=O.useMemo(()=>(y=!1,{id:p,initial:e,isPresent:n,custom:i,onExitComplete:v=>{h.set(v,!0);for(const j of h.values())if(!j)return;r&&r()},register:v=>(h.set(v,!1),()=>h.delete(v))}),[n,h,r]);return s&&y&&(w={...w}),O.useMemo(()=>{h.forEach((v,j)=>h.set(j,!1))},[n]),O.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),a==="popLayout"&&(t=d.jsx(QD,{isPresent:n,anchorX:c,root:u,children:t})),d.jsx(Hg.Provider,{value:w,children:t})};function JD(){return new Map}function _S(t=!0){const e=O.useContext(Hg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=O.useId();O.useEffect(()=>{if(t)return i(s)},[t]);const a=O.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const wm=t=>t.key||"";function t5(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const Kv=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:c="left",root:u})=>{const[h,p]=_S(a),y=O.useMemo(()=>t5(t),[t]),w=a&&!h?[]:y.map(wm),v=O.useRef(!0),j=O.useRef(y),S=r2(()=>new Map),[_,I]=O.useState(y),[V,z]=O.useState(y);PE(()=>{v.current=!1,j.current=y;for(let le=0;le<V.length;le++){const q=wm(V[le]);w.includes(q)?S.delete(q):S.get(q)!==!0&&S.set(q,!1)}},[V,w.length,w.join("-")]);const $=[];if(y!==_){let le=[...y];for(let q=0;q<V.length;q++){const E=V[q],T=wm(E);w.includes(T)||(le.splice(q,0,E),$.push(E))}return s==="wait"&&$.length&&(le=$),z(t5(le)),I(y),null}const{forceRender:J}=O.useContext(n2);return d.jsx(d.Fragment,{children:V.map(le=>{const q=wm(le),E=a&&!h?!1:y===V||w.includes(q),T=()=>{if(S.has(q))S.set(q,!0);else return;let U=!0;S.forEach(C=>{C||(U=!1)}),U&&(J?.(),z(j.current),a&&p?.(),r&&r())};return d.jsx(XD,{isPresent:E,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:E?void 0:T,anchorX:c,children:le},q)})})},AS=O.createContext({strict:!1}),n5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mh={};for(const t in n5)mh[t]={isEnabled:e=>n5[t].some(n=>!!e[n])};function ZD(t){for(const e in t)mh[e]={...mh[e],...t[e]}}const e8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||e8.has(t)}let NS=t=>!mg(t);function t8(t){typeof t=="function"&&(NS=e=>e.startsWith("on")?!mg(e):t(e))}try{t8(require("@emotion/is-prop-valid").default)}catch{}function n8(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(NS(i)||n===!0&&mg(i)||!e&&!mg(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Wg=O.createContext({});function Gg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Qf(t){return typeof t=="string"||Array.isArray(t)}const T2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],k2=["initial",...T2];function Kg(t){return Gg(t.animate)||k2.some(e=>Qf(t[e]))}function ES(t){return!!(Kg(t)||t.variants)}function r8(t,e){if(Kg(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Qf(n)?n:void 0,animate:Qf(r)?r:void 0}}return t.inherit!==!1?e:{}}function i8(t){const{initial:e,animate:n}=r8(t,O.useContext(Wg));return O.useMemo(()=>({initial:e,animate:n}),[r5(e),r5(n)])}function r5(t){return Array.isArray(t)?t.join(" "):t}const Xf={};function s8(t){for(const e in t)Xf[e]=t[e],h2(e)&&(Xf[e].isCSSVariable=!0)}function SS(t,{layout:e,layoutId:n}){return Rh.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Xf[t]||t==="opacity")}const o8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},a8=Ph.length;function l8(t,e,n){let r="",i=!0;for(let s=0;s<a8;s++){const a=Ph[s],c=t[a];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(a.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=gS(c,A2[a]);if(!u){i=!1;const p=o8[a]||a;r+=`${p}(${h}) `}n&&(e[a]=h)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function C2(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,c=!1;for(const u in e){const h=e[u];if(Rh.has(u)){a=!0;continue}else if(h2(u)){i[u]=h;continue}else{const p=gS(h,A2[u]);u.startsWith("origin")?(c=!0,s[u]=p):r[u]=p}}if(e.transform||(a||n?r.transform=l8(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:p=0}=s;r.transformOrigin=`${u} ${h} ${p}`}}const I2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TS(t,e,n){for(const r in e)!Ds(e[r])&&!SS(r,n)&&(t[r]=e[r])}function c8({transformTemplate:t},e){return O.useMemo(()=>{const n=I2();return C2(n,e,t),Object.assign({},n.vars,n.style)},[e])}function u8(t,e){const n=t.style||{},r={};return TS(r,n,t),Object.assign(r,c8(t,e)),r}function d8(t,e){const n={},r=u8(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const h8={offset:"stroke-dashoffset",array:"stroke-dasharray"},f8={offset:"strokeDashoffset",array:"strokeDasharray"};function p8(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?h8:f8;t[s.offset]=Wt.transform(-r);const a=Wt.transform(e),c=Wt.transform(n);t[s.array]=`${a} ${c}`}function kS(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...c},u,h,p){if(C2(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:w}=t;y.transform&&(w.transform=y.transform,delete y.transform),(w.transform||y.transformOrigin)&&(w.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),w.transform&&(w.transformBox=p?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),i!==void 0&&p8(y,i,s,a,!1)}const CS=()=>({...I2(),attrs:{}}),IS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function m8(t,e,n,r){const i=O.useMemo(()=>{const s=CS();return kS(s,e,IS(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};TS(s,t.style,t),i.style={...s,...i.style}}return i}const g8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function P2(t){return typeof t!="string"||t.includes("-")?!1:!!(g8.indexOf(t)>-1||/[A-Z]/u.test(t))}function y8(t,e,n,{latestValues:r},i,s=!1){const c=(P2(t)?m8:d8)(e,r,i,t),u=n8(e,typeof t=="string",s),h=t!==O.Fragment?{...u,...c,ref:n}:{},{children:p}=e,y=O.useMemo(()=>Ds(p)?p.get():p,[p]);return O.createElement(t,{...h,children:y})}function i5(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function R2(t,e,n,r){if(typeof e=="function"){const[i,s]=i5(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=i5(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Wm(t){return Ds(t)?t.get():t}function v8({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:x8(n,r,i,t),renderState:e()}}function x8(t,e,n,r){const i={},s=r(t,{});for(const w in s)i[w]=Wm(s[w]);let{initial:a,animate:c}=t;const u=Kg(t),h=ES(t);e&&h&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||a===!1;const y=p?c:a;if(y&&typeof y!="boolean"&&!Gg(y)){const w=Array.isArray(y)?y:[y];for(let v=0;v<w.length;v++){const j=R2(t,w[v]);if(j){const{transitionEnd:S,transition:_,...I}=j;for(const V in I){let z=I[V];if(Array.isArray(z)){const $=p?z.length-1:0;z=z[$]}z!==null&&(i[V]=z)}for(const V in S)i[V]=S[V]}}}return i}const PS=t=>(e,n)=>{const r=O.useContext(Wg),i=O.useContext(Hg),s=()=>v8(t,e,r,i);return n?s():r2(s)};function j2(t,e,n){const{style:r}=t,i={};for(const s in r)(Ds(r[s])||e.style&&Ds(e.style[s])||SS(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const b8=PS({scrapeMotionValuesFromProps:j2,createRenderState:I2});function RS(t,e,n){const r=j2(t,e,n);for(const i in t)if(Ds(t[i])||Ds(e[i])){const s=Ph.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const w8=PS({scrapeMotionValuesFromProps:RS,createRenderState:CS}),_8=Symbol.for("motionComponentSymbol");function Yd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function A8(t,e,n){return O.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yd(n)&&(n.current=r))},[e])}const L2=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),N8="framerAppearId",jS="data-"+L2(N8),LS=O.createContext({});function E8(t,e,n,r,i){const{visualElement:s}=O.useContext(Wg),a=O.useContext(AS),c=O.useContext(Hg),u=O.useContext(S2).reducedMotion,h=O.useRef(null);r=r||a.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const p=h.current,y=O.useContext(LS);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&S8(h.current,n,i,y);const w=O.useRef(!1);O.useInsertionEffect(()=>{p&&w.current&&p.update(n,c)});const v=n[jS],j=O.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return PE(()=>{p&&(w.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),j.current&&p.animationState&&p.animationState.animateChanges())}),O.useEffect(()=>{p&&(!j.current&&p.animationState&&p.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),j.current=!1),p.enteringChildren=void 0)}),p}function S8(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:DS(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||c&&Yd(c),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:u,layoutRoot:h})}function DS(t){if(t)return t.options.allowProjection!==!1?t.projection:DS(t.parent)}function ky(t,{forwardMotionProps:e=!1}={},n,r){n&&ZD(n);const i=P2(t)?w8:b8;function s(c,u){let h;const p={...O.useContext(S2),...c,layoutId:T8(c)},{isStatic:y}=p,w=i8(c),v=i(c,y);if(!y&&i2){k8();const j=C8(p);h=j.MeasureLayout,w.visualElement=E8(t,v,p,r,j.ProjectionNode)}return d.jsxs(Wg.Provider,{value:w,children:[h&&w.visualElement?d.jsx(h,{visualElement:w.visualElement,...p}):null,y8(t,c,A8(v,w.visualElement,u),v,y,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=O.forwardRef(s);return a[_8]=t,a}function T8({layoutId:t}){const e=O.useContext(n2).id;return e&&t!==void 0?e+"-"+t:t}function k8(t,e){O.useContext(AS).strict}function C8(t){const{drag:e,layout:n}=mh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function I8(t,e){if(typeof Proxy>"u")return ky;const n=new Map,r=(s,a)=>ky(s,a,t,e),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(n.has(a)||n.set(a,ky(a,void 0,t,e)),n.get(a))})}function MS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function P8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function R8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Cy(t){return t===void 0||t===1}function Yv({scale:t,scaleX:e,scaleY:n}){return!Cy(t)||!Cy(e)||!Cy(n)}function ju(t){return Yv(t)||OS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function OS(t){return s5(t.x)||s5(t.y)}function s5(t){return t&&t!=="0%"}function gg(t,e,n){const r=t-n,i=e*r;return n+i}function o5(t,e,n,r,i){return i!==void 0&&(t=gg(t,i,r)),gg(t,n,r)+e}function Qv(t,e=0,n=1,r,i){t.min=o5(t.min,e,n,r,i),t.max=o5(t.max,e,n,r,i)}function FS(t,{x:e,y:n}){Qv(t.x,e.translate,e.scale,e.originPoint),Qv(t.y,n.translate,n.scale,n.originPoint)}const a5=.999999999999,l5=1.0000000000001;function j8(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let c=0;c<i;c++){s=n[c],a=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xd(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,FS(t,a)),r&&ju(s.latestValues)&&Xd(t,s.latestValues))}e.x<l5&&e.x>a5&&(e.x=1),e.y<l5&&e.y>a5&&(e.y=1)}function Qd(t,e){t.min=t.min+e,t.max=t.max+e}function c5(t,e,n,r,i=.5){const s=Vr(t.min,t.max,i);Qv(t,e,n,s,r)}function Xd(t,e){c5(t.x,e.x,e.scaleX,e.scale,e.originX),c5(t.y,e.y,e.scaleY,e.scale,e.originY)}function VS(t,e){return MS(R8(t.getBoundingClientRect(),e))}function L8(t,e,n){const r=VS(t,n),{scroll:i}=e;return i&&(Qd(r.x,i.offset.x),Qd(r.y,i.offset.y)),r}const u5=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jd=()=>({x:u5(),y:u5()}),d5=()=>({min:0,max:0}),si=()=>({x:d5(),y:d5()}),Xv={current:null},US={current:!1};function D8(){if(US.current=!0,!!i2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Xv.current=t.matches;t.addEventListener("change",e),e()}else Xv.current=!1}const M8=new WeakMap;function O8(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Ds(i))t.addValue(r,i);else if(Ds(s))t.addValue(r,ph(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,ph(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const h5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class F8{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=w2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=po.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Pr.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=Kg(n),this.isVariantNode=ES(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in y){const v=y[w];u[w]!==void 0&&Ds(v)&&v.set(u[w])}}mount(e){this.current=e,M8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),US.current||D8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),eu(this.notifyUpdate),eu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Rh.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Pr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in mh){const n=mh[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):si()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<h5.length;r++){const i=h5[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=O8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ph(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(RE(r)||LE(r))?r=parseFloat(r):!WD(r)&&tu.test(n)&&(r=mS(e,n)),this.setBaseTarget(e,Ds(r)?r.get():r)),Ds(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=R2(this.props,n,this.presenceContext?.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ds(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new c2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){N2.render(this.render)}}class BS extends F8{constructor(){super(...arguments),this.KeyframeResolver=LD}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ds(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function zS(t,{style:e,vars:n},r,i){const s=t.style;let a;for(a in e)s[a]=e[a];i?.applyProjectionStyles(s,r);for(a in n)s.setProperty(a,n[a])}function V8(t){return window.getComputedStyle(t)}class U8 extends BS{constructor(){super(...arguments),this.type="html",this.renderInstance=zS}readValueFromInstance(e,n){if(Rh.has(n))return this.projection?.isProjecting?Bv(n):ZL(e,n);{const r=V8(e),i=(h2(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return VS(e,n)}build(e,n,r){C2(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return j2(e,n,r)}}const qS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function B8(t,e,n,r){zS(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(qS.has(i)?i:L2(i),e.attrs[i])}class z8 extends BS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=si}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Rh.has(n)){const r=pS(n);return r&&r.default||0}return n=qS.has(n)?n:L2(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return RS(e,n,r)}build(e,n,r){kS(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){B8(e,n,r,i)}mount(e){this.isSVGTag=IS(e.tagName),super.mount(e)}}const q8=(t,e)=>P2(t)?new z8(e):new U8(e,{allowProjection:t!==O.Fragment});function eh(t,e,n){const r=t.getProps();return R2(r,e,n!==void 0?n:r.custom,t)}const Jv=t=>Array.isArray(t);function $8(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ph(n))}function H8(t){return Jv(t)?t[t.length-1]||0:t}function W8(t,e){const n=eh(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const c=H8(s[a]);$8(t,a,c)}}function G8(t){return!!(Ds(t)&&t.add)}function Zv(t,e){const n=t.getValue("willChange");if(G8(n))return n.add(e);if(!n&&rc.WillChange){const r=new rc.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function $S(t){return t.props[jS]}const K8=t=>t!==null;function Y8(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(K8),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Q8={type:"spring",stiffness:500,damping:25,restSpeed:10},X8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),J8={type:"keyframes",duration:.8},Z8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eM=(t,{keyframes:e})=>e.length>2?J8:Rh.has(t)?t.startsWith("scale")?X8(e[1]):Q8:Z8;function tM({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:c,from:u,elapsed:h,...p}){return!!Object.keys(p).length}const D2=(t,e,n,r={},i,s)=>a=>{const c=_2(r,t)||{},u=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-dl(u);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:w=>{e.set(w),c.onUpdate&&c.onUpdate(w)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:s?void 0:i};tM(c)||Object.assign(p,eM(t,p)),p.duration&&(p.duration=dl(p.duration)),p.repeatDelay&&(p.repeatDelay=dl(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Wv(p),p.delay===0&&(y=!0)),(rc.instantAnimations||rc.skipAnimations)&&(y=!0,Wv(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,y&&!s&&e.get()!==void 0){const w=Y8(p.keyframes,c);if(w!==void 0){Pr.update(()=>{p.onUpdate(w),p.onComplete()});return}}return c.isSync?new b2(p):new _D(p)};function nM({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function HS(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(s=r);const u=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const p in c){const y=t.getValue(p,t.latestValues[p]??null),w=c[p];if(w===void 0||h&&nM(h,p))continue;const v={delay:n,..._2(s||{},p)},j=y.get();if(j!==void 0&&!y.isAnimating&&!Array.isArray(w)&&w===j&&!v.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const I=$S(t);if(I){const V=window.MotionHandoffAnimation(I,p,Pr);V!==null&&(v.startTime=V,S=!0)}}Zv(t,p),y.start(D2(p,y,w,t.shouldReduceMotion&&dS.has(p)?{type:!1}:v,t,S));const _=y.animation;_&&u.push(_)}return a&&Promise.all(u).then(()=>{Pr.update(()=>{a&&W8(t,a)})}),u}function WS(t,e,n,r=0,i=1){const s=Array.from(t).sort((h,p)=>h.sortNodePosition(p)).indexOf(e),a=t.size,c=(a-1)*r;return typeof n=="function"?n(s,a):i===1?s*r:c-s*r}function e1(t,e,n={}){const r=eh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(HS(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:y}=i;return rM(t,e,u,h,p,y,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,h]=c==="beforeChildren"?[s,a]:[a,s];return u().then(()=>h())}else return Promise.all([s(),a(n.delay)])}function rM(t,e,n=0,r=0,i=0,s=1,a){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(e1(u,e,{...a,delay:n+(typeof r=="function"?0:r)+WS(t.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function iM(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>e1(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=e1(t,e,n);else{const i=typeof e=="function"?eh(t,e,n.custom):e;r=Promise.all(HS(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function GS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const sM=k2.length;function KS(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?KS(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<sM;n++){const r=k2[n],i=t.props[r];(Qf(i)||i===!1)&&(e[r]=i)}return e}const oM=[...T2].reverse(),aM=T2.length;function lM(t){return e=>Promise.all(e.map(({animation:n,options:r})=>iM(t,n,r)))}function cM(t){let e=lM(t),n=f5(),r=!0;const i=u=>(h,p)=>{const y=eh(t,p,u==="exit"?t.presenceContext?.custom:void 0);if(y){const{transition:w,transitionEnd:v,...j}=y;h={...h,...j,...v}}return h};function s(u){e=u(t)}function a(u){const{props:h}=t,p=KS(t.parent)||{},y=[],w=new Set;let v={},j=1/0;for(let _=0;_<aM;_++){const I=oM[_],V=n[I],z=h[I]!==void 0?h[I]:p[I],$=Qf(z),J=I===u?V.isActive:null;J===!1&&(j=_);let le=z===p[I]&&z!==h[I]&&$;if(le&&r&&t.manuallyAnimateOnMount&&(le=!1),V.protectedKeys={...v},!V.isActive&&J===null||!z&&!V.prevProp||Gg(z)||typeof z=="boolean")continue;const q=uM(V.prevProp,z);let E=q||I===u&&V.isActive&&!le&&$||_>j&&$,T=!1;const U=Array.isArray(z)?z:[z];let C=U.reduce(i(I),{});J===!1&&(C={});const{prevResolvedValues:L={}}=V,D={...L,...C},ne=Z=>{E=!0,w.has(Z)&&(T=!0,w.delete(Z)),V.needsAnimating[Z]=!0;const Y=t.getValue(Z);Y&&(Y.liveStyle=!1)};for(const Z in D){const Y=C[Z],pe=L[Z];if(v.hasOwnProperty(Z))continue;let we=!1;Jv(Y)&&Jv(pe)?we=!GS(Y,pe):we=Y!==pe,we?Y!=null?ne(Z):w.add(Z):Y!==void 0&&w.has(Z)?ne(Z):V.protectedKeys[Z]=!0}V.prevProp=z,V.prevResolvedValues=C,V.isActive&&(v={...v,...C}),r&&t.blockInitialAnimation&&(E=!1);const se=le&&q;E&&(!se||T)&&y.push(...U.map(Z=>{const Y={type:I};if(typeof Z=="string"&&r&&!se&&t.manuallyAnimateOnMount&&t.parent){const{parent:pe}=t,we=eh(pe,Z);if(pe.enteringChildren&&we){const{delayChildren:ae}=we.transition||{};Y.delay=WS(pe.enteringChildren,t,ae)}}return{animation:Z,options:Y}}))}if(w.size){const _={};if(typeof h.initial!="boolean"){const I=eh(t,Array.isArray(h.initial)?h.initial[0]:h.initial);I&&I.transition&&(_.transition=I.transition)}w.forEach(I=>{const V=t.getBaseTarget(I),z=t.getValue(I);z&&(z.liveStyle=!0),_[I]=V??null}),y.push({animation:_})}let S=!!y.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(y):Promise.resolve()}function c(u,h){if(n[u].isActive===h)return Promise.resolve();t.variantChildren?.forEach(y=>y.animationState?.setActive(u,h)),n[u].isActive=h;const p=a(u);for(const y in n)n[y].protectedKeys={};return p}return{animateChanges:a,setActive:c,setAnimateFunction:s,getState:()=>n,reset:()=>{n=f5()}}}function uM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!GS(e,t):!1}function Ru(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function f5(){return{animate:Ru(!0),whileInView:Ru(),whileHover:Ru(),whileTap:Ru(),whileDrag:Ru(),whileFocus:Ru(),exit:Ru()}}class au{constructor(e){this.isMounted=!1,this.node=e}update(){}}class dM extends au{constructor(e){super(e),e.animationState||(e.animationState=cM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let hM=0;class fM extends au{constructor(){super(...arguments),this.id=hM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const pM={animation:{Feature:dM},exit:{Feature:fM}};function Jf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function vp(t){return{point:{x:t.pageX,y:t.pageY}}}const mM=t=>e=>E2(e)&&t(e,vp(e));function If(t,e,n,r){return Jf(t,e,mM(n),r)}const YS=1e-4,gM=1-YS,yM=1+YS,QS=.01,vM=0-QS,xM=0+QS;function Qs(t){return t.max-t.min}function bM(t,e,n){return Math.abs(t-e)<=n}function p5(t,e,n,r=.5){t.origin=r,t.originPoint=Vr(e.min,e.max,t.origin),t.scale=Qs(n)/Qs(e),t.translate=Vr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=gM&&t.scale<=yM||isNaN(t.scale))&&(t.scale=1),(t.translate>=vM&&t.translate<=xM||isNaN(t.translate))&&(t.translate=0)}function Pf(t,e,n,r){p5(t.x,e.x,n.x,r?r.originX:void 0),p5(t.y,e.y,n.y,r?r.originY:void 0)}function m5(t,e,n){t.min=n.min+e.min,t.max=t.min+Qs(e)}function wM(t,e,n){m5(t.x,e.x,n.x),m5(t.y,e.y,n.y)}function g5(t,e,n){t.min=e.min-n.min,t.max=t.min+Qs(e)}function Rf(t,e,n){g5(t.x,e.x,n.x),g5(t.y,e.y,n.y)}function ia(t){return[t("x"),t("y")]}const XS=({current:t})=>t?t.ownerDocument.defaultView:null,y5=(t,e)=>Math.abs(t-e);function _M(t,e){const n=y5(t.x,e.x),r=y5(t.y,e.y);return Math.sqrt(n**2+r**2)}class JS{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Py(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,j=_M(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!j)return;const{point:S}=w,{timestamp:_}=os;this.history.push({...S,timestamp:_});const{onStart:I,onMove:V}=this.handlers;v||(I&&I(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,w)},this.handlePointerMove=(w,v)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=Iy(v,this.transformPagePoint),Pr.update(this.updatePoint,!0)},this.handlePointerUp=(w,v)=>{this.end();const{onEnd:j,onSessionEnd:S,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=Py(w.type==="pointercancel"?this.lastMoveEventInfo:Iy(v,this.transformPagePoint),this.history);this.startEvent&&j&&j(w,I),S&&S(w,I)},!E2(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const c=vp(e),u=Iy(c,this.transformPagePoint),{point:h}=u,{timestamp:p}=os;this.history=[{...h,timestamp:p}];const{onSessionStart:y}=n;y&&y(e,Py(u,this.history)),this.removeListeners=mp(If(this.contextWindow,"pointermove",this.handlePointerMove),If(this.contextWindow,"pointerup",this.handlePointerUp),If(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),eu(this.updatePoint)}}function Iy(t,e){return e?{point:e(t.point)}:t}function v5(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Py({point:t},e){return{point:t,delta:v5(t,ZS(e)),offset:v5(t,AM(e)),velocity:NM(e,.1)}}function AM(t){return t[0]}function ZS(t){return t[t.length-1]}function NM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=ZS(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>dl(e)));)n--;if(!r)return{x:0,y:0};const s=oa(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function EM(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Vr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Vr(n,t,r.max):Math.min(t,n)),t}function x5(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function SM(t,{top:e,left:n,bottom:r,right:i}){return{x:x5(t.x,n,i),y:x5(t.y,e,r)}}function b5(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function TM(t,e){return{x:b5(t.x,e.x),y:b5(t.y,e.y)}}function kM(t,e){let n=.5;const r=Qs(t),i=Qs(e);return i>r?n=Gf(e.min,e.max-r,t.min):r>i&&(n=Gf(t.min,t.max-i,e.min)),nc(0,1,n)}function CM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const t1=.35;function IM(t=t1){return t===!1?t=0:t===!0&&(t=t1),{x:w5(t,"left","right"),y:w5(t,"top","bottom")}}function w5(t,e,n){return{min:_5(t,e),max:_5(t,n)}}function _5(t,e){return typeof t=="number"?t:t[e]||0}const PM=new WeakMap;class RM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=si(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=y=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vp(y).point)},a=(y,w)=>{const{drag:v,dragPropagation:j,onDragStart:S}=this.getProps();if(v&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=FD(v),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ia(I=>{let V=this.getAxisMotionValue(I).get()||0;if(hl.test(V)){const{projection:z}=this.visualElement;if(z&&z.layout){const $=z.layout.layoutBox[I];$&&(V=Qs($)*(parseFloat(V)/100))}}this.originPoint[I]=V}),S&&Pr.postRender(()=>S(y,w)),Zv(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},c=(y,w)=>{this.latestPointerEvent=y,this.latestPanInfo=w;const{dragPropagation:v,dragDirectionLock:j,onDirectionLock:S,onDrag:_}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:I}=w;if(j&&this.currentDirection===null){this.currentDirection=jM(I),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",w.point,I),this.updateAxis("y",w.point,I),this.visualElement.render(),_&&_(y,w)},u=(y,w)=>{this.latestPointerEvent=y,this.latestPanInfo=w,this.stop(y,w),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>ia(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new JS(e,{onSessionStart:s,onStart:a,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:XS(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&Pr.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!_m(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=EM(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Yd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=SM(r.layoutBox,e):this.constraints=!1,this.elastic=IM(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ia(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=CM(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=L8(r,i.root,this.visualElement.getTransformPagePoint());let a=TM(i.layout.layoutBox,s);if(n){const c=n(P8(a));this.hasMutatedConstraints=!!c,c&&(a=MS(c))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=ia(p=>{if(!_m(p,n,this.currentDirection))return;let y=u&&u[p]||{};a&&(y={min:0,max:0});const w=i?200:1e6,v=i?40:1e7,j={type:"inertia",velocity:r?e[p]:0,bounceStiffness:w,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...y};return this.startAxisValueAnimation(p,j)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Zv(this.visualElement,e),r.start(D2(e,r,0,n,this.visualElement,!1))}stopAnimation(){ia(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ia(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ia(n=>{const{drag:r}=this.getProps();if(!_m(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:c}=i.layout.layoutBox[n];s.set(e[n]-Vr(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yd(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ia(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const u=c.get();i[a]=kM({min:u,max:u},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ia(a=>{if(!_m(a,e,null))return;const c=this.getAxisMotionValue(a),{min:u,max:h}=this.constraints[a];c.set(Vr(u,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;PM.set(this.visualElement,this);const e=this.visualElement.current,n=If(e,"pointerdown",u=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Yd(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Pr.read(r);const a=Jf(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ia(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=u[p].translate,y.set(y.get()+u[p].translate))}),this.visualElement.render())}));return()=>{a(),n(),s(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=t1,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:c}}}function _m(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function jM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class LM extends au{constructor(e){super(e),this.removeGroupControls=aa,this.removeListeners=aa,this.controls=new RM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||aa}unmount(){this.removeGroupControls(),this.removeListeners()}}const A5=t=>(e,n)=>{t&&Pr.postRender(()=>t(e,n))};class DM extends au{constructor(){super(...arguments),this.removePointerDownListener=aa}onPointerDown(e){this.session=new JS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:XS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:A5(e),onStart:A5(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Pr.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=If(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function N5(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const gf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Wt.test(t))t=parseFloat(t);else return t;const n=N5(t,e.target.x),r=N5(t,e.target.y);return`${n}% ${r}%`}},MM={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=tu.parse(t);if(i.length>5)return r;const s=tu.createTransformer(t),a=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+a]/=c,i[1+a]/=u;const h=Vr(c,u,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};let Ry=!1;class OM extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s8(FM),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Ry&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Gm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,Ry=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Pr.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),N2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Ry=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function e4(t){const[e,n]=_S(),r=O.useContext(n2);return d.jsx(OM,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(LS),isPresent:e,safeToRemove:n})}const FM={borderRadius:{...gf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gf,borderTopRightRadius:gf,borderBottomLeftRadius:gf,borderBottomRightRadius:gf,boxShadow:MM};function VM(t,e,n){const r=Ds(t)?t:ph(t);return r.start(D2("",r,e,n)),r.animation}const UM=(t,e)=>t.depth-e.depth;class BM{constructor(){this.children=[],this.isDirty=!1}add(e){s2(this.children,e),this.isDirty=!0}remove(e){o2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(UM),this.isDirty=!1,this.children.forEach(e)}}function zM(t,e){const n=po.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(eu(r),t(s-e))};return Pr.setup(r,!0),()=>eu(r)}const t4=["TopLeft","TopRight","BottomLeft","BottomRight"],qM=t4.length,E5=t=>typeof t=="string"?parseFloat(t):t,S5=t=>typeof t=="number"||Wt.test(t);function $M(t,e,n,r,i,s){i?(t.opacity=Vr(0,n.opacity??1,HM(r)),t.opacityExit=Vr(e.opacity??1,0,WM(r))):s&&(t.opacity=Vr(e.opacity??1,n.opacity??1,r));for(let a=0;a<qM;a++){const c=`border${t4[a]}Radius`;let u=T5(e,c),h=T5(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||S5(u)===S5(h)?(t[c]=Math.max(Vr(E5(u),E5(h),r),0),(hl.test(h)||hl.test(u))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=Vr(e.rotate||0,n.rotate||0,r))}function T5(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const HM=n4(0,.5,zE),WM=n4(.5,.95,aa);function n4(t,e,n){return r=>r<t?0:r>e?1:n(Gf(t,e,r))}function k5(t,e){t.min=e.min,t.max=e.max}function ra(t,e){k5(t.x,e.x),k5(t.y,e.y)}function C5(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function I5(t,e,n,r,i){return t-=e,t=gg(t,1/n,r),i!==void 0&&(t=gg(t,1/i,r)),t}function GM(t,e=0,n=1,r=.5,i,s=t,a=t){if(hl.test(e)&&(e=parseFloat(e),e=Vr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=Vr(s.min,s.max,r);t===s&&(c-=e),t.min=I5(t.min,e,n,c,i),t.max=I5(t.max,e,n,c,i)}function P5(t,e,[n,r,i],s,a){GM(t,e[n],e[r],e[i],e.scale,s,a)}const KM=["x","scaleX","originX"],YM=["y","scaleY","originY"];function R5(t,e,n,r){P5(t.x,e,KM,n?n.x:void 0,r?r.x:void 0),P5(t.y,e,YM,n?n.y:void 0,r?r.y:void 0)}function j5(t){return t.translate===0&&t.scale===1}function r4(t){return j5(t.x)&&j5(t.y)}function L5(t,e){return t.min===e.min&&t.max===e.max}function QM(t,e){return L5(t.x,e.x)&&L5(t.y,e.y)}function D5(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function i4(t,e){return D5(t.x,e.x)&&D5(t.y,e.y)}function M5(t){return Qs(t.x)/Qs(t.y)}function O5(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class XM{constructor(){this.members=[]}add(e){s2(this.members,e),e.scheduleRender()}remove(e){if(o2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function JM(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=n?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:p,rotateX:y,rotateY:w,skewX:v,skewY:j}=n;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),y&&(r+=`rotateX(${y}deg) `),w&&(r+=`rotateY(${w}deg) `),v&&(r+=`skewX(${v}deg) `),j&&(r+=`skewY(${j}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const jy=["","X","Y","Z"],ZM=1e3;let eO=0;function Ly(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function s4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=$S(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Pr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&s4(r)}function o4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},c=e?.()){this.id=eO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rO),this.nodes.forEach(aO),this.nodes.forEach(lO),this.nodes.forEach(iO)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new BM)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new c2),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=wS(a)&&!$D(a),this.instance=a;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let p,y=0;const w=()=>this.root.updateBlockedByResize=!1;Pr.read(()=>{y=window.innerWidth}),t(a,()=>{const v=window.innerWidth;v!==y&&(y=v,this.root.updateBlockedByResize=!0,p&&p(),p=zM(w,250),Gm.hasAnimatedSinceResize&&(Gm.hasAnimatedSinceResize=!1,this.nodes.forEach(U5)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeLayoutChanged:w,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||h.getDefaultTransition()||fO,{onLayoutAnimationStart:S,onLayoutAnimationComplete:_}=h.getProps(),I=!this.targetLayout||!i4(this.targetLayout,v),V=!y&&w;if(this.options.layoutRoot||this.resumeFrom||V||y&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const z={..._2(j,"layout"),onPlay:S,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z),this.setAnimationOrigin(p,V)}else y||U5(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),eu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&s4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(F5);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(V5);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(oO),this.nodes.forEach(tO),this.nodes.forEach(nO)):this.nodes.forEach(V5),this.clearAllSnapshots();const c=po.now();os.delta=nc(0,1e3/60,c-os.timestamp),os.timestamp=c,os.isProcessing=!0,_y.update.process(os),_y.preRender.process(os),_y.render.process(os),os.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,N2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sO),this.sharedNodes.forEach(uO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qs(this.snapshot.measuredBox.x)&&!Qs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=si(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!r4(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;a&&this.instance&&(c||ju(this.latestValues)||p)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),pO(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return si();const c=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(mO))){const{scroll:h}=this.root;h&&(Qd(c.x,h.offset.x),Qd(c.y,h.offset.y))}return c}removeElementScroll(a){const c=si();if(ra(c,a),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:p,options:y}=h;h!==this.root&&p&&y.layoutScroll&&(p.wasRoot&&ra(c,a),Qd(c.x,p.offset.x),Qd(c.y,p.offset.y))}return c}applyTransform(a,c=!1){const u=si();ra(u,a);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Xd(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ju(p.latestValues)&&Xd(u,p.latestValues)}return ju(this.latestValues)&&Xd(u,this.latestValues),u}removeTransform(a){const c=si();ra(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!ju(h.latestValues))continue;Yv(h.latestValues)&&h.updateSnapshot();const p=si(),y=h.measurePageBox();ra(p,y),R5(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return ju(this.latestValues)&&R5(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==os.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=os.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=si(),this.relativeTargetOrigin=si(),Rf(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=si(),this.targetWithTransforms=si()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ra(this.target,this.layout.layoutBox),FS(this.target,this.targetDelta)):ra(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=si(),this.relativeTargetOrigin=si(),Rf(this.relativeTargetOrigin,this.target,w.target),ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Yv(this.parent.latestValues)||OS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===os.timestamp&&(u=!1),u)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;ra(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,w=this.treeScale.y;j8(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=si());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(C5(this.prevProjectionDelta.x,this.projectionDelta.x),C5(this.prevProjectionDelta.y,this.projectionDelta.y)),Pf(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==w||!O5(this.projectionDelta.x,this.prevProjectionDelta.x)||!O5(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jd(),this.projectionDelta=Jd(),this.projectionDeltaWithTransform=Jd()}setAnimationOrigin(a,c=!1){const u=this.snapshot,h=u?u.latestValues:{},p={...this.latestValues},y=Jd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const w=si(),v=u?u.source:void 0,j=this.layout?this.layout.source:void 0,S=v!==j,_=this.getStack(),I=!_||_.members.length<=1,V=!!(S&&!I&&this.options.crossfade===!0&&!this.path.some(hO));this.animationProgress=0;let z;this.mixTargetDelta=$=>{const J=$/1e3;B5(y.x,a.x,J),B5(y.y,a.y,J),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rf(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dO(this.relativeTarget,this.relativeTargetOrigin,w,J),z&&QM(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=si()),ra(z,this.relativeTarget)),S&&(this.animationValues=p,$M(p,h,this.latestValues,J,V,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=J},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(eu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pr.update(()=>{Gm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ph(0)),this.currentAnimation=VM(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:p}=a;if(!(!c||!u||!h)){if(this!==a&&this.layout&&h&&a4(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||si();const y=Qs(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+y;const w=Qs(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+w}ra(c,u),Xd(c,p),Pf(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new XM),this.sharedNodes.get(a).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&Ly("z",a,h,this.animationValues);for(let p=0;p<jy.length;p++)Ly(`rotate${jy[p]}`,a,h,this.animationValues),Ly(`skew${jy[p]}`,a,h,this.animationValues);a.render();for(const p in h)a.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);a.scheduleRender()}applyProjectionStyles(a,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Wm(c?.pointerEvents)||"",a.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Wm(c?.pointerEvents)||""),this.hasProjected&&!ju(this.latestValues)&&(a.transform=u?u({},""):"none",this.hasProjected=!1);return}a.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let y=JM(this.projectionDeltaWithTransform,this.treeScale,p);u&&(y=u(p,y)),a.transform=y;const{x:w,y:v}=this.projectionDelta;a.transformOrigin=`${w.origin*100}% ${v.origin*100}% 0`,h.animationValues?a.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:a.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const j in Xf){if(p[j]===void 0)continue;const{correct:S,applyTo:_,isCSSVariable:I}=Xf[j],V=y==="none"?p[j]:S(p[j],h);if(_){const z=_.length;for(let $=0;$<z;$++)a[_[$]]=V}else I?this.options.visualElement.renderState.vars[j]=V:a[j]=V}this.options.layoutId&&(a.pointerEvents=h===this?Wm(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(F5),this.root.sharedNodes.clear()}}}function tO(t){t.updateLayout()}function nO(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,s=e.source!==t.layout.source;i==="size"?ia(p=>{const y=s?e.measuredBox[p]:e.layoutBox[p],w=Qs(y);y.min=n[p].min,y.max=y.min+w}):a4(i,e.layoutBox,n)&&ia(p=>{const y=s?e.measuredBox[p]:e.layoutBox[p],w=Qs(n[p]);y.max=y.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+w)});const a=Jd();Pf(a,n,e.layoutBox);const c=Jd();s?Pf(c,t.applyTransform(r,!0),e.measuredBox):Pf(c,n,e.layoutBox);const u=!r4(a);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:y,layout:w}=p;if(y&&w){const v=si();Rf(v,e.layoutBox,y.layoutBox);const j=si();Rf(j,n,w.layoutBox),i4(v,j)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=v,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function rO(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function iO(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sO(t){t.clearSnapshot()}function F5(t){t.clearMeasurements()}function V5(t){t.isLayoutDirty=!1}function oO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function U5(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function aO(t){t.resolveTargetDelta()}function lO(t){t.calcProjection()}function cO(t){t.resetSkewAndRotation()}function uO(t){t.removeLeadSnapshot()}function B5(t,e,n){t.translate=Vr(e.translate,0,n),t.scale=Vr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function z5(t,e,n,r){t.min=Vr(e.min,n.min,r),t.max=Vr(e.max,n.max,r)}function dO(t,e,n,r){z5(t.x,e.x,n.x,r),z5(t.y,e.y,n.y,r)}function hO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const fO={duration:.45,ease:[.4,0,.1,1]},q5=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),$5=q5("applewebkit/")&&!q5("chrome/")?Math.round:aa;function H5(t){t.min=$5(t.min),t.max=$5(t.max)}function pO(t){H5(t.x),H5(t.y)}function a4(t,e,n){return t==="position"||t==="preserve-aspect"&&!bM(M5(e),M5(n),.2)}function mO(t){return t!==t.root&&t.scroll?.wasRoot}const gO=o4({attachResizeListener:(t,e)=>Jf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dy={current:void 0},l4=o4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Dy.current){const t=new gO({});t.mount(window),t.setOptions({layoutScroll:!0}),Dy.current=t}return Dy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yO={pan:{Feature:DM},drag:{Feature:LM,ProjectionNode:l4,MeasureLayout:e4}};function W5(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Pr.postRender(()=>s(e,vp(e)))}class vO extends au{mount(){const{current:e}=this.node;e&&(this.unmount=VD(e,(n,r)=>(W5(this.node,r,"Start"),i=>W5(this.node,i,"End"))))}unmount(){}}class xO extends au{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mp(Jf(this.node.current,"focus",()=>this.onFocus()),Jf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function G5(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Pr.postRender(()=>s(e,vp(e)))}class bO extends au{mount(){const{current:e}=this.node;e&&(this.unmount=qD(e,(n,r)=>(G5(this.node,r,"Start"),(i,{success:s})=>G5(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const n1=new WeakMap,My=new WeakMap,wO=t=>{const e=n1.get(t.target);e&&e(t)},_O=t=>{t.forEach(wO)};function AO({root:t,...e}){const n=t||document;My.has(n)||My.set(n,{});const r=My.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(_O,{root:t,...e})),r[i]}function NO(t,e,n){const r=AO(e);return n1.set(t,n),r.observe(t),()=>{n1.delete(t),r.unobserve(t)}}const EO={some:0,all:1};class SO extends au{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:EO[i]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),w=h?p:y;w&&w(u)};return NO(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(TO(e,n))&&this.startObserver()}unmount(){}}function TO({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const kO={inView:{Feature:SO},tap:{Feature:bO},focus:{Feature:xO},hover:{Feature:vO}},CO={layout:{ProjectionNode:l4,MeasureLayout:e4}},IO={...pM,...kO,...yO,...CO},mo=I8(IO,q8),ol=[{name:"Frutos secos",isAlergic:!0,intensity:"Alta",category:"Frutos secos",KUA_Litro:20},{name:"Proteina LTP",isAlergic:!0,intensity:"Alta",category:"Proteinas",KUA_Litro:20},{name:"Mariscos",isAlergic:!0,intensity:"Alta",category:"Mariscos",KUA_Litro:20},{name:"Crustceos general",isAlergic:!0,intensity:"Alta",category:"Crustceos",KUA_Litro:20},{name:"Gamba",isAlergic:!0,intensity:"Alta",category:"Crustceos",KUA_Litro:1.36},{name:"Almeja",isAlergic:!1,intensity:"Baja",category:"Mariscos",KUA_Litro:.04},{name:"Mejilln",isAlergic:!1,intensity:"Baja",category:"Mariscos",KUA_Litro:.01},{name:"Atn",isAlergic:!1,intensity:"Baja",category:"Pescados",KUA_Litro:.11},{name:"Calamar",isAlergic:!1,intensity:"Baja",category:"Mariscos",KUA_Litro:.02},{name:"Bacalao",isAlergic:!1,intensity:"Baja",category:"Pescados",KUA_Litro:.01},{name:"Merluza",isAlergic:!1,intensity:"Baja",category:"Pescados",KUA_Litro:.02},{name:"Gallo",isAlergic:!1,intensity:"Baja",category:"Pescados",KUA_Litro:.03},{name:"Salmn",isAlergic:!1,intensity:"Baja",category:"Pescados",KUA_Litro:.01},{name:"Tomate",isAlergic:!0,intensity:"Media",category:"Vegetales",KUA_Litro:.1},{name:"Melocotn",isAlergic:!0,intensity:"Alta",category:"Frutas",KUA_Litro:13.2},{name:"Melocotn LTP",isAlergic:!0,intensity:"Alta",category:"Frutas",KUA_Litro:6.7},{name:"Calabaza",isAlergic:!0,intensity:"Alta",category:"Vegetales",KUA_Litro:2.94},{name:"Pipa Calabaza",isAlergic:!0,intensity:"Alta",category:"Frutos secos",KUA_Litro:2.94},{name:"Cacahuete",isAlergic:!0,intensity:"Alta",category:"Frutos secos",KUA_Litro:4.96},{name:"Avellana",isAlergic:!0,intensity:"Alta",category:"Frutos secos",KUA_Litro:1.83},{name:"Avellana LTP",isAlergic:!0,intensity:"Alta",category:"Frutos secos",KUA_Litro:2.45},{name:"Nuez",isAlergic:!0,intensity:"Alta",category:"Frutos secos",KUA_Litro:3.55},{name:"Almendra",isAlergic:!0,intensity:"Media",category:"Frutos secos",KUA_Litro:2.64},{name:"Pin",isAlergic:!1,intensity:"Baja",category:"Frutos secos",KUA_Litro:.24},{name:"Anacardo",isAlergic:!1,intensity:"Baja",category:"Frutos secos",KUA_Litro:.01},{name:"Pistacho",isAlergic:!1,intensity:"Baja",category:"Frutos secos",KUA_Litro:.05},{name:"Cipres",isAlergic:!0,intensity:"Alta",category:"rboles",KUA_Litro:22.7},{name:"Calabacin",isAlergic:!0,intensity:"Alta",category:"Vegetales",KUA_Litro:7},{name:"Paraguaya",isAlergic:!0,intensity:"Alta",category:"Vegetales",KUA_Litro:14},{name:"Hierba timona",isAlergic:!0,intensity:"Alta",category:"rboles",KUA_Litro:8.24},{name:"Pltano de sombra",isAlergic:!0,intensity:"Alta",category:"rboles",KUA_Litro:9.09},{name:"Ariznica",isAlergic:!0,intensity:"Alta",category:"rboles",KUA_Litro:16.2},{name:"Nuez de nogal",isAlergic:!0,intensity:"Alta",category:"rboles",KUA_Litro:7.2},{name:"Alternaria alternata",isAlergic:!0,intensity:"Alta",category:"Hongos",KUA_Litro:10.2},{name:"Trufa",isAlergic:!0,intensity:"Alta",category:"Hongos",KUA_Litro:0},{name:"Perro",isAlergic:!0,intensity:"Media",category:"Animales",KUA_Litro:3.69},{name:"Gato",isAlergic:!0,intensity:"Alta",category:"Animales",KUA_Litro:16.9},{name:"Meln",isAlergic:!1,intensity:"Baja",category:"Frutas",KUA_Litro:.12},{name:"Berenjena",isAlergic:!1,intensity:"Baja",category:"Vegetales",KUA_Litro:.12},{name:"Sandia",isAlergic:!1,intensity:"Baja",category:"Frutas",KUA_Litro:.04},{name:"Ciruela",isAlergic:!0,intensity:"Alta",category:"Frutas",KUA_Litro:5.55},{name:"Pepino",isAlergic:!0,intensity:"Media",category:"Vegetales",KUA_Litro:1.59},{name:"Pimienta verde",isAlergic:!1,intensity:"Baja",category:"Especias",KUA_Litro:0},{name:"Fresas",isAlergic:!0,intensity:"Media",category:"Frutas",KUA_Litro:1.95},{name:"Mango",isAlergic:!1,intensity:"Baja",category:"Frutas",KUA_Litro:.03},{name:"Castaa",isAlergic:!1,intensity:"Baja",category:"Frutos secos",KUA_Litro:.13},{name:"Pia",isAlergic:!1,intensity:"Baja",category:"Frutas",KUA_Litro:.13},{name:"Uva",isAlergic:!1,intensity:"Baja",category:"Frutas",KUA_Litro:.48},{name:"Kiwi",isAlergic:!1,intensity:"Baja",category:"Frutas",KUA_Litro:.03},{name:"Semilla de girasol",isAlergic:!1,intensity:"Baja",category:"Semillas",KUA_Litro:.12}],c4=js.memo(({className:t})=>{const[e,n]=O.useState(""),[r,i]=O.useState("all"),[s,a]=O.useState("all"),[c,u]=O.useState(!1),[h,p]=O.useState("name"),[y,w]=O.useState("asc"),v=O.useRef(null),j=O.useMemo(()=>[...new Set(ol.map(le=>le.category))].sort(),[]),S=O.useMemo(()=>{let J=[...ol];return e&&(J=J.filter(le=>le.name.toLowerCase().includes(e.toLowerCase())||le.category.toLowerCase().includes(e.toLowerCase()))),r!=="all"&&(J=J.filter(le=>le.category===r)),s!=="all"&&(J=J.filter(le=>le.intensity===s)),c&&(J=J.filter(le=>le.isAlergic)),J.sort((le,q)=>{let E,T;switch(h){case"name":E=le.name,T=q.name;break;case"intensity":E=le.intensity,T=q.intensity;break;case"category":E=le.category,T=q.category;break;case"KUA_Litro":E=le.KUA_Litro||0,T=q.KUA_Litro||0;break;default:E=le.name,T=q.name}let U=0;return E<T&&(U=-1),E>T&&(U=1),y==="asc"?U:-U}),J},[e,r,s,c,h,y]),_=O.useMemo(()=>{const J=ol.length,le=ol.filter(U=>U.isAlergic).length,q=ol.filter(U=>U.intensity==="Alta"&&U.isAlergic).length,E=ol.filter(U=>U.intensity==="Media"&&U.isAlergic).length,T=ol.filter(U=>U.intensity==="Baja"&&U.isAlergic).length;return{total:J,allergic:le,high:q,medium:E,low:T}},[]),I=O.useCallback(J=>{h===J?w(y==="asc"?"desc":"asc"):(p(J),w("asc"))},[h,y]),V=O.useCallback(()=>{et.info("Exporting allergy table data");const J=[["Nombre","Categora","Intensidad","KUA/Litro","Es Alrgico"],...S.map(E=>[E.name,E.category,E.intensity,E.KUA_Litro?.toString()||"N/A",E.isAlergic?"S":"No"])].map(E=>E.join(",")).join(`
`),le=new Blob([J],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a");q.href=URL.createObjectURL(le),q.download="alergias_blancalergic.csv",q.click()},[S]);O.useEffect(()=>{const J=le=>{le.target instanceof HTMLInputElement||le.target instanceof HTMLTextAreaElement||((le.ctrlKey||le.metaKey)&&le.key==="f"&&(le.preventDefault(),v.current?.focus()),(le.ctrlKey||le.metaKey)&&le.key==="e"&&(le.preventDefault(),V()),(le.ctrlKey||le.metaKey)&&le.key==="1"&&(le.preventDefault(),document.querySelector('select[aria-label="Filtrar por categora"]')?.focus()),(le.ctrlKey||le.metaKey)&&le.key==="2"&&(le.preventDefault(),document.querySelector('select[aria-label="Filtrar por intensidad"]')?.focus()),(le.ctrlKey||le.metaKey)&&le.key==="3"&&(le.preventDefault(),u(q=>!q)),le.key==="ArrowUp"&&le.ctrlKey&&(le.preventDefault(),I("name")),le.key==="ArrowDown"&&le.ctrlKey&&(le.preventDefault(),I("intensity")))};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[V,I]);const z=(J,le)=>{if(!le)return"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700";switch(J){case"Alta":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900 dark:text-red-200 dark:border-red-700";case"Media":return"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900 dark:text-yellow-200 dark:border-yellow-700";case"Baja":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900 dark:text-green-200 dark:border-green-700";default:return"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700"}},$=(J,le)=>le?J==="Alta"?d.jsx(Ms,{className:"h-3 w-3"}):d.jsx(pp,{className:"h-3 w-3"}):null;return d.jsxs("div",{className:nn("space-y-6",t),role:"main","aria-label":"Tabla de alergias",children:[d.jsxs("header",{className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground flex items-center gap-2",children:[d.jsx(id,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary","aria-hidden":"true"}),"Tabla de Alergias Completa"]}),d.jsxs("p",{className:"text-muted-foreground text-sm sm:text-base mt-1",children:["Registro completo de alergias y sensibilizaciones (",S.length," de ",_.total," items)"]})]}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs(Nn,{variant:"outline",size:"sm",onClick:V,"aria-label":"Exportar datos de alergias a CSV",children:[d.jsx(hh,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),d.jsx("span",{className:"hidden sm:inline",children:"Exportar"})]})})]}),d.jsxs("section",{"aria-label":"Estadsticas de alergias",className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[d.jsx(En,{className:"bg-red-50 border-red-200 dark:bg-red-950 dark:border-red-800",children:d.jsx(Ln,{className:"p-3",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-300",children:_.allergic}),d.jsx("div",{className:"text-xs text-red-700 font-medium dark:text-red-400",children:"Alrgicas"})]})})}),d.jsx(En,{className:"bg-yellow-50 border-yellow-200 dark:bg-yellow-950 dark:border-yellow-800",children:d.jsx(Ln,{className:"p-3",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-300",children:_.high}),d.jsx("div",{className:"text-xs text-yellow-700 font-medium dark:text-yellow-400",children:"Alta"})]})})}),d.jsx(En,{className:"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800",children:d.jsx(Ln,{className:"p-3",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-300",children:_.medium}),d.jsx("div",{className:"text-xs text-blue-700 font-medium dark:text-blue-400",children:"Media"})]})})}),d.jsx(En,{className:"bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800",children:d.jsx(Ln,{className:"p-3",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-300",children:_.low}),d.jsx("div",{className:"text-xs text-green-700 font-medium dark:text-green-400",children:"Baja"})]})})})]})]}),d.jsxs(En,{children:[d.jsx(ai,{children:d.jsxs(Qr,{className:"text-lg flex items-center gap-2",children:[d.jsx(J1,{className:"h-5 w-5","aria-hidden":"true"}),"Filtros"]})}),d.jsxs(Ln,{className:"space-y-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Zc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400","aria-hidden":"true"}),d.jsx(fp,{ref:v,placeholder:"Buscar alergias...",value:e,onChange:J=>n(J.target.value),className:"pl-10 h-12 focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2","aria-label":"Buscar alergias por nombre o categora",autoComplete:"off"})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsxs("select",{value:r,onChange:J=>i(J.target.value),className:"h-12 px-4 border rounded-md bg-background focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2","aria-label":"Filtrar por categora",children:[d.jsx("option",{value:"all",children:"Todas"}),j.map(J=>d.jsx("option",{value:J,children:J},J))]}),d.jsxs("select",{value:s,onChange:J=>a(J.target.value),className:"h-12 px-4 border rounded-md bg-background focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2","aria-label":"Filtrar por intensidad",children:[d.jsx("option",{value:"all",children:"Todas"}),d.jsx("option",{value:"Alta",children:"Alta"}),d.jsx("option",{value:"Media",children:"Media"}),d.jsx("option",{value:"Baja",children:"Baja"})]}),d.jsxs(Nn,{variant:c?"default":"outline",onClick:()=>u(!c),className:"h-12 px-4 focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2","aria-pressed":c,"aria-label":"Mostrar solo alergias confirmadas",children:[d.jsx(Z6,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Solo alrgicas"]}),d.jsxs(Nn,{variant:"outline",onClick:V,className:"h-12 px-4 focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2","aria-label":"Exportar datos filtrados como CSV",children:[d.jsx(hh,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Exportar"]})]}),d.jsx("div",{className:"hidden md:block",children:d.jsxs("div",{className:"text-xs text-muted-foreground dark:text-gray-400 space-x-4",children:[d.jsx("span",{children:"Atajos:"}),d.jsxs("span",{children:[d.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"Ctrl"}),"+",d.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"F"})," Buscar"]}),d.jsxs("span",{children:[d.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"Ctrl"}),"+",d.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"E"})," Exportar"]})]})})]})]}),d.jsx("section",{"aria-label":"Resultados de alergias",children:d.jsx(mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map((J,le)=>d.jsxs(En,{className:nn("p-4 transition-all duration-200 hover:shadow-md hover:scale-[1.02]",J.isAlergic&&J.intensity==="Alta"&&"border-red-200 bg-red-50/50 dark:border-red-800 dark:bg-red-950/30"),role:"article","aria-label":`Tarjeta ${le+1}: ${J.name}, ${J.intensity} intensidad, ${J.isAlergic?"alrgica":"no alrgica"}`,children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2 pr-2",children:[J.isAlergic&&$(J.intensity,J.isAlergic),d.jsx("h3",{className:nn("font-semibold text-base leading-tight",J.isAlergic?"text-foreground":"text-muted-foreground"),children:J.name})]}),d.jsx(Ir,{variant:J.isAlergic?"destructive":"secondary",className:nn("text-xs shrink-0",!J.isAlergic&&"dark:border-gray-600 dark:text-gray-400 dark:bg-gray-800/50"),children:J.isAlergic?"Alrgica":"No"})]}),d.jsxs("div",{className:"space-y-3 text-sm",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground dark:text-gray-400 text-xs font-medium",children:"Categora"}),d.jsx(Ir,{variant:"outline",className:"text-xs dark:border-gray-600 dark:text-gray-200 dark:bg-gray-800/50",children:J.category})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground dark:text-gray-400 text-xs font-medium",children:"Intensidad"}),d.jsx(Ir,{variant:"outline",className:nn("text-xs",z(J.intensity,J.isAlergic)),children:J.intensity})]}),J.KUA_Litro&&d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-muted-foreground dark:text-gray-400 text-xs font-medium",children:"KUA/Litro"}),d.jsx("span",{className:"font-mono text-sm dark:text-gray-300 bg-muted/30 px-2 py-1 rounded",children:J.KUA_Litro.toFixed(1)})]})]})]},J.name))})}),S.length===0&&d.jsx(En,{children:d.jsx(Ln,{className:"p-12 text-center",children:d.jsxs("div",{className:"text-muted-foreground",children:[d.jsx(Zc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"No se encontraron alergias"}),d.jsx("p",{className:"text-sm",children:"Intenta ajustar los filtros o trminos de bsqueda"})]})})})]})});c4.displayName="AllergyTableSimple";function PO(){return d.jsx(Tf,{mode:"medical",componentName:"TableView",showEmergencyInfo:!0,children:d.jsxs("div",{className:"space-y-6",children:[d.jsx(En,{className:"border-2",children:d.jsx(Ln,{className:"p-6",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(J1,{className:"h-6 w-6 text-primary"}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Tabla de Alergias"}),d.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-300",children:"Visualiza y filtra todas las alergias registradas"})]})]})})}),d.jsx(c4,{})]})})}const RO=({startTime:t=Date.now(),className:e=""})=>{const[n,r]=O.useState(Date.now()),[i,s]=O.useState(!0);O.useEffect(()=>{const h=setInterval(()=>{r(Date.now())},1e3);return()=>clearInterval(h)},[]);const a=O.useMemo(()=>Math.floor((n-t)/1e3),[n,t]),c=h=>{const p=Math.floor(h/60),y=h%60;return`${p.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`},u=()=>a<60?"text-emerald-600 dark:text-emerald-400":a<300?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400";return O.useEffect(()=>{const h=setInterval(()=>{s(p=>!p)},1e3);return()=>clearInterval(h)},[]),d.jsxs("div",{className:`emergency-timer flex items-center space-x-3 ${e}`,children:[d.jsxs("div",{className:"relative",children:[d.jsx(Pj,{className:`h-6 w-6 ${u()} ${i?"animate-pulse":""}`,"aria-hidden":"true"}),d.jsx("div",{className:`absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full ${i?"animate-ping":""}`,"aria-hidden":"true"})]}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:"Tiempo de emergencia"}),d.jsx("span",{className:`text-2xl font-bold tabular-nums ${u()}`,role:"timer","aria-label":`Tiempo transcurrido: ${c(a)}`,children:c(a)})]})]})},jO=t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>e(),r.onerror=()=>n(new Error(`Failed to preload emergency image: ${t}`)),r.src=t}),LO=async t=>{try{await Promise.all(t.map(e=>jO(e))),et.debug("All critical emergency images preloaded")}catch(e){et.error({error:e,imagePaths:t},"Failed to preload emergency images")}},K5="/BlancAlergic-APP/Image/call-112.jpg",DO="/BlancAlergic-APP/Image/identify-symptoms.png",Y5="/BlancAlergic-APP/Image/epi-pen.jpg",MO="/BlancAlergic-APP/Image/wait-help.jpg",Q5=js.memo(({step:t,onToggleInfo:e,showMoreInfo:n,emergencyData:r,onEmergencyDataChange:i,onRefreshLocation:s,onRequestLocationPermission:a,locationPermissionDenied:c})=>{const u=O.useCallback(()=>{t.buttonAction?t.buttonAction():e(t.id)},[t,e]);return t.id==="llamar-112"&&r&&i?d.jsxs("div",{className:"space-y-4",children:[d.jsxs(En,{className:"w-full overflow-hidden transition-all hover:shadow-lg",children:[d.jsx(ai,{className:"pb-3",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"flex-shrink-0 text-destructive",children:t.icon}),d.jsx(Qr,{className:"text-xl font-semibold",children:t.titleText})]})}),d.jsx(Ln,{className:"space-y-4",children:d.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[d.jsx("div",{className:"md:w-1/3",children:d.jsx("img",{src:t.imgPath,alt:t.titleText,className:"w-full h-48 object-cover rounded-lg",loading:"eager",decoding:"async",onLoad:()=>{et.debug(`Emergency medical image loaded: ${t.id}`)},onError:h=>{et.error({error:h,stepId:t.id},`Failed to load emergency image: ${t.id}`),et.warn({stepId:t.id},"Critical emergency image failed")}})}),d.jsxs("div",{className:"md:w-2/3 space-y-3",children:[d.jsx(fo,{className:"text-base leading-relaxed",children:t.infoText}),d.jsxs(Nn,{onClick:u,className:"w-full h-18 md:h-20 lg:h-20 text-lg md:text-xl font-bold animate-pulse border-4 border-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",variant:"destructive",size:"lg","aria-label":t.buttonText.includes("CONFIRMAR")?"Confirmar llamada de emergencia al 112. Esta accin marcar inmediatamente.":"Llamar a emergencias mdicas al 112. Es la accin ms crtica.",children:[d.jsx(tc,{className:"mr-3 h-6 w-6"}),t.buttonText]}),d.jsx(Nn,{onClick:()=>e(t.id),variant:"default",size:"lg",className:"w-full",children:"Ms Informacin"})]})]})})]}),n&&d.jsx(En,{className:"bg-destructive/5 border-2 border-destructive/20",children:d.jsx(Ln,{className:"pt-6",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Wf,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),d.jsxs("div",{className:"text-foreground w-full",children:[d.jsx("p",{className:"font-medium mb-4 text-foreground text-lg",children:"Informacin Crtica para el 112"}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium",children:[d.jsx(hj,{className:"h-4 w-4 text-primary"}),d.jsx("span",{children:"Ubicacin Actual"})]}),d.jsxs("div",{className:"bg-background p-3 rounded-lg border",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-xs font-mono break-all",children:r.location}),r.address&&d.jsxs("p",{className:"text-sm font-medium",children:[" ",r.address]}),r.city&&r.city!=="Ciudad no especificada"&&d.jsxs("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:[" ",r.city]}),r.location.includes("Precisin:")&&d.jsx("div",{className:"text-xs text-muted-foreground bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded",children:" **Consejo de precisin:** La precisin GPS ideal para emergencias es < 10 metros"})]}),d.jsxs("div",{className:"flex gap-2 mt-3",children:[d.jsx(Nn,{onClick:s,variant:"outline",size:"sm",className:"flex-1",children:"Actualizar GPS"}),c&&a&&d.jsx(Nn,{onClick:a,variant:"destructive",size:"sm",className:"flex-1",children:"Solicitar Permisos"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium",children:[d.jsx(K6,{className:"h-4 w-4 text-primary"}),d.jsx("span",{children:"Fecha y Hora"})]}),d.jsx("div",{className:"bg-background p-3 rounded-lg border",children:d.jsx("p",{className:"text-xs",children:r.timestamp})})]}),d.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium",children:[d.jsx(fh,{className:"h-4 w-4"}),d.jsx("span",{children:"Nombre"})]}),d.jsx("input",{type:"text",value:r.victimName,onChange:h=>i("victimName",h.target.value),className:"w-full p-2 border rounded-md text-sm bg-background",placeholder:"Nombre completo"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:"Qu comi?"}),d.jsx("textarea",{value:r.whatAte,onChange:h=>i("whatAte",h.target.value),className:"w-full p-2 border rounded-md text-sm bg-background",rows:2,placeholder:"Describir lo que ha comido"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:"Sntomas"}),d.jsx("textarea",{value:r.symptoms,onChange:h=>i("symptoms",h.target.value),className:"w-full p-2 border rounded-md text-sm bg-background",rows:2,placeholder:"Describir sntomas actuales"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:"Alergias conocidas (opcional)"}),d.jsx("textarea",{value:r.allergies,onChange:h=>i("allergies",h.target.value),className:"w-full p-2 border rounded-md text-sm bg-background",rows:2,placeholder:"Listar posibles alergias ingeridas"})]})]}),d.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 p-4 rounded-lg",children:[d.jsx("h4",{className:"font-medium text-destructive mb-2 text-sm",children:" Texto para leer al 112:"}),d.jsx("div",{className:"bg-background p-3 rounded text-xs font-mono whitespace-pre-wrap mb-3",children:`EMERGENCIA ALRGICA
Ubicacin: ${r.location}${r.address?`
Direccin: ${r.address}`:""}${r.city&&r.city!=="Ciudad no especificada"?`
Ciudad: ${r.city}`:""}
Hora: ${r.timestamp}
Nombre: ${r.victimName||"No especificado"}
Qu comi: ${r.whatAte||"No especificado"}
Sntomas: ${r.symptoms||"No especificados"}
Alergias: ${r.allergies||"No especificadas"}`}),d.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded",children:[d.jsx("p",{className:"text-xs font-medium text-blue-800 mb-2",children:" Pasos inmediatos:"}),d.jsxs("ol",{className:"text-xs space-y-1 text-blue-700",children:[d.jsx("li",{children:"1. Protege a la vctima de peligros"}),d.jsx("li",{children:"2. Mantn va area despejada"}),d.jsx("li",{children:"3. No dar nada de comer/beber"}),d.jsx("li",{children:"4. Administra EpiPen si disponible"}),d.jsx("li",{children:"5. Mantn vctima tranquila y vigilada"})]})]})]})]})]})]})})})]}):d.jsxs("div",{className:"space-y-4",children:[d.jsxs(En,{className:"w-full overflow-hidden transition-all hover:shadow-lg",children:[d.jsx(ai,{className:"pb-3",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"flex-shrink-0 text-destructive",children:t.icon}),d.jsx(Qr,{className:"text-xl font-semibold",children:t.titleText})]})}),d.jsx(Ln,{className:"space-y-4",children:d.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[d.jsx("div",{className:"md:w-1/3",children:d.jsx("img",{src:t.imgPath,alt:t.titleText,className:"w-full h-48 object-cover rounded-lg",loading:t.isEmergency?"eager":"lazy",decoding:"async",onLoad:()=>{t.isEmergency&&et.debug(`Emergency medical image loaded: ${t.id}`)},onError:h=>{et.error({error:h,stepId:t.id},`Failed to load emergency image: ${t.id}`),t.isEmergency&&et.warn({stepId:t.id},"Critical emergency image failed")}})}),d.jsxs("div",{className:"md:w-2/3 space-y-3",children:[d.jsx(fo,{className:"text-base leading-relaxed",children:t.infoText}),d.jsxs(Nn,{onClick:u,className:`
                  ${t.id==="llamar-112"?"w-full h-18 md:h-20 lg:h-20 text-lg md:text-xl font-bold animate-pulse border-4 border-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200":"w-full md:w-auto"}
                `,variant:t.buttonText.includes("LLAMAR")||t.buttonText.includes("CONFIRMAR")?"destructive":"default",size:t.id==="llamar-112"?"lg":"default","aria-label":t.id==="llamar-112"?t.buttonText.includes("CONFIRMAR")?"Confirmar llamada de emergencia al 112. Esta accin marcar inmediatamente.":"Llamar a emergencias mdicas al 112. Es la accin ms crtica.":t.buttonText,children:[(t.buttonText.includes("LLAMAR")||t.buttonText.includes("CONFIRMAR"))&&d.jsx(tc,{className:"mr-3 h-6 w-6"}),t.buttonText]})]})]})})]}),n&&d.jsx(En,{className:"bg-accent border-border",children:d.jsx(Ln,{className:"pt-6",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(Wf,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),d.jsxs("div",{className:"text-foreground",children:[d.jsx("p",{className:"font-medium mb-1 text-foreground",children:"Informacin adicional:"}),d.jsx("p",{className:"text-sm leading-relaxed",children:t.moreInfo})]})]})})})]})},(t,e)=>t.step.id===e.step.id&&t.showMoreInfo===e.showMoreInfo&&JSON.stringify(t.emergencyData)===JSON.stringify(e.emergencyData)),u4=js.memo(()=>{const[t,e]=O.useState({}),[n,r]=O.useState(!1),[i,s]=O.useState(!1),[a,c]=O.useState({victimName:"",whatAte:"",symptoms:"",allergies:"",location:"Obteniendo ubicacin...",address:"",city:"",postalCode:"",timestamp:new Date().toLocaleString("es-ES")}),u=O.useCallback(async(_,I)=>{try{const V=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${_}&lon=${I}&addressdetails=1&accept-language=es`,{headers:{"User-Agent":"BlancAlergic-APP/1.0 (Emergency Medical App)"}});if(!V.ok)throw new Error("Error en la respuesta del servicio de geocoding");const z=await V.json();if(z&&z.address){const $=z.address,J=[$.road||$.pedestrian||$.highway,$.house_number,$.suburb,$.city||$.town||$.village,$.postcode].filter(Boolean).join(", ");c(le=>({...le,address:J||"Direccin no disponible",city:$.city||$.town||$.village||"Ciudad no especificada",postalCode:$.postcode||""}))}else c($=>({...$,address:"Direccin no disponible",city:"Ciudad no especificada",postalCode:""}))}catch(V){et.error({msg:"Error obteniendo direccin",error:V}),c(z=>({...z,address:"Direccin no disponible",city:"Ciudad no especificada",postalCode:""}))}},[]),h=O.useCallback(()=>{if(!navigator.geolocation){c(I=>({...I,location:"Geolocalizacin no disponible en este dispositivo",address:"Direccin no disponible",city:"Ciudad no especificada"}));return}s(!1),c(I=>({...I,location:" Buscando ubicacin GPS precisa...",address:"Obteniendo direccin...",city:""})),(()=>{navigator.geolocation.getCurrentPosition(async I=>{const{latitude:V,longitude:z,accuracy:$}=I.coords,J=`Lat: ${V.toFixed(6)}, Lon: ${z.toFixed(6)} (Precisin: ${Math.round($)}m)`;et.info(` GPS obtenido - Precisin: ${$}m`),c(le=>({...le,location:J})),s(!1),await u(V,z)},async I=>{et.error({msg:"Error con alta precisin, intentando con precisin normal",error:I}),navigator.geolocation.getCurrentPosition(async V=>{const{latitude:z,longitude:$,accuracy:J}=V.coords,le=`Lat: ${z.toFixed(6)}, Lon: ${$.toFixed(6)} (Precisin: ${Math.round(J)}m)`;et.info(` GPS obtenido (baja precisin) - Precisin: ${J}m`),c(q=>({...q,location:le})),s(!1),await u(z,$)},V=>{et.error({msg:"Error obteniendo ubicacin",error:V});let z="No se pudo obtener la ubicacin.";switch(V.code){case V.PERMISSION_DENIED:z=" Permiso de ubicacin denegado. Activa el GPS y pulsa 'Solicitar Permisos'.",s(!0);break;case V.POSITION_UNAVAILABLE:z=" Seal de GPS no disponible. Intenta desde una zona con mejor cobertura o cerca de una ventana.";break;case V.TIMEOUT:z=" Tiempo de espera agotado. Intenta nuevamente o asegrate de tener buena visibilidad del cielo.";break;default:z=" Error desconocido al obtener ubicacin."}c($=>({...$,location:z,address:"Direccin no disponible",city:"Ciudad no especificada"}))},{enableHighAccuracy:!1,timeout:3e4,maximumAge:6e4})},{enableHighAccuracy:!0,timeout:45e3,maximumAge:0})})()},[u]),p=O.useCallback(()=>{if(!navigator.geolocation){c(_=>({..._,location:"Geolocalizacin no disponible en este dispositivo"}));return}"permissions"in navigator?navigator.permissions.query({name:"geolocation"}).then(_=>{_.state==="denied"?alert(`Para habilitar la ubicacin:

1. Haz clic en el cono de candado o informacin en la barra de direcciones
2. Busca "Ubicacin" o "Location"
3. Cambia a "Permitir"
4. Recarga la pgina y pulsa "Solicitar Permisos" nuevamente`):h()}).catch(()=>{h()}):h()},[h]);O.useEffect(()=>{LO([K5,Y5]).catch(_=>{et.error("Error preloading emergency images:",_)}),h()},[h]);const y=O.useCallback((_,I)=>{c(V=>({...V,[_]:I,timestamp:new Date().toLocaleString("es-ES")}))},[]),w=O.useCallback(()=>{const _=`
EMERGENCIA ALRGICA
Ubicacin: ${a.location}
Hora: ${a.timestamp}
Nombre: ${a.victimName||"No especificado"}
Qu comi: ${a.whatAte||"No especificado"}
Sntomas: ${a.symptoms||"No especificados"}
Alergias: ${a.allergies||"No especificadas"}
    `.trim();return navigator.clipboard&&navigator.clipboard.writeText(_),_},[a]),v=O.useCallback(()=>{n?("vibrate"in navigator&&navigator.vibrate([200,100,200]),w(),window.location.href="tel:112"):(r(!0),setTimeout(()=>r(!1),5e3))},[n,w]),j=O.useMemo(()=>[{id:"llamar-112",imgPath:K5,titleText:"Llamar al 112",infoText:"En caso de una reaccin alrgica grave, lo primero que debe hacer es llamar al 112 para solicitar ayuda mdica de emergencia.",moreInfo:"Marcar el 112 conectar directamente con los servicios de emergencia. Esta es la accin ms crtica en una emergencia alrgica.",buttonAction:v,buttonText:n?"CONFIRMAR LLAMADA":"LLAMAR AL 112",icon:d.jsx(tc,{className:"h-8 w-8"}),isEmergency:!0},{id:"identificar-sintomas",imgPath:DO,titleText:"Identificar Sntomas",infoText:"Revise si la persona tiene sntomas de una reaccin alrgica grave, como dificultad para respirar, hinchazn de la cara o labios, o erupciones en la piel.",moreInfo:"Los sntomas pueden variar, pero incluyen hinchazn, urticaria, dificultad para respirar y anafilaxia.",buttonText:"Ms Informacin",icon:d.jsx(Wf,{className:"h-6 w-6"})},{id:"usar-epipen",imgPath:Y5,titleText:"Usar EpiPen",infoText:"Si la persona tiene un EpiPen, administre la inyeccin de adrenalina en el muslo exterior. Esto puede ayudar a reducir los sntomas mientras espera la llegada de la ayuda mdica.",moreInfo:"Asegrese de seguir las instrucciones del EpiPen y mantenga la calma.",buttonText:"Ms Informacin",icon:d.jsx(Ms,{className:"h-6 w-6"}),isEmergency:!0},{id:"esperar-ayuda",imgPath:MO,titleText:"Esperar la Ayuda",infoText:"Mantenga a la persona cmoda y en una posicin que facilite la respiracin mientras espera la llegada de los servicios de emergencia.",moreInfo:"Intente mantener a la persona tranquila y vigilada en todo momento.",buttonText:"Ms Informacin",icon:d.jsx(id,{className:"h-6 w-6"})}],[v,n]),S=O.useCallback(_=>{e(I=>({...I,[_]:!I[_]}))},[]);return d.jsx(Tf,{mode:"medical",componentName:"EmergencyView",showEmergencyInfo:!0,children:d.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[d.jsxs("div",{className:"text-center mb-8 space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-bold mb-4 text-destructive",children:"Protocolo de Emergencia Alergnica"}),d.jsx("p",{className:"text-lg text-muted-foreground dark:text-gray-300",children:"Siga estos pasos crticos en caso de una reaccin alrgica grave"})]}),d.jsx("div",{className:"flex justify-center",children:d.jsx(RO,{startTime:Date.now(),className:"border-2 border-destructive/20 rounded-xl p-4 bg-destructive/5"})})]}),d.jsxs("div",{className:"space-y-8",children:[j.filter(_=>_.isEmergency).map(_=>d.jsx(Tf,{componentName:`EmergencyStep-${_.id}`,showEmergencyInfo:_.id==="llamar-112",children:d.jsx("div",{className:(_.id==="llamar-112",""),children:d.jsx(Q5,{step:_,onToggleInfo:S,showMoreInfo:!!t[_.id],emergencyData:_.id==="llamar-112"?a:void 0,onEmergencyDataChange:_.id==="llamar-112"?y:void 0,onRefreshLocation:_.id==="llamar-112"?h:void 0,onRequestLocationPermission:_.id==="llamar-112"?p:void 0,locationPermissionDenied:_.id==="llamar-112"?i:void 0})})},_.id)),d.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-1",children:j.filter(_=>!_.isEmergency).map(_=>d.jsx(Tf,{componentName:`EmergencyStep-${_.id}`,showEmergencyInfo:!1,children:d.jsx(Q5,{step:_,onToggleInfo:S,showMoreInfo:!!t[_.id]})},_.id))})]}),d.jsxs(En,{className:"bg-destructive/10 border-destructive/30 mt-8",children:[d.jsx(ai,{children:d.jsxs(Qr,{className:"text-destructive flex items-center space-x-2",children:[d.jsx(Ms,{className:"h-5 w-5 text-destructive"}),d.jsx("span",{children:"Importante!"})]})}),d.jsx(Ln,{children:d.jsx("p",{className:"text-foreground text-sm leading-relaxed font-medium",children:"Este protocolo es una gua de emergencia. Siempre busque atencin mdica profesional en caso de una reaccin alrgica grave. No sustituye el consejo mdico profesional."})})]})]})})});u4.displayName="EmergencyView";const OO={theme:"system",setTheme:()=>null},d4=O.createContext(OO);function FO({children:t,defaultTheme:e="system",storageKey:n=Gj,...r}){const[i,s]=O.useState(()=>localStorage.getItem(n)||e);O.useEffect(()=>{const c=window.document.documentElement;if(c.classList.add("transition-colors","duration-300"),c.classList.remove("light","dark"),i==="system"){const u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c.classList.add(u);return}c.classList.add(i)},[i]),O.useEffect(()=>{if(i!=="system")return;const c=window.matchMedia("(prefers-color-scheme: dark)"),u=()=>{const h=window.document.documentElement;h.classList.remove("light","dark"),h.classList.add(c.matches?"dark":"light")};return c.addEventListener("change",u),()=>c.removeEventListener("change",u)},[i]);const a={theme:i,setTheme:c=>{localStorage.setItem(n,c),s(c)}};return d.jsx(d4.Provider,{...r,value:a,children:t})}const VO=()=>{const t=O.useContext(d4);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function X5(){const{theme:t,setTheme:e}=VO(),n=()=>{e(t==="light"?"dark":t==="dark"?"system":"light")},r=()=>{switch(t){case"light":return d.jsx(jw,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all"});case"dark":return d.jsx(Pw,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all"});default:return d.jsxs(d.Fragment,{children:[d.jsx(jw,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),d.jsx(Pw,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]})}},i=()=>{switch(t){case"light":return"Cambiar a tema oscuro";case"dark":return"Cambiar a tema automtico";default:return"Cambiar a tema claro"}};return d.jsxs(Nn,{variant:"outline",size:"icon",onClick:n,title:i(),children:[r(),d.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function cs(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function UO(t,e){const n=O.createContext(e),r=s=>{const{children:a,...c}=s,u=O.useMemo(()=>c,Object.values(c));return d.jsx(n.Provider,{value:u,children:a})};r.displayName=t+"Provider";function i(s){const a=O.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Yg(t,e=[]){let n=[];function r(s,a){const c=O.createContext(a),u=n.length;n=[...n,a];const h=y=>{const{scope:w,children:v,...j}=y,S=w?.[t]?.[u]||c,_=O.useMemo(()=>j,Object.values(j));return d.jsx(S.Provider,{value:_,children:v})};h.displayName=s+"Provider";function p(y,w){const v=w?.[t]?.[u]||c,j=O.useContext(v);if(j)return j;if(a!==void 0)return a;throw new Error(`\`${y}\` must be used within \`${s}\``)}return[h,p]}const i=()=>{const s=n.map(a=>O.createContext(a));return function(c){const u=c?.[t]||s;return O.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,BO(i,...e)]}function BO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((c,{useScope:u,scopeName:h})=>{const y=u(s)[`__scope${h}`];return{...c,...y}},{});return O.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var Zf=globalThis?.document?O.useLayoutEffect:()=>{},zO=hp[" useId ".trim().toString()]||(()=>{}),qO=0;function jf(t){const[e,n]=O.useState(zO());return Zf(()=>{n(r=>r??String(qO++))},[t]),e?`radix-${e}`:""}var $O=hp[" useInsertionEffect ".trim().toString()]||Zf;function M2({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,a]=HO({defaultProp:e,onChange:n}),c=t!==void 0,u=c?t:i;{const p=O.useRef(t!==void 0);O.useEffect(()=>{const y=p.current;y!==c&&console.warn(`${r} is changing from ${y?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=c},[c,r])}const h=O.useCallback(p=>{if(c){const y=WO(p)?p(t):p;y!==t&&a.current?.(y)}else s(p)},[c,t,s,a]);return[u,h]}function HO({defaultProp:t,onChange:e}){const[n,r]=O.useState(t),i=O.useRef(n),s=O.useRef(e);return $O(()=>{s.current=e},[e]),O.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}function WO(t){return typeof t=="function"}var GO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fs=GO.reduce((t,e)=>{const n=$f(`Primitive.${e}`),r=O.forwardRef((i,s)=>{const{asChild:a,...c}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function KO(t,e){t&&QN.flushSync(()=>t.dispatchEvent(e))}function gh(t){const e=O.useRef(t);return O.useEffect(()=>{e.current=t}),O.useMemo(()=>(...n)=>e.current?.(...n),[])}function YO(t,e=globalThis?.document){const n=gh(t);O.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var QO="DismissableLayer",r1="dismissableLayer.update",XO="dismissableLayer.pointerDownOutside",JO="dismissableLayer.focusOutside",J5,h4=O.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),f4=O.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:c,...u}=t,h=O.useContext(h4),[p,y]=O.useState(null),w=p?.ownerDocument??globalThis?.document,[,v]=O.useState({}),j=yl(e,q=>y(q)),S=Array.from(h.layers),[_]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),I=S.indexOf(_),V=p?S.indexOf(p):-1,z=h.layersWithOutsidePointerEventsDisabled.size>0,$=V>=I,J=t7(q=>{const E=q.target,T=[...h.branches].some(U=>U.contains(E));!$||T||(i?.(q),a?.(q),q.defaultPrevented||c?.())},w),le=n7(q=>{const E=q.target;[...h.branches].some(U=>U.contains(E))||(s?.(q),a?.(q),q.defaultPrevented||c?.())},w);return YO(q=>{V===h.layers.size-1&&(r?.(q),!q.defaultPrevented&&c&&(q.preventDefault(),c()))},w),O.useEffect(()=>{if(p)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(J5=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),Z5(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=J5)}},[p,w,n,h]),O.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),Z5())},[p,h]),O.useEffect(()=>{const q=()=>v({});return document.addEventListener(r1,q),()=>document.removeEventListener(r1,q)},[]),d.jsx(Fs.div,{...u,ref:j,style:{pointerEvents:z?$?"auto":"none":void 0,...t.style},onFocusCapture:cs(t.onFocusCapture,le.onFocusCapture),onBlurCapture:cs(t.onBlurCapture,le.onBlurCapture),onPointerDownCapture:cs(t.onPointerDownCapture,J.onPointerDownCapture)})});f4.displayName=QO;var ZO="DismissableLayerBranch",e7=O.forwardRef((t,e)=>{const n=O.useContext(h4),r=O.useRef(null),i=yl(e,r);return O.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),d.jsx(Fs.div,{...t,ref:i})});e7.displayName=ZO;function t7(t,e=globalThis?.document){const n=gh(t),r=O.useRef(!1),i=O.useRef(()=>{});return O.useEffect(()=>{const s=c=>{if(c.target&&!r.current){let u=function(){p4(XO,n,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function n7(t,e=globalThis?.document){const n=gh(t),r=O.useRef(!1);return O.useEffect(()=>{const i=s=>{s.target&&!r.current&&p4(JO,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Z5(){const t=new CustomEvent(r1);document.dispatchEvent(t)}function p4(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?KO(i,s):i.dispatchEvent(s)}var Oy="focusScope.autoFocusOnMount",Fy="focusScope.autoFocusOnUnmount",e_={bubbles:!1,cancelable:!0},r7="FocusScope",m4=O.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[c,u]=O.useState(null),h=gh(i),p=gh(s),y=O.useRef(null),w=yl(e,S=>u(S)),v=O.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;O.useEffect(()=>{if(r){let S=function(z){if(v.paused||!c)return;const $=z.target;c.contains($)?y.current=$:Bc(y.current,{select:!0})},_=function(z){if(v.paused||!c)return;const $=z.relatedTarget;$!==null&&(c.contains($)||Bc(y.current,{select:!0}))},I=function(z){if(document.activeElement===document.body)for(const J of z)J.removedNodes.length>0&&Bc(c)};document.addEventListener("focusin",S),document.addEventListener("focusout",_);const V=new MutationObserver(I);return c&&V.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",_),V.disconnect()}}},[r,c,v.paused]),O.useEffect(()=>{if(c){n_.add(v);const S=document.activeElement;if(!c.contains(S)){const I=new CustomEvent(Oy,e_);c.addEventListener(Oy,h),c.dispatchEvent(I),I.defaultPrevented||(i7(c7(g4(c)),{select:!0}),document.activeElement===S&&Bc(c))}return()=>{c.removeEventListener(Oy,h),setTimeout(()=>{const I=new CustomEvent(Fy,e_);c.addEventListener(Fy,p),c.dispatchEvent(I),I.defaultPrevented||Bc(S??document.body,{select:!0}),c.removeEventListener(Fy,p),n_.remove(v)},0)}}},[c,h,p,v]);const j=O.useCallback(S=>{if(!n&&!r||v.paused)return;const _=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,I=document.activeElement;if(_&&I){const V=S.currentTarget,[z,$]=s7(V);z&&$?!S.shiftKey&&I===$?(S.preventDefault(),n&&Bc(z,{select:!0})):S.shiftKey&&I===z&&(S.preventDefault(),n&&Bc($,{select:!0})):I===V&&S.preventDefault()}},[n,r,v.paused]);return d.jsx(Fs.div,{tabIndex:-1,...a,ref:w,onKeyDown:j})});m4.displayName=r7;function i7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Bc(r,{select:e}),document.activeElement!==n)return}function s7(t){const e=g4(t),n=t_(e,t),r=t_(e.reverse(),t);return[n,r]}function g4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function t_(t,e){for(const n of t)if(!o7(n,{upTo:e}))return n}function o7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function a7(t){return t instanceof HTMLInputElement&&"select"in t}function Bc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&a7(t)&&e&&t.select()}}var n_=l7();function l7(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=r_(t,e),t.unshift(e)},remove(e){t=r_(t,e),t[0]?.resume()}}}function r_(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function c7(t){return t.filter(e=>e.tagName!=="A")}var u7="Portal",y4=O.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=O.useState(!1);Zf(()=>s(!0),[]);const a=n||i&&globalThis?.document?.body;return a?yP.createPortal(d.jsx(Fs.div,{...r,ref:e}),a):null});y4.displayName=u7;function d7(t,e){return O.useReducer((n,r)=>e[n][r]??n,t)}var xp=t=>{const{present:e,children:n}=t,r=h7(e),i=typeof n=="function"?n({present:r.isPresent}):O.Children.only(n),s=yl(r.ref,f7(i));return typeof n=="function"||r.isPresent?O.cloneElement(i,{ref:s}):null};xp.displayName="Presence";function h7(t){const[e,n]=O.useState(),r=O.useRef(null),i=O.useRef(t),s=O.useRef("none"),a=t?"mounted":"unmounted",[c,u]=d7(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const h=Am(r.current);s.current=c==="mounted"?h:"none"},[c]),Zf(()=>{const h=r.current,p=i.current;if(p!==t){const w=s.current,v=Am(h);t?u("MOUNT"):v==="none"||h?.display==="none"?u("UNMOUNT"):u(p&&w!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),Zf(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,y=v=>{const S=Am(r.current).includes(CSS.escape(v.animationName));if(v.target===e&&S&&(u("ANIMATION_END"),!i.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},w=v=>{v.target===e&&(s.current=Am(r.current))};return e.addEventListener("animationstart",w),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",w),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:O.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Am(t){return t?.animationName||"none"}function f7(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Vy=0;function p7(){O.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??i_()),document.body.insertAdjacentElement("beforeend",t[1]??i_()),Vy++,()=>{Vy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vy--}},[])}function i_(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var al=function(){return al=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},al.apply(this,arguments)};function bp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function m7(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Km="right-scroll-bar-position",Ym="width-before-scroll-bar",g7="with-scroll-bars-hidden",y7="--removed-body-scroll-bar-size";function Uy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function v7(t,e){var n=O.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var x7=typeof window<"u"?O.useLayoutEffect:O.useEffect,s_=new WeakMap;function b7(t,e){var n=v7(null,function(r){return t.forEach(function(i){return Uy(i,r)})});return x7(function(){var r=s_.get(n);if(r){var i=new Set(r),s=new Set(t),a=n.current;i.forEach(function(c){s.has(c)||Uy(c,null)}),s.forEach(function(c){i.has(c)||Uy(c,a)})}s_.set(n,t)},[t]),n}function w7(t){return t}function _7(t,e){e===void 0&&(e=w7);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var a=e(s,r);return n.push(a),function(){n=n.filter(function(c){return c!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(c){return s(c)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var c=n;n=[],c.forEach(s),a=n}var u=function(){var p=a;a=[],p.forEach(s)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(p){a.push(p),h()},filter:function(p){return a=a.filter(p),n}}}};return i}function A7(t){t===void 0&&(t={});var e=_7(null);return e.options=al({async:!0,ssr:!1},t),e}var v4=function(t){var e=t.sideCar,n=bp(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return O.createElement(r,al({},n))};v4.isSideCarExport=!0;function N7(t,e){return t.useMedium(e),v4}var x4=A7(),By=function(){},Qg=O.forwardRef(function(t,e){var n=O.useRef(null),r=O.useState({onScrollCapture:By,onWheelCapture:By,onTouchMoveCapture:By}),i=r[0],s=r[1],a=t.forwardProps,c=t.children,u=t.className,h=t.removeScrollBar,p=t.enabled,y=t.shards,w=t.sideCar,v=t.noRelative,j=t.noIsolation,S=t.inert,_=t.allowPinchZoom,I=t.as,V=I===void 0?"div":I,z=t.gapMode,$=bp(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),J=w,le=b7([n,e]),q=al(al({},$),i);return O.createElement(O.Fragment,null,p&&O.createElement(J,{sideCar:x4,removeScrollBar:h,shards:y,noRelative:v,noIsolation:j,inert:S,setCallbacks:s,allowPinchZoom:!!_,lockRef:n,gapMode:z}),a?O.cloneElement(O.Children.only(c),al(al({},q),{ref:le})):O.createElement(V,al({},q,{className:u,ref:le}),c))});Qg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qg.classNames={fullWidth:Ym,zeroRight:Km};var E7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function S7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=E7();return e&&t.setAttribute("nonce",e),t}function T7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function k7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var C7=function(){var t=0,e=null;return{add:function(n){t==0&&(e=S7())&&(T7(e,n),k7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},I7=function(){var t=C7();return function(e,n){O.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},b4=function(){var t=I7(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},P7={left:0,top:0,right:0,gap:0},zy=function(t){return parseInt(t||"",10)||0},R7=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[zy(n),zy(r),zy(i)]},j7=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return P7;var e=R7(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},L7=b4(),th="data-scroll-locked",D7=function(t,e,n,r){var i=t.left,s=t.top,a=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(g7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(th,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Km,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Ym,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Km," .").concat(Km,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ym," .").concat(Ym,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(th,`] {
    `).concat(y7,": ").concat(c,`px;
  }
`)},o_=function(){var t=parseInt(document.body.getAttribute(th)||"0",10);return isFinite(t)?t:0},M7=function(){O.useEffect(function(){return document.body.setAttribute(th,(o_()+1).toString()),function(){var t=o_()-1;t<=0?document.body.removeAttribute(th):document.body.setAttribute(th,t.toString())}},[])},O7=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;M7();var s=O.useMemo(function(){return j7(i)},[i]);return O.createElement(L7,{styles:D7(s,!e,i,n?"":"!important")})},i1=!1;if(typeof window<"u")try{var Nm=Object.defineProperty({},"passive",{get:function(){return i1=!0,!0}});window.addEventListener("test",Nm,Nm),window.removeEventListener("test",Nm,Nm)}catch{i1=!1}var Od=i1?{passive:!1}:!1,F7=function(t){return t.tagName==="TEXTAREA"},w4=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!F7(t)&&n[e]==="visible")},V7=function(t){return w4(t,"overflowY")},U7=function(t){return w4(t,"overflowX")},a_=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=_4(t,r);if(i){var s=A4(t,r),a=s[1],c=s[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},B7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},z7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},_4=function(t,e){return t==="v"?V7(e):U7(e)},A4=function(t,e){return t==="v"?B7(e):z7(e)},q7=function(t,e){return t==="h"&&e==="rtl"?-1:1},$7=function(t,e,n,r,i){var s=q7(t,window.getComputedStyle(e).direction),a=s*r,c=n.target,u=e.contains(c),h=!1,p=a>0,y=0,w=0;do{if(!c)break;var v=A4(t,c),j=v[0],S=v[1],_=v[2],I=S-_-s*j;(j||I)&&_4(t,c)&&(y+=I,w+=j);var V=c.parentNode;c=V&&V.nodeType===Node.DOCUMENT_FRAGMENT_NODE?V.host:V}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(p&&Math.abs(y)<1||!p&&Math.abs(w)<1)&&(h=!0),h},Em=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},l_=function(t){return[t.deltaX,t.deltaY]},c_=function(t){return t&&"current"in t?t.current:t},H7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},W7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},G7=0,Fd=[];function K7(t){var e=O.useRef([]),n=O.useRef([0,0]),r=O.useRef(),i=O.useState(G7++)[0],s=O.useState(b4)[0],a=O.useRef(t);O.useEffect(function(){a.current=t},[t]),O.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var S=m7([t.lockRef.current],(t.shards||[]).map(c_),!0).filter(Boolean);return S.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),S.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=O.useCallback(function(S,_){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!a.current.allowPinchZoom;var I=Em(S),V=n.current,z="deltaX"in S?S.deltaX:V[0]-I[0],$="deltaY"in S?S.deltaY:V[1]-I[1],J,le=S.target,q=Math.abs(z)>Math.abs($)?"h":"v";if("touches"in S&&q==="h"&&le.type==="range")return!1;var E=a_(q,le);if(!E)return!0;if(E?J=q:(J=q==="v"?"h":"v",E=a_(q,le)),!E)return!1;if(!r.current&&"changedTouches"in S&&(z||$)&&(r.current=J),!J)return!0;var T=r.current||J;return $7(T,_,S,T==="h"?z:$)},[]),u=O.useCallback(function(S){var _=S;if(!(!Fd.length||Fd[Fd.length-1]!==s)){var I="deltaY"in _?l_(_):Em(_),V=e.current.filter(function(J){return J.name===_.type&&(J.target===_.target||_.target===J.shadowParent)&&H7(J.delta,I)})[0];if(V&&V.should){_.cancelable&&_.preventDefault();return}if(!V){var z=(a.current.shards||[]).map(c_).filter(Boolean).filter(function(J){return J.contains(_.target)}),$=z.length>0?c(_,z[0]):!a.current.noIsolation;$&&_.cancelable&&_.preventDefault()}}},[]),h=O.useCallback(function(S,_,I,V){var z={name:S,delta:_,target:I,should:V,shadowParent:Y7(I)};e.current.push(z),setTimeout(function(){e.current=e.current.filter(function($){return $!==z})},1)},[]),p=O.useCallback(function(S){n.current=Em(S),r.current=void 0},[]),y=O.useCallback(function(S){h(S.type,l_(S),S.target,c(S,t.lockRef.current))},[]),w=O.useCallback(function(S){h(S.type,Em(S),S.target,c(S,t.lockRef.current))},[]);O.useEffect(function(){return Fd.push(s),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:w}),document.addEventListener("wheel",u,Od),document.addEventListener("touchmove",u,Od),document.addEventListener("touchstart",p,Od),function(){Fd=Fd.filter(function(S){return S!==s}),document.removeEventListener("wheel",u,Od),document.removeEventListener("touchmove",u,Od),document.removeEventListener("touchstart",p,Od)}},[]);var v=t.removeScrollBar,j=t.inert;return O.createElement(O.Fragment,null,j?O.createElement(s,{styles:W7(i)}):null,v?O.createElement(O7,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Y7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Q7=N7(x4,K7);var N4=O.forwardRef(function(t,e){return O.createElement(Qg,al({},t,{ref:e,sideCar:Q7}))});N4.classNames=Qg.classNames;var X7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Vd=new WeakMap,Sm=new WeakMap,Tm={},qy=0,E4=function(t){return t&&(t.host||E4(t.parentNode))},J7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=E4(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Z7=function(t,e,n,r){var i=J7(e,Array.isArray(t)?t:[t]);Tm[n]||(Tm[n]=new WeakMap);var s=Tm[n],a=[],c=new Set,u=new Set(i),h=function(y){!y||c.has(y)||(c.add(y),h(y.parentNode))};i.forEach(h);var p=function(y){!y||u.has(y)||Array.prototype.forEach.call(y.children,function(w){if(c.has(w))p(w);else try{var v=w.getAttribute(r),j=v!==null&&v!=="false",S=(Vd.get(w)||0)+1,_=(s.get(w)||0)+1;Vd.set(w,S),s.set(w,_),a.push(w),S===1&&j&&Sm.set(w,!0),_===1&&w.setAttribute(n,"true"),j||w.setAttribute(r,"true")}catch(I){console.error("aria-hidden: cannot operate on ",w,I)}})};return p(e),c.clear(),qy++,function(){a.forEach(function(y){var w=Vd.get(y)-1,v=s.get(y)-1;Vd.set(y,w),s.set(y,v),w||(Sm.has(y)||y.removeAttribute(r),Sm.delete(y)),v||y.removeAttribute(n)}),qy--,qy||(Vd=new WeakMap,Vd=new WeakMap,Sm=new WeakMap,Tm={})}},eF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=X7(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Z7(r,i,n,"aria-hidden")):function(){return null}},Xg="Dialog",[S4]=Yg(Xg),[tF,Oa]=S4(Xg),T4=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,c=O.useRef(null),u=O.useRef(null),[h,p]=M2({prop:r,defaultProp:i??!1,onChange:s,caller:Xg});return d.jsx(tF,{scope:e,triggerRef:c,contentRef:u,contentId:jf(),titleId:jf(),descriptionId:jf(),open:h,onOpenChange:p,onOpenToggle:O.useCallback(()=>p(y=>!y),[p]),modal:a,children:n})};T4.displayName=Xg;var k4="DialogTrigger",C4=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(k4,n),s=yl(e,i.triggerRef);return d.jsx(Fs.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":V2(i.open),...r,ref:s,onClick:cs(t.onClick,i.onOpenToggle)})});C4.displayName=k4;var O2="DialogPortal",[nF,I4]=S4(O2,{forceMount:void 0}),P4=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Oa(O2,e);return d.jsx(nF,{scope:e,forceMount:n,children:O.Children.map(r,a=>d.jsx(xp,{present:n||s.open,children:d.jsx(y4,{asChild:!0,container:i,children:a})}))})};P4.displayName=O2;var yg="DialogOverlay",R4=O.forwardRef((t,e)=>{const n=I4(yg,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Oa(yg,t.__scopeDialog);return s.modal?d.jsx(xp,{present:r||s.open,children:d.jsx(iF,{...i,ref:e})}):null});R4.displayName=yg;var rF=$f("DialogOverlay.RemoveScroll"),iF=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(yg,n);return d.jsx(N4,{as:rF,allowPinchZoom:!0,shards:[i.contentRef],children:d.jsx(Fs.div,{"data-state":V2(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ku="DialogContent",j4=O.forwardRef((t,e)=>{const n=I4(Ku,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Oa(Ku,t.__scopeDialog);return d.jsx(xp,{present:r||s.open,children:s.modal?d.jsx(sF,{...i,ref:e}):d.jsx(oF,{...i,ref:e})})});j4.displayName=Ku;var sF=O.forwardRef((t,e)=>{const n=Oa(Ku,t.__scopeDialog),r=O.useRef(null),i=yl(e,n.contentRef,r);return O.useEffect(()=>{const s=r.current;if(s)return eF(s)},[]),d.jsx(L4,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cs(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:cs(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&s.preventDefault()}),onFocusOutside:cs(t.onFocusOutside,s=>s.preventDefault())})}),oF=O.forwardRef((t,e)=>{const n=Oa(Ku,t.__scopeDialog),r=O.useRef(!1),i=O.useRef(!1);return d.jsx(L4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;n.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),L4=O.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=t,c=Oa(Ku,n),u=O.useRef(null),h=yl(e,u);return p7(),d.jsxs(d.Fragment,{children:[d.jsx(m4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:d.jsx(f4,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":V2(c.open),...a,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(aF,{titleId:c.titleId}),d.jsx(cF,{contentRef:u,descriptionId:c.descriptionId})]})]})}),F2="DialogTitle",D4=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(F2,n);return d.jsx(Fs.h2,{id:i.titleId,...r,ref:e})});D4.displayName=F2;var M4="DialogDescription",O4=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(M4,n);return d.jsx(Fs.p,{id:i.descriptionId,...r,ref:e})});O4.displayName=M4;var F4="DialogClose",V4=O.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Oa(F4,n);return d.jsx(Fs.button,{type:"button",...r,ref:e,onClick:cs(t.onClick,()=>i.onOpenChange(!1))})});V4.displayName=F4;function V2(t){return t?"open":"closed"}var U4="DialogTitleWarning",[KY,B4]=UO(U4,{contentName:Ku,titleName:F2,docsSlug:"dialog"}),aF=({titleId:t})=>{const e=B4(U4),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return O.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},lF="DialogDescriptionWarning",cF=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${B4(lF).contentName}}.`;return O.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},uF=T4,dF=C4,hF=P4,z4=R4,q4=j4,$4=D4,H4=O4,fF=V4;const pF=uF,mF=dF,gF=hF,yF=Q1("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),W4=O.forwardRef(({side:t="right",className:e,children:n,...r},i)=>d.jsxs(gF,{children:[d.jsx(G4,{}),d.jsxs(q4,{ref:i,className:nn(yF({side:t}),e),...r,children:[n,d.jsxs(fF,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[d.jsx(t2,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));W4.displayName=q4.displayName;const G4=O.forwardRef(({className:t,...e},n)=>d.jsx(z4,{className:nn("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));G4.displayName=z4.displayName;const K4=O.forwardRef(({className:t,...e},n)=>d.jsx($4,{ref:n,className:nn("text-lg font-semibold text-foreground",t),...e}));K4.displayName=$4.displayName;const Y4=O.forwardRef(({className:t,...e},n)=>d.jsx(H4,{ref:n,className:nn("text-sm text-muted-foreground",t),...e}));Y4.displayName=H4.displayName;var u_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},X4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,c=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,y=(s&3)<<4|c>>4;let w=(c&15)<<2|h>>6,v=h&63;u||(v=64,a||(w=64)),r.push(n[p],n[y],n[w],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Q4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||h==null||y==null)throw new xF;const w=s<<2|c>>4;if(r.push(w),h!==64){const v=c<<4&240|h>>2;if(r.push(v),y!==64){const j=h<<6&192|y;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bF=function(t){const e=Q4(t);return X4.encodeByteArray(e,!0)},vg=function(t){return bF(t).replace(/\./g,"")},J4=function(t){try{return X4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=()=>wF().__FIREBASE_DEFAULTS__,AF=()=>{if(typeof process>"u"||typeof u_>"u")return;const t=u_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&J4(t[1]);return e&&JSON.parse(e)},Jg=()=>{try{return _F()||AF()||NF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Z4=t=>{var e,n;return(n=(e=Jg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},e3=t=>{const e=Z4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},t3=()=>{var t;return(t=Jg())===null||t===void 0?void 0:t.config},n3=t=>{var e;return(e=Jg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vg(JSON.stringify(n)),vg(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Os())}function TF(){var t;const e=(t=Jg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PF(){const t=Os();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RF(){return!TF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jF(){try{return typeof indexedDB=="object"}catch{return!1}}function LF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF="FirebaseError";class bl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DF,Object.setPrototypeOf(this,bl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wp.prototype.create)}}class wp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?MF(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new bl(i,c,r)}}function MF(t,e){return t.replace(OF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const OF=/\{\$([^}]+)}/g;function FF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ep(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(d_(s)&&d_(a)){if(!ep(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function d_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function VF(t,e){const n=new UF(t,e);return n.subscribe.bind(n)}class UF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$y),i.error===void 0&&(i.error=$y),i.complete===void 0&&(i.complete=$y);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $y(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t){return t&&t._delegate?t._delegate:t}class nu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new EF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($F(e))try{this.getOrInitializeService({instanceIdentifier:Lu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Lu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lu){return this.instances.has(e)}getOptions(e=Lu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lu){return this.component?this.component.multipleInstances?e:Lu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qF(t){return t===Lu?void 0:t}function $F(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(An||(An={}));const WF={debug:An.DEBUG,verbose:An.VERBOSE,info:An.INFO,warn:An.WARN,error:An.ERROR,silent:An.SILENT},GF=An.INFO,KF={[An.DEBUG]:"log",[An.VERBOSE]:"log",[An.INFO]:"info",[An.WARN]:"warn",[An.ERROR]:"error"},YF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=KF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class U2{constructor(e){this.name=e,this._logLevel=GF,this._logHandler=YF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in An))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,An.DEBUG,...e),this._logHandler(this,An.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,An.VERBOSE,...e),this._logHandler(this,An.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,An.INFO,...e),this._logHandler(this,An.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,An.WARN,...e),this._logHandler(this,An.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,An.ERROR,...e),this._logHandler(this,An.ERROR,...e)}}const QF=(t,e)=>e.some(n=>t instanceof n);let h_,f_;function XF(){return h_||(h_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JF(){return f_||(f_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i3=new WeakMap,s1=new WeakMap,s3=new WeakMap,Hy=new WeakMap,B2=new WeakMap;function ZF(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Yc(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&i3.set(n,t)}).catch(()=>{}),B2.set(e,t),e}function e9(t){if(s1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});s1.set(t,e)}let o1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return s1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||s3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function t9(t){o1=t(o1)}function n9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wy(this),e,...n);return s3.set(r,e.sort?e.sort():[e]),Yc(r)}:JF().includes(t)?function(...e){return t.apply(Wy(this),e),Yc(i3.get(this))}:function(...e){return Yc(t.apply(Wy(this),e))}}function r9(t){return typeof t=="function"?n9(t):(t instanceof IDBTransaction&&e9(t),QF(t,XF())?new Proxy(t,o1):t)}function Yc(t){if(t instanceof IDBRequest)return ZF(t);if(Hy.has(t))return Hy.get(t);const e=r9(t);return e!==t&&(Hy.set(t,e),B2.set(e,t)),e}const Wy=t=>B2.get(t);function i9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),c=Yc(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Yc(a.result),u.oldVersion,u.newVersion,Yc(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const s9=["get","getKey","getAll","getAllKeys","count"],o9=["put","add","delete","clear"],Gy=new Map;function p_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gy.get(e))return Gy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=o9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||s9.includes(n)))return;const s=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&u.done]))[0]};return Gy.set(e,s),s}t9(t=>({...t,get:(e,n,r)=>p_(e,n)||t.get(e,n,r),has:(e,n)=>!!p_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function l9(t){const e=t.getComponent();return e?.type==="VERSION"}const a1="@firebase/app",m_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new U2("@firebase/app"),c9="@firebase/app-compat",u9="@firebase/analytics-compat",d9="@firebase/analytics",h9="@firebase/app-check-compat",f9="@firebase/app-check",p9="@firebase/auth",m9="@firebase/auth-compat",g9="@firebase/database",y9="@firebase/data-connect",v9="@firebase/database-compat",x9="@firebase/functions",b9="@firebase/functions-compat",w9="@firebase/installations",_9="@firebase/installations-compat",A9="@firebase/messaging",N9="@firebase/messaging-compat",E9="@firebase/performance",S9="@firebase/performance-compat",T9="@firebase/remote-config",k9="@firebase/remote-config-compat",C9="@firebase/storage",I9="@firebase/storage-compat",P9="@firebase/firestore",R9="@firebase/vertexai-preview",j9="@firebase/firestore-compat",L9="firebase",D9="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="[DEFAULT]",M9={[a1]:"fire-core",[c9]:"fire-core-compat",[d9]:"fire-analytics",[u9]:"fire-analytics-compat",[f9]:"fire-app-check",[h9]:"fire-app-check-compat",[p9]:"fire-auth",[m9]:"fire-auth-compat",[g9]:"fire-rtdb",[y9]:"fire-data-connect",[v9]:"fire-rtdb-compat",[x9]:"fire-fn",[b9]:"fire-fn-compat",[w9]:"fire-iid",[_9]:"fire-iid-compat",[A9]:"fire-fcm",[N9]:"fire-fcm-compat",[E9]:"fire-perf",[S9]:"fire-perf-compat",[T9]:"fire-rc",[k9]:"fire-rc-compat",[C9]:"fire-gcs",[I9]:"fire-gcs-compat",[P9]:"fire-fst",[j9]:"fire-fst-compat",[R9]:"fire-vertex","fire-js":"fire-js",[L9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new Map,O9=new Map,c1=new Map;function g_(t,e){try{t.container.addComponent(e)}catch(n){ic.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yu(t){const e=t.name;if(c1.has(e))return ic.debug(`There were multiple attempts to register component ${e}.`),!1;c1.set(e,t);for(const n of xg.values())g_(n,t);for(const n of O9.values())g_(n,t);return!0}function Zg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ll(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qc=new wp("app","Firebase",F9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=D9;function o3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:l1,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Qc.create("bad-app-name",{appName:String(i)});if(n||(n=t3()),!n)throw Qc.create("no-options");const s=xg.get(i);if(s){if(ep(n,s.options)&&ep(r,s.config))return s;throw Qc.create("duplicate-app",{appName:i})}const a=new HF(i);for(const u of c1.values())a.addComponent(u);const c=new V9(n,r,a);return xg.set(i,c),c}function z2(t=l1){const e=xg.get(t);if(!e&&t===l1&&t3())return o3();if(!e)throw Qc.create("no-app",{appName:t});return e}function fl(t,e,n){var r;let i=(r=M9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ic.warn(c.join(" "));return}Yu(new nu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="firebase-heartbeat-database",B9=1,tp="firebase-heartbeat-store";let Ky=null;function a3(){return Ky||(Ky=i9(U9,B9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tp)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qc.create("idb-open",{originalErrorMessage:t.message})})),Ky}async function z9(t){try{const n=(await a3()).transaction(tp),r=await n.objectStore(tp).get(l3(t));return await n.done,r}catch(e){if(e instanceof bl)ic.warn(e.message);else{const n=Qc.create("idb-get",{originalErrorMessage:e?.message});ic.warn(n.message)}}}async function y_(t,e){try{const r=(await a3()).transaction(tp,"readwrite");await r.objectStore(tp).put(e,l3(t)),await r.done}catch(n){if(n instanceof bl)ic.warn(n.message);else{const r=Qc.create("idb-set",{originalErrorMessage:n?.message});ic.warn(r.message)}}}function l3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=1024,$9=720*60*60*1e3;class H9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new G9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=v_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=$9}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ic.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=v_(),{heartbeatsToSend:r,unsentEntries:i}=W9(this._heartbeatsCache.heartbeats),s=vg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ic.warn(n),""}}}function v_(){return new Date().toISOString().substring(0,10)}function W9(t,e=q9){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),x_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),x_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class G9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jF()?LF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await z9(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return y_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return y_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function x_(t){return vg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t){Yu(new nu("platform-logger",e=>new a9(e),"PRIVATE")),Yu(new nu("heartbeat",e=>new H9(e),"PRIVATE")),fl(a1,m_,t),fl(a1,m_,"esm2017"),fl("fire-js","")}K9("");function c3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y9=c3,u3=new wp("auth","Firebase",c3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=new U2("@firebase/auth");function Q9(t,...e){bg.logLevel<=An.WARN&&bg.warn(`Auth (${sd}): ${t}`,...e)}function Qm(t,...e){bg.logLevel<=An.ERROR&&bg.error(`Auth (${sd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t,...e){throw $2(t,...e)}function ja(t,...e){return $2(t,...e)}function q2(t,e,n){const r=Object.assign(Object.assign({},Y9()),{[e]:n});return new wp("auth","Firebase",r).create(e,{appName:t.name})}function Xc(t){return q2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&vl(t,"argument-error"),q2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return u3.create(t,...e)}function Yt(t,e,...n){if(!t)throw $2(e,...n)}function Xl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qm(e),new Error(e)}function sc(t,e){t||Xl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function X9(){return b_()==="http:"||b_()==="https:"}function b_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X9()||CF()||"connection"in navigator)?navigator.onLine:!0}function Z9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.shortDelay=e,this.longDelay=n,sc(n>e,"Short delay should be less than long delay!"),this.isMobile=SF()||IF()}get(){return J9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t,e){sc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=new Ap(3e4,6e4);function W2(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jh(t,e,n,r,i={}){return f3(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=_p(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},s);return kF()||(h.referrerPolicy="no-referrer"),h3.fetch()(p3(t,t.config.apiHost,n,c),h)})}async function f3(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},eV),e);try{const i=new rV(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw km(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw km(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw km(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw km(t,"user-disabled",a);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw q2(t,p,h);vl(t,p)}}catch(i){if(i instanceof bl)throw i;vl(t,"network-request-failed",{message:String(i)})}}async function nV(t,e,n,r,i={}){const s=await jh(t,e,n,r,i);return"mfaPendingCredential"in s&&vl(t,"multi-factor-auth-required",{_serverResponse:s}),s}function p3(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?H2(t.config,i):`${t.config.apiScheme}://${i}`}class rV{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ja(this.auth,"network-request-failed")),tV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function km(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ja(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iV(t,e){return jh(t,"POST","/v1/accounts:delete",e)}async function m3(t,e){return jh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sV(t,e=!1){const n=Xr(t),r=await n.getIdToken(e),i=G2(r);Yt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Lf(Yy(i.auth_time)),issuedAtTime:Lf(Yy(i.iat)),expirationTime:Lf(Yy(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Yy(t){return Number(t)*1e3}function G2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qm("JWT malformed, contained fewer than 3 sections"),null;try{const i=J4(n);return i?JSON.parse(i):(Qm("Failed to decode base64 JWT payload"),null)}catch(i){return Qm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function w_(t){const e=G2(t);return Yt(e,"internal-error"),Yt(typeof e.exp<"u","internal-error"),Yt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function np(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bl&&oV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lf(this.lastLoginAt),this.creationTime=Lf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wg(t){var e;const n=t.auth,r=await t.getIdToken(),i=await np(t,m3(n,{idToken:r}));Yt(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?g3(s.providerUserInfo):[],c=cV(t.providerData,a),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!c?.length,p=u?h:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new d1(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function lV(t){const e=Xr(t);await wg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function g3(t){return t.map(e=>{var{providerId:n}=e,r=bp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(t,e){const n=await f3(t,{},async()=>{const r=_p({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=p3(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",h3.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dV(t,e){return jh(t,"POST","/v2/accounts:revokeToken",W2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Yt(e.idToken,"internal-error"),Yt(typeof e.idToken<"u","internal-error"),Yt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Yt(e.length!==0,"internal-error");const n=w_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Yt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await uV(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new nh;return r&&(Yt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Yt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Yt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nh,this.toJSON())}_performRefresh(){return Xl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t,e){Yt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jl{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=bp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new d1(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await np(this,this.stsTokenManager.getToken(this.auth,e));return Yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sV(this,e)}reload(){return lV(this)}_assign(e){this!==e&&(Yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await wg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ll(this.auth.app))return Promise.reject(Xc(this.auth));const e=await this.getIdToken();return await np(this,iV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,c,u,h,p;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,j=(a=n.photoURL)!==null&&a!==void 0?a:void 0,S=(c=n.tenantId)!==null&&c!==void 0?c:void 0,_=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(h=n.createdAt)!==null&&h!==void 0?h:void 0,V=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:z,emailVerified:$,isAnonymous:J,providerData:le,stsTokenManager:q}=n;Yt(z&&q,e,"internal-error");const E=nh.fromJSON(this.name,q);Yt(typeof z=="string",e,"internal-error"),Mc(y,e.name),Mc(w,e.name),Yt(typeof $=="boolean",e,"internal-error"),Yt(typeof J=="boolean",e,"internal-error"),Mc(v,e.name),Mc(j,e.name),Mc(S,e.name),Mc(_,e.name),Mc(I,e.name),Mc(V,e.name);const T=new Jl({uid:z,auth:e,email:w,emailVerified:$,displayName:y,isAnonymous:J,photoURL:j,phoneNumber:v,tenantId:S,stsTokenManager:E,createdAt:I,lastLoginAt:V});return le&&Array.isArray(le)&&(T.providerData=le.map(U=>Object.assign({},U))),_&&(T._redirectEventId=_),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new nh;i.updateFromServerResponse(n);const s=new Jl({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await wg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Yt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?g3(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new nh;c.updateFromIdToken(r);const u=new Jl({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new d1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Map;function Zl(t){sc(t instanceof Function,"Expected a class definition");let e=__.get(t);return e?(sc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,__.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}y3.type="NONE";const A_=y3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t,e,n){return`firebase:${t}:${e}:${n}`}class rh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Xm(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xm("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new rh(Zl(A_),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Zl(A_);const a=Xm(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(a);if(p){const y=Jl._fromJSON(e,p);h!==s&&(c=y),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new rh(s,e,r):(s=u[0],c&&await s._set(a,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new rh(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(v3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A3(e))return"Blackberry";if(N3(e))return"Webos";if(x3(e))return"Safari";if((e.includes("chrome/")||b3(e))&&!e.includes("edge/"))return"Chrome";if(_3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function v3(t=Os()){return/firefox\//i.test(t)}function x3(t=Os()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b3(t=Os()){return/crios\//i.test(t)}function w3(t=Os()){return/iemobile/i.test(t)}function _3(t=Os()){return/android/i.test(t)}function A3(t=Os()){return/blackberry/i.test(t)}function N3(t=Os()){return/webos/i.test(t)}function K2(t=Os()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hV(t=Os()){var e;return K2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fV(){return PF()&&document.documentMode===10}function E3(t=Os()){return K2(t)||_3(t)||N3(t)||A3(t)||/windows phone/i.test(t)||w3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(t,e=[]){let n;switch(t){case"Browser":n=N_(Os());break;case"Worker":n=`${N_(Os())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${sd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,c)=>{try{const u=e(s);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t,e={}){return jh(t,"GET","/v2/passwordPolicy",W2(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=6;class yV{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:gV,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E_(this),this.idTokenSubscription=new E_(this),this.beforeStateQueue=new pV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zl(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await rh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await m3(this,{idToken:e}),r=await Jl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ll(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ll(this.app))return Promise.reject(Xc(this));const n=e?Xr(e):null;return n&&Yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ll(this.app)?Promise.reject(Xc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ll(this.app)?Promise.reject(Xc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mV(this),n=new yV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zl(e)||this._popupRedirectResolver;Yt(n,this,"argument-error"),this.redirectPersistenceManager=await rh.create(this,[Zl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yt(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&Q9(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Lh(t){return Xr(t)}class E_{constructor(e){this.auth=e,this.observer=null,this.addObserver=VF(n=>this.observer=n)}get next(){return Yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y2={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xV(t){Y2=t}function bV(t){return Y2.loadJS(t)}function wV(){return Y2.gapiScript}function _V(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t,e){const n=Zg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ep(s,e??{}))return i;vl(i,"already-initialized")}return n.initialize({options:e})}function NV(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Zl);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function EV(t,e,n){const r=Lh(t);Yt(r._canInitEmulator,r,"emulator-config-failed"),Yt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=T3(e),{host:a,port:c}=SV(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),TV()}function T3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SV(t){const e=T3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:S_(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:S_(a)}}}function S_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xl("not implemented")}_getIdTokenResponse(e){return Xl("not implemented")}_linkToIdToken(e,n){return Xl("not implemented")}_getReauthenticationResolver(e){return Xl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(t,e){return nV(t,"POST","/v1/accounts:signInWithIdp",W2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV="http://localhost";class Qu extends k3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vl("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=bp(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Qu(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ih(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ih(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ih(e,n)}buildRequest(){const e={requestUri:kV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_p(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends e0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Np{constructor(){super("facebook.com")}static credential(e){return Qu._fromParams({providerId:zc.PROVIDER_ID,signInMethod:zc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zc.credentialFromTaggedObject(e)}static credentialFromError(e){return zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zc.credential(e.oauthAccessToken)}catch{return null}}}zc.FACEBOOK_SIGN_IN_METHOD="facebook.com";zc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Np{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qu._fromParams({providerId:Ql.PROVIDER_ID,signInMethod:Ql.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ql.credentialFromTaggedObject(e)}static credentialFromError(e){return Ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ql.credential(n,r)}catch{return null}}}Ql.GOOGLE_SIGN_IN_METHOD="google.com";Ql.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Np{constructor(){super("github.com")}static credential(e){return Qu._fromParams({providerId:qc.PROVIDER_ID,signInMethod:qc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qc.credentialFromTaggedObject(e)}static credentialFromError(e){return qc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qc.credential(e.oauthAccessToken)}catch{return null}}}qc.GITHUB_SIGN_IN_METHOD="github.com";qc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Np{constructor(){super("twitter.com")}static credential(e,n){return Qu._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $c.credential(n,r)}catch{return null}}}$c.TWITTER_SIGN_IN_METHOD="twitter.com";$c.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Jl._fromIdTokenResponse(e,r,i),a=T_(r);return new yh({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=T_(r);return new yh({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function T_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends bl{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_g.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _g(e,n,r,i)}}function C3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_g._fromErrorAndOperation(t,s,e,r):s})}async function CV(t,e,n=!1){const r=await np(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return yh._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(t,e,n=!1){const{auth:r}=t;if(ll(r.app))return Promise.reject(Xc(r));const i="reauthenticate";try{const s=await np(t,C3(r,i,e,t),n);Yt(s.idToken,r,"internal-error");const a=G2(s.idToken);Yt(a,r,"internal-error");const{sub:c}=a;return Yt(t.uid===c,r,"user-mismatch"),yh._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&vl(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(t,e,n=!1){if(ll(t.app))return Promise.reject(Xc(t));const r="signIn",i=await C3(t,r,e),s=await yh._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function RV(t,e,n,r){return Xr(t).onIdTokenChanged(e,n,r)}function jV(t,e,n){return Xr(t).beforeAuthStateChanged(e,n)}function LV(t,e,n,r){return Xr(t).onAuthStateChanged(e,n,r)}function DV(t){return Xr(t).signOut()}const Ag="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ag,"1"),this.storage.removeItem(Ag),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=1e3,OV=10;class P3 extends I3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);fV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,OV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}P3.type="LOCAL";const FV=P3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3 extends I3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}R3.type="SESSION";const j3=R3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new t0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!a?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async h=>h(n.origin,s)),u=await VV(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{const h=Q2("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){const w=y;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(w.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(){return window}function BV(t){pl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(){return typeof pl().WorkerGlobalScope<"u"&&typeof pl().importScripts=="function"}async function zV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $V(){return L3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="firebaseLocalStorageDb",HV=1,Ng="firebaseLocalStorage",M3="fbase_key";class Ep{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function n0(t,e){return t.transaction([Ng],e?"readwrite":"readonly").objectStore(Ng)}function WV(){const t=indexedDB.deleteDatabase(D3);return new Ep(t).toPromise()}function h1(){const t=indexedDB.open(D3,HV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ng,{keyPath:M3})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ng)?e(r):(r.close(),await WV(),e(await h1()))})})}async function k_(t,e,n){const r=n0(t,!0).put({[M3]:e,value:n});return new Ep(r).toPromise()}async function GV(t,e){const n=n0(t,!1).get(e),r=await new Ep(n).toPromise();return r===void 0?null:r.value}function C_(t,e){const n=n0(t,!0).delete(e);return new Ep(n).toPromise()}const KV=800,YV=3;class O3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await h1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=t0._getInstance($V()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zV(),!this.activeServiceWorker)return;this.sender=new UV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await h1();return await k_(e,Ag,"1"),await C_(e,Ag),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>k_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>C_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=n0(i,!1).getAll();return new Ep(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}O3.type="LOCAL";const QV=O3;new Ap(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t,e){return e?Zl(e):(Yt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2 extends k3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ih(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ih(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ih(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XV(t){return PV(t.auth,new J2(t),t.bypassAuthState)}function JV(t){const{auth:e,user:n}=t;return Yt(n,e,"internal-error"),IV(n,new J2(t),t.bypassAuthState)}async function ZV(t){const{auth:e,user:n}=t;return Yt(n,e,"internal-error"),CV(n,new J2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XV;case"linkViaPopup":case"linkViaRedirect":return ZV;case"reauthViaPopup":case"reauthViaRedirect":return JV;default:vl(this.auth,"internal-error")}}resolve(e){sc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU=new Ap(2e3,1e4);async function tU(t,e,n){if(ll(t.app))return Promise.reject(ja(t,"operation-not-supported-in-this-environment"));const r=Lh(t);d3(t,e,e0);const i=X2(r,n);return new Vu(r,"signInViaPopup",e,i).executeNotNull()}class Vu extends F3{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vu.currentPopupAction&&Vu.currentPopupAction.cancel(),Vu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Yt(e,this.auth,"internal-error"),e}async onExecution(){sc(this.filter.length===1,"Popup operations only handle one event");const e=Q2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ja(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ja(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ja(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eU.get())};e()}}Vu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU="pendingRedirect",Jm=new Map;class rU extends F3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jm.get(this.auth._key());if(!e){try{const r=await iU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jm.set(this.auth._key(),e)}return this.bypassAuthState||Jm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iU(t,e){const n=U3(e),r=V3(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function sU(t,e){return V3(t)._set(U3(e),"true")}function oU(t,e){Jm.set(t._key(),e)}function V3(t){return Zl(t._redirectPersistence)}function U3(t){return Xm(nU,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t,e,n){return lU(t,e,n)}async function lU(t,e,n){if(ll(t.app))return Promise.reject(Xc(t));const r=Lh(t);d3(t,e,e0),await r._initializationPromise;const i=X2(r,n);return await sU(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function cU(t,e){return await Lh(t)._initializationPromise,B3(t,e,!1)}async function B3(t,e,n=!1){if(ll(t.app))return Promise.reject(Xc(t));const r=Lh(t),i=X2(r,e),a=await new rU(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=600*1e3;class dU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!z3(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ja(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uU&&this.cachedEventUids.clear(),this.cachedEventUids.has(I_(e))}saveEventToCache(e){this.cachedEventUids.add(I_(e)),this.lastProcessedEventTime=Date.now()}}function I_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function z3({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function hU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(t,e={}){return jh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mU=/^https?/;async function gU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fU(t);for(const n of e)try{if(yU(n))return}catch{}vl(t,"unauthorized-domain")}function yU(t){const e=u1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!mU.test(n))return!1;if(pU.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=new Ap(3e4,6e4);function P_(){const t=pl().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xU(t){return new Promise((e,n)=>{var r,i,s;function a(){P_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{P_(),n(ja(t,"network-request-failed"))},timeout:vU.get()})}if(!((i=(r=pl().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=pl().gapi)===null||s===void 0)&&s.load)a();else{const c=_V("iframefcb");return pl()[c]=()=>{gapi.load?a():n(ja(t,"network-request-failed"))},bV(`${wV()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Zm=null,e})}let Zm=null;function bU(t){return Zm=Zm||xU(t),Zm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=new Ap(5e3,15e3),_U="__/auth/iframe",AU="emulator/auth/iframe",NU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SU(t){const e=t.config;Yt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?H2(e,AU):`https://${t.config.authDomain}/${_U}`,r={apiKey:e.apiKey,appName:t.name,v:sd},i=EU.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_p(r).slice(1)}`}async function TU(t){const e=await bU(t),n=pl().gapi;return Yt(n,t,"internal-error"),e.open({where:document.body,url:SU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ja(t,"network-request-failed"),c=pl().setTimeout(()=>{s(a)},wU.get());function u(){pl().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CU=500,IU=600,PU="_blank",RU="http://localhost";class R_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jU(t,e,n,r=CU,i=IU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},kU),{width:r.toString(),height:i.toString(),top:s,left:a}),h=Os().toLowerCase();n&&(c=b3(h)?PU:n),v3(h)&&(e=e||RU,u.scrollbars="yes");const p=Object.entries(u).reduce((w,[v,j])=>`${w}${v}=${j},`,"");if(hV(h)&&c!=="_self")return LU(e||"",c),new R_(null);const y=window.open(e||"",c,p);Yt(y,t,"popup-blocked");try{y.focus()}catch{}return new R_(y)}function LU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU="__/auth/handler",MU="emulator/auth/handler",OU=encodeURIComponent("fac");async function j_(t,e,n,r,i,s){Yt(t.config.authDomain,t,"auth-domain-config-required"),Yt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:sd,eventId:i};if(e instanceof e0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",FF(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))a[p]=y}if(e instanceof Np){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),h=u?`#${OU}=${encodeURIComponent(u)}`:"";return`${FU(t)}?${_p(c).slice(1)}${h}`}function FU({config:t}){return t.emulator?H2(t,MU):`https://${t.authDomain}/${DU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="webStorageSupport";class VU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j3,this._completeRedirectFn=B3,this._overrideRedirectResult=oU}async _openPopup(e,n,r,i){var s;sc((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await j_(e,n,r,u1(),i);return jU(e,a,Q2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await j_(e,n,r,u1(),i);return BV(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(sc(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TU(e),r=new dU(e);return n.register("authEvent",i=>(Yt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qy,{type:Qy},i=>{var s;const a=(s=i?.[0])===null||s===void 0?void 0:s[Qy];a!==void 0&&n(!!a),vl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return E3()||x3()||K2()}}const UU=VU;var L_="@firebase/auth",D_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qU(t){Yu(new nu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Yt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S3(t)},h=new vV(r,i,s,u);return NV(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yu(new nu("auth-internal",e=>{const n=Lh(e.getProvider("auth").getImmediate());return(r=>new BU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fl(L_,D_,zU(t)),fl(L_,D_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=300,HU=n3("authIdTokenMaxAge")||$U;let M_=null;const WU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HU)return;const i=n?.token;M_!==i&&(M_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function GU(t=z2()){const e=Zg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AV(t,{popupRedirectResolver:UU,persistence:[QV,FV,j3]}),r=n3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=WU(s.toString());jV(n,a,()=>a(n.currentUser)),RV(n,c=>a(c))}}const i=Z4("auth");return i&&EV(n,`http://${i}`),n}function KU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ja("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",KU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qU("Browser");var O_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $u,q3;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(q,E){function T(){}T.prototype=E.prototype,q.D=E.prototype,q.prototype=new T,q.prototype.constructor=q,q.C=function(U,C,L){for(var D=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)D[ne-2]=arguments[ne];return E.prototype[C].apply(U,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(q,E,T){T||(T=0);var U=Array(16);if(typeof E=="string")for(var C=0;16>C;++C)U[C]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(C=0;16>C;++C)U[C]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=q.g[0],T=q.g[1],C=q.g[2];var L=q.g[3],D=E+(L^T&(C^L))+U[0]+3614090360&4294967295;E=T+(D<<7&4294967295|D>>>25),D=L+(C^E&(T^C))+U[1]+3905402710&4294967295,L=E+(D<<12&4294967295|D>>>20),D=C+(T^L&(E^T))+U[2]+606105819&4294967295,C=L+(D<<17&4294967295|D>>>15),D=T+(E^C&(L^E))+U[3]+3250441966&4294967295,T=C+(D<<22&4294967295|D>>>10),D=E+(L^T&(C^L))+U[4]+4118548399&4294967295,E=T+(D<<7&4294967295|D>>>25),D=L+(C^E&(T^C))+U[5]+1200080426&4294967295,L=E+(D<<12&4294967295|D>>>20),D=C+(T^L&(E^T))+U[6]+2821735955&4294967295,C=L+(D<<17&4294967295|D>>>15),D=T+(E^C&(L^E))+U[7]+4249261313&4294967295,T=C+(D<<22&4294967295|D>>>10),D=E+(L^T&(C^L))+U[8]+1770035416&4294967295,E=T+(D<<7&4294967295|D>>>25),D=L+(C^E&(T^C))+U[9]+2336552879&4294967295,L=E+(D<<12&4294967295|D>>>20),D=C+(T^L&(E^T))+U[10]+4294925233&4294967295,C=L+(D<<17&4294967295|D>>>15),D=T+(E^C&(L^E))+U[11]+2304563134&4294967295,T=C+(D<<22&4294967295|D>>>10),D=E+(L^T&(C^L))+U[12]+1804603682&4294967295,E=T+(D<<7&4294967295|D>>>25),D=L+(C^E&(T^C))+U[13]+4254626195&4294967295,L=E+(D<<12&4294967295|D>>>20),D=C+(T^L&(E^T))+U[14]+2792965006&4294967295,C=L+(D<<17&4294967295|D>>>15),D=T+(E^C&(L^E))+U[15]+1236535329&4294967295,T=C+(D<<22&4294967295|D>>>10),D=E+(C^L&(T^C))+U[1]+4129170786&4294967295,E=T+(D<<5&4294967295|D>>>27),D=L+(T^C&(E^T))+U[6]+3225465664&4294967295,L=E+(D<<9&4294967295|D>>>23),D=C+(E^T&(L^E))+U[11]+643717713&4294967295,C=L+(D<<14&4294967295|D>>>18),D=T+(L^E&(C^L))+U[0]+3921069994&4294967295,T=C+(D<<20&4294967295|D>>>12),D=E+(C^L&(T^C))+U[5]+3593408605&4294967295,E=T+(D<<5&4294967295|D>>>27),D=L+(T^C&(E^T))+U[10]+38016083&4294967295,L=E+(D<<9&4294967295|D>>>23),D=C+(E^T&(L^E))+U[15]+3634488961&4294967295,C=L+(D<<14&4294967295|D>>>18),D=T+(L^E&(C^L))+U[4]+3889429448&4294967295,T=C+(D<<20&4294967295|D>>>12),D=E+(C^L&(T^C))+U[9]+568446438&4294967295,E=T+(D<<5&4294967295|D>>>27),D=L+(T^C&(E^T))+U[14]+3275163606&4294967295,L=E+(D<<9&4294967295|D>>>23),D=C+(E^T&(L^E))+U[3]+4107603335&4294967295,C=L+(D<<14&4294967295|D>>>18),D=T+(L^E&(C^L))+U[8]+1163531501&4294967295,T=C+(D<<20&4294967295|D>>>12),D=E+(C^L&(T^C))+U[13]+2850285829&4294967295,E=T+(D<<5&4294967295|D>>>27),D=L+(T^C&(E^T))+U[2]+4243563512&4294967295,L=E+(D<<9&4294967295|D>>>23),D=C+(E^T&(L^E))+U[7]+1735328473&4294967295,C=L+(D<<14&4294967295|D>>>18),D=T+(L^E&(C^L))+U[12]+2368359562&4294967295,T=C+(D<<20&4294967295|D>>>12),D=E+(T^C^L)+U[5]+4294588738&4294967295,E=T+(D<<4&4294967295|D>>>28),D=L+(E^T^C)+U[8]+2272392833&4294967295,L=E+(D<<11&4294967295|D>>>21),D=C+(L^E^T)+U[11]+1839030562&4294967295,C=L+(D<<16&4294967295|D>>>16),D=T+(C^L^E)+U[14]+4259657740&4294967295,T=C+(D<<23&4294967295|D>>>9),D=E+(T^C^L)+U[1]+2763975236&4294967295,E=T+(D<<4&4294967295|D>>>28),D=L+(E^T^C)+U[4]+1272893353&4294967295,L=E+(D<<11&4294967295|D>>>21),D=C+(L^E^T)+U[7]+4139469664&4294967295,C=L+(D<<16&4294967295|D>>>16),D=T+(C^L^E)+U[10]+3200236656&4294967295,T=C+(D<<23&4294967295|D>>>9),D=E+(T^C^L)+U[13]+681279174&4294967295,E=T+(D<<4&4294967295|D>>>28),D=L+(E^T^C)+U[0]+3936430074&4294967295,L=E+(D<<11&4294967295|D>>>21),D=C+(L^E^T)+U[3]+3572445317&4294967295,C=L+(D<<16&4294967295|D>>>16),D=T+(C^L^E)+U[6]+76029189&4294967295,T=C+(D<<23&4294967295|D>>>9),D=E+(T^C^L)+U[9]+3654602809&4294967295,E=T+(D<<4&4294967295|D>>>28),D=L+(E^T^C)+U[12]+3873151461&4294967295,L=E+(D<<11&4294967295|D>>>21),D=C+(L^E^T)+U[15]+530742520&4294967295,C=L+(D<<16&4294967295|D>>>16),D=T+(C^L^E)+U[2]+3299628645&4294967295,T=C+(D<<23&4294967295|D>>>9),D=E+(C^(T|~L))+U[0]+4096336452&4294967295,E=T+(D<<6&4294967295|D>>>26),D=L+(T^(E|~C))+U[7]+1126891415&4294967295,L=E+(D<<10&4294967295|D>>>22),D=C+(E^(L|~T))+U[14]+2878612391&4294967295,C=L+(D<<15&4294967295|D>>>17),D=T+(L^(C|~E))+U[5]+4237533241&4294967295,T=C+(D<<21&4294967295|D>>>11),D=E+(C^(T|~L))+U[12]+1700485571&4294967295,E=T+(D<<6&4294967295|D>>>26),D=L+(T^(E|~C))+U[3]+2399980690&4294967295,L=E+(D<<10&4294967295|D>>>22),D=C+(E^(L|~T))+U[10]+4293915773&4294967295,C=L+(D<<15&4294967295|D>>>17),D=T+(L^(C|~E))+U[1]+2240044497&4294967295,T=C+(D<<21&4294967295|D>>>11),D=E+(C^(T|~L))+U[8]+1873313359&4294967295,E=T+(D<<6&4294967295|D>>>26),D=L+(T^(E|~C))+U[15]+4264355552&4294967295,L=E+(D<<10&4294967295|D>>>22),D=C+(E^(L|~T))+U[6]+2734768916&4294967295,C=L+(D<<15&4294967295|D>>>17),D=T+(L^(C|~E))+U[13]+1309151649&4294967295,T=C+(D<<21&4294967295|D>>>11),D=E+(C^(T|~L))+U[4]+4149444226&4294967295,E=T+(D<<6&4294967295|D>>>26),D=L+(T^(E|~C))+U[11]+3174756917&4294967295,L=E+(D<<10&4294967295|D>>>22),D=C+(E^(L|~T))+U[2]+718787259&4294967295,C=L+(D<<15&4294967295|D>>>17),D=T+(L^(C|~E))+U[9]+3951481745&4294967295,q.g[0]=q.g[0]+E&4294967295,q.g[1]=q.g[1]+(C+(D<<21&4294967295|D>>>11))&4294967295,q.g[2]=q.g[2]+C&4294967295,q.g[3]=q.g[3]+L&4294967295}r.prototype.u=function(q,E){E===void 0&&(E=q.length);for(var T=E-this.blockSize,U=this.B,C=this.h,L=0;L<E;){if(C==0)for(;L<=T;)i(this,q,L),L+=this.blockSize;if(typeof q=="string"){for(;L<E;)if(U[C++]=q.charCodeAt(L++),C==this.blockSize){i(this,U),C=0;break}}else for(;L<E;)if(U[C++]=q[L++],C==this.blockSize){i(this,U),C=0;break}}this.h=C,this.o+=E},r.prototype.v=function(){var q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);q[0]=128;for(var E=1;E<q.length-8;++E)q[E]=0;var T=8*this.o;for(E=q.length-8;E<q.length;++E)q[E]=T&255,T/=256;for(this.u(q),q=Array(16),E=T=0;4>E;++E)for(var U=0;32>U;U+=8)q[T++]=this.g[E]>>>U&255;return q};function s(q,E){var T=c;return Object.prototype.hasOwnProperty.call(T,q)?T[q]:T[q]=E(q)}function a(q,E){this.h=E;for(var T=[],U=!0,C=q.length-1;0<=C;C--){var L=q[C]|0;U&&L==E||(T[C]=L,U=!1)}this.g=T}var c={};function u(q){return-128<=q&&128>q?s(q,function(E){return new a([E|0],0>E?-1:0)}):new a([q|0],0>q?-1:0)}function h(q){if(isNaN(q)||!isFinite(q))return y;if(0>q)return _(h(-q));for(var E=[],T=1,U=0;q>=T;U++)E[U]=q/T|0,T*=4294967296;return new a(E,0)}function p(q,E){if(q.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(q.charAt(0)=="-")return _(p(q.substring(1),E));if(0<=q.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(E,8)),U=y,C=0;C<q.length;C+=8){var L=Math.min(8,q.length-C),D=parseInt(q.substring(C,C+L),E);8>L?(L=h(Math.pow(E,L)),U=U.j(L).add(h(D))):(U=U.j(T),U=U.add(h(D)))}return U}var y=u(0),w=u(1),v=u(16777216);t=a.prototype,t.m=function(){if(S(this))return-_(this).m();for(var q=0,E=1,T=0;T<this.g.length;T++){var U=this.i(T);q+=(0<=U?U:4294967296+U)*E,E*=4294967296}return q},t.toString=function(q){if(q=q||10,2>q||36<q)throw Error("radix out of range: "+q);if(j(this))return"0";if(S(this))return"-"+_(this).toString(q);for(var E=h(Math.pow(q,6)),T=this,U="";;){var C=$(T,E).g;T=I(T,C.j(E));var L=((0<T.g.length?T.g[0]:T.h)>>>0).toString(q);if(T=C,j(T))return L+U;for(;6>L.length;)L="0"+L;U=L+U}},t.i=function(q){return 0>q?0:q<this.g.length?this.g[q]:this.h};function j(q){if(q.h!=0)return!1;for(var E=0;E<q.g.length;E++)if(q.g[E]!=0)return!1;return!0}function S(q){return q.h==-1}t.l=function(q){return q=I(this,q),S(q)?-1:j(q)?0:1};function _(q){for(var E=q.g.length,T=[],U=0;U<E;U++)T[U]=~q.g[U];return new a(T,~q.h).add(w)}t.abs=function(){return S(this)?_(this):this},t.add=function(q){for(var E=Math.max(this.g.length,q.g.length),T=[],U=0,C=0;C<=E;C++){var L=U+(this.i(C)&65535)+(q.i(C)&65535),D=(L>>>16)+(this.i(C)>>>16)+(q.i(C)>>>16);U=D>>>16,L&=65535,D&=65535,T[C]=D<<16|L}return new a(T,T[T.length-1]&-2147483648?-1:0)};function I(q,E){return q.add(_(E))}t.j=function(q){if(j(this)||j(q))return y;if(S(this))return S(q)?_(this).j(_(q)):_(_(this).j(q));if(S(q))return _(this.j(_(q)));if(0>this.l(v)&&0>q.l(v))return h(this.m()*q.m());for(var E=this.g.length+q.g.length,T=[],U=0;U<2*E;U++)T[U]=0;for(U=0;U<this.g.length;U++)for(var C=0;C<q.g.length;C++){var L=this.i(U)>>>16,D=this.i(U)&65535,ne=q.i(C)>>>16,se=q.i(C)&65535;T[2*U+2*C]+=D*se,V(T,2*U+2*C),T[2*U+2*C+1]+=L*se,V(T,2*U+2*C+1),T[2*U+2*C+1]+=D*ne,V(T,2*U+2*C+1),T[2*U+2*C+2]+=L*ne,V(T,2*U+2*C+2)}for(U=0;U<E;U++)T[U]=T[2*U+1]<<16|T[2*U];for(U=E;U<2*E;U++)T[U]=0;return new a(T,0)};function V(q,E){for(;(q[E]&65535)!=q[E];)q[E+1]+=q[E]>>>16,q[E]&=65535,E++}function z(q,E){this.g=q,this.h=E}function $(q,E){if(j(E))throw Error("division by zero");if(j(q))return new z(y,y);if(S(q))return E=$(_(q),E),new z(_(E.g),_(E.h));if(S(E))return E=$(q,_(E)),new z(_(E.g),E.h);if(30<q.g.length){if(S(q)||S(E))throw Error("slowDivide_ only works with positive integers.");for(var T=w,U=E;0>=U.l(q);)T=J(T),U=J(U);var C=le(T,1),L=le(U,1);for(U=le(U,2),T=le(T,2);!j(U);){var D=L.add(U);0>=D.l(q)&&(C=C.add(T),L=D),U=le(U,1),T=le(T,1)}return E=I(q,C.j(E)),new z(C,E)}for(C=y;0<=q.l(E);){for(T=Math.max(1,Math.floor(q.m()/E.m())),U=Math.ceil(Math.log(T)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),L=h(T),D=L.j(E);S(D)||0<D.l(q);)T-=U,L=h(T),D=L.j(E);j(L)&&(L=w),C=C.add(L),q=I(q,D)}return new z(C,q)}t.A=function(q){return $(this,q).h},t.and=function(q){for(var E=Math.max(this.g.length,q.g.length),T=[],U=0;U<E;U++)T[U]=this.i(U)&q.i(U);return new a(T,this.h&q.h)},t.or=function(q){for(var E=Math.max(this.g.length,q.g.length),T=[],U=0;U<E;U++)T[U]=this.i(U)|q.i(U);return new a(T,this.h|q.h)},t.xor=function(q){for(var E=Math.max(this.g.length,q.g.length),T=[],U=0;U<E;U++)T[U]=this.i(U)^q.i(U);return new a(T,this.h^q.h)};function J(q){for(var E=q.g.length+1,T=[],U=0;U<E;U++)T[U]=q.i(U)<<1|q.i(U-1)>>>31;return new a(T,q.h)}function le(q,E){var T=E>>5;E%=32;for(var U=q.g.length-T,C=[],L=0;L<U;L++)C[L]=0<E?q.i(L+T)>>>E|q.i(L+T+1)<<32-E:q.i(L+T);return new a(C,q.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,q3=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,$u=a}).apply(typeof O_<"u"?O_:typeof self<"u"?self:typeof window<"u"?window:{});var Cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $3,_f,H3,eg,f1,W3,G3,K3;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,P,B){return g==Array.prototype||g==Object.prototype||(g[P]=B.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cm=="object"&&Cm];for(var P=0;P<g.length;++P){var B=g[P];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=n(this);function i(g,P){if(P)e:{var B=r;g=g.split(".");for(var re=0;re<g.length-1;re++){var Se=g[re];if(!(Se in B))break e;B=B[Se]}g=g[g.length-1],re=B[g],P=P(re),P!=re&&P!=null&&e(B,g,{configurable:!0,writable:!0,value:P})}}function s(g,P){g instanceof String&&(g+="");var B=0,re=!1,Se={next:function(){if(!re&&B<g.length){var Le=B++;return{value:P(Le,g[Le]),done:!1}}return re=!0,{done:!0,value:void 0}}};return Se[Symbol.iterator]=function(){return Se},Se}i("Array.prototype.values",function(g){return g||function(){return s(this,function(P,B){return B})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(g){var P=typeof g;return P=P!="object"?P:g?Array.isArray(g)?"array":P:"null",P=="array"||P=="object"&&typeof g.length=="number"}function h(g){var P=typeof g;return P=="object"&&g!=null||P=="function"}function p(g,P,B){return g.call.apply(g.bind,arguments)}function y(g,P,B){if(!g)throw Error();if(2<arguments.length){var re=Array.prototype.slice.call(arguments,2);return function(){var Se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Se,re),g.apply(P,Se)}}return function(){return g.apply(P,arguments)}}function w(g,P,B){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,w.apply(null,arguments)}function v(g,P){var B=Array.prototype.slice.call(arguments,1);return function(){var re=B.slice();return re.push.apply(re,arguments),g.apply(this,re)}}function j(g,P){function B(){}B.prototype=P.prototype,g.aa=P.prototype,g.prototype=new B,g.prototype.constructor=g,g.Qb=function(re,Se,Le){for(var Xe=Array(arguments.length-2),xn=2;xn<arguments.length;xn++)Xe[xn-2]=arguments[xn];return P.prototype[Se].apply(re,Xe)}}function S(g){const P=g.length;if(0<P){const B=Array(P);for(let re=0;re<P;re++)B[re]=g[re];return B}return[]}function _(g,P){for(let B=1;B<arguments.length;B++){const re=arguments[B];if(u(re)){const Se=g.length||0,Le=re.length||0;g.length=Se+Le;for(let Xe=0;Xe<Le;Xe++)g[Se+Xe]=re[Xe]}else g.push(re)}}class I{constructor(P,B){this.i=P,this.j=B,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function V(g){return/^[\s\xa0]*$/.test(g)}function z(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function $(g){return $[" "](g),g}$[" "]=function(){};var J=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function le(g,P,B){for(const re in g)P.call(B,g[re],re,g)}function q(g,P){for(const B in g)P.call(void 0,g[B],B,g)}function E(g){const P={};for(const B in g)P[B]=g[B];return P}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(g,P){let B,re;for(let Se=1;Se<arguments.length;Se++){re=arguments[Se];for(B in re)g[B]=re[B];for(let Le=0;Le<T.length;Le++)B=T[Le],Object.prototype.hasOwnProperty.call(re,B)&&(g[B]=re[B])}}function C(g){var P=1;g=g.split(":");const B=[];for(;0<P&&g.length;)B.push(g.shift()),P--;return g.length&&B.push(g.join(":")),B}function L(g){c.setTimeout(()=>{throw g},0)}function D(){var g=pe;let P=null;return g.g&&(P=g.g,g.g=g.g.next,g.g||(g.h=null),P.next=null),P}class ne{constructor(){this.h=this.g=null}add(P,B){const re=se.get();re.set(P,B),this.h?this.h.next=re:this.g=re,this.h=re}}var se=new I(()=>new oe,g=>g.reset());class oe{constructor(){this.next=this.g=this.h=null}set(P,B){this.h=P,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,Y=!1,pe=new ne,we=()=>{const g=c.Promise.resolve(void 0);Z=()=>{g.then(ae)}};var ae=()=>{for(var g;g=D();){try{g.h.call(g.g)}catch(B){L(B)}var P=se;P.j(g),100>P.h&&(P.h++,g.next=P.g,P.g=g)}Y=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(g,P){this.type=g,this.g=this.target=P,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,P=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const B=()=>{};c.addEventListener("test",B,P),c.removeEventListener("test",B,P)}catch{}return g})();function he(g,P){if(ee.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var B=this.type=g.type,re=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=P,P=g.relatedTarget){if(J){e:{try{$(P.nodeName);var Se=!0;break e}catch{}Se=!1}Se||(P=null)}}else B=="mouseover"?P=g.fromElement:B=="mouseout"&&(P=g.toElement);this.relatedTarget=P,re?(this.clientX=re.clientX!==void 0?re.clientX:re.pageX,this.clientY=re.clientY!==void 0?re.clientY:re.pageY,this.screenX=re.screenX||0,this.screenY=re.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:ge[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&he.aa.h.call(this)}}j(he,ee);var ge={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function Te(g,P,B,re,Se){this.listener=g,this.proxy=null,this.src=P,this.type=B,this.capture=!!re,this.ha=Se,this.key=++Ee,this.da=this.fa=!1}function je(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ze(g){this.src=g,this.g={},this.h=0}ze.prototype.add=function(g,P,B,re,Se){var Le=g.toString();g=this.g[Le],g||(g=this.g[Le]=[],this.h++);var Xe=tt(g,P,re,Se);return-1<Xe?(P=g[Xe],B||(P.fa=!1)):(P=new Te(P,this.src,Le,!!re,Se),P.fa=B,g.push(P)),P};function Je(g,P){var B=P.type;if(B in g.g){var re=g.g[B],Se=Array.prototype.indexOf.call(re,P,void 0),Le;(Le=0<=Se)&&Array.prototype.splice.call(re,Se,1),Le&&(je(P),g.g[B].length==0&&(delete g.g[B],g.h--))}}function tt(g,P,B,re){for(var Se=0;Se<g.length;++Se){var Le=g[Se];if(!Le.da&&Le.listener==P&&Le.capture==!!B&&Le.ha==re)return Se}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),fe={};function Xt(g,P,B,re,Se){if(Array.isArray(P)){for(var Le=0;Le<P.length;Le++)Xt(g,P[Le],B,re,Se);return null}return B=Bt(B),g&&g[ve]?g.K(P,B,h(re)?!!re.capture:!1,Se):Pt(g,P,B,!1,re,Se)}function Pt(g,P,B,re,Se,Le){if(!P)throw Error("Invalid event type");var Xe=h(Se)?!!Se.capture:!!Se,xn=At(g);if(xn||(g[Me]=xn=new ze(g)),B=xn.add(P,B,re,Xe,Le),B.proxy)return B;if(re=bt(),B.proxy=re,re.src=g,re.listener=B,g.addEventListener)Q||(Se=Xe),Se===void 0&&(Se=!1),g.addEventListener(P.toString(),re,Se);else if(g.attachEvent)g.attachEvent(nt(P.toString()),re);else if(g.addListener&&g.removeListener)g.addListener(re);else throw Error("addEventListener and attachEvent are unavailable.");return B}function bt(){function g(B){return P.call(g.src,g.listener,B)}const P=$t;return g}function Ke(g,P,B,re,Se){if(Array.isArray(P))for(var Le=0;Le<P.length;Le++)Ke(g,P[Le],B,re,Se);else re=h(re)?!!re.capture:!!re,B=Bt(B),g&&g[ve]?(g=g.i,P=String(P).toString(),P in g.g&&(Le=g.g[P],B=tt(Le,B,re,Se),-1<B&&(je(Le[B]),Array.prototype.splice.call(Le,B,1),Le.length==0&&(delete g.g[P],g.h--)))):g&&(g=At(g))&&(P=g.g[P.toString()],g=-1,P&&(g=tt(P,B,re,Se)),(B=-1<g?P[g]:null)&&ct(B))}function ct(g){if(typeof g!="number"&&g&&!g.da){var P=g.src;if(P&&P[ve])Je(P.i,g);else{var B=g.type,re=g.proxy;P.removeEventListener?P.removeEventListener(B,re,g.capture):P.detachEvent?P.detachEvent(nt(B),re):P.addListener&&P.removeListener&&P.removeListener(re),(B=At(P))?(Je(B,g),B.h==0&&(B.src=null,P[Me]=null)):je(g)}}}function nt(g){return g in fe?fe[g]:fe[g]="on"+g}function $t(g,P){if(g.da)g=!0;else{P=new he(P,this);var B=g.listener,re=g.ha||g.src;g.fa&&ct(g),g=B.call(re,P)}return g}function At(g){return g=g[Me],g instanceof ze?g:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bt(g){return typeof g=="function"?g:(g[fn]||(g[fn]=function(P){return g.handleEvent(P)}),g[fn])}function vt(){F.call(this),this.i=new ze(this),this.M=this,this.F=null}j(vt,F),vt.prototype[ve]=!0,vt.prototype.removeEventListener=function(g,P,B,re){Ke(this,g,P,B,re)};function Ht(g,P){var B,re=g.F;if(re)for(B=[];re;re=re.F)B.push(re);if(g=g.M,re=P.type||P,typeof P=="string")P=new ee(P,g);else if(P instanceof ee)P.target=P.target||g;else{var Se=P;P=new ee(re,g),U(P,Se)}if(Se=!0,B)for(var Le=B.length-1;0<=Le;Le--){var Xe=P.g=B[Le];Se=Dt(Xe,re,!0,P)&&Se}if(Xe=P.g=g,Se=Dt(Xe,re,!0,P)&&Se,Se=Dt(Xe,re,!1,P)&&Se,B)for(Le=0;Le<B.length;Le++)Xe=P.g=B[Le],Se=Dt(Xe,re,!1,P)&&Se}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var g=this.i,P;for(P in g.g){for(var B=g.g[P],re=0;re<B.length;re++)je(B[re]);delete g.g[P],g.h--}}this.F=null},vt.prototype.K=function(g,P,B,re){return this.i.add(String(g),P,!1,B,re)},vt.prototype.L=function(g,P,B,re){return this.i.add(String(g),P,!0,B,re)};function Dt(g,P,B,re){if(P=g.i.g[String(P)],!P)return!0;P=P.concat();for(var Se=!0,Le=0;Le<P.length;++Le){var Xe=P[Le];if(Xe&&!Xe.da&&Xe.capture==B){var xn=Xe.listener,pr=Xe.ha||Xe.src;Xe.fa&&Je(g.i,Xe),Se=xn.call(pr,re)!==!1&&Se}}return Se&&!re.defaultPrevented}function Nt(g,P,B){if(typeof g=="function")B&&(g=w(g,B));else if(g&&typeof g.handleEvent=="function")g=w(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:c.setTimeout(g,P||0)}function kt(g){g.g=Nt(()=>{g.g=null,g.i&&(g.i=!1,kt(g))},g.l);const P=g.h;g.h=null,g.m.apply(null,P)}class xt extends F{constructor(P,B){super(),this.m=P,this.l=B,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(g){F.call(this),this.h=g,this.g={}}j(Sn,F);var vn=[];function ht(g){le(g.g,function(P,B){this.g.hasOwnProperty(B)&&ct(P)},g),g.g={}}Sn.prototype.N=function(){Sn.aa.N.call(this),ht(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zt=c.JSON.stringify,kn=c.JSON.parse,Ct=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function sn(){}sn.prototype.h=null;function Ut(g){return g.h||(g.h=g.i())}function nr(){}var Dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pn(){ee.call(this,"d")}j(pn,ee);function Mt(){ee.call(this,"c")}j(Mt,ee);var an={},yo=null;function vr(){return yo=yo||new vt}an.La="serverreachability";function Vs(g){ee.call(this,an.La,g)}j(Vs,ee);function hi(g){const P=vr();Ht(P,new Vs(P))}an.STAT_EVENT="statevent";function It(g,P){ee.call(this,an.STAT_EVENT,g),this.stat=P}j(It,ee);function Vn(g){const P=vr();Ht(P,new It(P,g))}an.Ma="timingevent";function hs(g,P){ee.call(this,an.Ma,g),this.size=P}j(hs,ee);function xr(g,P){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},P)}function fi(){this.g=!0}fi.prototype.xa=function(){this.g=!1};function qn(g,P,B,re,Se,Le){g.info(function(){if(g.g)if(Le)for(var Xe="",xn=Le.split("&"),pr=0;pr<xn.length;pr++){var un=xn[pr].split("=");if(1<un.length){var ln=un[0];un=un[1];var Hn=ln.split("_");Xe=2<=Hn.length&&Hn[1]=="type"?Xe+(ln+"="+un+"&"):Xe+(ln+"=redacted&")}}else Xe=null;else Xe=Le;return"XMLHTTP REQ ("+re+") [attempt "+Se+"]: "+P+`
`+B+`
`+Xe})}function dr(g,P,B,re,Se,Le,Xe){g.info(function(){return"XMLHTTP RESP ("+re+") [ attempt "+Se+"]: "+P+`
`+B+`
`+Le+" "+Xe})}function Yn(g,P,B,re){g.info(function(){return"XMLHTTP TEXT ("+P+"): "+Oo(g,B)+(re?" "+re:"")})}function vo(g,P){g.info(function(){return"TIMEOUT: "+P})}fi.prototype.info=function(){};function Oo(g,P){if(!g.g)return P;if(!P)return null;try{var B=JSON.parse(P);if(B){for(g=0;g<B.length;g++)if(Array.isArray(B[g])){var re=B[g];if(!(2>re.length)){var Se=re[1];if(Array.isArray(Se)&&!(1>Se.length)){var Le=Se[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var Xe=1;Xe<Se.length;Xe++)Se[Xe]=""}}}}return zt(B)}catch{return P}}var Ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Us={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rr;function Ai(){}j(Ai,sn),Ai.prototype.g=function(){return new XMLHttpRequest},Ai.prototype.i=function(){return{}},Rr=new Ai;function br(g,P,B,re){this.j=g,this.i=P,this.l=B,this.R=re||1,this.U=new Sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fo}function Fo(){this.i=null,this.g="",this.h=!1}var fs={},Js={};function xo(g,P,B){g.L=1,g.v=bo(Ei(P)),g.m=B,g.P=!0,Vo(g,null)}function Vo(g,P){g.F=Date.now(),Mn(g),g.A=Ei(g.v);var B=g.A,re=g.R;Array.isArray(re)||(re=[String(re)]),Rt(B.i,"t",re),g.C=0,B=g.j.J,g.h=new Fo,g.g=_r(g.j,B?P:null,!g.m),0<g.O&&(g.M=new xt(w(g.Y,g,g.g),g.O)),P=g.U,B=g.g,re=g.ca;var Se="readystatechange";Array.isArray(Se)||(Se&&(vn[0]=Se.toString()),Se=vn);for(var Le=0;Le<Se.length;Le++){var Xe=Xt(B,Se[Le],re||P.handleEvent,!1,P.h||P);if(!Xe)break;P.g[Xe.key]=Xe}P=g.H?E(g.H):{},g.m?(g.u||(g.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,P)):(g.u="GET",g.g.ea(g.A,g.u,null,P)),hi(),qn(g.i,g.u,g.A,g.l,g.R,g.m)}br.prototype.ca=function(g){g=g.target;const P=this.M;P&&Ii(g)==3?P.j():this.Y(g)},br.prototype.Y=function(g){try{if(g==this.g)e:{const Hn=Ii(this.g);var P=this.g.Ba();const ji=this.g.Z();if(!(3>Hn)&&(Hn!=3||this.g&&(this.h.h||this.g.oa()||Wa(this.g)))){this.J||Hn!=4||P==7||(P==8||0>=ji?hi(3):hi(2)),Uo(this);var B=this.g.Z();this.X=B;t:if(ha(this)){var re=Wa(this.g);g="";var Se=re.length,Le=Ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bi(this),ei(this);var Xe="";break t}this.h.i=new c.TextDecoder}for(P=0;P<Se;P++)this.h.h=!0,g+=this.h.i.decode(re[P],{stream:!(Le&&P==Se-1)});re.length=0,this.h.g+=g,this.C=0,Xe=this.h.g}else Xe=this.g.oa();if(this.o=B==200,dr(this.i,this.u,this.A,this.l,this.R,Hn,B),this.o){if(this.T&&!this.K){t:{if(this.g){var xn,pr=this.g;if((xn=pr.g?pr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(xn)){var un=xn;break t}}un=null}if(B=un)Yn(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ua(this,B);else{this.o=!1,this.s=3,Vn(12),Bi(this),ei(this);break e}}if(this.P){B=!0;let $i;for(;!this.J&&this.C<Xe.length;)if($i=uu(this,Xe),$i==Js){Hn==4&&(this.s=4,Vn(14),B=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if($i==fs){this.s=4,Vn(15),Yn(this.i,this.l,Xe,"[Invalid Chunk]"),B=!1;break}else Yn(this.i,this.l,$i,null),Ua(this,$i);if(ha(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Hn!=4||Xe.length!=0||this.h.h||(this.s=1,Vn(16),B=!1),this.o=this.o&&B,!B)Yn(this.i,this.l,Xe,"[Invalid Chunked Response]"),Bi(this),ei(this);else if(0<Xe.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+Xe.length),st(ln),ln.M=!0,Vn(11))}}else Yn(this.i,this.l,Xe,null),Ua(this,Xe);Hn==4&&Bi(this),this.o&&!this.J&&(Hn==4?Vt(this.j,this):(this.o=!1,Mn(this)))}else vs(this.g),B==400&&0<Xe.indexOf("Unknown SID")?(this.s=3,Vn(12)):(this.s=0,Vn(13)),Bi(this),ei(this)}}}catch{}finally{}};function ha(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function uu(g,P){var B=g.C,re=P.indexOf(`
`,B);return re==-1?Js:(B=Number(P.substring(B,re)),isNaN(B)?fs:(re+=1,re+B>P.length?Js:(P=P.slice(re,re+B),g.C=re+B,P)))}br.prototype.cancel=function(){this.J=!0,Bi(this)};function Mn(g){g.S=Date.now()+g.I,Al(g,g.I)}function Al(g,P){if(g.B!=null)throw Error("WatchDog timer not null");g.B=xr(w(g.ba,g),P)}function Uo(g){g.B&&(c.clearTimeout(g.B),g.B=null)}br.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(vo(this.i,this.A),this.L!=2&&(hi(),Vn(17)),Bi(this),this.s=2,ei(this)):Al(this,this.S-g)};function ei(g){g.j.G==0||g.J||Vt(g.j,g)}function Bi(g){Uo(g);var P=g.M;P&&typeof P.ma=="function"&&P.ma(),g.M=null,ht(g.U),g.g&&(P=g.g,g.g=null,P.abort(),P.ma())}function Ua(g,P){try{var B=g.j;if(B.G!=0&&(B.g==g||Br(B.h,g))){if(!g.K&&Br(B.h,g)&&B.G==3){try{var re=B.Da.g.parse(P)}catch{re=null}if(Array.isArray(re)&&re.length==3){var Se=re;if(Se[0]==0){e:if(!B.u){if(B.g)if(B.g.F+3e3<g.F)Lt(B),Pi(B);else break e;$e(B),Vn(18)}}else B.za=Se[1],0<B.za-B.T&&37500>Se[2]&&B.F&&B.v==0&&!B.C&&(B.C=xr(w(B.Za,B),6e3));if(1>=Nl(B.h)&&B.ca){try{B.ca()}catch{}B.ca=void 0}}else Cn(B,11)}else if((g.K||B.g==g)&&Lt(B),!V(P))for(Se=B.Da.g.parse(P),P=0;P<Se.length;P++){let un=Se[P];if(B.T=un[0],un=un[1],B.G==2)if(un[0]=="c"){B.K=un[1],B.ia=un[2];const ln=un[3];ln!=null&&(B.la=ln,B.j.info("VER="+B.la));const Hn=un[4];Hn!=null&&(B.Aa=Hn,B.j.info("SVER="+B.Aa));const ji=un[5];ji!=null&&typeof ji=="number"&&0<ji&&(re=1.5*ji,B.L=re,B.j.info("backChannelRequestTimeoutMs_="+re)),re=B;const $i=g.g;if($i){const mi=$i.g?$i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mi){var Le=re.h;Le.g||mi.indexOf("spdy")==-1&&mi.indexOf("quic")==-1&&mi.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(El(Le,Le.h),Le.h=null))}if(re.D){const no=$i.g?$i.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(re.ya=no,mn(re.I,re.D,no))}}B.G=3,B.l&&B.l.ua(),B.ba&&(B.R=Date.now()-g.F,B.j.info("Handshake RTT: "+B.R+"ms")),re=B;var Xe=g;if(re.qa=Bn(re,re.J?re.ia:null,re.W),Xe.K){hr(re.h,Xe);var xn=Xe,pr=re.L;pr&&(xn.I=pr),xn.B&&(Uo(xn),Mn(xn)),re.g=Xe}else Ue(re);0<B.i.length&&A(B)}else un[0]!="stop"&&un[0]!="close"||Cn(B,7);else B.G==3&&(un[0]=="stop"||un[0]=="close"?un[0]=="stop"?Cn(B,7):zr(B):un[0]!="noop"&&B.l&&B.l.ta(un),B.v=0)}}hi(4)}catch{}}var Ba=class{constructor(g,P){this.g=g,this.map=P}};function Bo(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zi(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Nl(g){return g.h?1:g.g?g.g.size:0}function Br(g,P){return g.h?g.h==P:g.g?g.g.has(P):!1}function El(g,P){g.g?g.g.add(P):g.h=P}function hr(g,P){g.h&&g.h==P?g.h=null:g.g&&g.g.has(P)&&g.g.delete(P)}Bo.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Sl(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let P=g.i;for(const B of g.g.values())P=P.concat(B.D);return P}return S(g.i)}function fa(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var P=[],B=g.length,re=0;re<B;re++)P.push(g[re]);return P}P=[],B=0;for(re in g)P[B++]=g[re];return P}function ps(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var P=[];g=g.length;for(var B=0;B<g;B++)P.push(B);return P}P=[],B=0;for(const re in g)P[B++]=re;return P}}}function ms(g,P){if(g.forEach&&typeof g.forEach=="function")g.forEach(P,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,P,void 0);else for(var B=ps(g),re=fa(g),Se=re.length,Le=0;Le<Se;Le++)P.call(void 0,re[Le],B&&B[Le],g)}var Ni=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pa(g,P){if(g){g=g.split("&");for(var B=0;B<g.length;B++){var re=g[B].indexOf("="),Se=null;if(0<=re){var Le=g[B].substring(0,re);Se=g[B].substring(re+1)}else Le=g[B];P(Le,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}function Un(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Un){this.h=g.h,ma(this,g.j),this.o=g.o,this.g=g.g,zo(this,g.s),this.l=g.l;var P=g.i,B=new Si;B.i=P.i,P.g&&(B.g=new Map(P.g),B.h=P.h),qo(this,B),this.m=g.m}else g&&(P=String(g).match(Ni))?(this.h=!1,ma(this,P[1]||"",!0),this.o=cn(P[2]||""),this.g=cn(P[3]||"",!0),zo(this,P[4]),this.l=cn(P[5]||"",!0),qo(this,P[6]||"",!0),this.m=cn(P[7]||"")):(this.h=!1,this.i=new Si(null,this.h))}Un.prototype.toString=function(){var g=[],P=this.j;P&&g.push(Zi(P,qa,!0),":");var B=this.g;return(B||P=="file")&&(g.push("//"),(P=this.o)&&g.push(Zi(P,qa,!0),"@"),g.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.s,B!=null&&g.push(":",String(B))),(B=this.l)&&(this.g&&B.charAt(0)!="/"&&g.push("/"),g.push(Zi(B,B.charAt(0)=="/"?cc:lc,!0))),(B=this.i.toString())&&g.push("?",B),(B=this.m)&&g.push("#",Zi(B,wo)),g.join("")};function Ei(g){return new Un(g)}function ma(g,P,B){g.j=B?cn(P,!0):P,g.j&&(g.j=g.j.replace(/:$/,""))}function zo(g,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);g.s=P}else g.s=null}function qo(g,P,B){P instanceof Si?(g.i=P,Zs(g.i,g.h)):(B||(P=Zi(P,$a)),g.i=new Si(P,g.h))}function mn(g,P,B){g.i.set(P,B)}function bo(g){return mn(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function cn(g,P){return g?P?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Zi(g,P,B){return typeof g=="string"?(g=encodeURI(g).replace(P,za),B&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function za(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var qa=/[#\/\?@]/g,lc=/[#\?:]/g,cc=/[#\?]/g,$a=/[#\?@]/g,wo=/#/g;function Si(g,P){this.h=this.g=null,this.i=g||null,this.j=!!P}function ti(g){g.g||(g.g=new Map,g.h=0,g.i&&pa(g.i,function(P,B){g.add(decodeURIComponent(P.replace(/\+/g," ")),B)}))}t=Si.prototype,t.add=function(g,P){ti(this),this.i=null,g=gs(this,g);var B=this.g.get(g);return B||this.g.set(g,B=[]),B.push(P),this.h+=1,this};function Ti(g,P){ti(g),P=gs(g,P),g.g.has(P)&&(g.i=null,g.h-=g.g.get(P).length,g.g.delete(P))}function es(g,P){return ti(g),P=gs(g,P),g.g.has(P)}t.forEach=function(g,P){ti(this),this.g.forEach(function(B,re){B.forEach(function(Se){g.call(P,Se,re,this)},this)},this)},t.na=function(){ti(this);const g=Array.from(this.g.values()),P=Array.from(this.g.keys()),B=[];for(let re=0;re<P.length;re++){const Se=g[re];for(let Le=0;Le<Se.length;Le++)B.push(P[re])}return B},t.V=function(g){ti(this);let P=[];if(typeof g=="string")es(this,g)&&(P=P.concat(this.g.get(gs(this,g))));else{g=Array.from(this.g.values());for(let B=0;B<g.length;B++)P=P.concat(g[B])}return P},t.set=function(g,P){return ti(this),this.i=null,g=gs(this,g),es(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[P]),this.h+=1,this},t.get=function(g,P){return g?(g=this.V(g),0<g.length?String(g[0]):P):P};function Rt(g,P,B){Ti(g,P),0<B.length&&(g.i=null,g.g.set(gs(g,P),S(B)),g.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],P=Array.from(this.g.keys());for(var B=0;B<P.length;B++){var re=P[B];const Le=encodeURIComponent(String(re)),Xe=this.V(re);for(re=0;re<Xe.length;re++){var Se=Le;Xe[re]!==""&&(Se+="="+encodeURIComponent(String(Xe[re]))),g.push(Se)}}return this.i=g.join("&")};function gs(g,P){return P=String(P),g.j&&(P=P.toLowerCase()),P}function Zs(g,P){P&&!g.j&&(ti(g),g.i=null,g.g.forEach(function(B,re){var Se=re.toLowerCase();re!=Se&&(Ti(this,re),Rt(this,Se,B))},g)),g.j=P}function du(g,P){const B=new fi;if(c.Image){const re=new Image;re.onload=v(wr,B,"TestLoadImage: loaded",!0,P,re),re.onerror=v(wr,B,"TestLoadImage: error",!1,P,re),re.onabort=v(wr,B,"TestLoadImage: abort",!1,P,re),re.ontimeout=v(wr,B,"TestLoadImage: timeout",!1,P,re),c.setTimeout(function(){re.ontimeout&&re.ontimeout()},1e4),re.src=g}else P(!1)}function uc(g,P){const B=new fi,re=new AbortController,Se=setTimeout(()=>{re.abort(),wr(B,"TestPingServer: timeout",!1,P)},1e4);fetch(g,{signal:re.signal}).then(Le=>{clearTimeout(Se),Le.ok?wr(B,"TestPingServer: ok",!0,P):wr(B,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(Se),wr(B,"TestPingServer: error",!1,P)})}function wr(g,P,B,re,Se){try{Se&&(Se.onload=null,Se.onerror=null,Se.onabort=null,Se.ontimeout=null),re(B)}catch{}}function _o(){this.g=new Ct}function dc(g,P,B){const re=B||"";try{ms(g,function(Se,Le){let Xe=Se;h(Se)&&(Xe=zt(Se)),P.push(re+Le+"="+encodeURIComponent(Xe))})}catch(Se){throw P.push(re+"type="+encodeURIComponent("_badmap")),Se}}function Ao(g){this.l=g.Ub||null,this.j=g.eb||!1}j(Ao,sn),Ao.prototype.g=function(){return new eo(this.l,this.j)},Ao.prototype.i=(function(g){return function(){return g}})({});function eo(g,P){vt.call(this),this.D=g,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(eo,vt),t=eo.prototype,t.open=function(g,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=P,this.readyState=1,qi(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(P.body=g),(this.D||c).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ha(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ha(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var P=g.value?g.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!g.done}))&&(this.response=this.responseText+=P)}g.done?ki(this):qi(this),this.readyState==3&&Ha(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,ki(this))},t.Qa=function(g){this.g&&(this.response=g,ki(this))},t.ga=function(){this.g&&ki(this)};function ki(g){g.readyState=4,g.l=null,g.j=null,g.v=null,qi(g)}t.setRequestHeader=function(g,P){this.u.append(g,P)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],P=this.h.entries();for(var B=P.next();!B.done;)B=B.value,g.push(B[0]+": "+B[1]),B=P.next();return g.join(`\r
`)};function qi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ys(g){let P="";return le(g,function(B,re){P+=re,P+=":",P+=B,P+=`\r
`}),P}function $o(g,P,B){e:{for(re in B){var re=!1;break e}re=!0}re||(B=ys(B),typeof g=="string"?B!=null&&encodeURIComponent(String(B)):mn(g,P,B))}function $n(g){vt.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j($n,vt);var Tl=/^https?$/i,No=["POST","PUT"];t=$n.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,P,B,re){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);P=P?P.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rr.g(),this.v=this.o?Ut(this.o):Ut(Rr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(P,String(g),!0),this.B=!1}catch(Le){Bs(this,Le);return}if(g=B||"",B=new Map(this.headers),re)if(Object.getPrototypeOf(re)===Object.prototype)for(var Se in re)B.set(Se,re[Se]);else if(typeof re.keys=="function"&&typeof re.get=="function")for(const Le of re.keys())B.set(Le,re.get(Le));else throw Error("Unknown input type for opt_headers: "+String(re));re=Array.from(B.keys()).find(Le=>Le.toLowerCase()=="content-type"),Se=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(No,P,void 0))||re||Se||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,Xe]of B)this.g.setRequestHeader(Le,Xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{to(this),this.u=!0,this.g.send(g),this.u=!1}catch(Le){Bs(this,Le)}};function Bs(g,P){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=P,g.m=5,Ho(g),Ci(g)}function Ho(g){g.A||(g.A=!0,Ht(g,"complete"),Ht(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Ht(this,"complete"),Ht(this,"abort"),Ci(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),$n.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Wo(this):this.bb())},t.bb=function(){Wo(this)};function Wo(g){if(g.h&&typeof a<"u"&&(!g.v[1]||Ii(g)!=4||g.Z()!=2)){if(g.u&&Ii(g)==4)Nt(g.Ea,0,g);else if(Ht(g,"readystatechange"),Ii(g)==4){g.h=!1;try{const Xe=g.Z();e:switch(Xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var B;if(!(B=P)){var re;if(re=Xe===0){var Se=String(g.D).match(Ni)[1]||null;!Se&&c.self&&c.self.location&&(Se=c.self.location.protocol.slice(0,-1)),re=!Tl.test(Se?Se.toLowerCase():"")}B=re}if(B)Ht(g,"complete"),Ht(g,"success");else{g.m=6;try{var Le=2<Ii(g)?g.g.statusText:""}catch{Le=""}g.l=Le+" ["+g.Z()+"]",Ho(g)}}finally{Ci(g)}}}}function Ci(g,P){if(g.g){to(g);const B=g.g,re=g.v[0]?()=>{}:null;g.g=null,g.v=null,P||Ht(g,"ready");try{B.onreadystatechange=re}catch{}}}function to(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Ii(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Ii(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var P=this.g.responseText;return g&&P.indexOf(g)==0&&(P=P.substring(g.length)),kn(P)}};function Wa(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function vs(g){const P={};g=(g.g&&2<=Ii(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let re=0;re<g.length;re++){if(V(g[re]))continue;var B=C(g[re]);const Se=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const Le=P[Se]||[];P[Se]=Le,Le.push(B)}q(P,function(re){return re.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(g,P,B){return B&&B.internalChannelParams&&B.internalChannelParams[g]||P}function Ga(g){this.Aa=0,this.i=[],this.j=new fi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pi("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pi("baseRetryDelayMs",5e3,g),this.cb=pi("retryDelaySeedMs",1e4,g),this.Wa=pi("forwardChannelMaxRetries",2,g),this.wa=pi("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Bo(g&&g.concurrentRequestLimit),this.Da=new _o,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ga.prototype,t.la=8,t.G=1,t.connect=function(g,P,B,re){Vn(0),this.W=g,this.H=P||{},B&&re!==void 0&&(this.H.OSID=B,this.H.OAID=re),this.F=this.X,this.I=Bn(this,null,this.W),A(this)};function zr(g){if(ga(g),g.G==3){var P=g.U++,B=Ei(g.I);if(mn(B,"SID",g.K),mn(B,"RID",P),mn(B,"TYPE","terminate"),ye(g,B),P=new br(g,g.j,P),P.L=2,P.v=bo(Ei(B)),B=!1,c.navigator&&c.navigator.sendBeacon)try{B=c.navigator.sendBeacon(P.v.toString(),"")}catch{}!B&&c.Image&&(new Image().src=P.v,B=!0),B||(P.g=_r(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Mn(P)}fr(g)}function Pi(g){g.g&&(st(g),g.g.cancel(),g.g=null)}function ga(g){Pi(g),g.u&&(c.clearTimeout(g.u),g.u=null),Lt(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function A(g){if(!zi(g.h)&&!g.s){g.s=!0;var P=g.Ga;Z||we(),Y||(Z(),Y=!0),pe.add(P,g),g.B=0}}function H(g,P){return Nl(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=P.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=xr(w(g.Ga,g,P),wn(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const Se=new br(this,this.j,g);let Le=this.o;if(this.S&&(Le?(Le=E(Le),U(Le,this.S)):Le=this.S),this.m!==null||this.O||(Se.H=Le,Le=null),this.P)e:{for(var P=0,B=0;B<this.i.length;B++){t:{var re=this.i[B];if("__data__"in re.map&&(re=re.map.__data__,typeof re=="string")){re=re.length;break t}re=void 0}if(re===void 0)break;if(P+=re,4096<P){P=B;break e}if(P===4096||B===this.i.length-1){P=B+1;break e}}P=1e3}else P=1e3;P=Ne(this,Se,P),B=Ei(this.I),mn(B,"RID",g),mn(B,"CVER",22),this.D&&mn(B,"X-HTTP-Session-Id",this.D),ye(this,B),Le&&(this.O?P="headers="+encodeURIComponent(String(ys(Le)))+"&"+P:this.m&&$o(B,this.m,Le)),El(this.h,Se),this.Ua&&mn(B,"TYPE","init"),this.P?(mn(B,"$req",P),mn(B,"SID","null"),Se.T=!0,xo(Se,B,null)):xo(Se,B,P),this.G=2}}else this.G==3&&(g?de(this,g):this.i.length==0||zi(this.h)||de(this))};function de(g,P){var B;P?B=P.l:B=g.U++;const re=Ei(g.I);mn(re,"SID",g.K),mn(re,"RID",B),mn(re,"AID",g.T),ye(g,re),g.m&&g.o&&$o(re,g.m,g.o),B=new br(g,g.j,B,g.B+1),g.m===null&&(B.H=g.o),P&&(g.i=P.D.concat(g.i)),P=Ne(g,B,1e3),B.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),El(g.h,B),xo(B,re,P)}function ye(g,P){g.H&&le(g.H,function(B,re){mn(P,re,B)}),g.l&&ms({},function(B,re){mn(P,re,B)})}function Ne(g,P,B){B=Math.min(g.i.length,B);var re=g.l?w(g.l.Na,g.l,g):null;e:{var Se=g.i;let Le=-1;for(;;){const Xe=["count="+B];Le==-1?0<B?(Le=Se[0].g,Xe.push("ofs="+Le)):Le=0:Xe.push("ofs="+Le);let xn=!0;for(let pr=0;pr<B;pr++){let un=Se[pr].g;const ln=Se[pr].map;if(un-=Le,0>un)Le=Math.max(0,Se[pr].g-100),xn=!1;else try{dc(ln,Xe,"req"+un+"_")}catch{re&&re(ln)}}if(xn){re=Xe.join("&");break e}}}return g=g.i.splice(0,B),P.D=g,re}function Ue(g){if(!g.g&&!g.u){g.Y=1;var P=g.Fa;Z||we(),Y||(Z(),Y=!0),pe.add(P,g),g.v=0}}function $e(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=xr(w(g.Fa,g),wn(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,ft(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=xr(w(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vn(10),Pi(this),ft(this))};function st(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function ft(g){g.g=new br(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var P=Ei(g.qa);mn(P,"RID","rpc"),mn(P,"SID",g.K),mn(P,"AID",g.T),mn(P,"CI",g.F?"0":"1"),!g.F&&g.ja&&mn(P,"TO",g.ja),mn(P,"TYPE","xmlhttp"),ye(g,P),g.m&&g.o&&$o(P,g.m,g.o),g.L&&(g.g.I=g.L);var B=g.g;g=g.ia,B.L=1,B.v=bo(Ei(P)),B.m=null,B.P=!0,Vo(B,g)}t.Za=function(){this.C!=null&&(this.C=null,Pi(this),$e(this),Vn(19))};function Lt(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Vt(g,P){var B=null;if(g.g==P){Lt(g),st(g),g.g=null;var re=2}else if(Br(g.h,P))B=P.D,hr(g.h,P),re=1;else return;if(g.G!=0){if(P.o)if(re==1){B=P.m?P.m.length:0,P=Date.now()-P.F;var Se=g.B;re=vr(),Ht(re,new hs(re,B)),A(g)}else Ue(g);else if(Se=P.s,Se==3||Se==0&&0<P.X||!(re==1&&H(g,P)||re==2&&$e(g)))switch(B&&0<B.length&&(P=g.h,P.i=P.i.concat(B)),Se){case 1:Cn(g,5);break;case 4:Cn(g,10);break;case 3:Cn(g,6);break;default:Cn(g,2)}}}function wn(g,P){let B=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(B*=2),B*P}function Cn(g,P){if(g.j.info("Error code "+P),P==2){var B=w(g.fb,g),re=g.Xa;const Se=!re;re=new Un(re||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ma(re,"https"),bo(re),Se?du(re.toString(),B):uc(re.toString(),B)}else Vn(2);g.G=0,g.l&&g.l.sa(P),fr(g),ga(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Vn(2)):(this.j.info("Failed to ping google.com"),Vn(1))};function fr(g){if(g.G=0,g.ka=[],g.l){const P=Sl(g.h);(P.length!=0||g.i.length!=0)&&(_(g.ka,P),_(g.ka,g.i),g.h.i.length=0,S(g.i),g.i.length=0),g.l.ra()}}function Bn(g,P,B){var re=B instanceof Un?Ei(B):new Un(B);if(re.g!="")P&&(re.g=P+"."+re.g),zo(re,re.s);else{var Se=c.location;re=Se.protocol,P=P?P+"."+Se.hostname:Se.hostname,Se=+Se.port;var Le=new Un(null);re&&ma(Le,re),P&&(Le.g=P),Se&&zo(Le,Se),B&&(Le.l=B),re=Le}return B=g.D,P=g.ya,B&&P&&mn(re,B,P),mn(re,"VER",g.la),ye(g,re),re}function _r(g,P,B){if(P&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=g.Ca&&!g.pa?new $n(new Ao({eb:B})):new $n(g.pa),P.Ha(g.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ar(){}t=ar.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ar(){}Ar.prototype.g=function(g,P){return new rr(g,P)};function rr(g,P){vt.call(this),this.g=new Ga(P),this.l=g,this.h=P&&P.messageUrlParams||null,g=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(g?g["X-WebChannel-Content-Type"]=P.messageContentType:g={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(g?g["X-WebChannel-Client-Profile"]=P.va:g={"X-WebChannel-Client-Profile":P.va}),this.g.S=g,(g=P&&P.Sb)&&!V(g)&&(this.g.m=g),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!V(P)&&(this.g.D=P,g=this.h,g!==null&&P in g&&(g=this.h,P in g&&delete g[P])),this.j=new ts(this)}j(rr,vt),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){zr(this.g)},rr.prototype.o=function(g){var P=this.g;if(typeof g=="string"){var B={};B.__data__=g,g=B}else this.u&&(B={},B.__data__=zt(g),g=B);P.i.push(new Ba(P.Ya++,g)),P.G==3&&A(P)},rr.prototype.N=function(){this.g.l=null,delete this.j,zr(this.g),delete this.g,rr.aa.N.call(this)};function Ri(g){pn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var P=g.__sm__;if(P){e:{for(const B in P){g=B;break e}g=void 0}(this.i=g)&&(g=this.i,P=P!==null&&g in P?P[g]:void 0),this.data=P}else this.data=g}j(Ri,pn);function kl(){Mt.call(this),this.status=1}j(kl,Mt);function ts(g){this.g=g}j(ts,ar),ts.prototype.ua=function(){Ht(this.g,"a")},ts.prototype.ta=function(g){Ht(this.g,new Ri(g))},ts.prototype.sa=function(g){Ht(this.g,new kl)},ts.prototype.ra=function(){Ht(this.g,"b")},Ar.prototype.createWebChannel=Ar.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,K3=function(){return new Ar},G3=function(){return vr()},W3=an,f1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,eg=Ui,Us.COMPLETE="complete",H3=Us,nr.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",vt.prototype.listen=vt.prototype.K,_f=nr,$n.prototype.listenOnce=$n.prototype.L,$n.prototype.getLastError=$n.prototype.Ka,$n.prototype.getLastErrorCode=$n.prototype.Ba,$n.prototype.getStatus=$n.prototype.Z,$n.prototype.getResponseJson=$n.prototype.Oa,$n.prototype.getResponseText=$n.prototype.oa,$n.prototype.send=$n.prototype.ea,$n.prototype.setWithCredentials=$n.prototype.Ha,$3=$n}).apply(typeof Cm<"u"?Cm:typeof self<"u"?self:typeof window<"u"?window:{});const F_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rs.UNAUTHENTICATED=new Rs(null),Rs.GOOGLE_CREDENTIALS=new Rs("google-credentials-uid"),Rs.FIRST_PARTY=new Rs("first-party-uid"),Rs.MOCK_USER=new Rs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new U2("@firebase/firestore");function yf(){return Xu.logLevel}function _t(t,...e){if(Xu.logLevel<=An.DEBUG){const n=e.map(Z2);Xu.debug(`Firestore (${Dh}): ${t}`,...n)}}function oc(t,...e){if(Xu.logLevel<=An.ERROR){const n=e.map(Z2);Xu.error(`Firestore (${Dh}): ${t}`,...n)}}function vh(t,...e){if(Xu.logLevel<=An.WARN){const n=e.map(Z2);Xu.warn(`Firestore (${Dh}): ${t}`,...n)}}function Z2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t="Unexpected state"){const e=`FIRESTORE (${Dh}) INTERNAL ASSERTION FAILED: `+t;throw oc(e),new Error(e)}function tr(t,e){t||Qt()}function rn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const He={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends bl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Rs.UNAUTHENTICATED)))}shutdown(){}}class QU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class XU{constructor(e){this.t=e,this.currentUser=Rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tr(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new ec;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ec,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const u=s;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ec)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tr(typeof r.accessToken=="string"),new Y3(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tr(e===null||typeof e=="string"),new Rs(e)}}class JU{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Rs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ZU{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new JU(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Rs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){tr(this.o===void 0);const r=s=>{s.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,_t("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(tr(typeof n.token=="string"),this.R=n.token,new eB(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Fn(t,e){return t<e?-1:t>e?1:0}function xh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new lt(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lt(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new lt(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vi.fromMillis(Date.now())}static fromDate(e){return Vi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Vi(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fn(this.nanoseconds,e.nanoseconds):Fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tn(e)}static min(){return new tn(new Vi(0,0))}static max(){return new tn(new Vi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r){n===void 0?n=0:n>e.length&&Qt(),r===void 0?r=e.length-n:r>e.length-n&&Qt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rp.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rp?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class gr extends rp{construct(e,n,r){return new gr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new lt(He.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new gr(n)}static emptyPath(){return new gr([])}}const rB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ls extends rp{construct(e,n,r){return new ls(e,n,r)}static isValidIdentifier(e){return rB.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ls.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ls(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new lt(He.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new lt(He.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new lt(He.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new lt(He.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ls(n)}static emptyPath(){return new ls([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.path=e}static fromPath(e){return new jt(gr.fromString(e))}static fromName(e){return new jt(gr.fromString(e).popFirst(5))}static empty(){return new jt(gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jt(new gr(e.slice()))}}function iB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=tn.fromTimestamp(r===1e9?new Vi(n+1,0):new Vi(n,r));return new ru(i,jt.empty(),e)}function sB(t){return new ru(t.readTime,t.key,-1)}class ru{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ru(tn.min(),jt.empty(),-1)}static max(){return new ru(tn.max(),jt.empty(),-1)}}function oB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=jt.comparator(t.documentKey,e.documentKey),n!==0?n:Fn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sp(t){if(t.code!==He.FAILED_PRECONDITION||t.message!==aB)throw t;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ye(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ye?n:Ye.resolve(n)}catch(n){return Ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ye.reject(n)}static resolve(e){return new Ye(((n,r)=>{n(e)}))}static reject(e){return new Ye(((n,r)=>{r(e)}))}static waitFor(e){return new Ye(((n,r)=>{let i=0,s=0,a=!1;e.forEach((c=>{++i,c.next((()=>{++s,a&&s===i&&n()}),(u=>r(u)))})),a=!0,s===i&&n()}))}static or(e){let n=Ye.resolve(!1);for(const r of e)n=n.next((i=>i?Ye.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new Ye(((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next((p=>{a[h]=p,++c,c===s&&r(a)}),(p=>i(p)))}}))}static doWhile(e,n){return new Ye(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}function cB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ex.oe=-1;function r0(t){return t==null}function Eg(t){return t===0&&1/t==-1/0}function uB(t){return typeof t=="number"&&Number.isInteger(t)&&!Eg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function od(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function X3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.comparator=e,this.root=n||as.EMPTY}insert(e,n){return new Ur(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,as.BLACK,null,null))}remove(e){return new Ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,as.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Im(this.root,e,this.comparator,!1)}getReverseIterator(){return new Im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Im(this.root,e,this.comparator,!0)}}class Im{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class as{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??as.RED,this.left=i??as.EMPTY,this.right=s??as.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new as(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return as.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return as.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,as.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,as.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qt();const e=this.left.check();if(e!==this.right.check())throw Qt();return e+(this.isRed()?0:1)}}as.EMPTY=null,as.RED=!0,as.BLACK=!1;as.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt()}get value(){throw Qt()}get color(){throw Qt()}get left(){throw Qt()}get right(){throw Qt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new as(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.comparator=e,this.data=new Ur(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new U_(this.data.getIterator())}getIteratorFrom(e){return new U_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof us)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new us(this.comparator);return n.data=e,n}}class U_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.fields=e,e.sort(ls.comparator)}static empty(){return new Lo([])}unionWith(e){let n=new us(ls.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new J3("Invalid base64 string: "+s):s}})(e);return new ds(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new ds(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ds.EMPTY_BYTE_STRING=new ds("");const dB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iu(t){if(tr(!!t),typeof t=="string"){let e=0;const n=dB.exec(t);if(tr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:oi(t.seconds),nanos:oi(t.nanos)}}function oi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ju(t){return typeof t=="string"?ds.fromBase64String(t):ds.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nx(t){const e=t.mapValue.fields.__previous_value__;return tx(e)?nx(e):e}function ip(t){const e=iu(t.mapValue.fields.__local_write_time__.timestampValue);return new Vi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r,i,s,a,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class sp{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm={mapValue:{}};function Zu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tx(t)?4:pB(t)?9007199254740991:fB(t)?10:11:Qt()}function xl(t,e){if(t===e)return!0;const n=Zu(t);if(n!==Zu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ip(t).isEqual(ip(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=iu(i.timestampValue),c=iu(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Ju(i.bytesValue).isEqual(Ju(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return oi(i.geoPointValue.latitude)===oi(s.geoPointValue.latitude)&&oi(i.geoPointValue.longitude)===oi(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return oi(i.integerValue)===oi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=oi(i.doubleValue),c=oi(s.doubleValue);return a===c?Eg(a)===Eg(c):isNaN(a)&&isNaN(c)}return!1})(t,e);case 9:return xh(t.arrayValue.values||[],e.arrayValue.values||[],xl);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(V_(a)!==V_(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!xl(a[u],c[u])))return!1;return!0})(t,e);default:return Qt()}}function op(t,e){return(t.values||[]).find((n=>xl(n,e)))!==void 0}function bh(t,e){if(t===e)return 0;const n=Zu(t),r=Zu(e);if(n!==r)return Fn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fn(t.booleanValue,e.booleanValue);case 2:return(function(s,a){const c=oi(s.integerValue||s.doubleValue),u=oi(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return B_(t.timestampValue,e.timestampValue);case 4:return B_(ip(t),ip(e));case 5:return Fn(t.stringValue,e.stringValue);case 6:return(function(s,a){const c=Ju(s),u=Ju(a);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(s,a){const c=s.split("/"),u=a.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=Fn(c[h],u[h]);if(p!==0)return p}return Fn(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,a){const c=Fn(oi(s.latitude),oi(a.latitude));return c!==0?c:Fn(oi(s.longitude),oi(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return z_(t.arrayValue,e.arrayValue);case 10:return(function(s,a){var c,u,h,p;const y=s.fields||{},w=a.fields||{},v=(c=y.value)===null||c===void 0?void 0:c.arrayValue,j=(u=w.value)===null||u===void 0?void 0:u.arrayValue,S=Fn(((h=v?.values)===null||h===void 0?void 0:h.length)||0,((p=j?.values)===null||p===void 0?void 0:p.length)||0);return S!==0?S:z_(v,j)})(t.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Pm.mapValue&&a===Pm.mapValue)return 0;if(s===Pm.mapValue)return 1;if(a===Pm.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),h=a.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let y=0;y<u.length&&y<p.length;++y){const w=Fn(u[y],p[y]);if(w!==0)return w;const v=bh(c[u[y]],h[p[y]]);if(v!==0)return v}return Fn(u.length,p.length)})(t.mapValue,e.mapValue);default:throw Qt()}}function B_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fn(t,e);const n=iu(t),r=iu(e),i=Fn(n.seconds,r.seconds);return i!==0?i:Fn(n.nanos,r.nanos)}function z_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=bh(n[i],r[i]);if(s)return s}return Fn(n.length,r.length)}function wh(t){return p1(t)}function p1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=iu(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ju(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return jt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=p1(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${p1(n.fields[a])}`;return i+"}"})(t.mapValue):Qt()}function q_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function m1(t){return!!t&&"integerValue"in t}function rx(t){return!!t&&"arrayValue"in t}function $_(t){return!!t&&"nullValue"in t}function H_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tg(t){return!!t&&"mapValue"in t}function fB(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Df(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return od(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Df(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Df(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.value=e}static empty(){return new ho({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(n)}setAll(e){let n=ls.emptyPath(),r={},i=[];e.forEach(((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=Df(a):i.push(c.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());tg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){od(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new ho(Df(this.value))}}function Z3(t){const e=[];return od(t.fields,((n,r)=>{const i=new ls([n]);if(tg(r)){const s=Z3(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Lo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r,i,s,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Ls(e,0,tn.min(),tn.min(),tn.min(),ho.empty(),0)}static newFoundDocument(e,n,r,i){return new Ls(e,1,n,tn.min(),r,i,0)}static newNoDocument(e,n){return new Ls(e,2,n,tn.min(),tn.min(),ho.empty(),0)}static newUnknownDocument(e,n){return new Ls(e,3,n,tn.min(),tn.min(),ho.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(tn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ho.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ho.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n){this.position=e,this.inclusive=n}}function W_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=jt.comparator(jt.fromName(a.referenceValue),n.key):r=bh(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function G_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xl(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n="asc"){this.field=e,this.dir=n}}function mB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{}class _i extends eT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yB(e,n,r):n==="array-contains"?new bB(e,r):n==="in"?new wB(e,r):n==="not-in"?new _B(e,r):n==="array-contains-any"?new AB(e,r):new _i(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vB(e,r):new xB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(bh(n,this.value)):n!==null&&Zu(this.value)===Zu(n)&&this.matchesComparison(bh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class La extends eT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new La(e,n)}matches(e){return tT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tT(t){return t.op==="and"}function nT(t){return gB(t)&&tT(t)}function gB(t){for(const e of t.filters)if(e instanceof La)return!1;return!0}function g1(t){if(t instanceof _i)return t.field.canonicalString()+t.op.toString()+wh(t.value);if(nT(t))return t.filters.map((e=>g1(e))).join(",");{const e=t.filters.map((n=>g1(n))).join(",");return`${t.op}(${e})`}}function rT(t,e){return t instanceof _i?(function(r,i){return i instanceof _i&&r.op===i.op&&r.field.isEqual(i.field)&&xl(r.value,i.value)})(t,e):t instanceof La?(function(r,i){return i instanceof La&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,c)=>s&&rT(a,i.filters[c])),!0):!1})(t,e):void Qt()}function iT(t){return t instanceof _i?(function(n){return`${n.field.canonicalString()} ${n.op} ${wh(n.value)}`})(t):t instanceof La?(function(n){return n.op.toString()+" {"+n.getFilters().map(iT).join(" ,")+"}"})(t):"Filter"}class yB extends _i{constructor(e,n,r){super(e,n,r),this.key=jt.fromName(r.referenceValue)}matches(e){const n=jt.comparator(e.key,this.key);return this.matchesComparison(n)}}class vB extends _i{constructor(e,n){super(e,"in",n),this.keys=sT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class xB extends _i{constructor(e,n){super(e,"not-in",n),this.keys=sT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function sT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>jt.fromName(r.referenceValue)))}class bB extends _i{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rx(n)&&op(n.arrayValue,this.value)}}class wB extends _i{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&op(this.value.arrayValue,n)}}class _B extends _i{constructor(e,n){super(e,"not-in",n)}matches(e){if(op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!op(this.value.arrayValue,n)}}class AB extends _i{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rx(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>op(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}}function K_(t,e=null,n=[],r=[],i=null,s=null,a=null){return new NB(t,e,n,r,i,s,a)}function ix(t){const e=rn(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>g1(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),r0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>wh(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>wh(r))).join(",")),e.ue=n}return e.ue}function sx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!G_(t.startAt,e.startAt)&&G_(t.endAt,e.endAt)}function y1(t){return jt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n=null,r=[],i=[],s=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function EB(t,e,n,r,i,s,a,c){return new Mh(t,e,n,r,i,s,a,c)}function ox(t){return new Mh(t)}function Y_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oT(t){return t.collectionGroup!==null}function Mf(t){const e=rn(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new us(ls.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ap(s,r))})),n.has(ls.keyField().canonicalString())||e.ce.push(new ap(ls.keyField(),r))}return e.ce}function ml(t){const e=rn(t);return e.le||(e.le=SB(e,Mf(t))),e.le}function SB(t,e){if(t.limitType==="F")return K_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new ap(i.field,s)}));const n=t.endAt?new Sg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sg(t.startAt.position,t.startAt.inclusive):null;return K_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function v1(t,e){const n=t.filters.concat([e]);return new Mh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function x1(t,e,n){return new Mh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function i0(t,e){return sx(ml(t),ml(e))&&t.limitType===e.limitType}function aT(t){return`${ix(ml(t))}|lt:${t.limitType}`}function qd(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>iT(i))).join(", ")}]`),r0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>wh(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>wh(i))).join(",")),`Target(${r})`})(ml(t))}; limitType=${t.limitType})`}function s0(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):jt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of Mf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(a,c,u){const h=W_(a,c,u);return a.inclusive?h<=0:h<0})(r.startAt,Mf(r),i)||r.endAt&&!(function(a,c,u){const h=W_(a,c,u);return a.inclusive?h>=0:h>0})(r.endAt,Mf(r),i))})(t,e)}function TB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lT(t){return(e,n)=>{let r=!1;for(const i of Mf(t)){const s=kB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function kB(t,e,n){const r=t.field.isKeyField()?jt.comparator(e.key,n.key):(function(s,a,c){const u=a.data.field(s),h=c.data.field(s);return u!==null&&h!==null?bh(u,h):Qt()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Qt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){od(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return X3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=new Ur(jt.comparator);function ac(){return CB}const cT=new Ur(jt.comparator);function Af(...t){let e=cT;for(const n of t)e=e.insert(n.key,n);return e}function uT(t){let e=cT;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Uu(){return Of()}function dT(){return Of()}function Of(){return new Oh((t=>t.toString()),((t,e)=>t.isEqual(e)))}const IB=new Ur(jt.comparator),PB=new us(jt.comparator);function _n(...t){let e=PB;for(const n of t)e=e.add(n);return e}const RB=new us(Fn);function jB(){return RB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eg(e)?"-0":e}}function hT(t){return{integerValue:""+t}}function LB(t,e){return uB(e)?hT(e):ax(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this._=void 0}}function DB(t,e,n){return t instanceof Tg?(function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tx(s)&&(s=nx(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}})(n,e):t instanceof _h?pT(t,e):t instanceof lp?mT(t,e):(function(i,s){const a=fT(i,s),c=Q_(a)+Q_(i.Pe);return m1(a)&&m1(i.Pe)?hT(c):ax(i.serializer,c)})(t,e)}function MB(t,e,n){return t instanceof _h?pT(t,e):t instanceof lp?mT(t,e):n}function fT(t,e){return t instanceof kg?(function(r){return m1(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Tg extends o0{}class _h extends o0{constructor(e){super(),this.elements=e}}function pT(t,e){const n=gT(e);for(const r of t.elements)n.some((i=>xl(i,r)))||n.push(r);return{arrayValue:{values:n}}}class lp extends o0{constructor(e){super(),this.elements=e}}function mT(t,e){let n=gT(e);for(const r of t.elements)n=n.filter((i=>!xl(i,r)));return{arrayValue:{values:n}}}class kg extends o0{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Q_(t){return oi(t.integerValue||t.doubleValue)}function gT(t){return rx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n){this.field=e,this.transform=n}}function FB(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof _h&&i instanceof _h||r instanceof lp&&i instanceof lp?xh(r.elements,i.elements,xl):r instanceof kg&&i instanceof kg?xl(r.Pe,i.Pe):r instanceof Tg&&i instanceof Tg})(t.transform,e.transform)}class VB{constructor(e,n){this.version=e,this.transformResults=n}}class la{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new la}static exists(e){return new la(void 0,e)}static updateTime(e){return new la(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ng(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class a0{}function yT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lx(t.key,la.none()):new kp(t.key,t.data,la.none());{const n=t.data,r=ho.empty();let i=new us(ls.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new lu(t.key,r,new Lo(i.toArray()),la.none())}}function UB(t,e,n){t instanceof kp?(function(i,s,a){const c=i.value.clone(),u=J_(i.fieldTransforms,s,a.transformResults);c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(t,e,n):t instanceof lu?(function(i,s,a){if(!ng(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=J_(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(vT(i)),u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function Ff(t,e,n,r){return t instanceof kp?(function(s,a,c,u){if(!ng(s.precondition,a))return c;const h=s.value.clone(),p=Z_(s.fieldTransforms,u,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof lu?(function(s,a,c,u){if(!ng(s.precondition,a))return c;const h=Z_(s.fieldTransforms,u,a),p=a.data;return p.setAll(vT(s)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((y=>y.field)))})(t,e,n,r):(function(s,a,c){return ng(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(t,e,n)}function BB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=fT(r.transform,i||null);s!=null&&(n===null&&(n=ho.empty()),n.set(r.field,s))}return n||null}function X_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xh(r,i,((s,a)=>FB(s,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kp extends a0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class lu extends a0{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function J_(t,e,n){const r=new Map;tr(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,MB(a,c,n[i]))}return r}function Z_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,DB(s,a,e))}return r}class lx extends a0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zB extends a0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&UB(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ff(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ff(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dT();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=n.has(i.key)?null:c;const u=yT(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(tn.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),_n())}isEqual(e){return this.batchId===e.batchId&&xh(this.mutations,e.mutations,((n,r)=>X_(n,r)))&&xh(this.baseMutations,e.baseMutations,((n,r)=>X_(n,r)))}}class cx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){tr(e.mutations.length===r.length);let i=(function(){return IB})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new cx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bi,Tn;function WB(t){switch(t){default:return Qt();case He.CANCELLED:case He.UNKNOWN:case He.DEADLINE_EXCEEDED:case He.RESOURCE_EXHAUSTED:case He.INTERNAL:case He.UNAVAILABLE:case He.UNAUTHENTICATED:return!1;case He.INVALID_ARGUMENT:case He.NOT_FOUND:case He.ALREADY_EXISTS:case He.PERMISSION_DENIED:case He.FAILED_PRECONDITION:case He.ABORTED:case He.OUT_OF_RANGE:case He.UNIMPLEMENTED:case He.DATA_LOSS:return!0}}function xT(t){if(t===void 0)return oc("GRPC error has no .code"),He.UNKNOWN;switch(t){case bi.OK:return He.OK;case bi.CANCELLED:return He.CANCELLED;case bi.UNKNOWN:return He.UNKNOWN;case bi.DEADLINE_EXCEEDED:return He.DEADLINE_EXCEEDED;case bi.RESOURCE_EXHAUSTED:return He.RESOURCE_EXHAUSTED;case bi.INTERNAL:return He.INTERNAL;case bi.UNAVAILABLE:return He.UNAVAILABLE;case bi.UNAUTHENTICATED:return He.UNAUTHENTICATED;case bi.INVALID_ARGUMENT:return He.INVALID_ARGUMENT;case bi.NOT_FOUND:return He.NOT_FOUND;case bi.ALREADY_EXISTS:return He.ALREADY_EXISTS;case bi.PERMISSION_DENIED:return He.PERMISSION_DENIED;case bi.FAILED_PRECONDITION:return He.FAILED_PRECONDITION;case bi.ABORTED:return He.ABORTED;case bi.OUT_OF_RANGE:return He.OUT_OF_RANGE;case bi.UNIMPLEMENTED:return He.UNIMPLEMENTED;case bi.DATA_LOSS:return He.DATA_LOSS;default:return Qt()}}(Tn=bi||(bi={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB=new $u([4294967295,4294967295],0);function eA(t){const e=GB().encode(t),n=new q3;return n.update(e),new Uint8Array(n.digest())}function tA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $u([n,r],0),new $u([i,s],0)]}class ux{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Nf(`Invalid padding: ${n}`);if(r<0)throw new Nf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Nf(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$u.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($u.fromNumber(r)));return i.compare(KB)===1&&(i=new $u([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=eA(e),[r,i]=tA(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new ux(s,i,n);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.Ie===0)return;const n=eA(e),[r,i]=tA(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Nf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new l0(tn.min(),i,new Ur(Fn),ac(),_n())}}class Cp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cp(r,n,_n(),_n(),_n())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class bT{constructor(e,n){this.targetId=e,this.me=n}}class wT{constructor(e,n,r=ds.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class nA{constructor(){this.fe=0,this.ge=iA(),this.pe=ds.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_n(),n=_n(),r=_n();return this.ge.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Qt()}})),new Cp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=iA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class YB{constructor(e){this.Le=e,this.Be=new Map,this.ke=ac(),this.qe=rA(),this.Qe=new Ur(Fn)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Qt()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,i)=>{this.ze(i)&&n(i)}))}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(y1(s))if(r===0){const a=new jt(s.path);this.Ue(n,a,Ls.newNoDocument(a,tn.min()))}else tr(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,c;try{a=Ju(r).toUint8Array()}catch(u){if(u instanceof J3)return vh("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ux(a,i,s)}catch(u){return vh(u instanceof Nf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)})),i}rt(e){const n=new Map;this.Be.forEach(((s,a)=>{const c=this.Je(a);if(c){if(s.current&&y1(c.target)){const u=new jt(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Ls.newNoDocument(u,e))}s.be&&(n.set(a,s.ve()),s.Ce())}}));let r=_n();this.qe.forEach(((s,a)=>{let c=!0;a.forEachWhile((u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(s))})),this.ke.forEach(((s,a)=>a.setReadTime(e)));const i=new l0(e,n,this.Qe,this.ke,r);return this.ke=ac(),this.qe=rA(),this.Qe=new Ur(Fn),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new nA,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new us(Fn),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||_t("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new nA),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function rA(){return new Ur(jt.comparator)}function iA(){return new Ur(jt.comparator)}const QB={asc:"ASCENDING",desc:"DESCENDING"},XB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JB={and:"AND",or:"OR"};class ZB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function b1(t,e){return t.useProto3Json||r0(e)?e:{value:e}}function Cg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _T(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ez(t,e){return Cg(t,e.toTimestamp())}function gl(t){return tr(!!t),tn.fromTimestamp((function(n){const r=iu(n);return new Vi(r.seconds,r.nanos)})(t))}function dx(t,e){return w1(t,e).canonicalString()}function w1(t,e){const n=(function(i){return new gr(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function AT(t){const e=gr.fromString(t);return tr(kT(e)),e}function _1(t,e){return dx(t.databaseId,e.path)}function Xy(t,e){const n=AT(e);if(n.get(1)!==t.databaseId.projectId)throw new lt(He.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new lt(He.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new jt(ET(n))}function NT(t,e){return dx(t.databaseId,e)}function tz(t){const e=AT(t);return e.length===4?gr.emptyPath():ET(e)}function A1(t){return new gr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ET(t){return tr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sA(t,e,n){return{name:_1(t,e),fields:n.value.mapValue.fields}}function nz(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Qt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,p){return h.useProto3Json?(tr(p===void 0||typeof p=="string"),ds.fromBase64String(p||"")):(tr(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ds.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){const p=h.code===void 0?He.UNKNOWN:xT(h.code);return new lt(p,h.message||"")})(a);n=new wT(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xy(t,r.document.name),s=gl(r.document.updateTime),a=r.document.createTime?gl(r.document.createTime):tn.min(),c=new ho({mapValue:{fields:r.document.fields}}),u=Ls.newFoundDocument(i,s,a,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new rg(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xy(t,r.document),s=r.readTime?gl(r.readTime):tn.min(),a=Ls.newNoDocument(i,s),c=r.removedTargetIds||[];n=new rg([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xy(t,r.document),s=r.removedTargetIds||[];n=new rg([],s,i,null)}else{if(!("filter"in e))return Qt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new HB(i,s),c=r.targetId;n=new bT(c,a)}}return n}function rz(t,e){let n;if(e instanceof kp)n={update:sA(t,e.key,e.value)};else if(e instanceof lx)n={delete:_1(t,e.key)};else if(e instanceof lu)n={update:sA(t,e.key,e.data),updateMask:hz(e.fieldMask)};else{if(!(e instanceof zB))return Qt();n={verify:_1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const c=a.transform;if(c instanceof Tg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof _h)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof kg)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw Qt()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:ez(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Qt()})(t,e.precondition)),n}function iz(t,e){return t&&t.length>0?(tr(e!==void 0),t.map((n=>(function(i,s){let a=i.updateTime?gl(i.updateTime):gl(s);return a.isEqual(tn.min())&&(a=gl(s)),new VB(a,i.transformResults||[])})(n,e)))):[]}function sz(t,e){return{documents:[NT(t,e.path)]}}function oz(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NT(t,i);const s=(function(h){if(h.length!==0)return TT(La.create(h,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const a=(function(h){if(h.length!==0)return h.map((p=>(function(w){return{field:$d(w.field),direction:cz(w.dir)}})(p)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=b1(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:n,parent:i}}function az(t){let e=tz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){tr(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=(function(y){const w=ST(y);return w instanceof La&&nT(w)?w.getFilters():[w]})(n.where));let a=[];n.orderBy&&(a=(function(y){return y.map((w=>(function(j){return new ap(Hd(j.field),(function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(w)))})(n.orderBy));let c=null;n.limit&&(c=(function(y){let w;return w=typeof y=="object"?y.value:y,r0(w)?null:w})(n.limit));let u=null;n.startAt&&(u=(function(y){const w=!!y.before,v=y.values||[];return new Sg(v,w)})(n.startAt));let h=null;return n.endAt&&(h=(function(y){const w=!y.before,v=y.values||[];return new Sg(v,w)})(n.endAt)),EB(e,i,a,s,c,"F",u,h)}function lz(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qt()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ST(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hd(n.unaryFilter.field);return _i.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hd(n.unaryFilter.field);return _i.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hd(n.unaryFilter.field);return _i.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hd(n.unaryFilter.field);return _i.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Qt()}})(t):t.fieldFilter!==void 0?(function(n){return _i.create(Hd(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qt()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return La.create(n.compositeFilter.filters.map((r=>ST(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qt()}})(n.compositeFilter.op))})(t):Qt()}function cz(t){return QB[t]}function uz(t){return XB[t]}function dz(t){return JB[t]}function $d(t){return{fieldPath:t.canonicalString()}}function Hd(t){return ls.fromServerFormat(t.fieldPath)}function TT(t){return t instanceof _i?(function(n){if(n.op==="=="){if(H_(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NAN"}};if($_(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(H_(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NOT_NAN"}};if($_(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$d(n.field),op:uz(n.op),value:n.value}}})(t):t instanceof La?(function(n){const r=n.getFilters().map((i=>TT(i)));return r.length===1?r[0]:{compositeFilter:{op:dz(n.op),filters:r}}})(t):Qt()}function hz(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function kT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,i,s=tn.min(),a=tn.min(),c=ds.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Gc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e){this.ct=e}}function pz(t){const e=az({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?x1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(){this.un=new gz}addToCollectionParentIndex(e,n){return this.un.add(n),Ye.resolve()}getCollectionParents(e,n){return Ye.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ye.resolve()}deleteFieldIndex(e,n){return Ye.resolve()}deleteAllFieldIndexes(e){return Ye.resolve()}createTargetIndexes(e,n){return Ye.resolve()}getDocumentsMatchingTarget(e,n){return Ye.resolve(null)}getIndexType(e,n){return Ye.resolve(0)}getFieldIndexes(e,n){return Ye.resolve([])}getNextCollectionGroupToUpdate(e){return Ye.resolve(null)}getMinOffset(e,n){return Ye.resolve(ru.min())}getMinOffsetFromCollectionGroup(e,n){return Ye.resolve(ru.min())}updateCollectionGroup(e,n,r){return Ye.resolve()}updateIndexEntries(e,n){return Ye.resolve()}}class gz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new us(gr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new us(gr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ah(0)}static kn(){return new Ah(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(){this.changes=new Oh((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ls.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ye.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Ff(r.mutation,i,Lo.empty(),Vi.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,_n()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=_n()){const i=Uu();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let a=Af();return s.forEach(((c,u)=>{a=a.insert(c,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=Uu();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,_n())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,c)=>{n.set(a,c)}))}))}computeViews(e,n,r,i){let s=ac();const a=Of(),c=(function(){return Of()})();return n.forEach(((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof lu)?s=s.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),Ff(p.mutation,h,p.mutation.getFieldMask(),Vi.now())):a.set(h.key,Lo.empty())})),this.recalculateAndSaveOverlays(e,s).next((u=>(u.forEach(((h,p)=>a.set(h,p))),n.forEach(((h,p)=>{var y;return c.set(h,new vz(p,(y=a.get(h))!==null&&y!==void 0?y:null))})),c)))}recalculateAndSaveOverlays(e,n){const r=Of();let i=new Ur(((a,c)=>a-c)),s=_n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const c of a)c.keys().forEach((u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Lo.empty();p=c.applyToLocalView(h,p),r.set(u,p);const y=(i.get(c.batchId)||_n()).add(u);i=i.insert(c.batchId,y)}))})).next((()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,y=dT();p.forEach((w=>{if(!s.has(w)){const v=yT(n.get(w),r.get(w));v!==null&&y.set(w,v),s=s.add(w)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,y))}return Ye.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(a){return jt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ye.resolve(Uu());let c=-1,u=s;return a.next((h=>Ye.forEach(h,((p,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),s.get(p)?Ye.resolve():this.remoteDocumentCache.getEntry(e,p).next((w=>{u=u.insert(p,w)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,u,h,_n()))).next((p=>({batchId:c,changes:uT(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new jt(n)).next((r=>{let i=Af();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Af();return this.indexManager.getCollectionParents(e,s).next((c=>Ye.forEach(c,(u=>{const h=(function(y,w){return new Mh(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((y,w)=>{a=a.insert(y,w)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((a=>{s.forEach(((u,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,Ls.newInvalidDocument(p)))}));let c=Af();return a.forEach(((u,h)=>{const p=s.get(u);p!==void 0&&Ff(p.mutation,h,Lo.empty(),Vi.now()),s0(n,h)&&(c=c.insert(u,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ye.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:gl(i.createTime)}})(n)),Ye.resolve()}getNamedQuery(e,n){return Ye.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(i){return{name:i.name,query:pz(i.bundledQuery),readTime:gl(i.readTime)}})(n)),Ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(){this.overlays=new Ur(jt.comparator),this.Ir=new Map}getOverlay(e,n){return Ye.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Uu();return Ye.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.ht(e,n,s)})),Ye.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Ir.delete(r)),Ye.resolve()}getOverlaysForCollection(e,n,r){const i=Uu(),s=n.length+1,a=new jt(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ye.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ur(((h,p)=>h-p));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Uu(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Uu(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=i)););return Ye.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new $B(n,r));let s=this.Ir.get(n);s===void 0&&(s=_n(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(){this.sessionToken=ds.EMPTY_BYTE_STRING}getSessionToken(e){return Ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.Tr=new us(Xi.Er),this.dr=new us(Xi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Xi(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new Xi(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new jt(new gr([])),r=new Xi(n,e),i=new Xi(n,e+1),s=[];return this.dr.forEachInRange([r,i],(a=>{this.Vr(a),s.push(a.key)})),s}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new jt(new gr([])),r=new Xi(n,e),i=new Xi(n,e+1);let s=_n();return this.dr.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const n=new Xi(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xi{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return jt.comparator(e.key,n.key)||Fn(e.wr,n.wr)}static Ar(e,n){return Fn(e.wr,n.wr)||jt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new us(Xi.Er)}checkEmpty(e){return Ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new qB(s,n,r,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new Xi(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Ye.resolve(a)}lookupMutationBatch(e,n){return Ye.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Ye.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ye.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xi(n,0),i=new Xi(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],(a=>{const c=this.Dr(a.wr);s.push(c)})),Ye.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new us(Fn);return n.forEach((i=>{const s=new Xi(i,0),a=new Xi(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],(c=>{r=r.add(c.wr)}))})),Ye.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;jt.isDocumentKey(s)||(s=s.child(""));const a=new Xi(new jt(s),0);let c=new us(Fn);return this.br.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.wr)),!0)}),a),Ye.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){tr(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ye.forEach(n.mutations,(i=>{const s=new Xi(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new Xi(n,0),i=this.br.firstAfterOrEqual(r);return Ye.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ye.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e){this.Mr=e,this.docs=(function(){return new Ur(jt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ye.resolve(r?r.document.mutableCopy():Ls.newInvalidDocument(n))}getEntries(e,n){let r=ac();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ls.newInvalidDocument(i))})),Ye.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ac();const a=n.path,c=new jt(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||oB(sB(p),r)<=0||(i.has(p.key)||s0(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return Ye.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Qt()}Or(e,n){return Ye.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Ez(this)}getSize(e){return Ye.resolve(this.size)}}class Ez extends yz{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),Ye.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.persistence=e,this.Nr=new Oh((n=>ix(n)),sx),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hx,this.targetCount=0,this.kr=Ah.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,i)=>n(i))),Ye.resolve()}getLastRemoteSnapshotVersion(e){return Ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ye.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ye.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ah(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ye.resolve()}updateTargetData(e,n){return this.Kn(n),Ye.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ye.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach(((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),Ye.waitFor(s).next((()=>i))}getTargetCount(e){return Ye.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ye.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ye.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),Ye.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ye.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ye.resolve(r)}containsKey(e,n){return Ye.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ex(0),this.Kr=!1,this.Kr=!0,this.$r=new _z,this.referenceDelegate=e(this),this.Ur=new Sz(this),this.indexManager=new mz,this.remoteDocumentCache=(function(i){return new Nz(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new fz(n),this.Gr=new bz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Az(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){_t("MemoryPersistence","Starting transaction:",e);const i=new kz(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((s=>this.referenceDelegate.jr(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Hr(e,n){return Ye.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class kz extends lB{constructor(e){super(),this.currentSequenceNumber=e}}class fx{constructor(e){this.persistence=e,this.Jr=new hx,this.Yr=null}static Zr(e){return new fx(e)}get Xr(){if(this.Yr)return this.Yr;throw Qt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ye.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ye.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ye.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.Xr.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ye.forEach(this.Xr,(r=>{const i=jt.fromPath(r);return this.ei(e,i).next((s=>{s||n.removeEntry(i,tn.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return Ye.or([()=>Ye.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=_n(),i=_n();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new px(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return RF()?8:cB(Os())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.Zi(e,n,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new Cz;return this.Xi(e,n,a).next((c=>{if(s.result=c,this.zi)return this.es(e,n,a,c.size)}))})).next((()=>s.result))}es(e,n,r,i){return r.documentReadCount<this.ji?(yf()<=An.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",qd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ye.resolve()):(yf()<=An.DEBUG&&_t("QueryEngine","Query:",qd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(yf()<=An.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",qd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ml(n))):Ye.resolve())}Yi(e,n){if(Y_(n))return Ye.resolve(null);let r=ml(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=x1(n,null,"F"),r=ml(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=_n(...s);return this.Ji.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.ts(n,c);return this.ns(n,h,a,u.readTime)?this.Yi(e,x1(n,null,"F")):this.rs(e,h,n,u)}))))})))))}Zi(e,n,r,i){return Y_(n)||i.isEqual(tn.min())?Ye.resolve(null):this.Ji.getDocuments(e,r).next((s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?Ye.resolve(null):(yf()<=An.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qd(n)),this.rs(e,a,n,iB(i,-1)).next((c=>c)))}))}ts(e,n){let r=new us(lT(e));return n.forEach(((i,s)=>{s0(e,s)&&(r=r.add(s))})),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return yf()<=An.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",qd(n)),this.Ji.getDocumentsMatchingQuery(e,n,ru.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ur(Fn),this._s=new Oh((s=>ix(s)),sx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function Rz(t,e,n,r){return new Pz(t,e,n,r)}async function CT(t,e){const n=rn(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],c=[];let u=_n();for(const h of i){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next((h=>({hs:h,removedBatchIds:a,addedBatchIds:c})))}))}))}function jz(t,e){const n=rn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return(function(c,u,h,p){const y=h.batch,w=y.keys();let v=Ye.resolve();return w.forEach((j=>{v=v.next((()=>p.getEntry(u,j))).next((S=>{const _=h.docVersions.get(j);tr(_!==null),S.version.compareTo(_)<0&&(y.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(u,y)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=_n();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function IT(t){const e=rn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function Lz(t,e){const n=rn(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach(((p,y)=>{const w=i.get(y);if(!w)return;c.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,y).next((()=>n.Ur.addMatchingKeys(s,p.addedDocuments,y))));let v=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?v=v.withResumeToken(ds.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,r)),i=i.insert(y,v),(function(S,_,I){return S.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(w,v,p)&&c.push(n.Ur.updateTargetData(s,v))}));let u=ac(),h=_n();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))})),c.push(Dz(s,a,e.documentUpdates).next((p=>{u=p.Ps,h=p.Is}))),!r.isEqual(tn.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next((y=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r)));c.push(p)}return Ye.waitFor(c).next((()=>a.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,u,h))).next((()=>u))})).then((s=>(n.os=i,s)))}function Dz(t,e,n){let r=_n(),i=_n();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let a=ac();return n.forEach(((c,u)=>{const h=s.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(tn.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):_t("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)})),{Ps:a,Is:i}}))}function Mz(t,e){const n=rn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Oz(t,e){const n=rn(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Ur.getTargetData(r,e).next((s=>s?(i=s,Ye.resolve(i)):n.Ur.allocateTargetId(r).next((a=>(i=new Gc(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function N1(t,e,n){const r=rn(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Tp(a))throw a;_t("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function oA(t,e,n){const r=rn(t);let i=tn.min(),s=_n();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,h,p){const y=rn(u),w=y._s.get(p);return w!==void 0?Ye.resolve(y.os.get(w)):y.Ur.getTargetData(h,p)})(r,a,ml(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next((u=>{s=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:tn.min(),n?s:_n()))).next((c=>(Fz(r,TB(e),c),{documents:c,Ts:s})))))}function Fz(t,e,n){let r=t.us.get(e)||tn.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.us.set(e,r)}class aA{constructor(){this.activeTargetIds=jB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vz{constructor(){this.so=new aA,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new aA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){_t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm=null;function Jy(){return Rm===null?Rm=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rm++,"0x"+Rm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="WebChannelConnection";class qz extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const c=Jy(),u=this.xo(n,r.toUriEncodedString());_t("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,a),this.No(n,u,h,i).then((p=>(_t("RestConnection",`Received RPC '${n}' ${c}: `,p),p)),(p=>{throw vh("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",i),p}))}Lo(n,r,i,s,a,c){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dh})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((s,a)=>n[a]=s)),i&&i.headers.forEach(((s,a)=>n[a]=s))}xo(n,r){const i=Bz[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Jy();return new Promise(((a,c)=>{const u=new $3;u.setWithCredentials(!0),u.listenOnce(H3.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case eg.NO_ERROR:const p=u.getResponseJson();_t(Ts,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case eg.TIMEOUT:_t(Ts,`RPC '${e}' ${s} timed out`),c(new lt(He.DEADLINE_EXCEEDED,"Request time out"));break;case eg.HTTP_ERROR:const y=u.getStatus();if(_t(Ts,`RPC '${e}' ${s} failed with status:`,y,"response text:",u.getResponseText()),y>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const v=w?.error;if(v&&v.status&&v.message){const j=(function(_){const I=_.toLowerCase().replace(/_/g,"-");return Object.values(He).indexOf(I)>=0?I:He.UNKNOWN})(v.status);c(new lt(j,v.message))}else c(new lt(He.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new lt(He.UNAVAILABLE,"Connection failed."));break;default:Qt()}}finally{_t(Ts,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(i);_t(Ts,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)}))}Bo(e,n,r){const i=Jy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=K3(),c=G3(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");_t(Ts,`Creating RPC '${e}' stream ${i}: ${p}`,u);const y=a.createWebChannel(p,u);let w=!1,v=!1;const j=new zz({Io:_=>{v?_t(Ts,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(w||(_t(Ts,`Opening RPC '${e}' stream ${i} transport.`),y.open(),w=!0),_t(Ts,`RPC '${e}' stream ${i} sending:`,_),y.send(_))},To:()=>y.close()}),S=(_,I,V)=>{_.listen(I,(z=>{try{V(z)}catch($){setTimeout((()=>{throw $}),0)}}))};return S(y,_f.EventType.OPEN,(()=>{v||(_t(Ts,`RPC '${e}' stream ${i} transport opened.`),j.yo())})),S(y,_f.EventType.CLOSE,(()=>{v||(v=!0,_t(Ts,`RPC '${e}' stream ${i} transport closed`),j.So())})),S(y,_f.EventType.ERROR,(_=>{v||(v=!0,vh(Ts,`RPC '${e}' stream ${i} transport errored:`,_),j.So(new lt(He.UNAVAILABLE,"The operation could not be completed")))})),S(y,_f.EventType.MESSAGE,(_=>{var I;if(!v){const V=_.data[0];tr(!!V);const z=V,$=z.error||((I=z[0])===null||I===void 0?void 0:I.error);if($){_t(Ts,`RPC '${e}' stream ${i} received error:`,$);const J=$.status;let le=(function(T){const U=bi[T];if(U!==void 0)return xT(U)})(J),q=$.message;le===void 0&&(le=He.INTERNAL,q="Unknown error status: "+J+" with message "+$.message),v=!0,j.So(new lt(le,q)),y.close()}else _t(Ts,`RPC '${e}' stream ${i} received:`,V),j.bo(V)}})),S(c,W3.STAT_EVENT,(_=>{_.stat===f1.PROXY?_t(Ts,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===f1.NOPROXY&&_t(Ts,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{j.wo()}),0),j}}function Zy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){return new ZB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&_t("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n,r,i,s,a,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new PT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===He.RESOURCE_EXHAUSTED?(oc(n.toString()),oc("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===He.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===n&&this.P_(r,i)}),(r=>{e((()=>{const i=new lt(He.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return _t("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(_t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $z extends RT{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=nz(this.serializer,e),r=(function(s){if(!("targetChange"in s))return tn.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?tn.min():a.readTime?gl(a.readTime):tn.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=A1(this.serializer),n.addTarget=(function(s,a){let c;const u=a.target;if(c=y1(u)?{documents:sz(s,u)}:{query:oz(s,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=_T(s,a.resumeToken);const h=b1(s,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(tn.min())>0){c.readTime=Cg(s,a.snapshotVersion.toTimestamp());const h=b1(s,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=lz(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=A1(this.serializer),n.removeTarget=e,this.a_(n)}}class Hz extends RT{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return tr(!!e.streamToken),this.lastStreamToken=e.streamToken,tr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){tr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=iz(e.writeResults,e.commitTime),r=gl(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=A1(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>rz(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new lt(He.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Mo(e,w1(n,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new lt(He.UNKNOWN,s.toString())}))}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Lo(e,w1(n,r),i,a,c,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new lt(He.UNKNOWN,a.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Gz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(oc(n),this.D_=!1):_t("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o((a=>{r.enqueueAndForget((async()=>{ad(this)&&(_t("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const h=rn(u);h.L_.add(4),await Ip(h),h.q_.set("Unknown"),h.L_.delete(4),await u0(h)})(this))}))})),this.q_=new Gz(r,i)}}async function u0(t){if(ad(t))for(const e of t.B_)await e(!0)}async function Ip(t){for(const e of t.B_)await e(!1)}function jT(t,e){const n=rn(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vx(n)?yx(n):Fh(n).r_()&&gx(n,e))}function mx(t,e){const n=rn(t),r=Fh(n);n.N_.delete(e),r.r_()&&LT(n,e),n.N_.size===0&&(r.r_()?r.o_():ad(n)&&n.q_.set("Unknown"))}function gx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fh(t).A_(e)}function LT(t,e){t.Q_.xe(e),Fh(t).R_(e)}function yx(t){t.Q_=new YB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fh(t).start(),t.q_.v_()}function vx(t){return ad(t)&&!Fh(t).n_()&&t.N_.size>0}function ad(t){return rn(t).L_.size===0}function DT(t){t.Q_=void 0}async function Yz(t){t.q_.set("Online")}async function Qz(t){t.N_.forEach(((e,n)=>{gx(t,e)}))}async function Xz(t,e){DT(t),vx(t)?(t.q_.M_(e),yx(t)):t.q_.set("Unknown")}async function Jz(t,e,n){if(t.q_.set("Online"),e instanceof wT&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))})(t,e)}catch(r){_t("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ig(t,r)}else if(e instanceof rg?t.Q_.Ke(e):e instanceof bT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(tn.min()))try{const r=await IT(t.localStore);n.compareTo(r)>=0&&await(function(s,a){const c=s.Q_.rt(a);return c.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(u.resumeToken,a))}})),c.targetMismatches.forEach(((u,h)=>{const p=s.N_.get(u);if(!p)return;s.N_.set(u,p.withResumeToken(ds.EMPTY_BYTE_STRING,p.snapshotVersion)),LT(s,u);const y=new Gc(p.target,u,h,p.sequenceNumber);gx(s,y)})),s.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){_t("RemoteStore","Failed to raise snapshot:",r),await Ig(t,r)}}async function Ig(t,e,n){if(!Tp(e))throw e;t.L_.add(1),await Ip(t),t.q_.set("Offline"),n||(n=()=>IT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_t("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await u0(t)}))}function MT(t,e){return e().catch((n=>Ig(t,n,e)))}async function d0(t){const e=rn(t),n=su(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Zz(e);)try{const i=await Mz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,eq(e,i)}catch(i){await Ig(e,i)}OT(e)&&FT(e)}function Zz(t){return ad(t)&&t.O_.length<10}function eq(t,e){t.O_.push(e);const n=su(t);n.r_()&&n.V_&&n.m_(e.mutations)}function OT(t){return ad(t)&&!su(t).n_()&&t.O_.length>0}function FT(t){su(t).start()}async function tq(t){su(t).p_()}async function nq(t){const e=su(t);for(const n of t.O_)e.m_(n.mutations)}async function rq(t,e,n){const r=t.O_.shift(),i=cx.from(r,e,n);await MT(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await d0(t)}async function iq(t,e){e&&su(t).V_&&await(async function(r,i){if((function(a){return WB(a)&&a!==He.ABORTED})(i.code)){const s=r.O_.shift();su(r).s_(),await MT(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await d0(r)}})(t,e),OT(t)&&FT(t)}async function cA(t,e){const n=rn(t);n.asyncQueue.verifyOperationInProgress(),_t("RemoteStore","RemoteStore received new credentials");const r=ad(n);n.L_.add(3),await Ip(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await u0(n)}async function sq(t,e){const n=rn(t);e?(n.L_.delete(2),await u0(n)):e||(n.L_.add(2),await Ip(n),n.q_.set("Unknown"))}function Fh(t){return t.K_||(t.K_=(function(n,r,i){const s=rn(n);return s.w_(),new $z(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:Yz.bind(null,t),Ro:Qz.bind(null,t),mo:Xz.bind(null,t),d_:Jz.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),vx(t)?yx(t):t.q_.set("Unknown")):(await t.K_.stop(),DT(t))}))),t.K_}function su(t){return t.U_||(t.U_=(function(n,r,i){const s=rn(n);return s.w_(),new Hz(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tq.bind(null,t),mo:iq.bind(null,t),f_:nq.bind(null,t),g_:rq.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await d0(t)):(await t.U_.stop(),t.O_.length>0&&(_t("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ec,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,c=new xx(e,n,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(He.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bx(t,e){if(oc("AsyncQueue",`${e}: ${t}`),Tp(t))return new lt(He.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this.comparator=e?(n,r)=>e(n,r)||jt.comparator(n.key,r.key):(n,r)=>jt.comparator(n.key,r.key),this.keyedMap=Af(),this.sortedSet=new Ur(this.comparator)}static emptySet(e){return new sh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new sh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.W_=new Ur(jt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Qt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Nh{constructor(e,n,r,i,s,a,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach((c=>{a.push({type:0,doc:c})})),new Nh(e,n,sh.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&i0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class aq{constructor(){this.queries=dA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=rn(n),s=i.queries;i.queries=dA(),s.forEach(((a,c)=>{for(const u of c.j_)u.onError(r)}))})(this,new lt(He.ABORTED,"Firestore shutting down"))}}function dA(){return new Oh((t=>aT(t)),i0)}async function VT(t,e){const n=rn(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new oq,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const c=bx(a,`Initialization of query '${qd(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&wx(n)}async function UT(t,e){const n=rn(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lq(t,e){const n=rn(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&wx(n)}function cq(t,e,n){const r=rn(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function wx(t){t.Y_.forEach((e=>{e.next()}))}var E1,hA;(hA=E1||(E1={})).ea="default",hA.Cache="cache";class BT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Nh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==E1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.key=e}}class qT{constructor(e){this.key=e}}class uq{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_n(),this.mutatedKeys=_n(),this.Aa=lT(e),this.Ra=new sh(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new uA,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,y)=>{const w=i.get(p),v=s0(this.query,y)?y:null,j=!!w&&this.mutatedKeys.has(w.key),S=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let _=!1;w&&v?w.data.isEqual(v.data)?j!==S&&(r.track({type:3,doc:v}),_=!0):this.ga(w,v)||(r.track({type:2,doc:v}),_=!0,(u&&this.Aa(v,u)>0||h&&this.Aa(v,h)<0)&&(c=!0)):!w&&v?(r.track({type:0,doc:v}),_=!0):w&&!v&&(r.track({type:1,doc:w}),_=!0,(u||h)&&(c=!0)),_&&(v?(a=a.add(v),s=S?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort(((p,y)=>(function(v,j){const S=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt()}};return S(v)-S(j)})(p.type,y.type)||this.Aa(p.doc,y.doc))),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new Nh(this.query,e.Ra,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uA,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=_n(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new qT(r))})),this.da.forEach((r=>{e.has(r)||n.push(new zT(r))})),n}ba(e){this.Ta=e.Ts,this.da=_n();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Nh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class dq{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hq{constructor(e){this.key=e,this.va=!1}}class fq{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Oh((c=>aT(c)),i0),this.Ma=new Map,this.xa=new Set,this.Oa=new Ur(jt.comparator),this.Na=new Map,this.La=new hx,this.Ba={},this.ka=new Map,this.qa=Ah.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pq(t,e,n=!0){const r=YT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await $T(r,e,n,!0),i}async function mq(t,e){const n=YT(t);await $T(n,e,!0,!1)}async function $T(t,e,n,r){const i=await Oz(t.localStore,ml(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await gq(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&jT(t.remoteStore,i),c}async function gq(t,e,n,r,i){t.Ka=(y,w,v)=>(async function(S,_,I,V){let z=_.view.ma(I);z.ns&&(z=await oA(S.localStore,_.query,!1).then((({documents:q})=>_.view.ma(q,z))));const $=V&&V.targetChanges.get(_.targetId),J=V&&V.targetMismatches.get(_.targetId)!=null,le=_.view.applyChanges(z,S.isPrimaryClient,$,J);return pA(S,_.targetId,le.wa),le.snapshot})(t,y,w,v);const s=await oA(t.localStore,e,!0),a=new uq(e,s.Ts),c=a.ma(s.documents),u=Cp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(c,t.isPrimaryClient,u);pA(t,n,h.wa);const p=new dq(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function yq(t,e,n){const r=rn(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((a=>!i0(a,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await N1(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mx(r.remoteStore,i.targetId),S1(r,i.targetId)})).catch(Sp)):(S1(r,i.targetId),await N1(r.localStore,i.targetId,!0))}async function vq(t,e){const n=rn(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mx(n.remoteStore,r.targetId))}async function xq(t,e,n){const r=Sq(t);try{const i=await(function(a,c){const u=rn(a),h=Vi.now(),p=c.reduce(((v,j)=>v.add(j.key)),_n());let y,w;return u.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let j=ac(),S=_n();return u.cs.getEntries(v,p).next((_=>{j=_,j.forEach(((I,V)=>{V.isValidDocument()||(S=S.add(I))}))})).next((()=>u.localDocuments.getOverlayedDocuments(v,j))).next((_=>{y=_;const I=[];for(const V of c){const z=BB(V,y.get(V.key).overlayedDocument);z!=null&&I.push(new lu(V.key,z,Z3(z.value.mapValue),la.exists(!0)))}return u.mutationQueue.addMutationBatch(v,h,I,c)})).next((_=>{w=_;const I=_.applyToLocalDocumentSet(y,S);return u.documentOverlayCache.saveOverlays(v,_.batchId,I)}))})).then((()=>({batchId:w.batchId,changes:uT(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,c,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new Ur(Fn)),h=h.insert(c,u),a.Ba[a.currentUser.toKey()]=h})(r,i.batchId,n),await Pp(r,i.changes),await d0(r.remoteStore)}catch(i){const s=bx(i,"Failed to persist write");n.reject(s)}}async function HT(t,e){const n=rn(t);try{const r=await Lz(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=n.Na.get(s);a&&(tr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?tr(a.va):i.removedDocuments.size>0&&(tr(a.va),a.va=!1))})),await Pp(n,r,e)}catch(r){await Sp(r)}}function fA(t,e,n){const r=rn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach(((s,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)})),(function(a,c){const u=rn(a);u.onlineState=c;let h=!1;u.queries.forEach(((p,y)=>{for(const w of y.j_)w.Z_(c)&&(h=!0)})),h&&wx(u)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bq(t,e,n){const r=rn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Ur(jt.comparator);a=a.insert(s,Ls.newNoDocument(s,tn.min()));const c=_n().add(s),u=new l0(tn.min(),new Map,new Ur(Fn),a,c);await HT(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),_x(r)}else await N1(r.localStore,e,!1).then((()=>S1(r,e,n))).catch(Sp)}async function wq(t,e){const n=rn(t),r=e.batch.batchId;try{const i=await jz(n.localStore,e);GT(n,r,null),WT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pp(n,i)}catch(i){await Sp(i)}}async function _q(t,e,n){const r=rn(t);try{const i=await(function(a,c){const u=rn(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next((y=>(tr(y!==null),p=y.keys(),u.mutationQueue.removeMutationBatch(h,y)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>u.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);GT(r,e,n),WT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Pp(r,i)}catch(i){await Sp(i)}}function WT(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function GT(t,e,n){const r=rn(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function S1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||KT(t,r)}))}function KT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(mx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_x(t))}function pA(t,e,n){for(const r of n)r instanceof zT?(t.La.addReference(r.key,e),Aq(t,r)):r instanceof qT?(_t("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||KT(t,r.key)):Qt()}function Aq(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(_t("SyncEngine","New document in limbo: "+n),t.xa.add(r),_x(t))}function _x(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new jt(gr.fromString(e)),r=t.qa.next();t.Na.set(r,new hq(n)),t.Oa=t.Oa.insert(n,r),jT(t.remoteStore,new Gc(ml(ox(n.path)),r,"TargetPurposeLimboResolution",ex.oe))}}async function Pp(t,e,n){const r=rn(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((c,u)=>{a.push(r.Ka(u,e,n).then((h=>{var p;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(p=n?.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(h){i.push(h);const y=px.Wi(u.targetId,h);s.push(y)}})))})),await Promise.all(a),r.Ca.d_(i),await(async function(u,h){const p=rn(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>Ye.forEach(h,(w=>Ye.forEach(w.$i,(v=>p.persistence.referenceDelegate.addReference(y,w.targetId,v))).next((()=>Ye.forEach(w.Ui,(v=>p.persistence.referenceDelegate.removeReference(y,w.targetId,v)))))))))}catch(y){if(!Tp(y))throw y;_t("LocalStore","Failed to update sequence numbers: "+y)}for(const y of h){const w=y.targetId;if(!y.fromCache){const v=p.os.get(w),j=v.snapshotVersion,S=v.withLastLimboFreeSnapshotVersion(j);p.os=p.os.insert(w,S)}}})(r.localStore,s))}async function Nq(t,e){const n=rn(t);if(!n.currentUser.isEqual(e)){_t("SyncEngine","User change. New user:",e.toKey());const r=await CT(n.localStore,e);n.currentUser=e,(function(s,a){s.ka.forEach((c=>{c.forEach((u=>{u.reject(new lt(He.CANCELLED,a))}))})),s.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pp(n,r.hs)}}function Eq(t,e){const n=rn(t),r=n.Na.get(e);if(r&&r.va)return _n().add(r.key);{let i=_n();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const c=n.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function YT(t){const e=rn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bq.bind(null,e),e.Ca.d_=lq.bind(null,e.eventManager),e.Ca.$a=cq.bind(null,e.eventManager),e}function Sq(t){const e=rn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_q.bind(null,e),e}class Pg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=c0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Rz(this.persistence,new Iz,e.initialUser,this.serializer)}Ga(e){return new Tz(fx.Zr,this.serializer)}Wa(e){return new Vz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pg.provider={build:()=>new Pg};class T1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nq.bind(null,this.syncEngine),await sq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aq})()}createDatastore(e){const n=c0(e.databaseInfo.databaseId),r=(function(s){return new qz(s)})(e.databaseInfo);return(function(s,a,c,u){return new Wz(s,a,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,a,c){return new Kz(r,i,s,a,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>fA(this.syncEngine,n,0)),(function(){return lA.D()?new lA:new Uz})())}createSyncEngine(e,n){return(function(i,s,a,c,u,h,p){const y=new fq(i,s,a,c,u,h);return p&&(y.Qa=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const s=rn(i);_t("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ip(s),s.k_.shutdown(),s.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}T1.provider={build:()=>new T1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):oc("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Rs.UNAUTHENTICATED,this.clientId=Q3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{_t("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(_t("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ec;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bx(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ev(t,e){t.asyncQueue.verifyOperationInProgress(),_t("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await CT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function mA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kq(t);_t("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>cA(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>cA(e.remoteStore,i))),t._onlineComponents=e}async function kq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_t("FirestoreClient","Using user provided OfflineComponentProvider");try{await ev(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===He.FAILED_PRECONDITION||i.code===He.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;vh("Error using user provided cache. Falling back to memory cache: "+n),await ev(t,new Pg)}}else _t("FirestoreClient","Using default OfflineComponentProvider"),await ev(t,new Pg);return t._offlineComponents}async function XT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_t("FirestoreClient","Using user provided OnlineComponentProvider"),await mA(t,t._uninitializedComponentsProvider._online)):(_t("FirestoreClient","Using default OnlineComponentProvider"),await mA(t,new T1))),t._onlineComponents}function Cq(t){return XT(t).then((e=>e.syncEngine))}async function JT(t){const e=await XT(t),n=e.eventManager;return n.onListen=pq.bind(null,e.syncEngine),n.onUnlisten=yq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vq.bind(null,e.syncEngine),n}function Iq(t,e,n={}){const r=new ec;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,c,u,h){const p=new QT({next:w=>{p.Za(),a.enqueueAndForget((()=>UT(s,y)));const v=w.docs.has(c);!v&&w.fromCache?h.reject(new lt(He.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&w.fromCache&&u&&u.source==="server"?h.reject(new lt(He.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),y=new BT(ox(c.path),p,{includeMetadataChanges:!0,_a:!0});return VT(s,y)})(await JT(t),t.asyncQueue,e,n,r))),r.promise}function Pq(t,e,n={}){const r=new ec;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,c,u,h){const p=new QT({next:w=>{p.Za(),a.enqueueAndForget((()=>UT(s,y))),w.fromCache&&u.source==="server"?h.reject(new lt(He.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),y=new BT(c,p,{includeMetadataChanges:!0,_a:!0});return VT(s,y)})(await JT(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(t,e,n){if(!n)throw new lt(He.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rq(t,e,n,r){if(e===!0&&r===!0)throw new lt(He.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yA(t){if(!jt.isDocumentKey(t))throw new lt(He.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vA(t){if(jt.isDocumentKey(t))throw new lt(He.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function h0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Qt()}function Da(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new lt(He.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=h0(t);throw new lt(He.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new lt(He.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new lt(He.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new lt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt(He.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class f0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xA({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(He.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new lt(He.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xA(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new YU;switch(r.type){case"firstParty":return new ZU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new lt(He.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=gA.get(n);r&&(_t("ComponentProvider","Removing Datastore"),gA.delete(n),r.terminate())})(this),Promise.resolve()}}function jq(t,e,n,r={}){var i;const s=(t=Da(t,f0))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&vh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Rs.MOCK_USER;else{c=r3(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new lt(He.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Rs(h)}t._authCredentials=new QU(new Y3(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ld(this.firestore,e,this._query)}}class Xs{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xs(this.firestore,e,this._key)}}class Jc extends ld{constructor(e,n,r){super(e,n,ox(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xs(this.firestore,null,new jt(e))}withConverter(e){return new Jc(this.firestore,e,this._path)}}function wl(t,e,...n){if(t=Xr(t),ek("collection","path",e),t instanceof f0){const r=gr.fromString(e,...n);return vA(r),new Jc(t,null,r)}{if(!(t instanceof Xs||t instanceof Jc))throw new lt(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gr.fromString(e,...n));return vA(r),new Jc(t.firestore,null,r)}}function da(t,e,...n){if(t=Xr(t),arguments.length===1&&(e=Q3.newId()),ek("doc","path",e),t instanceof f0){const r=gr.fromString(e,...n);return yA(r),new Xs(t,null,new jt(r))}{if(!(t instanceof Xs||t instanceof Jc))throw new lt(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gr.fromString(e,...n));return yA(r),new Xs(t.firestore,t instanceof Jc?t.converter:null,new jt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new PT(this,"async_queue_retry"),this.Vu=()=>{const r=Zy();r&&_t("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Zy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Zy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new ec;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Tp(e))throw e;_t("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c})(r);throw oc("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=xx.createAndSchedule(this,e,n,r,(s=>this.yu(s)));return this.Tu.push(i),i}fu(){this.Eu&&Qt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class cd extends f0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new bA,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bA(e),this._firestoreClient=void 0,await e}}}function Lq(t,e){const n=typeof t=="object"?t:z2(),r=typeof t=="string"?t:"(default)",i=Zg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=e3("firestore");s&&jq(i,...s)}return i}function Ax(t){if(t._terminated)throw new lt(He.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Dq(t),t._firestoreClient}function Dq(t){var e,n,r;const i=t._freezeSettings(),s=(function(c,u,h,p){return new hB(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,ZT(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Tq(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&(function(c){const u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eh(ds.fromBase64String(e))}catch(n){throw new lt(He.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Eh(ds.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new lt(He.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ls(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new lt(He.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new lt(He.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fn(this._lat,e._lat)||Fn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq=/^__.*__$/;class Oq{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new lu(e,this.data,this.fieldMask,n,this.fieldTransforms):new kp(e,this.data,n,this.fieldTransforms)}}class tk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new lu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt()}}class g0{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new g0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nk(this.Cu)&&Mq.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Fq{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||c0(e)}Qu(e,n,r,i=!1){return new g0({Cu:e,methodName:n,qu:r,path:ls.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function y0(t){const e=t._freezeSettings(),n=c0(t._databaseId);return new Fq(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rk(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Tx("Data must be an object, but it was:",a,r);const c=ik(r,a);let u,h;if(s.merge)u=new Lo(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const y of s.mergeFields){const w=k1(e,y,n);if(!a.contains(w))throw new lt(He.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);ok(p,w)||p.push(w)}u=new Lo(p),h=a.fieldTransforms.filter((y=>u.covers(y.field)))}else u=null,h=a.fieldTransforms;return new Oq(new ho(c),u,h)}class v0 extends m0{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof v0}}function Vq(t,e,n){return new g0({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sx extends m0{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=Vq(this,e,!0),r=this.Ku.map((s=>Vh(s,n))),i=new _h(r);return new OB(e.path,i)}isEqual(e){return e instanceof Sx&&ep(this.Ku,e.Ku)}}function Uq(t,e,n,r){const i=t.Qu(1,e,n);Tx("Data must be an object, but it was:",i,r);const s=[],a=ho.empty();od(r,((u,h)=>{const p=kx(e,u,n);h=Xr(h);const y=i.Nu(p);if(h instanceof v0)s.push(p);else{const w=Vh(h,y);w!=null&&(s.push(p),a.set(p,w))}}));const c=new Lo(s);return new tk(a,c,i.fieldTransforms)}function Bq(t,e,n,r,i,s){const a=t.Qu(1,e,n),c=[k1(e,r,n)],u=[i];if(s.length%2!=0)throw new lt(He.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)c.push(k1(e,s[w])),u.push(s[w+1]);const h=[],p=ho.empty();for(let w=c.length-1;w>=0;--w)if(!ok(h,c[w])){const v=c[w];let j=u[w];j=Xr(j);const S=a.Nu(v);if(j instanceof v0)h.push(v);else{const _=Vh(j,S);_!=null&&(h.push(v),p.set(v,_))}}const y=new Lo(h);return new tk(p,y,a.fieldTransforms)}function zq(t,e,n,r=!1){return Vh(n,t.Qu(r?4:3,e))}function Vh(t,e){if(sk(t=Xr(t)))return Tx("Unsupported field value:",e,t),ik(t,e);if(t instanceof m0)return(function(r,i){if(!nk(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const c of r){let u=Vh(c,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=Xr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Vi.fromDate(r);return{timestampValue:Cg(i.serializer,s)}}if(r instanceof Vi){const s=new Vi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cg(i.serializer,s)}}if(r instanceof Nx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Eh)return{bytesValue:_T(i.serializer,r._byteString)};if(r instanceof Xs){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ex)return(function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return ax(c.serializer,u)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${h0(r)}`)})(t,e)}function ik(t,e){const n={};return X3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):od(t,((r,i)=>{const s=Vh(i,e.Mu(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function sk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vi||t instanceof Nx||t instanceof Eh||t instanceof Xs||t instanceof m0||t instanceof Ex)}function Tx(t,e,n){if(!sk(n)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(n)){const r=h0(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function k1(t,e,n){if((e=Xr(e))instanceof p0)return e._internalPath;if(typeof e=="string")return kx(t,e);throw Rg("Field path arguments must be of type string or ",t,!1,void 0,n)}const qq=new RegExp("[~\\*/\\[\\]]");function kx(t,e,n){if(e.search(qq)>=0)throw Rg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new p0(...e.split("."))._internalPath}catch{throw Rg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rg(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new lt(He.INVALID_ARGUMENT,c+t+u)}function ok(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $q(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $q extends ak{data(){return super.data()}}function Cx(t,e){return typeof e=="string"?kx(t,e):e instanceof p0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new lt(He.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ix{}class lk extends Ix{}function ud(t,e,...n){let r=[];e instanceof Ix&&r.push(e),r=r.concat(n),(function(s){const a=s.filter((u=>u instanceof Rx)).length,c=s.filter((u=>u instanceof Px)).length;if(a>1||a>0&&c>0)throw new lt(He.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Px extends lk{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Px(e,n,r)}_apply(e){const n=this._parse(e);return ck(e._query,n),new ld(e.firestore,e.converter,v1(e._query,n))}_parse(e){const n=y0(e.firestore);return(function(s,a,c,u,h,p,y){let w;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new lt(He.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){_A(y,p);const v=[];for(const j of y)v.push(wA(u,s,j));w={arrayValue:{values:v}}}else w=wA(u,s,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||_A(y,p),w=zq(c,a,y,p==="in"||p==="not-in");return _i.create(h,p,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Rx extends Ix{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rx(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:La.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let a=i;const c=s.getFlattenedFilters();for(const u of c)ck(a,u),a=v1(a,u)})(e._query,n),new ld(e.firestore,e.converter,v1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jx extends lk{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jx(e,n)}_apply(e){const n=(function(i,s,a){if(i.startAt!==null)throw new lt(He.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new lt(He.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ap(s,a)})(e._query,this._field,this._direction);return new ld(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new Mh(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function dd(t,e="asc"){const n=e,r=Cx("orderBy",t);return jx._create(r,n)}function wA(t,e,n){if(typeof(n=Xr(n))=="string"){if(n==="")throw new lt(He.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oT(e)&&n.indexOf("/")!==-1)throw new lt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gr.fromString(n));if(!jt.isDocumentKey(r))throw new lt(He.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return q_(t,new jt(r))}if(n instanceof Xs)return q_(t,n._key);throw new lt(He.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${h0(n)}.`)}function _A(t,e){if(!Array.isArray(t)||t.length===0)throw new lt(He.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ck(t,e){const n=(function(i,s){for(const a of i)for(const c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new lt(He.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new lt(He.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Wq{convertValue(e,n="none"){switch(Zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Qt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return od(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((a=>oi(a.doubleValue)));return new Ex(s)}convertGeoPoint(e){return new Nx(oi(e.latitude),oi(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=nx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ip(e));default:return null}}convertTimestamp(e){const n=iu(e);return new Vi(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gr.fromString(e);tr(kT(r));const i=new sp(r.get(1),r.get(3)),s=new jt(r.popFirst(5));return i.isEqual(n)||oc(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dk extends ak{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ig(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ig extends dk{data(e={}){return super.data(e)}}class Gq{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ef(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new ig(this._firestore,this._userDataWriter,r.key,r,new Ef(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new lt(He.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((c=>{const u=new ig(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ef(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const u=new ig(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ef(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:Kq(c.type),doc:u,oldIndex:h,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Kq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t){t=Da(t,Xs);const e=Da(t.firestore,cd);return Iq(Ax(e),t._key).then((n=>Yq(e,t,n)))}class hk extends Wq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eh(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xs(this.firestore,null,n)}}function hd(t){t=Da(t,ld);const e=Da(t.firestore,cd),n=Ax(e),r=new hk(e);return Hq(t._query),Pq(n,t._query).then((i=>new Gq(e,r,t,i)))}function C1(t,e,n){t=Da(t,Xs);const r=Da(t.firestore,cd),i=uk(t.converter,e,n);return w0(r,[rk(y0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,la.none())])}function b0(t,e,n,...r){t=Da(t,Xs);const i=Da(t.firestore,cd),s=y0(i);let a;return a=typeof(e=Xr(e))=="string"||e instanceof p0?Bq(s,"updateDoc",t._key,e,n,r):Uq(s,"updateDoc",t._key,e),w0(i,[a.toMutation(t._key,la.exists(!0))])}function fk(t){return w0(Da(t.firestore,cd),[new lx(t._key,la.none())])}function Lx(t,e){const n=Da(t.firestore,cd),r=da(t),i=uk(t.converter,e);return w0(n,[rk(y0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,la.exists(!1))]).then((()=>r))}function w0(t,e){return(function(r,i){const s=new ec;return r.asyncQueue.enqueueAndForget((async()=>xq(await Cq(r),i,s))),s.promise})(Ax(t),e)}function Yq(t,e,n){const r=n.docs.get(e._key),i=new hk(t);return new dk(t,i,e._key,r,new Ef(n.hasPendingWrites,n.fromCache),e.converter)}function Qq(...t){return new Sx("arrayUnion",t)}(function(e,n=!0){(function(i){Dh=i})(sd),Yu(new nu("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new cd(new XU(r.getProvider("auth-internal")),new tB(r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new lt(He.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sp(h.options.projectId,p)})(a,i),a);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),fl(F_,"4.7.3",e),fl(F_,"4.7.3","esm2017")})();var Xq="firebase",Jq="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fl(Xq,Jq,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="firebasestorage.googleapis.com",mk="storageBucket",Zq=120*1e3,e$=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends bl{constructor(e,n,r=0){super(tv(e),`Firebase Storage: ${n} (${tv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Jr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Jr||(Jr={}));function tv(t){return"storage/"+t}function Dx(){const t="An unknown error occurred, please check the error payload for server response.";return new Zr(Jr.UNKNOWN,t)}function t$(t){return new Zr(Jr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function n$(t){return new Zr(Jr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function r$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zr(Jr.UNAUTHENTICATED,t)}function i$(){return new Zr(Jr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function s$(t){return new Zr(Jr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function o$(){return new Zr(Jr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function a$(){return new Zr(Jr.CANCELED,"User canceled the upload/download.")}function l$(t){return new Zr(Jr.INVALID_URL,"Invalid URL '"+t+"'.")}function c$(t){return new Zr(Jr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function u$(){return new Zr(Jr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mk+"' property when initializing the app?")}function d$(){return new Zr(Jr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function h$(){return new Zr(Jr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function f$(t){return new Zr(Jr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function I1(t){return new Zr(Jr.INVALID_ARGUMENT,t)}function gk(){return new Zr(Jr.APP_DELETED,"The Firebase app was deleted.")}function p$(t){return new Zr(Jr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vf(t,e){return new Zr(Jr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function vf(t){throw new Zr(Jr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Do.makeFromUrl(e,n)}catch{return new Do(e,"")}if(r.path==="")return r;throw c$(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function h($){$.path_=decodeURIComponent($.path)}const p="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",v=new RegExp(`^https?://${y}/${p}/b/${i}/o${w}`,"i"),j={bucket:1,path:3},S=n===pk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",I=new RegExp(`^https?://${S}/${i}/${_}`,"i"),z=[{regex:c,indices:u,postModify:s},{regex:v,indices:j,postModify:h},{regex:I,indices:{bucket:1,path:2},postModify:h}];for(let $=0;$<z.length;$++){const J=z[$],le=J.regex.exec(e);if(le){const q=le[J.indices.bucket];let E=le[J.indices.path];E||(E=""),r=new Do(q,E),J.postModify(r);break}}if(r==null)throw l$(e);return r}}class m${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(t,e,n){let r=1,i=null,s=null,a=!1,c=0;function u(){return c===2}let h=!1;function p(..._){h||(h=!0,e.apply(null,_))}function y(_){i=setTimeout(()=>{i=null,t(v,u())},_)}function w(){s&&clearTimeout(s)}function v(_,...I){if(h){w();return}if(_){w(),p.call(null,_,...I);return}if(u()||a){w(),p.call(null,_,...I);return}r<64&&(r*=2);let z;c===1?(c=2,z=0):z=(r+Math.random())*1e3,y(z)}let j=!1;function S(_){j||(j=!0,w(),!h&&(i!==null?(_||(c=2),clearTimeout(i),y(0)):_||(c=1)))}return y(0),s=setTimeout(()=>{a=!0,S(!0)},n),S}function y$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(t){return t!==void 0}function x$(t){return typeof t=="object"&&!Array.isArray(t)}function Mx(t){return typeof t=="string"||t instanceof String}function AA(t){return Ox()&&t instanceof Blob}function Ox(){return typeof Blob<"u"}function NA(t,e,n,r){if(r<e)throw I1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw I1(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function yk(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Hu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Hu||(Hu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e,n,r,i,s,a,c,u,h,p,y,w=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=y,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,j)=>{this.resolve_=v,this.reject_=j,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new jm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=c=>{const u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const c=s.getErrorCode()===Hu.NO_ERROR,u=s.getStatus();if(!c||b$(u,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===Hu.ABORT;r(!1,new jm(!1,null,p));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new jm(h,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());v$(u)?s(u):s()}catch(u){a(u)}else if(c!==null){const u=Dx();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(i.canceled){const u=this.appDelete_?gk():a$();a(u)}else{const u=o$();a(u)}};this.canceled_?n(!1,new jm(!1,null,!0)):this.backoffId_=g$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&y$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function A$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function N$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function E$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function S$(t,e,n,r,i,s,a=!0){const c=yk(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return N$(h,e),_$(h,n),A$(h,s),E$(h,r),new w$(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function k$(...t){const e=T$();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ox())return new Blob(t);throw new Zr(Jr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(t){if(typeof atob>"u")throw f$("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nv{constructor(e,n){this.data=e,this.contentType=n||null}}function P$(t,e){switch(t){case cl.RAW:return new nv(vk(e));case cl.BASE64:case cl.BASE64URL:return new nv(xk(t,e));case cl.DATA_URL:return new nv(j$(e),L$(e))}throw Dx()}function vk(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function R$(t){let e;try{e=decodeURIComponent(t)}catch{throw Vf(cl.DATA_URL,"Malformed data URL.")}return vk(e)}function xk(t,e){switch(t){case cl.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Vf(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case cl.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Vf(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=I$(e)}catch(i){throw i.message.includes("polyfill")?i:Vf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class bk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Vf(cl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=D$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function j$(t){const e=new bk(t);return e.base64?xk(cl.BASE64,e.rest):R$(e.rest)}function L$(t){return new bk(t).contentType}function D$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){let r=0,i="";AA(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(AA(this.data_)){const r=this.data_,i=C$(r,e,n);return i===null?null:new Hc(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Hc(r,!0)}}static getBlob(...e){if(Ox()){const n=e.map(r=>r instanceof Hc?r.data_:r);return new Hc(k$.apply(null,n))}else{const n=e.map(a=>Mx(a)?P$(cl.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)i[s++]=a[c]}),new Hc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){let e;try{e=JSON.parse(t)}catch{return null}return x$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function O$(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function _k(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F$(t,e){return e}class Ks{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||F$}}let Lm=null;function V$(t){return!Mx(t)||t.length<2?t:_k(t)}function Ak(){if(Lm)return Lm;const t=[];t.push(new Ks("bucket")),t.push(new Ks("generation")),t.push(new Ks("metageneration")),t.push(new Ks("name","fullPath",!0));function e(s,a){return V$(a)}const n=new Ks("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new Ks("size");return i.xform=r,t.push(i),t.push(new Ks("timeCreated")),t.push(new Ks("updated")),t.push(new Ks("md5Hash",null,!0)),t.push(new Ks("cacheControl",null,!0)),t.push(new Ks("contentDisposition",null,!0)),t.push(new Ks("contentEncoding",null,!0)),t.push(new Ks("contentLanguage",null,!0)),t.push(new Ks("contentType",null,!0)),t.push(new Ks("metadata","customMetadata",!0)),Lm=t,Lm}function U$(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Do(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function B$(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return U$(r,t),r}function Nk(t,e,n){const r=wk(e);return r===null?null:B$(t,r,n)}function z$(t,e,n,r){const i=wk(e);if(i===null||!Mx(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(h=>{const p=t.bucket,y=t.fullPath,w="/b/"+a(p)+"/o/"+a(y),v=_0(w,n,r),j=yk({alt:"media",token:h});return v+j})[0]}function q$(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Fx{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t){if(!t)throw Dx()}function $$(t,e){function n(r,i){const s=Nk(t,i,e);return Ek(s!==null),s}return n}function H$(t,e){function n(r,i){const s=Nk(t,i,e);return Ek(s!==null),z$(s,i,t.host,t._protocol)}return n}function Sk(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=i$():i=r$():n.getStatus()===402?i=n$(t.bucket):n.getStatus()===403?i=s$(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Tk(t){const e=Sk(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=t$(t.path)),s.serverResponse=i.serverResponse,s}return n}function W$(t,e,n){const r=e.fullServerUrl(),i=_0(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,c=new Fx(i,s,H$(t,n),a);return c.errorHandler=Tk(e),c}function G$(t,e){const n=e.fullServerUrl(),r=_0(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(u,h){}const c=new Fx(r,i,a,s);return c.successCodes=[200,204],c.errorHandler=Tk(e),c}function K$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Y$(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=K$(null,e)),r}function Q$(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let z="";for(let $=0;$<2;$++)z=z+Math.random().toString().slice(2);return z}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const h=Y$(e,r,i),p=q$(h,n),y="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+u+"--",v=Hc.getBlob(y,r,w);if(v===null)throw d$();const j={name:h.fullPath},S=_0(s,t.host,t._protocol),_="POST",I=t.maxUploadRetryTime,V=new Fx(S,_,$$(t,n),I);return V.urlParams=j,V.headers=a,V.body=v.uploadData(),V.errorHandler=Sk(e),V}class X${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw vf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class J$ extends X${initXhr(){this.xhr_.responseType="text"}}function Vx(){return new J$}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this._service=e,n instanceof Do?this._location=n:this._location=Do.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ed(e,n)}get root(){const e=new Do(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _k(this._location.path)}get storage(){return this._service}get parent(){const e=M$(this._location.path);if(e===null)return null;const n=new Do(this._location.bucket,e);return new ed(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw p$(e)}}function Z$(t,e,n){t._throwIfRoot("uploadBytes");const r=Q$(t.storage,t._location,Ak(),new Hc(e,!0),n);return t.storage.makeRequestWithTokens(r,Vx).then(i=>({metadata:i,ref:t}))}function eH(t){t._throwIfRoot("getDownloadURL");const e=W$(t.storage,t._location,Ak());return t.storage.makeRequestWithTokens(e,Vx).then(n=>{if(n===null)throw h$();return n})}function tH(t){t._throwIfRoot("deleteObject");const e=G$(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Vx)}function nH(t,e){const n=O$(t._location.path,e),r=new Do(t._location.bucket,n);return new ed(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(t){return/^[A-Za-z]+:\/\//.test(t)}function iH(t,e){return new ed(t,e)}function kk(t,e){if(t instanceof Ux){const n=t;if(n._bucket==null)throw u$();const r=new ed(n,n._bucket);return e!=null?kk(r,e):r}else return e!==void 0?nH(t,e):t}function sH(t,e){if(e&&rH(e)){if(t instanceof Ux)return iH(t,e);throw I1("To use ref(service, url), the first argument must be a Storage instance.")}else return kk(t,e)}function EA(t,e){const n=e?.[mk];return n==null?null:Do.makeFromBucketSpec(n,t)}function oH(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:r3(i,t.app.options.projectId))}class Ux{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=pk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Zq,this._maxUploadRetryTime=e$,this._requests=new Set,i!=null?this._bucket=Do.makeFromBucketSpec(i,this._host):this._bucket=EA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Do.makeFromBucketSpec(this._url,e):this._bucket=EA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ed(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new m$(gk());{const a=S$(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const SA="@firebase/storage",TA="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="storage";function Ik(t,e,n){return t=Xr(t),Z$(t,e,n)}function Pk(t){return t=Xr(t),eH(t)}function aH(t){return t=Xr(t),tH(t)}function P1(t,e){return t=Xr(t),sH(t,e)}function lH(t=z2(),e){t=Xr(t);const r=Zg(t,Ck).getImmediate({identifier:e}),i=e3("storage");return i&&cH(r,...i),r}function cH(t,e,n,r={}){oH(t,e,n,r)}function uH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ux(n,r,i,e,sd)}function dH(){Yu(new nu(Ck,uH,"PUBLIC").setMultipleInstances(!0)),fl(SA,TA,""),fl(SA,TA,"esm2017")}dH();const hH={BASE_URL:"/BlancAlergic-APP/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDrQqbURED37ggiDUQATsgiWdVK9LiMz4o",VITE_FIREBASE_APP_ID:"1:176916737065:web:a398bb32636920cec7c038",VITE_FIREBASE_AUTH_DOMAIN:"blancalergic-app.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-2PEQVSYG9W",VITE_FIREBASE_MESSAGING_SENDER_ID:"176916737065",VITE_FIREBASE_PROJECT_ID:"blancalergic-app",VITE_FIREBASE_STORAGE_BUCKET:"blancalergic-app.firebasestorage.app"},fH={apiKey:"AIzaSyDrQqbURED37ggiDUQATsgiWdVK9LiMz4o",authDomain:"blancalergic-app.firebaseapp.com",projectId:"blancalergic-app",storageBucket:"blancalergic-app.firebasestorage.app",messagingSenderId:"176916737065",appId:"1:176916737065:web:a398bb32636920cec7c038",measurementId:"G-2PEQVSYG9W"},pH=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_APP_ID"],rv=pH.filter(t=>!hH[t]);if(rv.length>0)throw console.error(" Faltan variables de entorno requeridas:",rv),new Error(`Faltan variables de entorno de Firebase: ${rv.join(", ")}`);const Bx=o3(fH),Wu=GU(Bx),di=Lq(Bx),R1=lH(Bx);Wu.languageCode="es";const cp=new Ql;cp.addScope("email");cp.addScope("profile");cp.setCustomParameters({prompt:"select_account",access_type:"online"});const mH=async()=>{try{if(!Wu.app?.options?.apiKey)throw new Error("La configuracin de Firebase no es vlida. Faltan credenciales.");const e=await tU(Wu,cp);return await Rk(e.user),e}catch(t){const e=t;if(e.code==="auth/invalid-api-key")throw et.error({error:e},"Error de API key invlida - Configuracin incorrecta"),new Error("Error de configuracin de Firebase. Contacte al administrador.");if(e.code==="auth/popup-closed-by-user"||e.code==="auth/cancelled-popup-request"||e.message?.includes("Cross-Origin-Opener-Policy")){et.warn({error:e,message:"Popup failed, trying redirect"},"Authentication popup failed, attempting redirect");try{throw await aU(Wu,cp),new Error("REDIRECT_INITIATED")}catch(r){throw et.error({error:r},"Authentication redirect failed"),new Error("No se pudo iniciar sesin. Intenta recargar la pgina.")}}et.error({error:t,code:e?.code},"Google Sign-In error");const n=t instanceof Error?t.message:"Error al iniciar sesin con Google";throw new Error(n)}},gH=async()=>{try{const t=await cU(Wu);return t?(await Rk(t.user),t):null}catch(t){et.error({error:t},"Error handling authentication redirect result");const e=t instanceof Error?t.message:"Error al procesar inicio de sesin";throw new Error(e)}},yH=async()=>{try{await DV(Wu)}catch(t){et.error({error:t},"Error handling authentication redirect result");const e=t instanceof Error?t.message:"Error al cerrar sesin";throw new Error(e)}},Rk=async t=>{if(!t)return;const e=da(di,"users",t.uid),n=await x0(e),r=new Date().toISOString();if(n.exists())await C1(e,{...n.data(),lastAccessAt:r,lastSyncAt:r},{merge:!0});else{const i={userId:t.uid,displayName:t.displayName||"Usuario",emergencyContact:{name:"",phone:"",relationship:""},bloodType:"",birthDate:"",gender:"otro",allergies:[],medications:[],medicalVisits:[],vaccinations:[],labResults:[],createdAt:r,updatedAt:r,lastSyncAt:r};await C1(e,{...i,id:t.uid}),await vH(t.uid)}},vH=async t=>{try{const e=ol.filter(n=>n.isAlergic);for(const n of e){const r=da(di,"users",t,"allergies",`migrated_${Date.now()}_${n.name.replace(/\s+/g,"_").toLowerCase()}`),i={name:n.name,intensity:n.intensity,category:n.category,kuaLitro:n.KUA_Litro||0,reactionType:"Inmediata",symptoms:[],notes:`Alergia migrada automticamente desde perfil pblico - KUA/Litro: ${n.KUA_Litro||"No registrado"}`,diagnosedDate:new Date().toISOString().split("T")[0],lastReactionDate:null,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await C1(r,i)}et.info(`Se han migrado ${e.length} alergias pblicas al perfil del usuario ${t}`)}catch(e){et.error({error:e},"Sign out error")}},kA=async t=>{try{const e=da(di,"users",t),n=await x0(e);return n.exists()?n.data():null}catch(e){throw et.error({error:e,userId:t},"Error migrating public allergies"),new Error("Error al cargar el perfil mdico")}},xH=t=>LV(Wu,t),iv=()=>({lastSyncAt:new Date().toISOString(),isOnline:navigator.onLine,pendingChanges:0,syncInProgress:!1}),bH=t=>({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified,metadata:{creationTime:t.metadata.creationTime,lastSignInTime:t.metadata.lastSignInTime}}),jk=O.createContext(void 0),wH=({children:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(null),[s,a]=O.useState(!0),[c,u]=O.useState(iv());O.useEffect(()=>{const j=(async()=>{try{return await gH(),xH(async _=>{try{if(_){const I=bH(_);n(I);const V=await kA(_.uid);i(V),u(iv())}else n(null),i(null),u(iv())}catch(I){et.error({msg:"Error en AuthContext",error:I}),n(null),i(null)}finally{a(!1)}})}catch(S){return et.error({msg:"Error inicializando autenticacin",error:S}),a(!1),()=>{}}})();return()=>{j.then(S=>S())}},[]),O.useEffect(()=>{const v=()=>{u(S=>({...S,isOnline:!0}))},j=()=>{u(S=>({...S,isOnline:!1}))};return window.addEventListener("online",v),window.addEventListener("offline",j),()=>{window.removeEventListener("online",v),window.removeEventListener("offline",j)}},[]);const w={user:e,loading:s,medicalProfile:r,syncStatus:c,loginWithGoogle:async()=>{try{a(!0),await mH()}catch(v){if(a(!1),v instanceof Error&&v.message==="REDIRECT_INITIATED")return;throw v}},logout:async()=>{try{a(!0),await yH()}catch(v){throw a(!1),v}},refreshMedicalProfile:async()=>{if(e)try{const v=await kA(e.uid);i(v),u(j=>({...j,lastSyncAt:new Date().toISOString()}))}catch(v){throw et.error({msg:"Error refrescando perfil mdico",error:v}),v}}};return d.jsx(jk.Provider,{value:w,children:t})},cu=()=>{const t=O.useContext(jk);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};function _H(){const t=ua(),e=Th(),{user:n,logout:r}=cu(),[i,s]=O.useState(null),[a,c]=O.useState(!1);O.useEffect(()=>{let v=null;const j=_=>{_.preventDefault(),et.info("beforeinstallprompt event fired - storing for custom prompt"),s(_),c(!0),v=setTimeout(()=>{s(null),c(!1),et.info("PWA install prompt expired after 5 minutes")},300*1e3)},S=()=>{et.info("PWA was installed"),s(null),c(!1),v&&(clearTimeout(v),v=null)};return window.addEventListener("beforeinstallprompt",j),window.addEventListener("appinstalled",S),()=>{window.removeEventListener("beforeinstallprompt",j),window.removeEventListener("appinstalled",S),v&&clearTimeout(v)}},[]);const u=async()=>{if(!i){et.warn("No deferred prompt available");return}try{et.info("Showing PWA install prompt"),await i.prompt(),(await i.userChoice).outcome==="accepted"?et.info("User accepted the A2HS prompt"):et.info("User dismissed the A2HS prompt")}catch(v){et.error({error:v},"Error showing PWA install prompt")}finally{s(null),c(!1)}},h=[{name:"Inicio",href:"/",icon:Z1},{name:"Buscar Alergias",href:"/buscarAlergias",icon:Zc},{name:"Emergencias",href:"/emergencias",icon:Ms},{name:"Tabla Alergias",href:"/tablaAlergias",icon:e2},{name:"Historial Mdico",href:"/historial-medico",icon:id,isPremium:!0,badge:n?null:""}],p=async()=>{try{await r(),t("/")}catch(v){et.error({error:v,userId:n?.uid},"Error during logout from header")}},y=()=>{window.open(`whatsapp://send?text=${encodeURIComponent(` Alerta de Alergias! 
    
    Hey! Sabas que Blanca tiene una app exclusiva para manejar sus alergias? 
    Si alguna vez te has preguntado si esa comida que vas a preparar le har ver las estrellas  o visitar el hospital , esta app es la solucin!
  
     chale un vistazo aqu: https://sergiohb21.github.io/BlancAlergic-APP/
  
    Comparte y mantn a Blanca libre de sorpresas indeseadas! `)}`)},w=v=>e.pathname===v;return d.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:d.jsxs("div",{className:"container flex h-14 sm:h-16 items-center justify-between px-3 sm:px-4",children:[d.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1",children:d.jsx("h1",{className:"text-lg sm:text-xl font-bold text-foreground truncate",children:"BlancALergias"})}),d.jsx("nav",{className:"hidden lg:flex items-center space-x-4 xl:space-x-6",children:h.map(v=>d.jsxs("button",{onClick:()=>t(v.href),className:`flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm font-medium transition-colors hover:text-primary rounded-md px-2 sm:px-3 py-2 min-h-[44px] ${v.isPremium&&!n?"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-950 border border-orange-200 dark:border-orange-800":w(v.href)?"text-primary bg-primary/10 dark:bg-primary/20 border border-primary/30 dark:border-primary/40":"text-muted-foreground hover:text-primary hover:bg-muted/30 dark:hover:bg-muted/20"}`,children:[d.jsx(v.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),d.jsx("span",{className:"hidden sm:inline truncate max-w-[100px]",children:v.name}),v.badge&&d.jsx("span",{className:"ml-1",children:v.badge}),v.isPremium&&n&&d.jsx("span",{className:"ml-1 text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 px-1.5 py-0.5 rounded",children:"PRO"})]},v.name))}),d.jsxs("div",{className:"hidden lg:flex items-center space-x-1 sm:space-x-2",children:[n&&d.jsxs("div",{className:"hidden xl:flex items-center space-x-2 mr-2",children:[d.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground dark:text-gray-300 truncate max-w-[120px]",children:["Hola, ",n.displayName||n.email?.split("@")[0]]}),d.jsxs(Nn,{variant:"outline",size:"sm",onClick:p,className:"text-xs min-h-[36px] px-2",children:[d.jsx("span",{className:"hidden sm:inline",children:"Cerrar Sesin"}),d.jsx("span",{className:"sm:hidden",children:"Salir"})]})]}),d.jsx(Nn,{variant:"ghost",size:"icon",onClick:y,className:"text-muted-foreground hover:text-primary min-h-[44px] min-w-[44px] hidden lg:flex","aria-label":"Compartir en WhatsApp",children:d.jsx(Aj,{className:"h-4 w-4"})}),a&&d.jsx(Nn,{variant:"ghost",size:"icon",onClick:u,className:"text-muted-foreground hover:text-primary min-h-[44px] min-w-[44px] hidden xl:flex","aria-label":"Instalar aplicacin",children:d.jsx(hh,{className:"h-4 w-4"})}),d.jsx("div",{className:"hidden sm:block",children:d.jsx(X5,{})})]}),d.jsxs(pF,{children:[d.jsx(mF,{asChild:!0,children:d.jsx(Nn,{variant:"ghost",size:"icon",className:"lg:hidden min-h-[44px] min-w-[44px]","aria-label":"Abrir men de navegacin",children:d.jsx(kE,{className:"h-6 w-6"})})}),d.jsxs(W4,{side:"right",className:"w-[280px] sm:w-[320px]",children:[d.jsx(K4,{className:"sr-only",children:"Men de navegacin"}),d.jsx(Y4,{className:"sr-only",children:"Panel de navegacin con acceso a todas las secciones de la aplicacin de alergias"}),d.jsxs("div",{className:"flex flex-col space-y-4 mt-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Men"}),d.jsx(X5,{})]}),n&&d.jsxs("div",{className:"flex flex-col space-y-2 p-3 bg-muted/50 rounded-lg",children:[d.jsx("div",{className:"text-sm font-medium dark:text-gray-200",children:n.displayName||n.email?.split("@")[0]}),d.jsx("div",{className:"text-xs text-muted-foreground dark:text-gray-400 truncate",children:n.email}),d.jsxs(Nn,{variant:"outline",size:"sm",onClick:p,className:"w-full justify-start",children:[d.jsx(uj,{className:"mr-2 h-4 w-4"}),"Cerrar Sesin"]})]}),d.jsx("nav",{className:"flex flex-col space-y-1",role:"navigation","aria-label":"Navegacin principal",children:h.map(v=>d.jsxs(Nn,{variant:w(v.href)?"default":"ghost",onClick:()=>t(v.href),className:`justify-start h-12 min-h-[44px] ${v.isPremium&&!n?"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-950 border border-orange-200 dark:border-orange-800":w(v.href)?"bg-primary dark:bg-primary/80 text-primary-foreground shadow-md dark:shadow-lg":"hover:bg-muted/30 dark:hover:bg-muted/20"}`,"aria-current":w(v.href)?"page":void 0,children:[d.jsx(v.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),d.jsx("span",{className:"flex-1 text-left",children:v.name}),v.badge&&d.jsx("span",{className:"ml-1",children:v.badge}),v.isPremium&&n&&d.jsx("span",{className:"ml-auto text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 px-1.5 py-0.5 rounded",children:"PRO"})]},v.name))}),d.jsx("div",{className:"border-t pt-4",children:d.jsx("div",{className:"flex flex-col space-y-2",children:a&&d.jsxs(Nn,{variant:"outline",onClick:u,className:"justify-start h-12 min-h-[44px]",children:[d.jsx(hh,{className:"mr-3 h-4 w-4"}),"Instalar App"]})})})]})]})]})]})})}function AH(){return d.jsx("footer",{className:"border-t bg-background",children:d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"text-center md:text-left",children:[d.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"BlancAlergic"}),d.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-300",children:"Sistema integral de gestin de alergias alimentarias diseado para proporcionar informacin crtica y mantener la seguridad de quienes sufren alergias."})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Desarrollador"}),d.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-300 mb-3",children:"Sergio Hernndez Bergantios"}),d.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[d.jsx("a",{href:"https://github.com/sergiohb21",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground dark:text-gray-400 hover:text-foreground transition-colors","aria-label":"GitHub de Sergio Hernndez",children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"})}),d.jsx("span",{className:"text-xs",children:"@sergiohb21"})]})}),d.jsx("a",{href:"https://www.linkedin.com/in/sergio-hern%C3%A1ndez-berganti%C3%B1os-4761542a3/",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground dark:text-gray-400 hover:text-foreground transition-colors","aria-label":"LinkedIn de Sergio Hernndez",children:d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),d.jsx("span",{className:"text-xs",children:"LinkedIn"})]})})]})]}),d.jsxs("div",{className:"text-center md:text-right",children:[d.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Proyecto"}),d.jsx("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:" Licencia MIT"})]})]}),d.jsx("div",{className:"mt-6 pt-6 border-t border-border",children:d.jsxs("div",{className:"text-center text-xs text-muted-foreground dark:text-gray-400",children:[d.jsxs("p",{children:[" ",new Date().getFullYear()," BlancAlergic-APP | Software de cdigo abierto"]}),d.jsx("p",{className:"mt-1",children:"Creado con  para la gestin de alergias"})]})})]})})}function NH(){const t=ua(),e=Th(),n=[{name:"Inicio",href:"/",icon:Z1},{name:"Alergias",href:"/buscarAlergias",icon:Zc},{name:"Tabla",href:"/tablaAlergias",icon:e2},{name:"Emergencias",href:"/emergencias",icon:Ms},{name:"Historial",href:"/historial-medico",icon:id}],r=s=>{t(s.href)},i=s=>e.pathname===s;return d.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 md:hidden",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsx("div",{className:"flex justify-around items-center h-16",children:n.map(s=>d.jsxs(Nn,{variant:"ghost",size:"sm",onClick:()=>r(s),className:`flex flex-col items-center space-y-1 h-auto py-2 px-3 rounded-lg transition-colors ${i(s.href)?"text-primary bg-primary/10 dark:bg-primary/20 border border-primary/30 dark:border-primary/40 shadow-sm":"text-muted-foreground hover:text-primary hover:bg-muted/30 dark:hover:bg-muted/20"}`,children:[d.jsx(s.icon,{className:"h-5 w-5"}),d.jsx("span",{className:"text-xs",children:s.name})]},s.name))})})})}var EH=Symbol.for("react.lazy"),jg=hp[" use ".trim().toString()];function SH(t){return typeof t=="object"&&t!==null&&"then"in t}function Lk(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===EH&&"_payload"in t&&SH(t._payload)}function TH(t){const e=kH(t),n=O.forwardRef((r,i)=>{let{children:s,...a}=r;Lk(s)&&typeof jg=="function"&&(s=jg(s._payload));const c=O.Children.toArray(s),u=c.find(IH);if(u){const h=u.props.children,p=c.map(y=>y===u?O.Children.count(h)>1?O.Children.only(null):O.isValidElement(h)?h.props.children:null:y);return d.jsx(e,{...a,ref:i,children:O.isValidElement(h)?O.cloneElement(h,void 0,p):null})}return d.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function kH(t){const e=O.forwardRef((n,r)=>{let{children:i,...s}=n;if(Lk(i)&&typeof jg=="function"&&(i=jg(i._payload)),O.isValidElement(i)){const a=RH(i),c=PH(s,i.props);return i.type!==O.Fragment&&(c.ref=r?$g(r,a):a),O.cloneElement(i,c)}return O.Children.count(i)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var CH=Symbol("radix.slottable");function IH(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===CH}function PH(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...c)=>{const u=s(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function RH(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var jH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],LH=jH.reduce((t,e)=>{const n=TH(`Primitive.${e}`),r=O.forwardRef((i,s)=>{const{asChild:a,...c}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),DH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),MH="VisuallyHidden",j1=O.forwardRef((t,e)=>d.jsx(LH.span,{...t,ref:e,style:{...DH,...t.style}}));j1.displayName=MH;const OH={initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:[.25,.46,.45,.94]}},hover:{y:-8,scale:1.02,transition:{duration:.2,ease:"easeOut"}},tap:{scale:.98,transition:{duration:.1}}},FH={initial:{scale:0},animate:{scale:1,transition:{delay:.8,type:"spring",stiffness:400,damping:10}},pulse:{scale:[1,1.1,1],opacity:[1,.8,1],transition:{duration:2,repeat:1/0,repeatType:"reverse"}}},Dk=O.memo(({feature:t,index:e,onNavigate:n})=>{const r=O.useCallback(()=>{"vibrate"in navigator&&t.isEmergency&&navigator.vibrate([50,30,50]),n(t.route)},[t.route,t.isEmergency,n]),i=O.useCallback(s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),r())},[r]);return d.jsx(mo.div,{variants:OH,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",custom:e,className:nn("group relative",t.isEmergency&&"ring-2 ring-destructive/20 ring-offset-2 ring-offset-background rounded-lg"),children:d.jsxs(En,{className:nn("overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-xl","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t.isEmergency&&"bg-gradient-to-br from-destructive/5 to-background border-destructive/20"),role:"button",tabIndex:0,onClick:r,onKeyDown:i,"aria-label":`${t.title}: ${t.description}. ${t.isEmergency?"Caracterstica de emergencia":""}`,children:[t.isEmergency&&t.badge&&d.jsx(mo.div,{variants:FH,initial:"initial",animate:["animate","pulse"],className:"absolute top-4 right-4 z-10",children:d.jsx(Ir,{variant:"destructive",className:"text-xs font-bold px-2 py-1 animate-pulse shadow-lg",children:t.badge})}),d.jsxs("div",{className:"aspect-video bg-muted/50 overflow-hidden",children:[d.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:t.priority==="high"?"eager":"lazy",decoding:"async"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),d.jsxs(ai,{className:"pb-3",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(t.icon,{className:nn("h-5 w-5 transition-colors duration-300",t.isEmergency?"text-destructive group-hover:text-destructive/80":"text-primary group-hover:text-primary/80"),"aria-hidden":"true"}),d.jsx(Qr,{className:"text-lg font-semibold group-hover:text-primary transition-colors duration-300",children:t.title})]}),d.jsx(j1,{children:d.jsxs("p",{children:["Navegar a ",t.title]})}),d.jsx(fo,{className:"text-sm leading-relaxed",children:t.description})]}),d.jsxs(Ln,{className:"pt-0",children:[d.jsx(Nn,{variant:t.buttonVariant,size:"lg",className:"w-full transition-all duration-300 group-hover:shadow-md","aria-describedby":`${t.id}-description`,children:t.buttonText}),d.jsx(j1,{children:d.jsxs("span",{id:`${t.id}-description`,children:["Acceder a la funcin ",t.title," para ",t.description.toLowerCase()]})})]})]})})});Dk.displayName="FeatureCard";const VH="/BlancAlergic-APP/Image/card-1.jpeg",UH="/BlancAlergic-APP/Image/card-2.jpeg",BH="/BlancAlergic-APP/Image/card-3.jpeg",zH=[{id:"verify-food",title:"Verificar Alimentos",description:"Consulta rpidamente si un alimento es seguro para Blanca antes de consumirlo.",image:VH,imageKey:"card-1",buttonText:"Verificar Alimento",buttonVariant:"default",icon:Zc,route:"/buscarAlergias",priority:"medium"},{id:"emergency-protocol",title:"Protocolo de Emergencia",description:"Accede rpido al protocolo de actuacin en caso de reaccin alrgica grave.",image:UH,imageKey:"card-2",buttonText:"Ver Protocolo",buttonVariant:"destructive",icon:Ms,route:"/emergencias",priority:"high",isEmergency:!0,badge:"Urgente"},{id:"medical-history",title:"Historial Mdico",description:"Revisa el registro completo de alergias con informacin mdica detallada.",image:BH,imageKey:"card-3",buttonText:"Ver Historial",buttonVariant:"outline",icon:Hf,route:"/tablaAlergias",priority:"low"}],qH={initial:{opacity:0},animate:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}},exit:{opacity:0,transition:{staggerChildren:.05,staggerDirection:-1}}},$H={initial:{transition:{staggerChildren:.1}}},Mk=O.memo(({className:t,onNavigate:e})=>{const n=O.useMemo(()=>[...zH].sort((r,i)=>{const s={high:0,medium:1,low:2};return s[r.priority]-s[i.priority]}),[]);return d.jsx(mo.div,{variants:qH,initial:"initial",animate:"animate",exit:"exit",className:nn("w-full",t),children:d.jsx(mo.div,{variants:$H,className:nn("grid gap-6","grid-cols-1","md:grid-cols-2","xl:grid-cols-3"),children:d.jsx(Kv,{children:n.map((r,i)=>d.jsx(Dk,{feature:r,index:i,onNavigate:e},r.id))})})})});Mk.displayName="FeatureGrid";const HH=[{id:"allergies-count",value:"29+",label:"Alergias Registradas",icon:pp,color:"destructive"},{id:"categories-count",value:"9",label:"Categoras",icon:Q6,color:"primary"},{id:"active-monitoring",value:"24/7",label:"Monitoreo Activo",icon:EE,color:"secondary"}],WH={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{delay:.8,duration:.6,staggerChildren:.1}}},GH={initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1,transition:{duration:.4}}},KH={primary:"text-primary bg-primary/10 border-primary/20",destructive:"text-destructive bg-destructive/10 border-destructive/20",secondary:"text-muted-foreground bg-muted/50 border-border"},Ok=O.memo(({className:t})=>d.jsx(mo.div,{variants:WH,initial:"initial",animate:"animate",className:nn("w-full",t),children:d.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:HH.map((e,n)=>{const r=e.icon;return d.jsx(mo.div,{variants:GH,custom:n,children:d.jsx(En,{className:nn("text-center p-6 transition-all duration-300 hover:shadow-md hover:scale-105","border-2",KH[e.color]),children:d.jsx(Ln,{className:"p-0",children:d.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[d.jsx("div",{className:nn("p-3 rounded-full",e.color==="primary"&&"bg-primary/20",e.color==="destructive"&&"bg-destructive/20",e.color==="secondary"&&"bg-muted"),children:d.jsx(r,{className:"h-6 w-6"})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:nn("text-3xl font-bold",e.color==="primary"&&"text-primary",e.color==="destructive"&&"text-destructive",e.color==="secondary"&&"text-foreground"),children:e.value}),d.jsx("div",{className:"text-sm text-muted-foreground font-medium",children:e.label})]})]})})})},e.id)})})}));Ok.displayName="QuickStats";function CA({children:t}){const e=Th(),n=ua(),r=js.useCallback(i=>{n(i)},[n]);return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx(_H,{}),d.jsx("main",{className:"container mx-auto px-4 py-8 pb-20 md:pb-8",children:d.jsxs("div",{className:"max-w-6xl mx-auto",children:[t,e.pathname==="/"&&d.jsxs("div",{className:"space-y-12",children:[d.jsxs("div",{className:"text-center space-y-4",children:[d.jsxs("h1",{className:"text-4xl font-bold tracking-tight text-foreground sm:text-5xl md:text-6xl",children:["Gestin de Alergias",d.jsx("span",{className:"block text-primary",children:"BlancAlergic"})]}),d.jsx("p",{className:"text-xl text-muted-foreground dark:text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Sistema integral para el monitoreo y gestin de alergias alimentarias. Accede rpido a informacin crtica y mantn a Blanca segura."})]}),d.jsxs("section",{"aria-labelledby":"features-heading",children:[d.jsx("h2",{id:"features-heading",className:"sr-only",children:"Funciones principales del sistema"}),d.jsx(Mk,{onNavigate:r})]}),d.jsxs("section",{"aria-labelledby":"stats-heading",children:[d.jsx("h2",{id:"stats-heading",className:"sr-only",children:"Estadsticas del sistema"}),d.jsx(Ok,{})]})]})]})}),d.jsx(AH,{}),d.jsx(NH,{})]})}const YH="modulepreload",QH=function(t){return"/BlancAlergic-APP/"+t},IA={},sg=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=u(n.map(h=>{if(h=QH(h),h in IA)return;IA[h]=!0;const p=h.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const w=document.createElement("link");if(w.rel=p?"stylesheet":YH,p||(w.as="script"),w.crossOrigin="",w.href=h,c&&w.setAttribute("nonce",c),document.head.appendChild(w),p)return new Promise((v,j)=>{w.addEventListener("load",v),w.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};function XH(t){const e=t+"CollectionProvider",[n,r]=Yg(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=S=>{const{scope:_,children:I}=S,V=js.useRef(null),z=js.useRef(new Map).current;return d.jsx(i,{scope:_,itemMap:z,collectionRef:V,children:I})};a.displayName=e;const c=t+"CollectionSlot",u=$f(c),h=js.forwardRef((S,_)=>{const{scope:I,children:V}=S,z=s(c,I),$=yl(_,z.collectionRef);return d.jsx(u,{ref:$,children:V})});h.displayName=c;const p=t+"CollectionItemSlot",y="data-radix-collection-item",w=$f(p),v=js.forwardRef((S,_)=>{const{scope:I,children:V,...z}=S,$=js.useRef(null),J=yl(_,$),le=s(p,I);return js.useEffect(()=>(le.itemMap.set($,{ref:$,...z}),()=>void le.itemMap.delete($))),d.jsx(w,{[y]:"",ref:J,children:V})});v.displayName=p;function j(S){const _=s(t+"CollectionConsumer",S);return js.useCallback(()=>{const V=_.collectionRef.current;if(!V)return[];const z=Array.from(V.querySelectorAll(`[${y}]`));return Array.from(_.itemMap.values()).sort((le,q)=>z.indexOf(le.ref.current)-z.indexOf(q.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:a,Slot:h,ItemSlot:v},j,r]}var JH=O.createContext(void 0);function Fk(t){const e=O.useContext(JH);return t||e||"ltr"}var sv="rovingFocusGroup.onEntryFocus",ZH={bubbles:!1,cancelable:!0},Rp="RovingFocusGroup",[L1,Vk,eW]=XH(Rp),[tW,Uk]=Yg(Rp,[eW]),[nW,rW]=tW(Rp),Bk=O.forwardRef((t,e)=>d.jsx(L1.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(L1.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(iW,{...t,ref:e})})}));Bk.displayName=Rp;var iW=O.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:p=!1,...y}=t,w=O.useRef(null),v=yl(e,w),j=Fk(s),[S,_]=M2({prop:a,defaultProp:c??null,onChange:u,caller:Rp}),[I,V]=O.useState(!1),z=gh(h),$=Vk(n),J=O.useRef(!1),[le,q]=O.useState(0);return O.useEffect(()=>{const E=w.current;if(E)return E.addEventListener(sv,z),()=>E.removeEventListener(sv,z)},[z]),d.jsx(nW,{scope:n,orientation:r,dir:j,loop:i,currentTabStopId:S,onItemFocus:O.useCallback(E=>_(E),[_]),onItemShiftTab:O.useCallback(()=>V(!0),[]),onFocusableItemAdd:O.useCallback(()=>q(E=>E+1),[]),onFocusableItemRemove:O.useCallback(()=>q(E=>E-1),[]),children:d.jsx(Fs.div,{tabIndex:I||le===0?-1:0,"data-orientation":r,...y,ref:v,style:{outline:"none",...t.style},onMouseDown:cs(t.onMouseDown,()=>{J.current=!0}),onFocus:cs(t.onFocus,E=>{const T=!J.current;if(E.target===E.currentTarget&&T&&!I){const U=new CustomEvent(sv,ZH);if(E.currentTarget.dispatchEvent(U),!U.defaultPrevented){const C=$().filter(oe=>oe.focusable),L=C.find(oe=>oe.active),D=C.find(oe=>oe.id===S),se=[L,D,...C].filter(Boolean).map(oe=>oe.ref.current);$k(se,p)}}J.current=!1}),onBlur:cs(t.onBlur,()=>V(!1))})})}),zk="RovingFocusGroupItem",qk=O.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:a,...c}=t,u=jf(),h=s||u,p=rW(zk,n),y=p.currentTabStopId===h,w=Vk(n),{onFocusableItemAdd:v,onFocusableItemRemove:j,currentTabStopId:S}=p;return O.useEffect(()=>{if(r)return v(),()=>j()},[r,v,j]),d.jsx(L1.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:d.jsx(Fs.span,{tabIndex:y?0:-1,"data-orientation":p.orientation,...c,ref:e,onMouseDown:cs(t.onMouseDown,_=>{r?p.onItemFocus(h):_.preventDefault()}),onFocus:cs(t.onFocus,()=>p.onItemFocus(h)),onKeyDown:cs(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){p.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const I=aW(_,p.orientation,p.dir);if(I!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let z=w().filter($=>$.focusable).map($=>$.ref.current);if(I==="last")z.reverse();else if(I==="prev"||I==="next"){I==="prev"&&z.reverse();const $=z.indexOf(_.currentTarget);z=p.loop?lW(z,$+1):z.slice($+1)}setTimeout(()=>$k(z))}}),children:typeof a=="function"?a({isCurrentTabStop:y,hasTabStop:S!=null}):a})})});qk.displayName=zk;var sW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oW(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function aW(t,e,n){const r=oW(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return sW[r]}function $k(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function lW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var cW=Bk,uW=qk,A0="Tabs",[dW]=Yg(A0,[Uk]),Hk=Uk(),[hW,zx]=dW(A0),Wk=O.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:c,activationMode:u="automatic",...h}=t,p=Fk(c),[y,w]=M2({prop:r,onChange:i,defaultProp:s??"",caller:A0});return d.jsx(hW,{scope:n,baseId:jf(),value:y,onValueChange:w,orientation:a,dir:p,activationMode:u,children:d.jsx(Fs.div,{dir:p,"data-orientation":a,...h,ref:e})})});Wk.displayName=A0;var Gk="TabsList",Kk=O.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=zx(Gk,n),a=Hk(n);return d.jsx(cW,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:d.jsx(Fs.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});Kk.displayName=Gk;var Yk="TabsTrigger",Qk=O.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,a=zx(Yk,n),c=Hk(n),u=Zk(a.baseId,r),h=eC(a.baseId,r),p=r===a.value;return d.jsx(uW,{asChild:!0,...c,focusable:!i,active:p,children:d.jsx(Fs.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...s,ref:e,onMouseDown:cs(t.onMouseDown,y=>{!i&&y.button===0&&y.ctrlKey===!1?a.onValueChange(r):y.preventDefault()}),onKeyDown:cs(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&a.onValueChange(r)}),onFocus:cs(t.onFocus,()=>{const y=a.activationMode!=="manual";!p&&!i&&y&&a.onValueChange(r)})})})});Qk.displayName=Yk;var Xk="TabsContent",Jk=O.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=t,c=zx(Xk,n),u=Zk(c.baseId,r),h=eC(c.baseId,r),p=r===c.value,y=O.useRef(p);return O.useEffect(()=>{const w=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(w)},[]),d.jsx(xp,{present:i||p,children:({present:w})=>d.jsx(Fs.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!w,id:h,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:w&&s})})});Jk.displayName=Xk;function Zk(t,e){return`${t}-trigger-${e}`}function eC(t,e){return`${t}-content-${e}`}var fW=Wk,tC=Kk,nC=Qk,rC=Jk;const iC=fW,qx=O.forwardRef(({className:t,...e},n)=>d.jsx(tC,{ref:n,className:nn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));qx.displayName=tC.displayName;const oh=O.forwardRef(({className:t,...e},n)=>d.jsx(nC,{ref:n,className:nn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));oh.displayName=nC.displayName;const ah=O.forwardRef(({className:t,...e},n)=>d.jsx(rC,{ref:n,className:nn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ah.displayName=rC.displayName;function pW(t,e=[]){let n=[];function r(s,a){const c=O.createContext(a);c.displayName=s+"Context";const u=n.length;n=[...n,a];const h=y=>{const{scope:w,children:v,...j}=y,S=w?.[t]?.[u]||c,_=O.useMemo(()=>j,Object.values(j));return d.jsx(S.Provider,{value:_,children:v})};h.displayName=s+"Provider";function p(y,w){const v=w?.[t]?.[u]||c,j=O.useContext(v);if(j)return j;if(a!==void 0)return a;throw new Error(`\`${y}\` must be used within \`${s}\``)}return[h,p]}const i=()=>{const s=n.map(a=>O.createContext(a));return function(c){const u=c?.[t]||s;return O.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,mW(i,...e)]}function mW(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((c,{useScope:u,scopeName:h})=>{const y=u(s)[`__scope${h}`];return{...c,...y}},{});return O.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}var gW=Symbol.for("react.lazy"),Lg=hp[" use ".trim().toString()];function yW(t){return typeof t=="object"&&t!==null&&"then"in t}function sC(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===gW&&"_payload"in t&&yW(t._payload)}function vW(t){const e=xW(t),n=O.forwardRef((r,i)=>{let{children:s,...a}=r;sC(s)&&typeof Lg=="function"&&(s=Lg(s._payload));const c=O.Children.toArray(s),u=c.find(wW);if(u){const h=u.props.children,p=c.map(y=>y===u?O.Children.count(h)>1?O.Children.only(null):O.isValidElement(h)?h.props.children:null:y);return d.jsx(e,{...a,ref:i,children:O.isValidElement(h)?O.cloneElement(h,void 0,p):null})}return d.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function xW(t){const e=O.forwardRef((n,r)=>{let{children:i,...s}=n;if(sC(i)&&typeof Lg=="function"&&(i=Lg(i._payload)),O.isValidElement(i)){const a=AW(i),c=_W(s,i.props);return i.type!==O.Fragment&&(c.ref=r?$g(r,a):a),O.cloneElement(i,c)}return O.Children.count(i)>1?O.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var bW=Symbol("radix.slottable");function wW(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bW}function _W(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...c)=>{const u=s(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function AW(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var NW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oC=NW.reduce((t,e)=>{const n=vW(`Primitive.${e}`),r=O.forwardRef((i,s)=>{const{asChild:a,...c}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(u,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),$x="Progress",Hx=100,[EW]=pW($x),[SW,TW]=EW($x),aC=O.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=kW,...a}=t;(i||i===0)&&!PA(i)&&console.error(CW(`${i}`,"Progress"));const c=PA(i)?i:Hx;r!==null&&!RA(r,c)&&console.error(IW(`${r}`,"Progress"));const u=RA(r,c)?r:null,h=Dg(u)?s(u,c):void 0;return d.jsx(SW,{scope:n,value:u,max:c,children:d.jsx(oC.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Dg(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":uC(u,c),"data-value":u??void 0,"data-max":c,...a,ref:e})})});aC.displayName=$x;var lC="ProgressIndicator",cC=O.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=TW(lC,n);return d.jsx(oC.div,{"data-state":uC(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});cC.displayName=lC;function kW(t,e){return`${Math.round(t/e*100)}%`}function uC(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Dg(t){return typeof t=="number"}function PA(t){return Dg(t)&&!isNaN(t)&&t>0}function RA(t,e){return Dg(t)&&!isNaN(t)&&t<=e&&t>=0}function CW(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Hx}\`.`}function IW(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Hx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var dC=aC,PW=cC;const hC=O.forwardRef(({className:t,value:e,...n},r)=>d.jsx(dC,{ref:r,className:nn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:d.jsx(PW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));hC.displayName=dC.displayName;const RW=[{id:"test-001",date:new Date("2024-01-15"),testType:"blood-test",allergen:"Cacahuate",kuaLevel:3.2,igeLevel:12.5,result:"positive",laboratory:"Laboratorio Mdico Central",doctor:"Dra. Mara Gonzlez",notes:"Niveles elevados de IgE especfica"},{id:"test-002",date:new Date("2023-11-20"),testType:"skin-prick",allergen:"Mariscos",kuaLevel:4.1,result:"positive",laboratory:"Clnica de Alergas del Sol",doctor:"Dr. Carlos Rodrguez",notes:"Reaccin fuerte en piel-prick test"},{id:"test-003",date:new Date("2024-03-10"),testType:"blood-test",allergen:"Frutos secos",kuaLevel:2.8,igeLevel:8.7,result:"positive",laboratory:"Laboratorio Mdico Central"}],jW=[{id:"reaction-001",date:new Date("2024-02-14"),allergen:"Cacahuate",severity:"moderate",symptoms:["Urticaria","Hinchazn labios","Picazn garganta"],context:"Consumo de cookies con mantequilla de man",treatment:"Antihistamnico (Loratadina 10mg)",location:"Restaurante familiar",resolved:!0,medicalAttention:!1},{id:"reaction-002",date:new Date("2023-12-25"),allergen:"Mariscos (camarones)",severity:"severe",symptoms:["Dificultad respiratoria","Vmitos","Urticaria generalizada","Mareos"],context:"Cena navidea familiar",treatment:"Visita urgente a emergencias, epinefrina administrada",location:"Domicilio familiar",resolved:!0,medicalAttention:!0}],LW=[{allergen:"Cacahuate",crossReactiveWith:["Almendras","Nueces","Avellanas","Soja"],riskLevel:"high",notes:"Reactividad cruzada comn con otras leguminosas y frutos secos"},{allergen:"Mariscos",crossReactiveWith:["Crustceos","Moluscos","Pescado"],riskLevel:"moderate",notes:"Riesgo de reactividad cruzada con otros mariscos y pescados"}],DW=[{id:"contact-001",name:"Dra. Mara Gonzlez",relationship:"Alerglogo",phone:"+52 55 1234 5678",isPrimary:!0},{id:"contact-002",name:"Carlos Rodrguez",relationship:"Padre",phone:"+52 55 8765 4321",isPrimary:!1}],MW=[{id:"med-001",name:"EpiPen",dosage:"0.3mg",frequency:"Segn necesidad",purpose:"emergency",prescribedBy:"Dra. Mara Gonzlez",startDate:new Date("2023-12-26"),instructions:"Autoinyector de epinefrina para emergencias alrgicas"},{id:"med-002",name:"Loratadina",dosage:"10mg",frequency:"Diario",purpose:"preventive",prescribedBy:"Dra. Mara Gonzlez",startDate:new Date("2024-01-01"),instructions:"Antihistamnico para prevencin de reacciones leves"}],sa={getRiskLevel:t=>!t||t<1?"low":t<3?"moderate":t<5?"high":"critical",getRiskColor:t=>{const e={low:"text-green-600 bg-green-50 border-green-200",moderate:"text-yellow-600 bg-yellow-50 border-yellow-200",high:"text-orange-600 bg-orange-50 border-orange-200",critical:"text-red-600 bg-red-50 border-red-200"};return e[t]||e.low},formatMedicalDate:t=>t.toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"}),formatMedicalDateTime:t=>t.toLocaleString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),calculateAge:t=>{const e=new Date,n=e.getFullYear()-t.getFullYear(),r=e.getMonth()-t.getMonth();return r<0||r===0&&e.getDate()<t.getDate()?n-1:n},generateMedicalId:(t,e)=>{const n=t.split(" ").map(s=>s[0]).join("").toUpperCase(),r=e.toISOString().split("T")[0].replace(/-/g,""),i=Math.random().toString(36).substr(2,4).toUpperCase();return`MED-${n}-${r}-${i}`},getTestTypeIcon:t=>({"skin-prick":"","blood-test":"","oral-challenge":"","patch-test":""})[t]||"",getSeverityIcon:t=>({mild:"",moderate:"",severe:"",anaphylactic:"",critical:""})[t]||""},OW=(t,e,n)=>({...t,id:sa.generateMedicalId(n,new Date),patientId:e,recordDate:new Date,lastUpdated:new Date,testResults:RW.filter(r=>r.allergen===t.name),reactionHistory:jW.filter(r=>r.allergen===t.name),crossReactivity:LW.filter(r=>r.allergen===t.name),emergencyContacts:DW,medications:MW.filter(r=>t.isAlergic&&r.purpose==="emergency")}),FW={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},jA={initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4}}},VW={low:{color:"text-green-600",bg:"bg-green-50",border:"border-green-200",icon:""},moderate:{color:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200",icon:""},high:{color:"text-orange-600",bg:"bg-orange-50",border:"border-orange-200",icon:""},critical:{color:"text-red-600",bg:"bg-red-50",border:"border-red-200",icon:""}},fC=({statistics:t,riskAssessment:e,patientName:n,patientAge:r,lastTestDate:i})=>{const s=VW[e.overallRisk],a=O.memo(({title:c,value:u,description:h,icon:p,color:y="text-primary",bg:w="bg-primary/10"})=>d.jsx(mo.div,{variants:jA,children:d.jsx(En,{className:nn("hover:shadow-md transition-shadow duration-200",w),children:d.jsxs(Ln,{className:"p-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:nn("p-3 rounded-full",w),children:d.jsx(p,{className:nn("h-6 w-6",y)})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:nn("text-2xl font-bold",y),children:u}),d.jsx("div",{className:"text-sm text-muted-foreground",children:c})]})]}),h&&d.jsx("div",{className:"mt-3 text-xs text-muted-foreground",children:h})]})})}));return d.jsxs(mo.div,{variants:FW,initial:"initial",animate:"animate",className:"space-y-6",children:[d.jsx(En,{className:"border-2 border-primary/20",children:d.jsx(ai,{className:"pb-4",children:d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{children:[d.jsxs(Qr,{className:"text-2xl font-bold text-foreground flex items-center gap-3",children:[d.jsx(id,{className:"h-8 w-8 text-primary"}),"Historial Mdico"]}),d.jsxs(fo,{className:"text-lg mt-2",children:[d.jsx("span",{className:"font-medium",children:n}),"  ",r," aos"]})]})})})}),d.jsx(mo.div,{variants:jA,children:d.jsxs(En,{className:nn("border-2",s.border,s.bg),children:[d.jsx(ai,{className:"pb-3",children:d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"text-2xl",children:s.icon}),d.jsxs("div",{children:[d.jsxs(Qr,{className:nn("text-lg",s.color),children:["Nivel de Riesgo: ",e.overallRisk.toUpperCase()]}),d.jsx(fo,{children:"Evaluacin mdica actualizada"})]})]})})}),d.jsxs(Ln,{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-medium",children:"Preparacin para Emergencias"}),d.jsxs("span",{className:"text-sm",children:[e.emergencyPreparedness,"%"]})]}),d.jsx(hC,{value:e.emergencyPreparedness,className:"h-2"})]})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx(a,{title:"Total Alergias",value:t.totalAllergies,description:"Alergias confirmadas",icon:pp,color:"text-purple-600",bg:"bg-purple-50"}),d.jsx(a,{title:"Riesgo Alto",value:t.highRiskAllergies,description:"Requieren atencin especial",icon:Ms,color:"text-red-600",bg:"bg-red-50"}),d.jsx(a,{title:"Categoras Afectadas",value:t.categoriesWithAllergies.length,description:t.categoriesWithAllergies.join(", "),icon:EE,color:"text-blue-600",bg:"bg-blue-50"}),d.jsx(a,{title:"ltima Prueba",value:i?sa.formatMedicalDate(i):"No registrada",description:"Test ms reciente",icon:X1,color:"text-green-600",bg:"bg-green-50"})]}),d.jsxs(En,{children:[d.jsxs(ai,{children:[d.jsxs(Qr,{className:"flex items-center gap-2",children:[d.jsx(jj,{className:"h-5 w-5"}),"Actividad Mdica Reciente"]}),d.jsx(fo,{children:"Pruebas y reacciones de los ltimos 30 das"})]}),d.jsx(Ln,{children:d.jsx("div",{className:"space-y-4",children:t.recentTests.length>0?t.recentTests.map(c=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"text-lg",children:sa.getTestTypeIcon(c.testType)}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:c.allergen}),d.jsxs("div",{className:"text-sm text-muted-foreground",children:[sa.formatMedicalDate(c.date),"  ",c.testType.replace("-"," ")]})]})]}),d.jsx(Ir,{variant:c.result==="positive"?"destructive":"secondary",children:c.result==="positive"?"Positivo":"Negativo"})]},c.id)):d.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay pruebas recientes registradas"})})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs(En,{children:[d.jsx(ai,{children:d.jsxs(Qr,{className:"flex items-center gap-2",children:[d.jsx(Ms,{className:"h-5 w-5 text-orange-600"}),"Factores de Riesgo"]})}),d.jsx(Ln,{children:d.jsx("ul",{className:"space-y-2",children:e.riskFactors.map((c,u)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),d.jsx("span",{className:"text-sm",children:c})]},u))})})]}),d.jsxs(En,{children:[d.jsx(ai,{children:d.jsxs(Qr,{className:"flex items-center gap-2",children:[d.jsx(Hf,{className:"h-5 w-5 text-blue-600"}),"Recomendaciones Mdicas"]})}),d.jsx(Ln,{children:d.jsx("ul",{className:"space-y-2",children:e.recommendations.map((c,u)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),d.jsx("span",{className:"text-sm",children:c})]},u))})})]})]}),d.jsxs(En,{className:"border-2 border-red-200 bg-red-50/50",children:[d.jsxs(ai,{children:[d.jsxs(Qr,{className:"flex items-center gap-2 text-red-700",children:[d.jsx(tc,{className:"h-5 w-5"}),"Informacin de Emergencia"]}),d.jsx(fo,{children:"Datos crticos para atencin mdica de emergencia"})]}),d.jsx(Ln,{children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-medium text-red-700",children:"Alergias Crticas:"}),d.jsx("div",{className:"text-sm",children:t.severeReactions.length>0?t.severeReactions.map(c=>c.allergen).join(", "):"Ninguna registrada"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"font-medium text-red-700",children:"Acciones en Emergencia:"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsx("div",{children:"1. Administrar EpiPen si disponible"}),d.jsx("div",{children:"2. Llamar emergencias (112)"}),d.jsx("div",{children:"3. Contactar al alerglogo"})]})]})]})})]})]})};fC.displayName="MedicalDashboard";var UW="Separator",LA="horizontal",BW=["horizontal","vertical"],pC=O.forwardRef((t,e)=>{const{decorative:n,orientation:r=LA,...i}=t,s=zW(r)?r:LA,c=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return d.jsx(Fs.div,{"data-orientation":s,...c,...i,ref:e})});pC.displayName=UW;function zW(t){return BW.includes(t)}var mC=pC;const gC=O.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>d.jsx(mC,{ref:i,decorative:n,orientation:e,className:nn("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));gC.displayName=mC.displayName;const qW={initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:[.25,.46,.45,.94]}}},$W={low:{color:"text-green-600",bg:"bg-green-50",border:"border-green-200",label:"Bajo"},moderate:{color:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200",label:"Moderado"},high:{color:"text-orange-600",bg:"bg-orange-50",border:"border-orange-200",label:"Alto"},critical:{color:"text-red-600",bg:"bg-red-50",border:"border-red-200",label:"Crtico"}},yC=({record:t,onEdit:e,expanded:n=!1,onToggleExpanded:r})=>{const[i,s]=O.useState(n),a=O.useCallback(()=>{s(!i),r?.()},[i,r]),c=O.useMemo(()=>{const y=t.testResults[t.testResults.length-1];return y?sa.getRiskLevel(y.kuaLevel):"low"},[t.testResults]),u=$W[c],h=O.memo(({test:y})=>d.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-lg",children:sa.getTestTypeIcon(y.testType)}),d.jsx("span",{className:"font-medium text-sm",children:y.testType.replace("-"," ")})]}),d.jsx(Ir,{variant:y.result==="positive"?"destructive":"secondary",className:"text-xs",children:y.result==="positive"?"Positivo":"Negativo"})]}),d.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[d.jsxs("div",{children:["Fecha: ",sa.formatMedicalDate(y.date)]}),y.kuaLevel&&d.jsxs("div",{children:["KUA/L: ",y.kuaLevel]}),y.igeLevel&&d.jsxs("div",{children:["IgE: ",y.igeLevel," kU/L"]}),y.doctor&&d.jsxs("div",{children:["Mdico: ",y.doctor]}),y.laboratory&&d.jsxs("div",{children:["Laboratorio: ",y.laboratory]})]}),y.notes&&d.jsxs("div",{className:"text-xs p-2 bg-background rounded border",children:[d.jsx("strong",{children:"Notas:"})," ",y.notes]})]})),p=O.memo(({reaction:y})=>d.jsxs("div",{className:"p-3 bg-red-50/30 rounded-lg space-y-2 border border-red-100",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-lg",children:sa.getSeverityIcon(y.severity)}),d.jsx("span",{className:"font-medium text-sm",children:y.severity==="severe"?"Severa":y.severity==="moderate"?"Moderada":"Leve"})]}),y.medicalAttention&&d.jsx(Ir,{variant:"destructive",className:"text-xs",children:"Atencin mdica"})]}),d.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[d.jsxs("div",{children:["Fecha: ",sa.formatMedicalDate(y.date)]}),d.jsxs("div",{children:["Contexto: ",y.context]}),d.jsxs("div",{children:["Sntomas: ",y.symptoms.join(", ")]}),d.jsxs("div",{children:["Tratamiento: ",y.treatment]})]})]}));return d.jsx(mo.div,{variants:qW,initial:"initial",animate:"animate",layout:!0,children:d.jsxs(En,{className:nn("overflow-hidden transition-all duration-300",u.border),children:[d.jsx(ai,{className:"pb-3",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(Qr,{className:"text-xl",children:t.name}),d.jsxs(Ir,{variant:"outline",className:nn(u.bg,u.color,u.border),children:["Riesgo ",u.label]})]}),d.jsxs(fo,{className:"text-sm",children:["Categora: ",t.category,"  Diagnstico: ",sa.formatMedicalDate(t.recordDate)]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[e&&d.jsxs(Nn,{variant:"outline",size:"sm",onClick:()=>e(t),className:"flex items-center gap-1",children:[d.jsx(fh,{className:"h-3 w-3"}),"Editar"]}),d.jsxs(Nn,{variant:"ghost",size:"sm",onClick:a,className:"flex items-center gap-1",children:[i?d.jsx(q6,{className:"h-4 w-4"}):d.jsx(SE,{className:"h-4 w-4"}),"Detalles"]})]})]})}),d.jsxs(Ln,{className:"pt-0",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(id,{className:"h-4 w-4 text-muted-foreground"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-muted-foreground",children:"Estado"}),d.jsx("div",{className:t.isAlergic?"text-red-600 font-medium":"text-green-600 font-medium",children:t.isAlergic?"ALRGICO":"SEGURO"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-muted-foreground",children:"Intensidad"}),d.jsx("div",{className:"font-medium",children:t.intensity})]})]}),t.KUA_Litro&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(CE,{className:"h-4 w-4 text-muted-foreground"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-muted-foreground",children:"KUA/L"}),d.jsx("div",{className:"font-medium",children:t.KUA_Litro})]})]})]}),t.crossReactivity.length>0&&d.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(TE,{className:"h-4 w-4 text-yellow-600"}),d.jsx("span",{className:"font-medium text-sm text-yellow-800",children:"Reactividad Cruzada"})]}),d.jsxs("div",{className:"text-xs text-yellow-700",children:["Posible reaccin con: ",t.crossReactivity[0].crossReactiveWith.join(", ")]})]}),i&&d.jsxs(mo.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"space-y-4",children:[d.jsx(gC,{}),t.testResults.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(ij,{className:"h-4 w-4 text-blue-600"}),d.jsx("h4",{className:"font-medium text-sm",children:"Resultados de Pruebas"}),d.jsx(Ir,{variant:"outline",className:"text-xs",children:t.testResults.length})]}),d.jsx("div",{className:"space-y-2",children:t.testResults.map(y=>d.jsx(h,{test:y},y.id))})]}),t.reactionHistory.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(Ms,{className:"h-4 w-4 text-red-600"}),d.jsx("h4",{className:"font-medium text-sm",children:"Historial de Reacciones"}),d.jsx(Ir,{variant:"destructive",className:"text-xs",children:t.reactionHistory.length})]}),d.jsx("div",{className:"space-y-2",children:t.reactionHistory.map(y=>d.jsx(p,{reaction:y},y.id))})]}),t.doctorNotes&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(Wf,{className:"h-4 w-4 text-blue-600"}),d.jsx("h4",{className:"font-medium text-sm",children:"Notas Mdicas"})]}),d.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:d.jsx("p",{className:"text-sm text-blue-800",children:t.doctorNotes})})]}),t.medications.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(Ms,{className:"h-4 w-4 text-red-600"}),d.jsx("h4",{className:"font-medium text-sm",children:"Medicamentos de Emergencia"})]}),d.jsx("div",{className:"space-y-2",children:t.medications.map(y=>d.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[d.jsxs("div",{className:"font-medium text-sm",children:[y.name," - ",y.dosage]}),d.jsx("div",{className:"text-xs text-red-700 mt-1",children:y.instructions})]},y.id))})]})]})]})]})})};yC.displayName="AllergyDetailCard";function er(t){"@babel/helpers - typeof";return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(t)}var Ma=Uint8Array,Mo=Uint16Array,Wx=Int32Array,Gx=new Ma([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Kx=new Ma([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),DA=new Ma([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vC=function(t,e){for(var n=new Mo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new Wx(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},xC=vC(Gx,2),HW=xC.b,D1=xC.r;HW[28]=258,D1[258]=28;var WW=vC(Kx,0),MA=WW.r,M1=new Mo(32768);for(var yr=0;yr<32768;++yr){var Oc=(yr&43690)>>1|(yr&21845)<<1;Oc=(Oc&52428)>>2|(Oc&13107)<<2,Oc=(Oc&61680)>>4|(Oc&3855)<<4,M1[yr]=((Oc&65280)>>8|(Oc&255)<<8)>>1}var Uf=(function(t,e,n){for(var r=t.length,i=0,s=new Mo(e);i<r;++i)t[i]&&++s[t[i]-1];var a=new Mo(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var c;if(n){c=new Mo(1<<e);var u=15-e;for(i=0;i<r;++i)if(t[i])for(var h=i<<4|t[i],p=e-t[i],y=a[t[i]-1]++<<p,w=y|(1<<p)-1;y<=w;++y)c[M1[y]>>u]=h}else for(c=new Mo(r),i=0;i<r;++i)t[i]&&(c[i]=M1[a[t[i]-1]++]>>15-t[i]);return c}),td=new Ma(288);for(var yr=0;yr<144;++yr)td[yr]=8;for(var yr=144;yr<256;++yr)td[yr]=9;for(var yr=256;yr<280;++yr)td[yr]=7;for(var yr=280;yr<288;++yr)td[yr]=8;var Mg=new Ma(32);for(var yr=0;yr<32;++yr)Mg[yr]=5;var GW=Uf(td,9,0),KW=Uf(Mg,5,0),bC=function(t){return(t+7)/8|0},YW=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ma(t.subarray(e,n))},Wl=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},xf=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},ov=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:_C,l:0};if(i==1){var a=new Ma(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(J,le){return J.f-le.f}),n.push({s:-1,f:25001});var c=n[0],u=n[1],h=0,p=1,y=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};p!=i-1;)c=n[n[h].f<n[y].f?h++:y++],u=n[h!=p&&n[h].f<n[y].f?h++:y++],n[p++]={s:-1,f:c.f+u.f,l:c,r:u};for(var w=s[0].s,r=1;r<i;++r)s[r].s>w&&(w=s[r].s);var v=new Mo(w+1),j=O1(n[p-1],v,0);if(j>e){var r=0,S=0,_=j-e,I=1<<_;for(s.sort(function(le,q){return v[q.s]-v[le.s]||le.f-q.f});r<i;++r){var V=s[r].s;if(v[V]>e)S+=I-(1<<j-v[V]),v[V]=e;else break}for(S>>=_;S>0;){var z=s[r].s;v[z]<e?S-=1<<e-v[z]++-1:++r}for(;r>=0&&S;--r){var $=s[r].s;v[$]==e&&(--v[$],++S)}j=e}return{t:new Ma(v),l:j}},O1=function(t,e,n){return t.s==-1?Math.max(O1(t.l,e,n+1),O1(t.r,e,n+1)):e[t.s]=n},OA=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Mo(++e),r=0,i=t[0],s=1,a=function(u){n[r++]=u},c=1;c<=e;++c)if(t[c]==i&&c!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[c]}return{c:n.subarray(0,r),n:e}},bf=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},wC=function(t,e,n){var r=n.length,i=bC(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},FA=function(t,e,n,r,i,s,a,c,u,h,p){Wl(e,p++,n),++i[256];for(var y=ov(i,15),w=y.t,v=y.l,j=ov(s,15),S=j.t,_=j.l,I=OA(w),V=I.c,z=I.n,$=OA(S),J=$.c,le=$.n,q=new Mo(19),E=0;E<V.length;++E)++q[V[E]&31];for(var E=0;E<J.length;++E)++q[J[E]&31];for(var T=ov(q,7),U=T.t,C=T.l,L=19;L>4&&!U[DA[L-1]];--L);var D=h+5<<3,ne=bf(i,td)+bf(s,Mg)+a,se=bf(i,w)+bf(s,S)+a+14+3*L+bf(q,U)+2*q[16]+3*q[17]+7*q[18];if(u>=0&&D<=ne&&D<=se)return wC(e,p,t.subarray(u,u+h));var oe,Z,Y,pe;if(Wl(e,p,1+(se<ne)),p+=2,se<ne){oe=Uf(w,v,0),Z=w,Y=Uf(S,_,0),pe=S;var we=Uf(U,C,0);Wl(e,p,z-257),Wl(e,p+5,le-1),Wl(e,p+10,L-4),p+=14;for(var E=0;E<L;++E)Wl(e,p+3*E,U[DA[E]]);p+=3*L;for(var ae=[V,J],F=0;F<2;++F)for(var ee=ae[F],E=0;E<ee.length;++E){var Q=ee[E]&31;Wl(e,p,we[Q]),p+=U[Q],Q>15&&(Wl(e,p,ee[E]>>5&127),p+=ee[E]>>12)}}else oe=GW,Z=td,Y=KW,pe=Mg;for(var E=0;E<c;++E){var he=r[E];if(he>255){var Q=he>>18&31;xf(e,p,oe[Q+257]),p+=Z[Q+257],Q>7&&(Wl(e,p,he>>23&31),p+=Gx[Q]);var ge=he&31;xf(e,p,Y[ge]),p+=pe[ge],ge>3&&(xf(e,p,he>>5&8191),p+=Kx[ge])}else xf(e,p,oe[he]),p+=Z[he]}return xf(e,p,oe[256]),p+Z[256]},QW=new Wx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_C=new Ma(0),XW=function(t,e,n,r,i,s){var a=s.z||t.length,c=new Ma(r+a+5*(1+Math.ceil(a/7e3))+i),u=c.subarray(r,c.length-i),h=s.l,p=(s.r||0)&7;if(e){p&&(u[0]=s.r>>3);for(var y=QW[e-1],w=y>>13,v=y&8191,j=(1<<n)-1,S=s.p||new Mo(32768),_=s.h||new Mo(j+1),I=Math.ceil(n/3),V=2*I,z=function(Me){return(t[Me]^t[Me+1]<<I^t[Me+2]<<V)&j},$=new Wx(25e3),J=new Mo(288),le=new Mo(32),q=0,E=0,T=s.i||0,U=0,C=s.w||0,L=0;T+2<a;++T){var D=z(T),ne=T&32767,se=_[D];if(S[ne]=se,_[D]=ne,C<=T){var oe=a-T;if((q>7e3||U>24576)&&(oe>423||!h)){p=FA(t,u,0,$,J,le,E,U,L,T-L,p),U=q=E=0,L=T;for(var Z=0;Z<286;++Z)J[Z]=0;for(var Z=0;Z<30;++Z)le[Z]=0}var Y=2,pe=0,we=v,ae=ne-se&32767;if(oe>2&&D==z(T-ae))for(var F=Math.min(w,oe)-1,ee=Math.min(32767,T),Q=Math.min(258,oe);ae<=ee&&--we&&ne!=se;){if(t[T+Y]==t[T+Y-ae]){for(var he=0;he<Q&&t[T+he]==t[T+he-ae];++he);if(he>Y){if(Y=he,pe=ae,he>F)break;for(var ge=Math.min(ae,he-2),ve=0,Z=0;Z<ge;++Z){var Ee=T-ae+Z&32767,Te=S[Ee],je=Ee-Te&32767;je>ve&&(ve=je,se=Ee)}}}ne=se,se=S[ne],ae+=ne-se&32767}if(pe){$[U++]=268435456|D1[Y]<<18|MA[pe];var ze=D1[Y]&31,Je=MA[pe]&31;E+=Gx[ze]+Kx[Je],++J[257+ze],++le[Je],C=T+Y,++q}else $[U++]=t[T],++J[t[T]]}}for(T=Math.max(T,C);T<a;++T)$[U++]=t[T],++J[t[T]];p=FA(t,u,h,$,J,le,E,U,L,T-L,p),h||(s.r=p&7|u[p/8|0]<<3,p-=7,s.h=_,s.p=S,s.i=T,s.w=C)}else{for(var T=s.w||0;T<a+h;T+=65535){var tt=T+65535;tt>=a&&(u[p/8|0]=h,tt=a),p=wC(u,p+1,t.subarray(T,tt))}s.i=a}return YW(c,0,r+bC(p)+i)},AC=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,a=0;a!=s;){for(var c=Math.min(a+2655,s);a<c;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},JW=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Ma(s.length+t.length);a.set(s),a.set(t,s.length),t=a,i.w=s.length}return XW(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},NC=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},ZW=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=AC();i.p(e.dictionary),NC(t,2,i.d())}};function F1(t,e){e||(e={});var n=AC();n.p(t);var r=JW(t,e,e.dictionary?6:2,4);return ZW(r,e),NC(r,r.length-4,n.d()),r}var eG=typeof TextDecoder<"u"&&new TextDecoder,tG=0;try{eG.decode(_C,{stream:!0}),tG=1}catch{}function nG(t){if(Array.isArray(t))return t}function rG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,c=[],u=!0,h=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(u=(r=s.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(p){h=!0,i=p}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(h)throw i}}return c}}function VA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function iG(t,e){if(t){if(typeof t=="string")return VA(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VA(t,e):void 0}}function sG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UA(t,e){return nG(t)||rG(t,e)||iG(t,e)||sG()}function BA(t,e="utf8"){return new TextDecoder(e).decode(t)}const oG=new TextEncoder;function aG(t){return oG.encode(t)}const lG=1024*8,cG=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),av={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Yx{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=lG,n={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof Yx)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=av[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===cG&&n!=="uint8"&&n!=="int8"){const c=new Uint8Array(this.buffer.slice(i,i+r));c.reverse();const u=new av[n](c.buffer);return this.offset+=r,u.reverse(),u}const a=new av[n](s);return this.offset+=r,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return BA(this.readBytes(e))}decodeText(e=1,n="utf8"){return BA(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(aG(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Uh(t){let e=t.length;for(;--e>=0;)t[e]=0}const uG=3,dG=258,EC=29,hG=256,fG=hG+1+EC,SC=30,pG=512,mG=new Array((fG+2)*2);Uh(mG);const gG=new Array(SC*2);Uh(gG);const yG=new Array(pG);Uh(yG);const vG=new Array(dG-uG+1);Uh(vG);const xG=new Array(EC);Uh(xG);const bG=new Array(SC);Uh(bG);const wG=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+e[r++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var V1=wG;const _G=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},AG=new Uint32Array(_G()),NG=(t,e,n,r)=>{const i=AG,s=r+n;t^=-1;for(let a=r;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1};var il=NG,U1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},TC={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const EG=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var SG=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)EG(n,r)&&(t[r]=n[r])}}return t},TG=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let a=t[r];n.set(a,i),i+=a.length}return n},kC={assign:SG,flattenChunks:TG};let CC=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{CC=!1}const up=new Uint8Array(256);for(let t=0;t<256;t++)up[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;up[254]=up[254]=1;var kG=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,a=t.length,c=0;for(i=0;i<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(c),s=0,i=0;s<c;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const CG=(t,e)=>{if(e<65534&&t.subarray&&CC)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var IG=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let a=t[r++];if(a<128){s[i++]=a;continue}let c=up[a];if(c>4){s[i++]=65533,r+=c-1;continue}for(a&=c===2?31:c===3?15:7;c>1&&r<n;)a=a<<6|t[r++]&63,c--;if(c>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return CG(s,i)},PG=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+up[t[n]]>e?n:e},B1={string2buf:kG,buf2string:IG,utf8border:PG};function RG(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var jG=RG;const Dm=16209,LG=16191;var DG=function(e,n){let r,i,s,a,c,u,h,p,y,w,v,j,S,_,I,V,z,$,J,le,q,E,T,U;const C=e.state;r=e.next_in,T=e.input,i=r+(e.avail_in-5),s=e.next_out,U=e.output,a=s-(n-e.avail_out),c=s+(e.avail_out-257),u=C.dmax,h=C.wsize,p=C.whave,y=C.wnext,w=C.window,v=C.hold,j=C.bits,S=C.lencode,_=C.distcode,I=(1<<C.lenbits)-1,V=(1<<C.distbits)-1;e:do{j<15&&(v+=T[r++]<<j,j+=8,v+=T[r++]<<j,j+=8),z=S[v&I];t:for(;;){if($=z>>>24,v>>>=$,j-=$,$=z>>>16&255,$===0)U[s++]=z&65535;else if($&16){J=z&65535,$&=15,$&&(j<$&&(v+=T[r++]<<j,j+=8),J+=v&(1<<$)-1,v>>>=$,j-=$),j<15&&(v+=T[r++]<<j,j+=8,v+=T[r++]<<j,j+=8),z=_[v&V];n:for(;;){if($=z>>>24,v>>>=$,j-=$,$=z>>>16&255,$&16){if(le=z&65535,$&=15,j<$&&(v+=T[r++]<<j,j+=8,j<$&&(v+=T[r++]<<j,j+=8)),le+=v&(1<<$)-1,le>u){e.msg="invalid distance too far back",C.mode=Dm;break e}if(v>>>=$,j-=$,$=s-a,le>$){if($=le-$,$>p&&C.sane){e.msg="invalid distance too far back",C.mode=Dm;break e}if(q=0,E=w,y===0){if(q+=h-$,$<J){J-=$;do U[s++]=w[q++];while(--$);q=s-le,E=U}}else if(y<$){if(q+=h+y-$,$-=y,$<J){J-=$;do U[s++]=w[q++];while(--$);if(q=0,y<J){$=y,J-=$;do U[s++]=w[q++];while(--$);q=s-le,E=U}}}else if(q+=y-$,$<J){J-=$;do U[s++]=w[q++];while(--$);q=s-le,E=U}for(;J>2;)U[s++]=E[q++],U[s++]=E[q++],U[s++]=E[q++],J-=3;J&&(U[s++]=E[q++],J>1&&(U[s++]=E[q++]))}else{q=s-le;do U[s++]=U[q++],U[s++]=U[q++],U[s++]=U[q++],J-=3;while(J>2);J&&(U[s++]=U[q++],J>1&&(U[s++]=U[q++]))}}else if(($&64)===0){z=_[(z&65535)+(v&(1<<$)-1)];continue n}else{e.msg="invalid distance code",C.mode=Dm;break e}break}}else if(($&64)===0){z=S[(z&65535)+(v&(1<<$)-1)];continue t}else if($&32){C.mode=LG;break e}else{e.msg="invalid literal/length code",C.mode=Dm;break e}break}}while(r<i&&s<c);J=j>>3,r-=J,j-=J<<3,v&=(1<<j)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<c?257+(c-s):257-(s-c),C.hold=v,C.bits=j};const Ud=15,zA=852,qA=592,$A=0,lv=1,HA=2,MG=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),OG=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),FG=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),VG=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),UG=(t,e,n,r,i,s,a,c)=>{const u=c.bits;let h=0,p=0,y=0,w=0,v=0,j=0,S=0,_=0,I=0,V=0,z,$,J,le,q,E=null,T;const U=new Uint16Array(Ud+1),C=new Uint16Array(Ud+1);let L=null,D,ne,se;for(h=0;h<=Ud;h++)U[h]=0;for(p=0;p<r;p++)U[e[n+p]]++;for(v=u,w=Ud;w>=1&&U[w]===0;w--);if(v>w&&(v=w),w===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,c.bits=1,0;for(y=1;y<w&&U[y]===0;y++);for(v<y&&(v=y),_=1,h=1;h<=Ud;h++)if(_<<=1,_-=U[h],_<0)return-1;if(_>0&&(t===$A||w!==1))return-1;for(C[1]=0,h=1;h<Ud;h++)C[h+1]=C[h]+U[h];for(p=0;p<r;p++)e[n+p]!==0&&(a[C[e[n+p]]++]=p);if(t===$A?(E=L=a,T=20):t===lv?(E=MG,L=OG,T=257):(E=FG,L=VG,T=0),V=0,p=0,h=y,q=s,j=v,S=0,J=-1,I=1<<v,le=I-1,t===lv&&I>zA||t===HA&&I>qA)return 1;for(;;){D=h-S,a[p]+1<T?(ne=0,se=a[p]):a[p]>=T?(ne=L[a[p]-T],se=E[a[p]-T]):(ne=96,se=0),z=1<<h-S,$=1<<j,y=$;do $-=z,i[q+(V>>S)+$]=D<<24|ne<<16|se|0;while($!==0);for(z=1<<h-1;V&z;)z>>=1;if(z!==0?(V&=z-1,V+=z):V=0,p++,--U[h]===0){if(h===w)break;h=e[n+a[p]]}if(h>v&&(V&le)!==J){for(S===0&&(S=v),q+=y,j=h-S,_=1<<j;j+S<w&&(_-=U[j+S],!(_<=0));)j++,_<<=1;if(I+=1<<j,t===lv&&I>zA||t===HA&&I>qA)return 1;J=V&le,i[J]=v<<24|j<<16|q-s|0}}return V!==0&&(i[q+V]=h-S<<24|64<<16|0),c.bits=v,0};var Bf=UG;const BG=0,IC=1,PC=2,{Z_FINISH:WA,Z_BLOCK:zG,Z_TREES:Mm,Z_OK:nd,Z_STREAM_END:qG,Z_NEED_DICT:$G,Z_STREAM_ERROR:ca,Z_DATA_ERROR:RC,Z_MEM_ERROR:jC,Z_BUF_ERROR:HG,Z_DEFLATED:GA}=TC,N0=16180,KA=16181,YA=16182,QA=16183,XA=16184,JA=16185,ZA=16186,eN=16187,tN=16188,nN=16189,Og=16190,Gl=16191,cv=16192,rN=16193,uv=16194,iN=16195,sN=16196,oN=16197,aN=16198,Om=16199,Fm=16200,lN=16201,cN=16202,uN=16203,dN=16204,hN=16205,dv=16206,fN=16207,pN=16208,Cr=16209,LC=16210,DC=16211,WG=852,GG=592,KG=15,YG=KG,mN=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function QG(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const fd=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<N0||e.mode>DC?1:0},MC=t=>{if(fd(t))return ca;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=N0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(WG),e.distcode=e.distdyn=new Int32Array(GG),e.sane=1,e.back=-1,nd},OC=t=>{if(fd(t))return ca;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,MC(t)},FC=(t,e)=>{let n;if(fd(t))return ca;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ca:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,OC(t))},VC=(t,e)=>{if(!t)return ca;const n=new QG;t.state=n,n.strm=t,n.window=null,n.mode=N0;const r=FC(t,e);return r!==nd&&(t.state=null),r},XG=t=>VC(t,YG);let gN=!0,hv,fv;const JG=t=>{if(gN){hv=new Int32Array(512),fv=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Bf(IC,t.lens,0,288,hv,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Bf(PC,t.lens,0,32,fv,0,t.work,{bits:5}),gN=!1}t.lencode=hv,t.lenbits=9,t.distcode=fv,t.distbits=5},UC=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},ZG=(t,e)=>{let n,r,i,s,a,c,u,h,p,y,w,v,j,S,_=0,I,V,z,$,J,le,q,E;const T=new Uint8Array(4);let U,C;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(fd(t)||!t.output||!t.input&&t.avail_in!==0)return ca;n=t.state,n.mode===Gl&&(n.mode=cv),a=t.next_out,i=t.output,u=t.avail_out,s=t.next_in,r=t.input,c=t.avail_in,h=n.hold,p=n.bits,y=c,w=u,E=nd;e:for(;;)switch(n.mode){case N0:if(n.wrap===0){n.mode=cv;break}for(;p<16;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if(n.wrap&2&&h===35615){n.wbits===0&&(n.wbits=15),n.check=0,T[0]=h&255,T[1]=h>>>8&255,n.check=il(n.check,T,2,0),h=0,p=0,n.mode=KA;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((h&255)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=Cr;break}if((h&15)!==GA){t.msg="unknown compression method",n.mode=Cr;break}if(h>>>=4,p-=4,q=(h&15)+8,n.wbits===0&&(n.wbits=q),q>15||q>n.wbits){t.msg="invalid window size",n.mode=Cr;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=h&512?nN:Gl,h=0,p=0;break;case KA:for(;p<16;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if(n.flags=h,(n.flags&255)!==GA){t.msg="unknown compression method",n.mode=Cr;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Cr;break}n.head&&(n.head.text=h>>8&1),n.flags&512&&n.wrap&4&&(T[0]=h&255,T[1]=h>>>8&255,n.check=il(n.check,T,2,0)),h=0,p=0,n.mode=YA;case YA:for(;p<32;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}n.head&&(n.head.time=h),n.flags&512&&n.wrap&4&&(T[0]=h&255,T[1]=h>>>8&255,T[2]=h>>>16&255,T[3]=h>>>24&255,n.check=il(n.check,T,4,0)),h=0,p=0,n.mode=QA;case QA:for(;p<16;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}n.head&&(n.head.xflags=h&255,n.head.os=h>>8),n.flags&512&&n.wrap&4&&(T[0]=h&255,T[1]=h>>>8&255,n.check=il(n.check,T,2,0)),h=0,p=0,n.mode=XA;case XA:if(n.flags&1024){for(;p<16;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}n.length=h,n.head&&(n.head.extra_len=h),n.flags&512&&n.wrap&4&&(T[0]=h&255,T[1]=h>>>8&255,n.check=il(n.check,T,2,0)),h=0,p=0}else n.head&&(n.head.extra=null);n.mode=JA;case JA:if(n.flags&1024&&(v=n.length,v>c&&(v=c),v&&(n.head&&(q=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+v),q)),n.flags&512&&n.wrap&4&&(n.check=il(n.check,r,v,s)),c-=v,s+=v,n.length-=v),n.length))break e;n.length=0,n.mode=ZA;case ZA:if(n.flags&2048){if(c===0)break e;v=0;do q=r[s+v++],n.head&&q&&n.length<65536&&(n.head.name+=String.fromCharCode(q));while(q&&v<c);if(n.flags&512&&n.wrap&4&&(n.check=il(n.check,r,v,s)),c-=v,s+=v,q)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=eN;case eN:if(n.flags&4096){if(c===0)break e;v=0;do q=r[s+v++],n.head&&q&&n.length<65536&&(n.head.comment+=String.fromCharCode(q));while(q&&v<c);if(n.flags&512&&n.wrap&4&&(n.check=il(n.check,r,v,s)),c-=v,s+=v,q)break e}else n.head&&(n.head.comment=null);n.mode=tN;case tN:if(n.flags&512){for(;p<16;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if(n.wrap&4&&h!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Cr;break}h=0,p=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Gl;break;case nN:for(;p<32;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}t.adler=n.check=mN(h),h=0,p=0,n.mode=Og;case Og:if(n.havedict===0)return t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=c,n.hold=h,n.bits=p,$G;t.adler=n.check=1,n.mode=Gl;case Gl:if(e===zG||e===Mm)break e;case cv:if(n.last){h>>>=p&7,p-=p&7,n.mode=dv;break}for(;p<3;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}switch(n.last=h&1,h>>>=1,p-=1,h&3){case 0:n.mode=rN;break;case 1:if(JG(n),n.mode=Om,e===Mm){h>>>=2,p-=2;break e}break;case 2:n.mode=sN;break;case 3:t.msg="invalid block type",n.mode=Cr}h>>>=2,p-=2;break;case rN:for(h>>>=p&7,p-=p&7;p<32;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if((h&65535)!==(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Cr;break}if(n.length=h&65535,h=0,p=0,n.mode=uv,e===Mm)break e;case uv:n.mode=iN;case iN:if(v=n.length,v){if(v>c&&(v=c),v>u&&(v=u),v===0)break e;i.set(r.subarray(s,s+v),a),c-=v,s+=v,u-=v,a+=v,n.length-=v;break}n.mode=Gl;break;case sN:for(;p<14;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if(n.nlen=(h&31)+257,h>>>=5,p-=5,n.ndist=(h&31)+1,h>>>=5,p-=5,n.ncode=(h&15)+4,h>>>=4,p-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Cr;break}n.have=0,n.mode=oN;case oN:for(;n.have<n.ncode;){for(;p<3;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}n.lens[L[n.have++]]=h&7,h>>>=3,p-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,U={bits:n.lenbits},E=Bf(BG,n.lens,0,19,n.lencode,0,n.work,U),n.lenbits=U.bits,E){t.msg="invalid code lengths set",n.mode=Cr;break}n.have=0,n.mode=aN;case aN:for(;n.have<n.nlen+n.ndist;){for(;_=n.lencode[h&(1<<n.lenbits)-1],I=_>>>24,V=_>>>16&255,z=_&65535,!(I<=p);){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if(z<16)h>>>=I,p-=I,n.lens[n.have++]=z;else{if(z===16){for(C=I+2;p<C;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if(h>>>=I,p-=I,n.have===0){t.msg="invalid bit length repeat",n.mode=Cr;break}q=n.lens[n.have-1],v=3+(h&3),h>>>=2,p-=2}else if(z===17){for(C=I+3;p<C;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}h>>>=I,p-=I,q=0,v=3+(h&7),h>>>=3,p-=3}else{for(C=I+7;p<C;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}h>>>=I,p-=I,q=0,v=11+(h&127),h>>>=7,p-=7}if(n.have+v>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Cr;break}for(;v--;)n.lens[n.have++]=q}}if(n.mode===Cr)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Cr;break}if(n.lenbits=9,U={bits:n.lenbits},E=Bf(IC,n.lens,0,n.nlen,n.lencode,0,n.work,U),n.lenbits=U.bits,E){t.msg="invalid literal/lengths set",n.mode=Cr;break}if(n.distbits=6,n.distcode=n.distdyn,U={bits:n.distbits},E=Bf(PC,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,U),n.distbits=U.bits,E){t.msg="invalid distances set",n.mode=Cr;break}if(n.mode=Om,e===Mm)break e;case Om:n.mode=Fm;case Fm:if(c>=6&&u>=258){t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=c,n.hold=h,n.bits=p,DG(t,w),a=t.next_out,i=t.output,u=t.avail_out,s=t.next_in,r=t.input,c=t.avail_in,h=n.hold,p=n.bits,n.mode===Gl&&(n.back=-1);break}for(n.back=0;_=n.lencode[h&(1<<n.lenbits)-1],I=_>>>24,V=_>>>16&255,z=_&65535,!(I<=p);){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if(V&&(V&240)===0){for($=I,J=V,le=z;_=n.lencode[le+((h&(1<<$+J)-1)>>$)],I=_>>>24,V=_>>>16&255,z=_&65535,!($+I<=p);){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}h>>>=$,p-=$,n.back+=$}if(h>>>=I,p-=I,n.back+=I,n.length=z,V===0){n.mode=hN;break}if(V&32){n.back=-1,n.mode=Gl;break}if(V&64){t.msg="invalid literal/length code",n.mode=Cr;break}n.extra=V&15,n.mode=lN;case lN:if(n.extra){for(C=n.extra;p<C;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,p-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=cN;case cN:for(;_=n.distcode[h&(1<<n.distbits)-1],I=_>>>24,V=_>>>16&255,z=_&65535,!(I<=p);){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if((V&240)===0){for($=I,J=V,le=z;_=n.distcode[le+((h&(1<<$+J)-1)>>$)],I=_>>>24,V=_>>>16&255,z=_&65535,!($+I<=p);){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}h>>>=$,p-=$,n.back+=$}if(h>>>=I,p-=I,n.back+=I,V&64){t.msg="invalid distance code",n.mode=Cr;break}n.offset=z,n.extra=V&15,n.mode=uN;case uN:if(n.extra){for(C=n.extra;p<C;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,p-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Cr;break}n.mode=dN;case dN:if(u===0)break e;if(v=w-u,n.offset>v){if(v=n.offset-v,v>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Cr;break}v>n.wnext?(v-=n.wnext,j=n.wsize-v):j=n.wnext-v,v>n.length&&(v=n.length),S=n.window}else S=i,j=a-n.offset,v=n.length;v>u&&(v=u),u-=v,n.length-=v;do i[a++]=S[j++];while(--v);n.length===0&&(n.mode=Fm);break;case hN:if(u===0)break e;i[a++]=n.length,u--,n.mode=Fm;break;case dv:if(n.wrap){for(;p<32;){if(c===0)break e;c--,h|=r[s++]<<p,p+=8}if(w-=u,t.total_out+=w,n.total+=w,n.wrap&4&&w&&(t.adler=n.check=n.flags?il(n.check,i,w,a-w):V1(n.check,i,w,a-w)),w=u,n.wrap&4&&(n.flags?h:mN(h))!==n.check){t.msg="incorrect data check",n.mode=Cr;break}h=0,p=0}n.mode=fN;case fN:if(n.wrap&&n.flags){for(;p<32;){if(c===0)break e;c--,h+=r[s++]<<p,p+=8}if(n.wrap&4&&h!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Cr;break}h=0,p=0}n.mode=pN;case pN:E=qG;break e;case Cr:E=RC;break e;case LC:return jC;case DC:default:return ca}return t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=c,n.hold=h,n.bits=p,(n.wsize||w!==t.avail_out&&n.mode<Cr&&(n.mode<dv||e!==WA))&&UC(t,t.output,t.next_out,w-t.avail_out),y-=t.avail_in,w-=t.avail_out,t.total_in+=y,t.total_out+=w,n.total+=w,n.wrap&4&&w&&(t.adler=n.check=n.flags?il(n.check,i,w,t.next_out-w):V1(n.check,i,w,t.next_out-w)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Gl?128:0)+(n.mode===Om||n.mode===uv?256:0),(y===0&&w===0||e===WA)&&E===nd&&(E=HG),E},eK=t=>{if(fd(t))return ca;let e=t.state;return e.window&&(e.window=null),t.state=null,nd},tK=(t,e)=>{if(fd(t))return ca;const n=t.state;return(n.wrap&2)===0?ca:(n.head=e,e.done=!1,nd)},nK=(t,e)=>{const n=e.length;let r,i,s;return fd(t)||(r=t.state,r.wrap!==0&&r.mode!==Og)?ca:r.mode===Og&&(i=1,i=V1(i,e,n,0),i!==r.check)?RC:(s=UC(t,e,n,n),s?(r.mode=LC,jC):(r.havedict=1,nd))};var rK=OC,iK=FC,sK=MC,oK=XG,aK=VC,lK=ZG,cK=eK,uK=tK,dK=nK,hK="pako inflate (from Nodeca project)",Yl={inflateReset:rK,inflateReset2:iK,inflateResetKeep:sK,inflateInit:oK,inflateInit2:aK,inflate:lK,inflateEnd:cK,inflateGetHeader:uK,inflateSetDictionary:dK,inflateInfo:hK};function fK(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var pK=fK;const BC=Object.prototype.toString,{Z_NO_FLUSH:mK,Z_FINISH:gK,Z_OK:dp,Z_STREAM_END:pv,Z_NEED_DICT:mv,Z_STREAM_ERROR:yK,Z_DATA_ERROR:yN,Z_MEM_ERROR:vK}=TC;function jp(t){this.options=kC.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jG,this.strm.avail_out=0;let n=Yl.inflateInit2(this.strm,e.windowBits);if(n!==dp)throw new Error(U1[n]);if(this.header=new pK,Yl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=B1.string2buf(e.dictionary):BC.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Yl.inflateSetDictionary(this.strm,e.dictionary),n!==dp)))throw new Error(U1[n])}jp.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,a,c;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?gK:mK,BC.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Yl.inflate(n,a),s===mv&&i&&(s=Yl.inflateSetDictionary(n,i),s===dp?s=Yl.inflate(n,a):s===yN&&(s=mv));n.avail_in>0&&s===pv&&n.state.wrap>0&&t[n.next_in]!==0;)Yl.inflateReset(n),s=Yl.inflate(n,a);switch(s){case yK:case yN:case mv:case vK:return this.onEnd(s),this.ended=!0,!1}if(c=n.avail_out,n.next_out&&(n.avail_out===0||s===pv))if(this.options.to==="string"){let u=B1.utf8border(n.output,n.next_out),h=n.next_out-u,p=B1.buf2string(n.output,u);n.next_out=h,n.avail_out=r-h,h&&n.output.set(n.output.subarray(u,u+h),0),this.onData(p)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===dp&&c===0)){if(s===pv)return s=Yl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};jp.prototype.onData=function(t){this.chunks.push(t)};jp.prototype.onEnd=function(t){t===dp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=kC.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function xK(t,e){const n=new jp(e);if(n.push(t),n.err)throw n.msg||U1[n.err];return n.result}var bK=jp,wK=xK,_K={Inflate:bK,inflate:wK};const{Inflate:AK,inflate:NK}=_K;var vN=AK,EK=NK;const zC=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;zC[t]=e}const xN=4294967295;function SK(t,e,n){let r=t;for(let i=0;i<n;i++)r=zC[(r^e[i])&255]^r>>>8;return r}function TK(t,e){return(SK(xN,t,e)^xN)>>>0}function bN(t,e,n){const r=t.readUint32(),i=TK(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function qC(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function $C(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function HC(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function WC(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-i]+n[s]>>1)&255}}function GC(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+kK(e[s-i],n[s],n[s-i])&255}}function kK(t,e,n){const r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),a=Math.abs(r-n);return i<=s&&i<=a?t:s<=a?e:n}function CK(t,e,n,r,i,s){switch(t){case 0:qC(e,n,i);break;case 1:$C(e,n,i,s);break;case 2:HC(e,n,r,i);break;case 3:WC(e,n,r,i,s);break;case 4:GC(e,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const IK=new Uint16Array([255]),PK=new Uint8Array(IK.buffer),RK=PK[0]===255;function jK(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(s/8)*i,u=new Uint8Array(r*n*c);let h=0;for(let p=0;p<7;p++){const y=a[p],w=Math.ceil((n-y.x)/y.xStep),v=Math.ceil((r-y.y)/y.yStep);if(w<=0||v<=0)continue;const j=w*c,S=new Uint8Array(j);for(let _=0;_<v;_++){const I=e[h++],V=e.subarray(h,h+j);h+=j;const z=new Uint8Array(j);CK(I,V,z,S,j,c),S.set(z);for(let $=0;$<w;$++){const J=y.x+$*y.xStep,le=y.y+_*y.yStep;if(!(J>=n||le>=r))for(let q=0;q<c;q++)u[(le*n+J)*c+q]=z[$*c+q]}}}if(s===16){const p=new Uint16Array(u.buffer);if(RK)for(let y=0;y<p.length;y++)p[y]=LK(p[y]);return p}else return u}function LK(t){return(t&255)<<8|t>>8&255}const DK=new Uint16Array([255]),MK=new Uint8Array(DK.buffer),OK=MK[0]===255,FK=new Uint8Array(0);function wN(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,a=Math.ceil(s/8)*i,c=Math.ceil(s/8*i*n),u=new Uint8Array(r*c);let h=FK,p=0,y,w;for(let v=0;v<r;v++){switch(y=e.subarray(p+1,p+1+c),w=u.subarray(v*c,(v+1)*c),e[p]){case 0:qC(y,w,c);break;case 1:$C(y,w,c,a);break;case 2:HC(y,w,h,c);break;case 3:WC(y,w,h,c,a);break;case 4:GC(y,w,h,c,a);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}h=w,p+=c+1}if(s===16){const v=new Uint16Array(u.buffer);if(OK)for(let j=0;j<v.length;j++)v[j]=VK(v[j]);return v}else return u}function VK(t){return(t&255)<<8|t>>8&255}const og=Uint8Array.of(137,80,78,71,13,10,26,10);function _N(t){if(!UK(t.readBytes(og.length)))throw new Error("wrong PNG signature")}function UK(t){if(t.length<og.length)return!1;for(let e=0;e<og.length;e++)if(t[e]!==og[e])return!1;return!0}const BK="tEXt",zK=0,KC=new TextDecoder("latin1");function qK(t){if(HK(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const $K=/^[\u0000-\u00FF]*$/;function HK(t){if(!$K.test(t))throw new Error("invalid latin1 text")}function WK(t,e,n){const r=YC(e);t[r]=GK(e,n-r.length-1)}function YC(t){for(t.mark();t.readByte()!==zK;);const e=t.offset;t.reset();const n=KC.decode(t.readBytes(e-t.offset-1));return t.skip(1),qK(n),n}function GK(t,e){return KC.decode(t.readBytes(e))}const jo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},gv={UNKNOWN:-1,DEFLATE:0},AN={UNKNOWN:-1,ADAPTIVE:0},yv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Vm={NONE:0,BACKGROUND:1,PREVIOUS:2},vv={SOURCE:0,OVER:1};class KK extends Yx{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,n={}){super(e);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new vN,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=gv.UNKNOWN,this._filterMethod=AN.UNKNOWN,this._interlaceMethod=yv.UNKNOWN,this._colorType=jo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(_N(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(_N(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case BK:WK(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?bN(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?bN(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=YK(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case jo.GREYSCALE:r=1;break;case jo.TRUECOLOUR:r=3;break;case jo.INDEXED_COLOUR:r=1;break;case jo.GREYSCALE_ALPHA:r=2;break;case jo.TRUECOLOUR_ALPHA:r=4;break;case jo.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==gv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<n;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case jo.GREYSCALE:case jo.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case jo.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case jo.UNKNOWN:case jo.GREYSCALE_ALPHA:case jo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=YC(this),r=this.readUint8();if(r!==gv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:EK(i)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=wN({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(r,i,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,r){switch(e.disposeOp){case Vm.NONE:break;case Vm.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const a=(i*e.width+s)*this._png.channels;for(let c=0;c<this._png.channels;c++)r.data[a+c]=0}break;case Vm.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const r=1<<this._png.depth,i=(s,a)=>{const c=((s+n.yOffset)*this._png.width+n.xOffset+a)*this._png.channels,u=(s*n.width+a)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case vv.SOURCE:for(let s=0;s<n.height;s++)for(let a=0;a<n.width;a++){const{index:c,frameIndex:u}=i(s,a);for(let h=0;h<this._png.channels;h++)e.data[c+h]=n.data[u+h]}break;case vv.OVER:for(let s=0;s<n.height;s++)for(let a=0;a<n.width;a++){const{index:c,frameIndex:u}=i(s,a);for(let h=0;h<this._png.channels;h++){const p=n.data[u+this._png.channels-1]/r,y=h%(this._png.channels-1)===0?1:n.data[u+h],w=Math.floor(p*y+(1-p)*e.data[c+h]);e.data[c+h]+=w}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==AN.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===yv.NO_INTERLACE)this._png.data=wN({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===yv.ADAM7)this._png.data=jK({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Vm.NONE,blendOp:vv.SOURCE,data:e}),this._inflator=new vN,this._writingDataChunks=!1}}function YK(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var NN;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(NN||(NN={}));function QK(t,e){return new KK(t,e).decode()}var Kt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function xv(){Kt.console&&typeof Kt.console.log=="function"&&Kt.console.log.apply(Kt.console,arguments)}var or={log:xv,warn:function(t){Kt.console&&(typeof Kt.console.warn=="function"?Kt.console.warn.apply(Kt.console,arguments):xv.call(null,arguments))},error:function(t){Kt.console&&(typeof Kt.console.error=="function"?Kt.console.error.apply(Kt.console,arguments):xv(t))}};function bv(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Du(r.response,e,n)},r.onerror=function(){or.error("could not download file")},r.send()}function EN(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Um(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Du=Kt.saveAs||((typeof window>"u"?"undefined":er(window))!=="object"||window!==Kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Kt.URL||Kt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?EN(i.href)?bv(t,e,n):Um(i,i.target="_blank"):Um(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Um(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(EN(t))bv(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Um(r)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:er(s)!=="object"&&(or.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return bv(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Kt.HTMLElement)||Kt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":er(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},c.readAsDataURL(t)}else{var u=Kt.URL||Kt.webkitURL,h=u.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){u.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function QC(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+c+u+h}}var ag=Kt.atob.bind(Kt),SN=Kt.btoa.bind(Kt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function wv(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=ks(n,r,i,s,e[0],7,-680876936),s=ks(s,n,r,i,e[1],12,-389564586),i=ks(i,s,n,r,e[2],17,606105819),r=ks(r,i,s,n,e[3],22,-1044525330),n=ks(n,r,i,s,e[4],7,-176418897),s=ks(s,n,r,i,e[5],12,1200080426),i=ks(i,s,n,r,e[6],17,-1473231341),r=ks(r,i,s,n,e[7],22,-45705983),n=ks(n,r,i,s,e[8],7,1770035416),s=ks(s,n,r,i,e[9],12,-1958414417),i=ks(i,s,n,r,e[10],17,-42063),r=ks(r,i,s,n,e[11],22,-1990404162),n=ks(n,r,i,s,e[12],7,1804603682),s=ks(s,n,r,i,e[13],12,-40341101),i=ks(i,s,n,r,e[14],17,-1502002290),n=Cs(n,r=ks(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Cs(s,n,r,i,e[6],9,-1069501632),i=Cs(i,s,n,r,e[11],14,643717713),r=Cs(r,i,s,n,e[0],20,-373897302),n=Cs(n,r,i,s,e[5],5,-701558691),s=Cs(s,n,r,i,e[10],9,38016083),i=Cs(i,s,n,r,e[15],14,-660478335),r=Cs(r,i,s,n,e[4],20,-405537848),n=Cs(n,r,i,s,e[9],5,568446438),s=Cs(s,n,r,i,e[14],9,-1019803690),i=Cs(i,s,n,r,e[3],14,-187363961),r=Cs(r,i,s,n,e[8],20,1163531501),n=Cs(n,r,i,s,e[13],5,-1444681467),s=Cs(s,n,r,i,e[2],9,-51403784),i=Cs(i,s,n,r,e[7],14,1735328473),n=Is(n,r=Cs(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Is(s,n,r,i,e[8],11,-2022574463),i=Is(i,s,n,r,e[11],16,1839030562),r=Is(r,i,s,n,e[14],23,-35309556),n=Is(n,r,i,s,e[1],4,-1530992060),s=Is(s,n,r,i,e[4],11,1272893353),i=Is(i,s,n,r,e[7],16,-155497632),r=Is(r,i,s,n,e[10],23,-1094730640),n=Is(n,r,i,s,e[13],4,681279174),s=Is(s,n,r,i,e[0],11,-358537222),i=Is(i,s,n,r,e[3],16,-722521979),r=Is(r,i,s,n,e[6],23,76029189),n=Is(n,r,i,s,e[9],4,-640364487),s=Is(s,n,r,i,e[12],11,-421815835),i=Is(i,s,n,r,e[15],16,530742520),n=Ps(n,r=Is(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ps(s,n,r,i,e[7],10,1126891415),i=Ps(i,s,n,r,e[14],15,-1416354905),r=Ps(r,i,s,n,e[5],21,-57434055),n=Ps(n,r,i,s,e[12],6,1700485571),s=Ps(s,n,r,i,e[3],10,-1894986606),i=Ps(i,s,n,r,e[10],15,-1051523),r=Ps(r,i,s,n,e[1],21,-2054922799),n=Ps(n,r,i,s,e[8],6,1873313359),s=Ps(s,n,r,i,e[15],10,-30611744),i=Ps(i,s,n,r,e[6],15,-1560198380),r=Ps(r,i,s,n,e[13],21,1309151649),n=Ps(n,r,i,s,e[4],6,-145523070),s=Ps(s,n,r,i,e[11],10,-1120210379),i=Ps(i,s,n,r,e[2],15,718787259),r=Ps(r,i,s,n,e[9],21,-343485551),t[0]=Kc(n,t[0]),t[1]=Kc(r,t[1]),t[2]=Kc(i,t[2]),t[3]=Kc(s,t[3])}function E0(t,e,n,r,i,s){return e=Kc(Kc(e,t),Kc(r,s)),Kc(e<<i|e>>>32-i,n)}function ks(t,e,n,r,i,s,a){return E0(e&n|~e&r,t,e,i,s,a)}function Cs(t,e,n,r,i,s,a){return E0(e&r|n&~r,t,e,i,s,a)}function Is(t,e,n,r,i,s,a){return E0(e^n^r,t,e,i,s,a)}function Ps(t,e,n,r,i,s,a){return E0(n^(e|~r),t,e,i,s,a)}function XC(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)wv(r,XK(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(wv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,wv(r,i),r}function XK(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var TN="0123456789abcdef".split("");function JK(t){for(var e="",n=0;n<4;n++)e+=TN[t>>8*n+4&15]+TN[t>>8*n&15];return e}function ZK(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function z1(t){return XC(t).map(ZK).join("")}var eY=(function(t){for(var e=0;e<t.length;e++)t[e]=JK(t[e]);return t.join("")})(XC("hello"))!="5d41402abc4b2a76b9719d911017c592";function Kc(t,e){if(eY){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function q1(t,e){var n,r,i,s;if(t!==n){for(var a=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),c=[],u=0;u<256;u++)c[u]=u;var h=0;for(u=0;u<256;u++){var p=c[u];h=(h+p+a.charCodeAt(u))%256,c[u]=c[h],c[h]=p}n=t,r=c}else c=r;var y=e.length,w=0,v=0,j="";for(u=0;u<y;u++)v=(v+(p=c[w=(w+1)%256]))%256,c[w]=c[v],c[v]=p,a=c[(c[w]+c[v])%256],j+=String.fromCharCode(e.charCodeAt(u)^a);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var kN={print:4,modify:8,copy:16,"annot-forms":32};function Wd(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(c){if(kN.perm!==void 0)throw new Error("Invalid permission: "+c);i+=kN[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=z1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=q1(this.encryptionKey,this.padding)}function Gd(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function CN(t){if(er(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var a=e[n][s];try{a[0].apply(t,r)}catch(c){Kt.console&&or.error("jsPDF PubSub Error",c.message,c)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Fg(t){if(!(this instanceof Fg))return new Fg(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function JC(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Mu(t,e,n,r,i){if(!(this instanceof Mu))return new Mu(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,JC.call(this,r,i)}function Zd(t,e,n,r,i){if(!(this instanceof Zd))return new Zd(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,JC.call(this,r,i)}function Tt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],c=1,u=16,h="S",p=null;er(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),h=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var y=t.putOnlyUsedFonts||!1,w={},v={internal:{},__private__:{}};v.__private__.PubSub=CN;var j="1.3",S=v.__private__.getPdfVersion=function(){return j};v.__private__.setPdfVersion=function(A){j=A};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return _};var I=v.__private__.getPageFormat=function(A){return _[A]};i=i||"a4";var V="compat",z="advanced",$=V;function J(){this.saveGraphicsState(),fe(new It(kt,0,0,-kt,0,Pi()*kt).toString()+" cm"),this.setFontSize(this.getFontSize()/kt),h="n",$=z}function le(){this.restoreGraphicsState(),h="S",$=V}var q=v.__private__.combineFontStyleAndFontWeight=function(A,H){if(A=="bold"&&H=="normal"||A=="bold"&&H==400||A=="normal"&&H=="italic"||A=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(A=H==400||H==="normal"?A==="italic"?"italic":"normal":H!=700&&H!=="bold"||A!=="normal"?(H==700?"bold":H)+""+A:"bold"),A};v.advancedAPI=function(A){var H=$===V;return H&&J.call(this),typeof A!="function"||(A(this),H&&le.call(this)),this},v.compatAPI=function(A){var H=$===z;return H&&le.call(this),typeof A!="function"||(A(this),H&&J.call(this)),this},v.isAdvancedAPI=function(){return $===z};var E,T=function(A){if($!==z)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=v.roundToPrecision=v.__private__.roundToPrecision=function(A,H){var de=e||H;if(isNaN(A)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(de).replace(/0+$/,"")};E=v.hpf=v.__private__.hpf=typeof u=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return U(A,u)}:u==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return U(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return U(A,16)};var C=v.f2=v.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return U(A,2)},L=v.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return U(A,3)},D=v.scale=v.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return $===V?A*kt:$===z?A:void 0},ne=function(A){return D((function(H){return $===V?Pi()-H:$===z?H:void 0})(A))};v.__private__.setPrecision=v.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var se,oe="00000000000000000000000000000000",Z=v.__private__.getFileId=function(){return oe},Y=v.__private__.setFileId=function(A){return oe=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():oe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Un=new Wd(p.userPermissions,p.userPassword,p.ownerPassword,oe)),oe};v.setFileId=function(A){return Y(A),this},v.getFileId=function(){return Z()};var pe=v.__private__.convertDateToPDFDate=function(A){var H=A.getTimezoneOffset(),de=H<0?"+":"-",ye=Math.floor(Math.abs(H/60)),Ne=Math.abs(H%60),Ue=[de,Q(ye),"'",Q(Ne),"'"].join("");return["D:",A.getFullYear(),Q(A.getMonth()+1),Q(A.getDate()),Q(A.getHours()),Q(A.getMinutes()),Q(A.getSeconds()),Ue].join("")},we=v.__private__.convertPDFDateToDate=function(A){var H=parseInt(A.substr(2,4),10),de=parseInt(A.substr(6,2),10)-1,ye=parseInt(A.substr(8,2),10),Ne=parseInt(A.substr(10,2),10),Ue=parseInt(A.substr(12,2),10),$e=parseInt(A.substr(14,2),10);return new Date(H,de,ye,Ne,Ue,$e,0)},ae=v.__private__.setCreationDate=function(A){var H;if(A===void 0&&(A=new Date),A instanceof Date)H=pe(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=A}return se=H},F=v.__private__.getCreationDate=function(A){var H=se;return A==="jsDate"&&(H=we(se)),H};v.setCreationDate=function(A){return ae(A),this},v.getCreationDate=function(A){return F(A)};var ee,Q=v.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},he=v.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},ge=0,ve=[],Ee=[],Te=0,je=[],ze=[],Je=!1,tt=Ee;v.__private__.setCustomOutputDestination=function(A){Je=!0,tt=A};var Me=function(A){Je||(tt=A)};v.__private__.resetCustomOutputDestination=function(){Je=!1,tt=Ee};var fe=v.__private__.out=function(A){return A=A.toString(),Te+=A.length+1,tt.push(A),tt},Xt=v.__private__.write=function(A){return fe(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},Pt=v.__private__.getArrayBuffer=function(A){for(var H=A.length,de=new ArrayBuffer(H),ye=new Uint8Array(de);H--;)ye[H]=A.charCodeAt(H);return de},bt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return bt};var Ke=t.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(A){return Ke=$===z?A/kt:A,this};var ct,nt=v.__private__.getFontSize=v.getFontSize=function(){return $===V?Ke:Ke*kt},$t=t.R2L||!1;v.__private__.setR2L=v.setR2L=function(A){return $t=A,this},v.__private__.getR2L=v.getR2L=function(){return $t};var At,fn=v.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))ct=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');ct=A}else ct=parseInt(A,10)};v.__private__.getZoomMode=function(){return ct};var Bt,vt=v.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');At=A};v.__private__.getPageMode=function(){return At};var Ht=v.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');Bt=A};v.__private__.getLayoutMode=function(){return Bt},v.__private__.setDisplayMode=v.setDisplayMode=function(A,H,de){return fn(A),Ht(H),vt(de),this};var Dt={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(A){if(Object.keys(Dt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Dt[A]},v.__private__.getDocumentProperties=function(){return Dt},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(A){for(var H in Dt)Dt.hasOwnProperty(H)&&A[H]&&(Dt[H]=A[H]);return this},v.__private__.setDocumentProperty=function(A,H){if(Object.keys(Dt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Dt[A]=H};var Nt,kt,xt,Sn,vn,ht={},zt={},kn=[],Ct={},sn={},Ut={},nr={},Dn=null,pn=0,Mt=[],an=new CN(v),yo=t.hotfixes||[],vr={},Vs={},hi=[],It=function A(H,de,ye,Ne,Ue,$e){if(!(this instanceof A))return new A(H,de,ye,Ne,Ue,$e);isNaN(H)&&(H=1),isNaN(de)&&(de=0),isNaN(ye)&&(ye=0),isNaN(Ne)&&(Ne=1),isNaN(Ue)&&(Ue=0),isNaN($e)&&($e=0),this._matrix=[H,de,ye,Ne,Ue,$e]};Object.defineProperty(It.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(It.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(It.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(It.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(It.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(It.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(It.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(It.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(It.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(It.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(It.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(It.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(It.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(It.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(It.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(It.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),It.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(A)},It.prototype.multiply=function(A){var H=A.sx*this.sx+A.shy*this.shx,de=A.sx*this.shy+A.shy*this.sy,ye=A.shx*this.sx+A.sy*this.shx,Ne=A.shx*this.shy+A.sy*this.sy,Ue=A.tx*this.sx+A.ty*this.shx+this.tx,$e=A.tx*this.shy+A.ty*this.sy+this.ty;return new It(H,de,ye,Ne,Ue,$e)},It.prototype.decompose=function(){var A=this.sx,H=this.shy,de=this.shx,ye=this.sy,Ne=this.tx,Ue=this.ty,$e=Math.sqrt(A*A+H*H),st=(A/=$e)*de+(H/=$e)*ye;de-=A*st,ye-=H*st;var ft=Math.sqrt(de*de+ye*ye);return st/=ft,A*(ye/=ft)<H*(de/=ft)&&(A=-A,H=-H,st=-st,$e=-$e),{scale:new It($e,0,0,ft,0,0),translate:new It(1,0,0,1,Ne,Ue),rotate:new It(A,H,-H,A,0,0),skew:new It(1,0,st,1,0,0)}},It.prototype.toString=function(A){return this.join(" ")},It.prototype.inversed=function(){var A=this.sx,H=this.shy,de=this.shx,ye=this.sy,Ne=this.tx,Ue=this.ty,$e=1/(A*ye-H*de),st=ye*$e,ft=-H*$e,Lt=-de*$e,Vt=A*$e;return new It(st,ft,Lt,Vt,-st*Ne-Lt*Ue,-ft*Ne-Vt*Ue)},It.prototype.applyToPoint=function(A){var H=A.x*this.sx+A.y*this.shx+this.tx,de=A.x*this.shy+A.y*this.sy+this.ty;return new Bs(H,de)},It.prototype.applyToRectangle=function(A){var H=this.applyToPoint(A),de=this.applyToPoint(new Bs(A.x+A.w,A.y+A.h));return new Ho(H.x,H.y,de.x-H.x,de.y-H.y)},It.prototype.clone=function(){var A=this.sx,H=this.shy,de=this.shx,ye=this.sy,Ne=this.tx,Ue=this.ty;return new It(A,H,de,ye,Ne,Ue)},v.Matrix=It;var Vn=v.matrixMult=function(A,H){return H.multiply(A)},hs=new It(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=hs;var xr=function(A,H){if(!sn[A]){var de=(H instanceof Mu?"Sh":"P")+(Object.keys(Ct).length+1).toString(10);H.id=de,sn[A]=de,Ct[de]=H,an.publish("addPattern",H)}};v.ShadingPattern=Mu,v.TilingPattern=Zd,v.addShadingPattern=function(A,H){return T("addShadingPattern()"),xr(A,H),this},v.beginTilingPattern=function(A){T("beginTilingPattern()"),Ci(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},v.endTilingPattern=function(A,H){T("endTilingPattern()"),H.stream=ze[ee].join(`
`),xr(A,H),an.publish("endTilingPattern",H),hi.pop().restore()};var fi,qn=v.__private__.newObject=function(){var A=dr();return Yn(A,!0),A},dr=v.__private__.newObjectDeferred=function(){return ge++,ve[ge]=function(){return Te},ge},Yn=function(A,H){return H=typeof H=="boolean"&&H,ve[A]=Te,H&&fe(A+" 0 obj"),A},vo=v.__private__.newAdditionalObject=function(){var A={objId:dr(),content:""};return je.push(A),A},Oo=dr(),Ui=dr(),Us=v.__private__.decodeColorString=function(A){var H=A.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var de=parseFloat(H[0]);H=[de,de,de,"r"]}for(var ye="#",Ne=0;Ne<3;Ne++)ye+=("0"+Math.floor(255*parseFloat(H[Ne])).toString(16)).slice(-2);return ye},Rr=v.__private__.encodeColorString=function(A){var H;typeof A=="string"&&(A={ch1:A});var de=A.ch1,ye=A.ch2,Ne=A.ch3,Ue=A.ch4,$e=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var st=new QC(de);if(st.ok)de=st.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var ft=parseInt(de.substr(1),16);de=ft>>16&255,ye=ft>>8&255,Ne=255&ft}if(ye===void 0||Ue===void 0&&de===ye&&ye===Ne)H=typeof de=="string"?de+" "+$e[0]:A.precision===2?C(de/255)+" "+$e[0]:L(de/255)+" "+$e[0];else if(Ue===void 0||er(Ue)==="object"){if(Ue&&!isNaN(Ue.a)&&Ue.a===0)return["1.","1.","1.",$e[1]].join(" ");H=typeof de=="string"?[de,ye,Ne,$e[1]].join(" "):A.precision===2?[C(de/255),C(ye/255),C(Ne/255),$e[1]].join(" "):[L(de/255),L(ye/255),L(Ne/255),$e[1]].join(" ")}else H=typeof de=="string"?[de,ye,Ne,Ue,$e[2]].join(" "):A.precision===2?[C(de),C(ye),C(Ne),C(Ue),$e[2]].join(" "):[L(de),L(ye),L(Ne),L(Ue),$e[2]].join(" ");return H},Ai=v.__private__.getFilters=function(){return a},br=v.__private__.putStream=function(A){var H=(A=A||{}).data||"",de=A.filters||Ai(),ye=A.alreadyAppliedFilters||[],Ne=A.addLength1||!1,Ue=H.length,$e=A.objectId,st=function(_r){return _r};if(p!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(st=Un.encryptor($e,0));var ft={};de===!0&&(de=["FlateEncode"]);var Lt=A.additionalKeyValues||[],Vt=(ft=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(H,de):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(ft.data.length!==0&&(Lt.push({key:"Length",value:ft.data.length}),Ne===!0&&Lt.push({key:"Length1",value:Ue})),Vt.length!=0)if(Vt.split("/").length-1==1)Lt.push({key:"Filter",value:Vt});else{Lt.push({key:"Filter",value:"["+Vt+"]"});for(var wn=0;wn<Lt.length;wn+=1)if(Lt[wn].key==="DecodeParms"){for(var Cn=[],fr=0;fr<ft.reverseChain.split("/").length-1;fr+=1)Cn.push("null");Cn.push(Lt[wn].value),Lt[wn].value="["+Cn.join(" ")+"]"}}fe("<<");for(var Bn=0;Bn<Lt.length;Bn++)fe("/"+Lt[Bn].key+" "+Lt[Bn].value);fe(">>"),ft.data.length!==0&&(fe("stream"),fe(st(ft.data)),fe("endstream"))},Fo=v.__private__.putPage=function(A){var H=A.number,de=A.data,ye=A.objId,Ne=A.contentsObjId;Yn(ye,!0),fe("<</Type /Page"),fe("/Parent "+A.rootDictionaryObjId+" 0 R"),fe("/Resources "+A.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(E(A.mediaBox.bottomLeftX))+" "+parseFloat(E(A.mediaBox.bottomLeftY))+" "+E(A.mediaBox.topRightX)+" "+E(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&fe("/CropBox ["+E(A.cropBox.bottomLeftX)+" "+E(A.cropBox.bottomLeftY)+" "+E(A.cropBox.topRightX)+" "+E(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&fe("/BleedBox ["+E(A.bleedBox.bottomLeftX)+" "+E(A.bleedBox.bottomLeftY)+" "+E(A.bleedBox.topRightX)+" "+E(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&fe("/TrimBox ["+E(A.trimBox.bottomLeftX)+" "+E(A.trimBox.bottomLeftY)+" "+E(A.trimBox.topRightX)+" "+E(A.trimBox.topRightY)+"]"),A.artBox!==null&&fe("/ArtBox ["+E(A.artBox.bottomLeftX)+" "+E(A.artBox.bottomLeftY)+" "+E(A.artBox.topRightX)+" "+E(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&fe("/UserUnit "+A.userUnit),an.publish("putPage",{objId:ye,pageContext:Mt[H],pageNumber:H,page:de}),fe("/Contents "+Ne+" 0 R"),fe(">>"),fe("endobj");var Ue=de.join(`
`);return $===z&&(Ue+=`
Q`),Yn(Ne,!0),br({data:Ue,filters:Ai(),objectId:Ne}),fe("endobj"),ye},fs=v.__private__.putPages=function(){var A,H,de=[];for(A=1;A<=pn;A++)Mt[A].objId=dr(),Mt[A].contentsObjId=dr();for(A=1;A<=pn;A++)de.push(Fo({number:A,data:ze[A],objId:Mt[A].objId,contentsObjId:Mt[A].contentsObjId,mediaBox:Mt[A].mediaBox,cropBox:Mt[A].cropBox,bleedBox:Mt[A].bleedBox,trimBox:Mt[A].trimBox,artBox:Mt[A].artBox,userUnit:Mt[A].userUnit,rootDictionaryObjId:Oo,resourceDictionaryObjId:Ui}));Yn(Oo,!0),fe("<</Type /Pages");var ye="/Kids [";for(H=0;H<pn;H++)ye+=de[H]+" 0 R ";fe(ye+"]"),fe("/Count "+pn),fe(">>"),fe("endobj"),an.publish("postPutPages")},Js=function(A){an.publish("putFont",{font:A,out:fe,newObject:qn,putStream:br}),A.isAlreadyPutted!==!0&&(A.objectNumber=qn(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+Gd(A.postScriptName)),fe("/Subtype /Type1"),typeof A.encoding=="string"&&fe("/Encoding /"+A.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},xo=function(A){A.objectNumber=qn();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[E(A.x),E(A.y),E(A.x+A.width),E(A.y+A.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var de=A.pages[1].join(`
`);br({data:de,additionalKeyValues:H,objectId:A.objectNumber}),fe("endobj")},Vo=function(A,H){H||(H=21);var de=qn(),ye=(function($e,st){var ft,Lt=[],Vt=1/(st-1);for(ft=0;ft<1;ft+=Vt)Lt.push(ft);if(Lt.push(1),$e[0].offset!=0){var wn={offset:0,color:$e[0].color};$e.unshift(wn)}if($e[$e.length-1].offset!=1){var Cn={offset:1,color:$e[$e.length-1].color};$e.push(Cn)}for(var fr="",Bn=0,_r=0;_r<Lt.length;_r++){for(ft=Lt[_r];ft>$e[Bn+1].offset;)Bn++;var ar=$e[Bn].offset,Ar=(ft-ar)/($e[Bn+1].offset-ar),rr=$e[Bn].color,Ri=$e[Bn+1].color;fr+=he(Math.round((1-Ar)*rr[0]+Ar*Ri[0]).toString(16))+he(Math.round((1-Ar)*rr[1]+Ar*Ri[1]).toString(16))+he(Math.round((1-Ar)*rr[2]+Ar*Ri[2]).toString(16))}return fr.trim()})(A.colors,H),Ne=[];Ne.push({key:"FunctionType",value:"0"}),Ne.push({key:"Domain",value:"[0.0 1.0]"}),Ne.push({key:"Size",value:"["+H+"]"}),Ne.push({key:"BitsPerSample",value:"8"}),Ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),br({data:ye,additionalKeyValues:Ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),fe("endobj"),A.objectNumber=qn(),fe("<< /ShadingType "+A.type),fe("/ColorSpace /DeviceRGB");var Ue="/Coords ["+E(parseFloat(A.coords[0]))+" "+E(parseFloat(A.coords[1]))+" ";A.type===2?Ue+=E(parseFloat(A.coords[2]))+" "+E(parseFloat(A.coords[3])):Ue+=E(parseFloat(A.coords[2]))+" "+E(parseFloat(A.coords[3]))+" "+E(parseFloat(A.coords[4]))+" "+E(parseFloat(A.coords[5])),fe(Ue+="]"),A.matrix&&fe("/Matrix ["+A.matrix.toString()+"]"),fe("/Function "+de+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},ha=function(A,H){var de=dr(),ye=qn();H.push({resourcesOid:de,objectOid:ye}),A.objectNumber=ye;var Ne=[];Ne.push({key:"Type",value:"/Pattern"}),Ne.push({key:"PatternType",value:"1"}),Ne.push({key:"PaintType",value:"1"}),Ne.push({key:"TilingType",value:"1"}),Ne.push({key:"BBox",value:"["+A.boundingBox.map(E).join(" ")+"]"}),Ne.push({key:"XStep",value:E(A.xStep)}),Ne.push({key:"YStep",value:E(A.yStep)}),Ne.push({key:"Resources",value:de+" 0 R"}),A.matrix&&Ne.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),br({data:A.stream,additionalKeyValues:Ne,objectId:A.objectNumber}),fe("endobj")},uu=function(A){for(var H in A.objectNumber=qn(),fe("<<"),A)switch(H){case"opacity":fe("/ca "+C(A[H]));break;case"stroke-opacity":fe("/CA "+C(A[H]))}fe(">>"),fe("endobj")},Mn=function(A){Yn(A.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in fe("/Font <<"),ht)ht.hasOwnProperty(H)&&(y===!1||y===!0&&w.hasOwnProperty(H))&&fe("/"+H+" "+ht[H].objectNumber+" 0 R");fe(">>")})(),(function(){if(Object.keys(Ct).length>0){for(var H in fe("/Shading <<"),Ct)Ct.hasOwnProperty(H)&&Ct[H]instanceof Mu&&Ct[H].objectNumber>=0&&fe("/"+H+" "+Ct[H].objectNumber+" 0 R");an.publish("putShadingPatternDict"),fe(">>")}})(),(function(H){if(Object.keys(Ct).length>0){for(var de in fe("/Pattern <<"),Ct)Ct.hasOwnProperty(de)&&Ct[de]instanceof v.TilingPattern&&Ct[de].objectNumber>=0&&Ct[de].objectNumber<H&&fe("/"+de+" "+Ct[de].objectNumber+" 0 R");an.publish("putTilingPatternDict"),fe(">>")}})(A.objectOid),(function(){if(Object.keys(Ut).length>0){var H;for(H in fe("/ExtGState <<"),Ut)Ut.hasOwnProperty(H)&&Ut[H].objectNumber>=0&&fe("/"+H+" "+Ut[H].objectNumber+" 0 R");an.publish("putGStateDict"),fe(">>")}})(),(function(){for(var H in fe("/XObject <<"),vr)vr.hasOwnProperty(H)&&vr[H].objectNumber>=0&&fe("/"+H+" "+vr[H].objectNumber+" 0 R");an.publish("putXobjectDict"),fe(">>")})(),fe(">>"),fe("endobj")},Al=function(A){zt[A.fontName]=zt[A.fontName]||{},zt[A.fontName][A.fontStyle]=A.id},Uo=function(A,H,de,ye,Ne){var Ue={id:"F"+(Object.keys(ht).length+1).toString(10),postScriptName:A,fontName:H,fontStyle:de,encoding:ye,isStandardFont:Ne||!1,metadata:{}};return an.publish("addFont",{font:Ue,instance:this}),ht[Ue.id]=Ue,Al(Ue),Ue.id},ei=v.__private__.pdfEscape=v.pdfEscape=function(A,H){return(function(de,ye){var Ne,Ue,$e,st,ft,Lt,Vt,wn,Cn;if($e=(ye=ye||{}).sourceEncoding||"Unicode",ft=ye.outputEncoding,(ye.autoencode||ft)&&ht[Nt].metadata&&ht[Nt].metadata[$e]&&ht[Nt].metadata[$e].encoding&&(st=ht[Nt].metadata[$e].encoding,!ft&&ht[Nt].encoding&&(ft=ht[Nt].encoding),!ft&&st.codePages&&(ft=st.codePages[0]),typeof ft=="string"&&(ft=st[ft]),ft)){for(Vt=!1,Lt=[],Ne=0,Ue=de.length;Ne<Ue;Ne++)(wn=ft[de.charCodeAt(Ne)])?Lt.push(String.fromCharCode(wn)):Lt.push(de[Ne]),Lt[Ne].charCodeAt(0)>>8&&(Vt=!0);de=Lt.join("")}for(Ne=de.length;Vt===void 0&&Ne!==0;)de.charCodeAt(Ne-1)>>8&&(Vt=!0),Ne--;if(!Vt)return de;for(Lt=ye.noBOM?[]:[254,255],Ne=0,Ue=de.length;Ne<Ue;Ne++){if((Cn=(wn=de.charCodeAt(Ne))>>8)>>8)throw new Error("Character at position "+Ne+" of string '"+de+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Lt.push(Cn),Lt.push(wn-(Cn<<8))}return String.fromCharCode.apply(void 0,Lt)})(A,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bi=v.__private__.beginPage=function(A){ze[++pn]=[],Mt[pn]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},Bo(pn),Me(ze[ee])},Ua=function(A,H){var de,ye,Ne;switch(n=H||n,typeof A=="string"&&(de=I(A.toLowerCase()),Array.isArray(de)&&(ye=de[0],Ne=de[1])),Array.isArray(A)&&(ye=A[0]*kt,Ne=A[1]*kt),isNaN(ye)&&(ye=i[0],Ne=i[1]),(ye>14400||Ne>14400)&&(or.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),Ne=Math.min(14400,Ne)),i=[ye,Ne],n.substr(0,1)){case"l":Ne>ye&&(i=[Ne,ye]);break;case"p":ye>Ne&&(i=[Ne,ye])}Bi(i),gs(es),fe(eo),$n!==0&&fe($n+" J"),Tl!==0&&fe(Tl+" j"),an.publish("addPage",{pageNumber:pn})},Ba=function(A){A>0&&A<=pn&&(ze.splice(A,1),Mt.splice(A,1),pn--,ee>pn&&(ee=pn),this.setPage(ee))},Bo=function(A){A>0&&A<=pn&&(ee=A)},zi=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return ze.length-1},Nl=function(A,H,de){var ye,Ne=void 0;return de=de||{},A=A!==void 0?A:ht[Nt].fontName,H=H!==void 0?H:ht[Nt].fontStyle,ye=A.toLowerCase(),zt[ye]!==void 0&&zt[ye][H]!==void 0?Ne=zt[ye][H]:zt[A]!==void 0&&zt[A][H]!==void 0?Ne=zt[A][H]:de.disableWarning===!1&&or.warn("Unable to look up font label for font '"+A+"', '"+H+"'. Refer to getFontList() for available fonts."),Ne||de.noFallback||(Ne=zt.times[H])==null&&(Ne=zt.times.normal),Ne},Br=v.__private__.putInfo=function(){var A=qn(),H=function(ye){return ye};for(var de in p!==null&&(H=Un.encryptor(A,0)),fe("<<"),fe("/Producer ("+ei(H("jsPDF "+Tt.version))+")"),Dt)Dt.hasOwnProperty(de)&&Dt[de]&&fe("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+ei(H(Dt[de]))+")");fe("/CreationDate ("+ei(H(se))+")"),fe(">>"),fe("endobj")},El=v.__private__.putCatalog=function(A){var H=(A=A||{}).rootDictionaryObjId||Oo;switch(qn(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+H+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+ct;de.substr(de.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+C(ct)+"]")}switch(Bt||(Bt="continuous"),Bt){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}At&&fe("/PageMode /"+At),an.publish("putCatalog"),fe(">>"),fe("endobj")},hr=v.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ge+1)),fe("/Root "+ge+" 0 R"),fe("/Info "+(ge-1)+" 0 R"),p!==null&&fe("/Encrypt "+Un.oid+" 0 R"),fe("/ID [ <"+oe+"> <"+oe+"> ]"),fe(">>")},Sl=v.__private__.putHeader=function(){fe("%PDF-"+j),fe("%")},fa=v.__private__.putXRef=function(){var A="0000000000";fe("xref"),fe("0 "+(ge+1)),fe("0000000000 65535 f ");for(var H=1;H<=ge;H++)typeof ve[H]=="function"?fe((A+ve[H]()).slice(-10)+" 00000 n "):ve[H]!==void 0?fe((A+ve[H]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},ps=v.__private__.buildDocument=function(){var A;ge=0,Te=0,Ee=[],ve=[],je=[],Oo=dr(),Ui=dr(),Me(Ee),an.publish("buildDocument"),Sl(),fs(),(function(){an.publish("putAdditionalObjects");for(var de=0;de<je.length;de++){var ye=je[de];Yn(ye.objId,!0),fe(ye.content),fe("endobj")}an.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var de in ht)ht.hasOwnProperty(de)&&(y===!1||y===!0&&w.hasOwnProperty(de))&&Js(ht[de])})(),(function(){var de;for(de in Ut)Ut.hasOwnProperty(de)&&uu(Ut[de])})(),(function(){for(var de in vr)vr.hasOwnProperty(de)&&xo(vr[de])})(),(function(de){var ye;for(ye in Ct)Ct.hasOwnProperty(ye)&&(Ct[ye]instanceof Mu?Vo(Ct[ye]):Ct[ye]instanceof Zd&&ha(Ct[ye],de))})(A),an.publish("putResources"),A.forEach(Mn),Mn({resourcesOid:Ui,objectOid:Number.MAX_SAFE_INTEGER}),an.publish("postPutResources"),p!==null&&(Un.oid=qn(),fe("<<"),fe("/Filter /Standard"),fe("/V "+Un.v),fe("/R "+Un.r),fe("/U <"+Un.toHexString(Un.U)+">"),fe("/O <"+Un.toHexString(Un.O)+">"),fe("/P "+Un.P),fe(">>"),fe("endobj")),Br(),El();var H=Te;return fa(),hr(),fe("startxref"),fe(""+H),fe("%%EOF"),Me(ze[ee]),Ee.join(`
`)},ms=v.__private__.getBlob=function(A){return new Blob([Pt(A)],{type:"application/pdf"})},Ni=v.output=v.__private__.output=(fi=function(A,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",A){case void 0:return ps();case"save":v.save(H.filename);break;case"arraybuffer":return Pt(ps());case"blob":return ms(ps());case"bloburi":case"bloburl":if(Kt.URL!==void 0&&typeof Kt.URL.createObjectURL=="function")return Kt.URL&&Kt.URL.createObjectURL(ms(ps()))||void 0;or.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",ye=ps();try{de=SN(ye)}catch{de=SN(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+H.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var Ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ue=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ne=H.pdfObjectUrl,Ue="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ne+'"'+Ue+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",st=Kt.open();return st!==null&&st.document.write($e),st}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Lt=Kt.open();if(Lt!==null){Lt.document.write(ft);var Vt=this;Lt.document.documentElement.querySelector("#pdfViewer").onload=function(){Lt.document.title=H.filename,Lt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Vt.output("bloburl"))}}return Lt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Cn=Kt.open();if(Cn!==null&&(Cn.document.write(wn),Cn.document.title=H.filename),Cn||typeof safari>"u")return Cn;break;case"datauri":case"dataurl":return Kt.document.location.href=this.output("datauristring",H);default:return null}},fi.foo=function(){try{return fi.apply(this,arguments)}catch(de){var A=de.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var H="Error in function "+A.split(`
`)[0].split("<")[0]+": "+de.message;if(!Kt.console)throw new Error(H);Kt.console.error(H,de),Kt.alert&&alert(H)}},fi.foo.bar=fi,fi.foo),pa=function(A){return Array.isArray(yo)===!0&&yo.indexOf(A)>-1};switch(r){case"pt":kt=1;break;case"mm":kt=72/25.4;break;case"cm":kt=72/2.54;break;case"in":kt=72;break;case"px":kt=pa("px_scaling")==1?.75:96/72;break;case"pc":case"em":kt=12;break;case"ex":kt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);kt=r}var Un=null;ae(),Y();var Ei=v.__private__.getPageInfo=v.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[A].objId,pageNumber:A,pageContext:Mt[A]}},ma=v.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Mt)if(Mt[H].objId===A)break;return Ei(H)},zo=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:Mt[ee].objId,pageNumber:ee,pageContext:Mt[ee]}};v.addPage=function(){return Ua.apply(this,arguments),this},v.setPage=function(){return Bo.apply(this,arguments),Me.call(this,ze[ee]),this},v.insertPage=function(A){return this.addPage(),this.movePage(ee,A),this},v.movePage=function(A,H){var de,ye;if(A>H){de=ze[A],ye=Mt[A];for(var Ne=A;Ne>H;Ne--)ze[Ne]=ze[Ne-1],Mt[Ne]=Mt[Ne-1];ze[H]=de,Mt[H]=ye,this.setPage(H)}else if(A<H){de=ze[A],ye=Mt[A];for(var Ue=A;Ue<H;Ue++)ze[Ue]=ze[Ue+1],Mt[Ue]=Mt[Ue+1];ze[H]=de,Mt[H]=ye,this.setPage(H)}return this},v.deletePage=function(){return Ba.apply(this,arguments),this},v.__private__.text=v.text=function(A,H,de,ye,Ne){var Ue,$e,st,ft,Lt,Vt,wn,Cn,fr,Bn=(ye=ye||{}).scope||this;if(typeof A=="number"&&typeof H=="number"&&(typeof de=="string"||Array.isArray(de))){var _r=de;de=H,H=A,A=_r}if(arguments[3]instanceof It==0?(st=arguments[4],ft=arguments[5],er(wn=arguments[3])==="object"&&wn!==null||(typeof st=="string"&&(ft=st,st=null),typeof wn=="string"&&(ft=wn,wn=null),typeof wn=="number"&&(st=wn,wn=null),ye={flags:wn,angle:st,align:ft})):(T("The transform parameter of text() with a Matrix value"),fr=Ne),isNaN(H)||isNaN(de)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return Bn;var ar,Ar="",rr=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:Ti,Ri=Bn.internal.scaleFactor;function kl(In){return In=In.split("	").join(Array(ye.TabLen||9).join(" ")),ei(In,wn)}function ts(In){for(var Wn,Er=In.concat(),qr=[],So=Er.length;So--;)typeof(Wn=Er.shift())=="string"?qr.push(Wn):Array.isArray(In)&&(Wn.length===1||Wn[1]===void 0&&Wn[2]===void 0)?qr.push(Wn[0]):qr.push([Wn[0],Wn[1],Wn[2]]);return qr}function g(In,Wn){var Er;if(typeof In=="string")Er=Wn(In)[0];else if(Array.isArray(In)){for(var qr,So,hu=In.concat(),gc=[],wa=hu.length;wa--;)typeof(qr=hu.shift())=="string"?gc.push(Wn(qr)[0]):Array.isArray(qr)&&typeof qr[0]=="string"&&(So=Wn(qr[0],qr[1],qr[2]),gc.push([So[0],So[1],So[2]]));Er=gc}return Er}var P=!1,B=!0;if(typeof A=="string")P=!0;else if(Array.isArray(A)){var re=A.concat();$e=[];for(var Se,Le=re.length;Le--;)(typeof(Se=re.shift())!="string"||Array.isArray(Se)&&typeof Se[0]!="string")&&(B=!1);P=B}if(P===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var Xe=Ke/Bn.internal.scaleFactor,xn=Xe*(rr-1);switch(ye.baseline){case"bottom":de-=xn;break;case"top":de+=Xe-xn;break;case"hanging":de+=Xe-2*xn;break;case"middle":de+=Xe/2-xn}if((Vt=ye.maxWidth||0)>0&&(typeof A=="string"?A=Bn.splitTextToSize(A,Vt):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(In,Wn){return In.concat(Bn.splitTextToSize(Wn,Vt))},[]))),Ue={text:A,x:H,y:de,options:ye,mutex:{pdfEscape:ei,activeFontKey:Nt,fonts:ht,activeFontSize:Ke}},an.publish("preProcessText",Ue),A=Ue.text,st=(ye=Ue.options).angle,fr instanceof It==0&&st&&typeof st=="number"){st*=Math.PI/180,ye.rotationDirection===0&&(st=-st),$===z&&(st=-st);var pr=Math.cos(st),un=Math.sin(st);fr=new It(pr,un,-un,pr,0,0)}else st&&st instanceof It&&(fr=st);$!==z||fr||(fr=hs),(Lt=ye.charSpace||ys)!==void 0&&(Ar+=E(D(Lt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Cn=ye.horizontalScale)!==void 0&&(Ar+=E(100*Cn)+` Tz
`),ye.lang;var ln=-1,Hn=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,ji=Bn.internal.getCurrentPageInfo().pageContext;switch(Hn){case 0:case!1:case"fill":ln=0;break;case 1:case!0:case"stroke":ln=1;break;case 2:case"fillThenStroke":ln=2;break;case 3:case"invisible":ln=3;break;case 4:case"fillAndAddForClipping":ln=4;break;case 5:case"strokeAndAddPathForClipping":ln=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ln=6;break;case 7:case"addToPathForClipping":ln=7}var $i=ji.usedRenderingMode!==void 0?ji.usedRenderingMode:-1;ln!==-1?Ar+=ln+` Tr
`:$i!==-1&&(Ar+=`0 Tr
`),ln!==-1&&(ji.usedRenderingMode=ln),ft=ye.align||"left";var mi,no=Ke*rr,hc=Bn.internal.pageSize.getWidth(),fc=ht[Nt];Lt=ye.charSpace||ys,Vt=ye.maxWidth||0,wn=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var ya=[],ro=function(In){return Bn.getStringUnitWidth(In,{font:fc,charSpace:Lt,fontSize:Ke,doKerning:!1})*Ke/Ri};if(Object.prototype.toString.call(A)==="[object Array]"){var zs;$e=ts(A),ft!=="left"&&(mi=$e.map(ro));var qs,Ka=0;if(ft==="right"){H-=mi[0],A=[],Le=$e.length;for(var Go=0;Go<Le;Go++)Go===0?(qs=wr(H),zs=_o(de)):(qs=D(Ka-mi[Go]),zs=-no),A.push([$e[Go],qs,zs]),Ka=mi[Go]}else if(ft==="center"){H-=mi[0]/2,A=[],Le=$e.length;for(var va=0;va<Le;va++)va===0?(qs=wr(H),zs=_o(de)):(qs=D((Ka-mi[va])/2),zs=-no),A.push([$e[va],qs,zs]),Ka=mi[va]}else if(ft==="left"){A=[],Le=$e.length;for(var xa=0;xa<Le;xa++)A.push($e[xa])}else if(ft==="justify"&&fc.encoding==="Identity-H"){A=[],Le=$e.length,Vt=Vt!==0?Vt:hc;for(var Ko=0,jr=0;jr<Le;jr++)if(zs=jr===0?_o(de):-no,qs=jr===0?wr(H):Ko,jr<Le-1){var Cl=D((Vt-mi[jr])/($e[jr].split(" ").length-1)),Yo=$e[jr].split(" ");A.push([Yo[0]+" ",qs,zs]),Ko=0;for(var Eo=1;Eo<Yo.length;Eo++){var Il=(ro(Yo[Eo-1]+" "+Yo[Eo])-ro(Yo[Eo]))*Ri+Cl;Eo==Yo.length-1?A.push([Yo[Eo],Il,0]):A.push([Yo[Eo]+" ",Il,0]),Ko-=Il}}else A.push([$e[jr],qs,zs]);A.push(["",Ko,0])}else{if(ft!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Le=$e.length,Vt=Vt!==0?Vt:hc,jr=0;jr<Le;jr++){zs=jr===0?_o(de):-no,qs=jr===0?wr(H):0;var Pl=$e[jr].split(" ").length-1,pc=Pl>0?(Vt-mi[jr])/Pl:0;jr<Le-1?ya.push(E(D(pc))):ya.push(0),A.push([$e[jr],qs,zs])}}}(typeof ye.R2L=="boolean"?ye.R2L:$t)===!0&&(A=g(A,function(In,Wn,Er){return[In.split("").reverse().join(""),Wn,Er]})),Ue={text:A,x:H,y:de,options:ye,mutex:{pdfEscape:ei,activeFontKey:Nt,fonts:ht,activeFontSize:Ke}},an.publish("postProcessText",Ue),A=Ue.text,ar=Ue.mutex.isHex||!1;var mc=ht[Nt].encoding;mc!=="WinAnsiEncoding"&&mc!=="StandardEncoding"||(A=g(A,function(In,Wn,Er){return[kl(In),Wn,Er]})),$e=ts(A),A=[];for(var ba,Ya,Qa,Rl=Array.isArray($e[0])?1:0,Xa="",jl=function(In,Wn,Er){var qr="";return Er instanceof It?(Er=typeof ye.angle=="number"?Vn(Er,new It(1,0,0,1,In,Wn)):Vn(new It(1,0,0,1,In,Wn),Er),$===z&&(Er=Vn(new It(1,0,0,-1,0,0),Er)),qr=Er.join(" ")+` Tm
`):qr=E(In)+" "+E(Wn)+` Td
`,qr},Nr=0;Nr<$e.length;Nr++){switch(Xa="",Rl){case 1:Qa=(ar?"<":"(")+$e[Nr][0]+(ar?">":")"),ba=parseFloat($e[Nr][1]),Ya=parseFloat($e[Nr][2]);break;case 0:Qa=(ar?"<":"(")+$e[Nr]+(ar?">":")"),ba=wr(H),Ya=_o(de)}ya!==void 0&&ya[Nr]!==void 0&&(Xa=ya[Nr]+` Tw
`),Nr===0?A.push(Xa+jl(ba,Ya,fr)+Qa):Rl===0?A.push(Xa+Qa):Rl===1&&A.push(Xa+jl(ba,Ya,fr)+Qa)}A=Rl===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var xs=`BT
/`;return xs+=Nt+" "+Ke+` Tf
`,xs+=E(Ke*rr)+` TL
`,xs+=ki+`
`,xs+=Ar,xs+=A,fe(xs+="ET"),w[Nt]=!0,Bn};var qo=v.__private__.clip=v.clip=function(A){return fe(A==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return qo("evenodd")},v.__private__.discardPath=v.discardPath=function(){return fe("n"),this};var mn=v.__private__.isValidStyle=function(A){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(H=!0),H};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(A){return mn(A)&&(h=A),this};var bo=v.__private__.getStyle=v.getStyle=function(A){var H=h;switch(A){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=A}return H},cn=v.close=function(){return fe("h"),this};v.stroke=function(){return fe("S"),this},v.fill=function(A){return Zi("f",A),this},v.fillEvenOdd=function(A){return Zi("f*",A),this},v.fillStroke=function(A){return Zi("B",A),this},v.fillStrokeEvenOdd=function(A){return Zi("B*",A),this};var Zi=function(A,H){er(H)==="object"?lc(H,A):fe(A)},za=function(A){A===null||$===z&&A===void 0||(A=bo(A),fe(A))};function qa(A,H,de,ye,Ne){var Ue=new Zd(H||this.boundingBox,de||this.xStep,ye||this.yStep,this.gState,Ne||this.matrix);Ue.stream=this.stream;var $e=A+"$$"+this.cloneIndex+++"$$";return xr($e,Ue),Ue}var lc=function(A,H){var de=sn[A.key],ye=Ct[de];if(ye instanceof Mu)fe("q"),fe(cc(H)),ye.gState&&v.setGState(ye.gState),fe(A.matrix.toString()+" cm"),fe("/"+de+" sh"),fe("Q");else if(ye instanceof Zd){var Ne=new It(1,0,0,-1,0,Pi());A.matrix&&(Ne=Ne.multiply(A.matrix||hs),de=qa.call(ye,A.key,A.boundingBox,A.xStep,A.yStep,Ne).id),fe("q"),fe("/Pattern cs"),fe("/"+de+" scn"),ye.gState&&v.setGState(ye.gState),fe(H),fe("Q")}},cc=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},$a=v.moveTo=function(A,H){return fe(E(D(A))+" "+E(ne(H))+" m"),this},wo=v.lineTo=function(A,H){return fe(E(D(A))+" "+E(ne(H))+" l"),this},Si=v.curveTo=function(A,H,de,ye,Ne,Ue){return fe([E(D(A)),E(ne(H)),E(D(de)),E(ne(ye)),E(D(Ne)),E(ne(Ue)),"c"].join(" ")),this};v.__private__.line=v.line=function(A,H,de,ye,Ne){if(isNaN(A)||isNaN(H)||isNaN(de)||isNaN(ye)||!mn(Ne))throw new Error("Invalid arguments passed to jsPDF.line");return $===V?this.lines([[de-A,ye-H]],A,H,[1,1],Ne||"S"):this.lines([[de-A,ye-H]],A,H,[1,1]).stroke()},v.__private__.lines=v.lines=function(A,H,de,ye,Ne,Ue){var $e,st,ft,Lt,Vt,wn,Cn,fr,Bn,_r,ar,Ar;if(typeof A=="number"&&(Ar=de,de=H,H=A,A=Ar),ye=ye||[1,1],Ue=Ue||!1,isNaN(H)||isNaN(de)||!Array.isArray(A)||!Array.isArray(ye)||!mn(Ne)||typeof Ue!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($a(H,de),$e=ye[0],st=ye[1],Lt=A.length,_r=H,ar=de,ft=0;ft<Lt;ft++)(Vt=A[ft]).length===2?(_r=Vt[0]*$e+_r,ar=Vt[1]*st+ar,wo(_r,ar)):(wn=Vt[0]*$e+_r,Cn=Vt[1]*st+ar,fr=Vt[2]*$e+_r,Bn=Vt[3]*st+ar,_r=Vt[4]*$e+_r,ar=Vt[5]*st+ar,Si(wn,Cn,fr,Bn,_r,ar));return Ue&&cn(),za(Ne),this},v.path=function(A){for(var H=0;H<A.length;H++){var de=A[H],ye=de.c;switch(de.op){case"m":$a(ye[0],ye[1]);break;case"l":wo(ye[0],ye[1]);break;case"c":Si.apply(this,ye);break;case"h":cn()}}return this},v.__private__.rect=v.rect=function(A,H,de,ye,Ne){if(isNaN(A)||isNaN(H)||isNaN(de)||isNaN(ye)||!mn(Ne))throw new Error("Invalid arguments passed to jsPDF.rect");return $===V&&(ye=-ye),fe([E(D(A)),E(ne(H)),E(D(de)),E(D(ye)),"re"].join(" ")),za(Ne),this},v.__private__.triangle=v.triangle=function(A,H,de,ye,Ne,Ue,$e){if(isNaN(A)||isNaN(H)||isNaN(de)||isNaN(ye)||isNaN(Ne)||isNaN(Ue)||!mn($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-A,ye-H],[Ne-de,Ue-ye],[A-Ne,H-Ue]],A,H,[1,1],$e,!0),this},v.__private__.roundedRect=v.roundedRect=function(A,H,de,ye,Ne,Ue,$e){if(isNaN(A)||isNaN(H)||isNaN(de)||isNaN(ye)||isNaN(Ne)||isNaN(Ue)||!mn($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var st=4/3*(Math.SQRT2-1);return Ne=Math.min(Ne,.5*de),Ue=Math.min(Ue,.5*ye),this.lines([[de-2*Ne,0],[Ne*st,0,Ne,Ue-Ue*st,Ne,Ue],[0,ye-2*Ue],[0,Ue*st,-Ne*st,Ue,-Ne,Ue],[2*Ne-de,0],[-Ne*st,0,-Ne,-Ue*st,-Ne,-Ue],[0,2*Ue-ye],[0,-Ue*st,Ne*st,-Ue,Ne,-Ue]],A+Ne,H,[1,1],$e,!0),this},v.__private__.ellipse=v.ellipse=function(A,H,de,ye,Ne){if(isNaN(A)||isNaN(H)||isNaN(de)||isNaN(ye)||!mn(Ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ue=4/3*(Math.SQRT2-1)*de,$e=4/3*(Math.SQRT2-1)*ye;return $a(A+de,H),Si(A+de,H-$e,A+Ue,H-ye,A,H-ye),Si(A-Ue,H-ye,A-de,H-$e,A-de,H),Si(A-de,H+$e,A-Ue,H+ye,A,H+ye),Si(A+Ue,H+ye,A+de,H+$e,A+de,H),za(Ne),this},v.__private__.circle=v.circle=function(A,H,de,ye){if(isNaN(A)||isNaN(H)||isNaN(de)||!mn(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,H,de,de,ye)},v.setFont=function(A,H,de){return de&&(H=q(H,de)),Nt=Nl(A,H,{disableWarning:!1}),this};var ti=v.__private__.getFont=v.getFont=function(){return ht[Nl.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var A,H,de={};for(A in zt)if(zt.hasOwnProperty(A))for(H in de[A]=[],zt[A])zt[A].hasOwnProperty(H)&&de[A].push(H);return de},v.addFont=function(A,H,de,ye,Ne){var Ue=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ue.indexOf(arguments[3])!==-1?Ne=arguments[3]:arguments[3]&&Ue.indexOf(arguments[3])==-1&&(de=q(de,ye)),Uo.call(this,A,H,de,Ne=Ne||"Identity-H")};var Ti,es=t.lineWidth||.200025,Rt=v.__private__.getLineWidth=v.getLineWidth=function(){return es},gs=v.__private__.setLineWidth=v.setLineWidth=function(A){return es=A,fe(E(D(A))+" w"),this};v.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(A,H){if(A=A||[],H=H||0,isNaN(H)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(de){return E(D(de))}).join(" "),H=E(D(H)),fe("["+A+"] "+H+" d"),this};var Zs=v.__private__.getLineHeight=v.getLineHeight=function(){return Ke*Ti};v.__private__.getLineHeight=v.getLineHeight=function(){return Ke*Ti};var du=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(Ti=A),this},uc=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return Ti};du(t.lineHeight);var wr=v.__private__.getHorizontalCoordinate=function(A){return D(A)},_o=v.__private__.getVerticalCoordinate=function(A){return $===z?A:Mt[ee].mediaBox.topRightY-Mt[ee].mediaBox.bottomLeftY-D(A)},dc=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(A){return E(wr(A))},Ao=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(A){return E(_o(A))},eo=t.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Us(eo)},v.__private__.setStrokeColor=v.setDrawColor=function(A,H,de,ye){return eo=Rr({ch1:A,ch2:H,ch3:de,ch4:ye,pdfColorType:"draw",precision:2}),fe(eo),this};var Ha=t.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Us(Ha)},v.__private__.setFillColor=v.setFillColor=function(A,H,de,ye){return Ha=Rr({ch1:A,ch2:H,ch3:de,ch4:ye,pdfColorType:"fill",precision:2}),fe(Ha),this};var ki=t.textColor||"0 g",qi=v.__private__.getTextColor=v.getTextColor=function(){return Us(ki)};v.__private__.setTextColor=v.setTextColor=function(A,H,de,ye){return ki=Rr({ch1:A,ch2:H,ch3:de,ch4:ye,pdfColorType:"text",precision:3}),this};var ys=t.charSpace,$o=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(ys||0)};v.__private__.setCharSpace=v.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ys=A,this};var $n=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(A){var H=v.CapJoinStyles[A];if(H===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $n=H,fe(H+" J"),this};var Tl=0;v.__private__.setLineJoin=v.setLineJoin=function(A){var H=v.CapJoinStyles[A];if(H===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tl=H,fe(H+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(E(D(A))+" M"),this},v.GState=Fg,v.setGState=function(A){(A=typeof A=="string"?Ut[nr[A]]:No(null,A)).equals(Dn)||(fe("/"+A.id+" gs"),Dn=A)};var No=function(A,H){if(!A||!nr[A]){var de=!1;for(var ye in Ut)if(Ut.hasOwnProperty(ye)&&Ut[ye].equals(H)){de=!0;break}if(de)H=Ut[ye];else{var Ne="GS"+(Object.keys(Ut).length+1).toString(10);Ut[Ne]=H,H.id=Ne}return A&&(nr[A]=H.id),an.publish("addGState",H),H}};v.addGState=function(A,H){return No(A,H),this},v.saveGraphicsState=function(){return fe("q"),kn.push({key:Nt,size:Ke,color:ki}),this},v.restoreGraphicsState=function(){fe("Q");var A=kn.pop();return Nt=A.key,Ke=A.size,ki=A.color,Dn=null,this},v.setCurrentTransformationMatrix=function(A){return fe(A.toString()+" cm"),this},v.comment=function(A){return fe("#"+A),this};var Bs=function(A,H){var de=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(Ue){isNaN(Ue)||(de=parseFloat(Ue))}});var ye=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(Ue){isNaN(Ue)||(ye=parseFloat(Ue))}});var Ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ne},set:function(Ue){Ne=Ue.toString()}}),this},Ho=function(A,H,de,ye){Bs.call(this,A,H),this.type="rect";var Ne=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ne},set:function($e){isNaN($e)||(Ne=parseFloat($e))}});var Ue=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ue},set:function($e){isNaN($e)||(Ue=parseFloat($e))}}),this},Wo=function(){this.page=pn,this.currentPage=ee,this.pages=ze.slice(0),this.pagesContext=Mt.slice(0),this.x=xt,this.y=Sn,this.matrix=vn,this.width=Ii(ee),this.height=vs(ee),this.outputDestination=tt,this.id="",this.objectNumber=-1};Wo.prototype.restore=function(){pn=this.page,ee=this.currentPage,Mt=this.pagesContext,ze=this.pages,xt=this.x,Sn=this.y,vn=this.matrix,Wa(ee,this.width),pi(ee,this.height),tt=this.outputDestination};var Ci=function(A,H,de,ye,Ne){hi.push(new Wo),pn=ee=0,ze=[],xt=A,Sn=H,vn=Ne,Bi([de,ye])};for(var to in v.beginFormObject=function(A,H,de,ye,Ne){return Ci(A,H,de,ye,Ne),this},v.endFormObject=function(A){return(function(H){if(Vs[H])hi.pop().restore();else{var de=new Wo,ye="Xo"+(Object.keys(vr).length+1).toString(10);de.id=ye,Vs[H]=ye,vr[ye]=de,an.publish("addFormObject",de),hi.pop().restore()}})(A),this},v.doFormObject=function(A,H){var de=vr[Vs[A]];return fe("q"),fe(H.toString()+" cm"),fe("/"+de.id+" Do"),fe("Q"),this},v.getFormObject=function(A){var H=vr[Vs[A]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},v.save=function(A,H){return A=A||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Du(ms(ps()),A),typeof Du.unload=="function"&&Kt.setTimeout&&setTimeout(Du.unload,911),this):new Promise(function(de,ye){try{var Ne=Du(ms(ps()),A);typeof Du.unload=="function"&&Kt.setTimeout&&setTimeout(Du.unload,911),de(Ne)}catch(Ue){ye(Ue.message)}})},Tt.API)Tt.API.hasOwnProperty(to)&&(to==="events"&&Tt.API.events.length?(function(A,H){var de,ye,Ne;for(Ne=H.length-1;Ne!==-1;Ne--)de=H[Ne][0],ye=H[Ne][1],A.subscribe.apply(A,[de].concat(typeof ye=="function"?[ye]:ye))})(an,Tt.API.events):v[to]=Tt.API[to]);function Ii(A){return Mt[A].mediaBox.topRightX-Mt[A].mediaBox.bottomLeftX}function Wa(A,H){Mt[A].mediaBox.topRightX=H+Mt[A].mediaBox.bottomLeftX}function vs(A){return Mt[A].mediaBox.topRightY-Mt[A].mediaBox.bottomLeftY}function pi(A,H){Mt[A].mediaBox.topRightY=H+Mt[A].mediaBox.bottomLeftY}var Ga=v.getPageWidth=function(A){return Ii(A=A||ee)/kt},zr=v.setPageWidth=function(A,H){Wa(A,H*kt)},Pi=v.getPageHeight=function(A){return vs(A=A||ee)/kt},ga=v.setPageHeight=function(A,H){pi(A,H*kt)};return v.internal={pdfEscape:ei,getStyle:bo,getFont:ti,getFontSize:nt,getCharSpace:$o,getTextColor:qi,getLineHeight:Zs,getLineHeightFactor:uc,getLineWidth:Rt,write:Xt,getHorizontalCoordinate:wr,getVerticalCoordinate:_o,getCoordinateString:dc,getVerticalCoordinateString:Ao,collections:{},newObject:qn,newAdditionalObject:vo,newObjectDeferred:dr,newObjectDeferredBegin:Yn,getFilters:Ai,putStream:br,events:an,scaleFactor:kt,pageSize:{getWidth:function(){return Ga(ee)},setWidth:function(A){zr(ee,A)},getHeight:function(){return Pi(ee)},setHeight:function(A){ga(ee,A)}},encryptionOptions:p,encryption:Un,getEncryptor:function(A){return p!==null?Un.encryptor(A,0):function(H){return H}},output:Ni,getNumberOfPages:zi,pages:ze,out:fe,f2:C,f3:L,getPageInfo:Ei,getPageInfoByObjId:ma,getCurrentPageInfo:zo,getPDFVersion:S,Point:Bs,Rectangle:Ho,Matrix:It,hasHotfix:pa},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return Ga(ee)},set:function(A){zr(ee,A)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return Pi(ee)},set:function(A){ga(ee,A)},enumerable:!0,configurable:!0}),(function(A){for(var H=0,de=bt.length;H<de;H++){var ye=Uo.call(this,A[H][0],A[H][1],A[H][2],bt[H][3],!0);y===!1&&(w[ye]=!0);var Ne=A[H][0].split("-");Al({id:ye,fontName:Ne[0],fontStyle:Ne[1]||""})}an.publish("addFonts",{fonts:ht,dictionary:zt})}).call(v,bt),Nt="F1",Ua(i,n),an.publish("initialized"),v}Wd.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Wd.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Wd.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Wd.prototype.processOwnerPassword=function(t,e){return q1(z1(e).substr(0,5),t)},Wd.prototype.encryptor=function(t,e){var n=z1(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return q1(n,r)}},Fg.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||er(t)!==er(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Tt.API={events:[]},Tt.version="3.0.3";var Kr=Tt.API,Qx=1,pd=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bd=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(t){return t.toFixed(2)},Fc=function(t){return t.toFixed(5)};Kr.__acroform__={};var go=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},IN=function(t){return t*Qx},sl=function(t){var e=new eI,n=yt.internal.getHeight(t)||0,r=yt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(en(r)),Number(en(n))],e},tY=Kr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},nY=Kr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},rY=Kr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},li=Kr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rY(t,e-1)},ci=Kr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return tY(t,e-1)},ui=Kr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nY(t,e-1)},iY=Kr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],c=t[3],u={};return u.lowerLeft_X=n(i)||0,u.lowerLeft_Y=r(s+c)||0,u.upperRight_X=n(i+a)||0,u.upperRight_Y=r(s)||0,[Number(en(u.lowerLeft_X)),Number(en(u.lowerLeft_Y)),Number(en(u.upperRight_X)),Number(en(u.upperRight_Y))]},sY=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=$1(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+en(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=sl(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},$1=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(C){return C.split(`
`)}):i.map(function(C){return[C]});var s=n,a=yt.internal.getHeight(t)||0;a=a<0?-a:a;var c=yt.internal.getWidth(t)||0;c=c<0?-c:c;var u=function(C,L,D){if(C+1<i.length){var ne=L+" "+i[C+1][0];return Bm(ne,t,D).width<=c-4}return!1};s++;e:for(;s>0;){e="",s--;var h,p,y=Bm("3",t,s).height,w=t.multiline?a-s:(a-y)/2,v=w+=2,j=0,S=0,_=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Bm(e,t,s=12).width+", FieldWidth:"+c+`
`;break}for(var I="",V=0,z=0;z<i.length;z++)if(i.hasOwnProperty(z)){var $=!1;if(i[z].length!==1&&_!==i[z].length-1){if((y+2)*(V+2)+2>a)continue e;I+=i[z][_],$=!0,S=z,z--}else{I=(I+=i[z][_]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var J=parseInt(z),le=u(J,I,s),q=z>=i.length-1;if(le&&!q){I+=" ",_=0;continue}if(le||q){if(q)S=J;else if(t.multiline&&(y+2)*(V+2)+2>a)continue e}else{if(!t.multiline||(y+2)*(V+2)+2>a)continue e;S=J}}for(var E="",T=j;T<=S;T++){var U=i[T];if(t.multiline){if(T===S){E+=U[_]+" ",_=(_+1)%U.length;continue}if(T===j){E+=U[U.length-1]+" ";continue}}E+=U[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,p=Bm(E,t,s).width,t.textAlign){case"right":h=c-p-2;break;case"center":h=(c-p)/2;break;default:h=2}e+=en(h)+" "+en(v)+` Td
`,e+="("+pd(E)+`) Tj
`,e+=-en(h)+` 0 Td
`,v=-(s+2),p=0,j=$?S:S+1,V++,I=""}break}return r.text=e,r.fontSize=s,r},Bm=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},oY={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},aY=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},lY=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Fa.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(oY)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qx=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new tI,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&aY(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var c=r[a],u=[],h=c.Rect;if(c.Rect&&(c.Rect=iY(c.Rect,i)),i.internal.newObjectDeferredBegin(c.objId,!0),c.DA=yt.createDefaultAppearanceStream(c),er(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=sY(c);u.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var y="";for(var w in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(w)){var v=c.appearanceStreamContent[w];if(y+="/"+w+" ",y+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var a in v)if(v.hasOwnProperty(a)){var j=v[a];typeof j=="function"&&(j=j.call(i,c)),y+="/"+a+" "+j+" ",i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j)}}else typeof(j=v)=="function"&&(j=j.call(i,c)),y+="/"+a+" "+j,i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j);y+=">>"}u.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:c.objId}),i.internal.out("endobj")}s&&(function(S,_){for(var I in S)if(S.hasOwnProperty(I)){var V=I,z=S[I];_.internal.newObjectDeferredBegin(z.objId,!0),er(z)==="object"&&typeof z.putStream=="function"&&z.putStream(),delete S[V]}})(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},ZC=Kr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),er(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+pd(r(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},_v=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+pd(r(t))+")"},ul=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ul.prototype.toString=function(){return this.objId+" 0 R"},ul.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ul.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:ZC(i,this.objId,this.scope)}):i instanceof ul?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var eI=function(){ul.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};go(eI,ul);var tI=function(){ul.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+pd(n(t))+")"}},set:function(n){t=n}})};go(tI,ul);var Fa=function t(){ul.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');e=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!li(e,3)},set:function(I){I?this.F=ci(e,3):this.F=ui(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');n=I}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(I){r=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(I){r[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(I){r[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(I){r[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(I){r[3]=I}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Vg)return;s="FieldObject"+t.FieldNum++}var I=function(V){return V};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+pd(I(s))+")"},set:function(I){s=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(I){s=I}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(I){a=I}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(I){c=I}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(I){u=I}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Qx:h},set:function(I){h=I}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(I){p=I}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Vg||this instanceof Gu))return _v(y,this.objId,this.scope)},set:function(I){I=I.toString(),y=I}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Ji==0?_v(w,this.objId,this.scope):w},set:function(I){I=I.toString(),w=this instanceof Ji==0?I.substr(0,1)==="("?Bd(I.substr(1,I.length-2)):Bd(I):I}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji==1?Bd(w.substr(1,w.length-1)):w},set:function(I){I=I.toString(),w=this instanceof Ji==1?"/"+I:I}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Ji==0?_v(v,this.objId,this.scope):v},set:function(I){I=I.toString(),v=this instanceof Ji==0?I.substr(0,1)==="("?Bd(I.substr(1,I.length-2)):Bd(I):I}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji==1?Bd(v.substr(1,v.length-1)):v},set:function(I){I=I.toString(),v=this instanceof Ji==1?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(I){I=!!I,S=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(I){j=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,1)},set:function(I){I?this.Ff=ci(this.Ff,1):this.Ff=ui(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,2)},set:function(I){I?this.Ff=ci(this.Ff,2):this.Ff=ui(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,3)},set:function(I){I?this.Ff=ci(this.Ff,3):this.Ff=ui(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');_=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(_){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};go(Fa,ul);var lh=function(){Fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ZC(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(s,a,c){c||(c=1);for(var u,h=[];u=a.exec(s);)h.push(u[c]);return h})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,18)},set:function(n){n?this.Ff=ci(this.Ff,18):this.Ff=ui(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ci(this.Ff,19):this.Ff=ui(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,20)},set:function(n){n?(this.Ff=ci(this.Ff,20),e.sort()):this.Ff=ui(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,22)},set:function(n){n?this.Ff=ci(this.Ff,22):this.Ff=ui(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,23)},set:function(n){n?this.Ff=ci(this.Ff,23):this.Ff=ui(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,27)},set:function(n){n?this.Ff=ci(this.Ff,27):this.Ff=ui(this.Ff,27)}}),this.hasAppearanceStream=!1};go(lh,Fa);var ch=function(){lh.call(this),this.fontName="helvetica",this.combo=!1};go(ch,lh);var uh=function(){ch.call(this),this.combo=!0};go(uh,ch);var lg=function(){uh.call(this),this.edit=!0};go(lg,uh);var Ji=function(){Fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,15)},set:function(n){n?this.Ff=ci(this.Ff,15):this.Ff=ui(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,16)},set:function(n){n?this.Ff=ci(this.Ff,16):this.Ff=ui(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,17)},set:function(n){n?this.Ff=ci(this.Ff,17):this.Ff=ui(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,26)},set:function(n){n?this.Ff=ci(this.Ff,26):this.Ff=ui(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+pd(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){er(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};go(Ji,Fa);var cg=function(){Ji.call(this),this.pushButton=!0};go(cg,Ji);var dh=function(){Ji.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};go(dh,Ji);var Vg=function(){var t,e;Fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(c){return c};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+pd(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){er(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};go(Vg,Fa),dh.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},dh.prototype.createOption=function(t){var e=new Vg;return e.Parent=this,e.optionName=t,this.Kids.push(e),cY.call(this.scope,e),e};var ug=function(){Ji.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};go(ug,Ji);var Gu=function(){Fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,13)},set:function(e){e?this.Ff=ci(this.Ff,13):this.Ff=ui(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,21)},set:function(e){e?this.Ff=ci(this.Ff,21):this.Ff=ui(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,23)},set:function(e){e?this.Ff=ci(this.Ff,23):this.Ff=ui(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,24)},set:function(e){e?this.Ff=ci(this.Ff,24):this.Ff=ui(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,25)},set:function(e){e?this.Ff=ci(this.Ff,25):this.Ff=ui(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,26)},set:function(e){e?this.Ff=ci(this.Ff,26):this.Ff=ui(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};go(Gu,Fa);var dg=function(){Gu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,14)},set:function(t){t?this.Ff=ci(this.Ff,14):this.Ff=ui(this.Ff,14)}}),this.password=!0};go(dg,Gu);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=sl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=$1(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+en(yt.internal.getWidth(t))+" "+en(yt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+en(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=sl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=yt.internal.getHeight(t),a=yt.internal.getWidth(t),c=$1(t,t.caption);return i.push("1 g"),i.push("0 0 "+en(a)+" "+en(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+en(a-1)+" "+en(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+en(c.fontSize)+" Tf "+r),i.push(c.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=sl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+en(yt.internal.getWidth(t))+" "+en(yt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=yt.RadioButton.Circle.YesNormal,e.D[t]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=sl(t);e.scope=t.scope;var n=[],r=yt.internal.getWidth(t)<=yt.internal.getHeight(t)?yt.internal.getWidth(t)/4:yt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=yt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Fc(yt.internal.getWidth(t)/2)+" "+Fc(yt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=sl(t);e.scope=t.scope;var n=[],r=yt.internal.getWidth(t)<=yt.internal.getHeight(t)?yt.internal.getWidth(t)/4:yt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*yt.internal.Bezier_C).toFixed(5)),a=Number((r*yt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Fc(yt.internal.getWidth(t)/2)+" "+Fc(yt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Fc(yt.internal.getWidth(t)/2)+" "+Fc(yt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=sl(t);e.scope=t.scope;var n=[],r=yt.internal.getWidth(t)<=yt.internal.getHeight(t)?yt.internal.getWidth(t)/4:yt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*yt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Fc(yt.internal.getWidth(t)/2)+" "+Fc(yt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=yt.RadioButton.Cross.YesNormal,e.D[t]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=sl(t);e.scope=t.scope;var n=[],r=yt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+en(yt.internal.getWidth(t)-2)+" "+en(yt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),n.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),n.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),n.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=sl(t);e.scope=t.scope;var n=yt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+en(yt.internal.getWidth(t))+" "+en(yt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+en(yt.internal.getWidth(t)-2)+" "+en(yt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(en(n.x1.x)+" "+en(n.x1.y)+" m"),r.push(en(n.x2.x)+" "+en(n.x2.y)+" l"),r.push(en(n.x4.x)+" "+en(n.x4.y)+" m"),r.push(en(n.x3.x)+" "+en(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=sl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+en(yt.internal.getWidth(t))+" "+en(yt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};yt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=yt.internal.getWidth(t),n=yt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},yt.internal.getWidth=function(t){var e=0;return er(t)==="object"&&(e=IN(t.Rect[2])),e},yt.internal.getHeight=function(t){var e=0;return er(t)==="object"&&(e=IN(t.Rect[3])),e};var cY=Kr.addField=function(t){if(lY(this,t),!(t instanceof Fa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Kr.AcroFormChoiceField=lh,Kr.AcroFormListBox=ch,Kr.AcroFormComboBox=uh,Kr.AcroFormEditBox=lg,Kr.AcroFormButton=Ji,Kr.AcroFormPushButton=cg,Kr.AcroFormRadioButton=dh,Kr.AcroFormCheckBox=ug,Kr.AcroFormTextField=Gu,Kr.AcroFormPasswordField=dg,Kr.AcroFormAppearance=yt,Kr.AcroForm={ChoiceField:lh,ListBox:ch,ComboBox:uh,EditBox:lg,Button:Ji,PushButton:cg,RadioButton:dh,CheckBox:ug,TextField:Gu,PasswordField:dg,Appearance:yt},Tt.AcroForm={ChoiceField:lh,ListBox:ch,ComboBox:uh,EditBox:lg,Button:Ji,PushButton:cg,RadioButton:dh,CheckBox:ug,TextField:Gu,PasswordField:dg,Appearance:yt};Tt.AcroForm;function nI(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(C,L){var D,ne,se,oe,Z,Y=n;if((L=L||n)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(le(C))for(Z in r)for(se=r[Z],D=0;D<se.length;D+=1){for(oe=!0,ne=0;ne<se[D].length;ne+=1)if(se[D][ne]!==void 0&&se[D][ne]!==C[ne]){oe=!1;break}if(oe===!0){Y=Z;break}}else for(Z in r)for(se=r[Z],D=0;D<se.length;D+=1){for(oe=!0,ne=0;ne<se[D].length;ne+=1)if(se[D][ne]!==void 0&&se[D][ne]!==C.charCodeAt(ne)){oe=!1;break}if(oe===!0){Y=Z;break}}return Y===n&&L!==n&&(Y=L),Y},s=function C(L){for(var D=this.internal.write,ne=this.internal.putStream,se=(0,this.internal.getFilters)();se.indexOf("FlateEncode")!==-1;)se.splice(se.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var oe=[];if(oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Image"}),oe.push({key:"Width",value:L.width}),oe.push({key:"Height",value:L.height}),L.colorSpace===I.INDEXED?oe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(oe.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===I.DEVICE_CMYK&&oe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),oe.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&oe.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var Z="",Y=0,pe=L.transparency.length;Y<pe;Y++)Z+=L.transparency[Y]+" "+L.transparency[Y]+" ";oe.push({key:"Mask",value:"["+Z+"]"})}L.sMask!==void 0&&oe.push({key:"SMask",value:L.objectId+1+" 0 R"});var we=L.filter!==void 0?["/"+L.filter]:void 0;if(ne({data:L.data,additionalKeyValues:oe,alreadyAppliedFilters:we,objectId:L.objectId}),D("endobj"),"sMask"in L&&L.sMask!==void 0){var ae,F=(ae=L.sMaskBitsPerComponent)!==null&&ae!==void 0?ae:L.bitsPerComponent,ee={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:L.sMask};"filter"in L&&(ee.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(L.width),ee.filter=L.filter),C.call(this,ee)}if(L.colorSpace===I.INDEXED){var Q=this.internal.newObject();ne({data:E(new Uint8Array(L.palette)),objectId:Q}),D("endobj")}},a=function(){var C=this.internal.collections[e+"images"];for(var L in C)s.call(this,C[L])},c=function(){var C,L=this.internal.collections[e+"images"],D=this.internal.write;for(var ne in L)D("/I"+(C=L[ne]).index,C.objectId,"0","R")},u=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",c))},h=function(){var C=this.internal.collections[e+"images"];return u.call(this),C},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(C){return typeof t["process"+C.toUpperCase()]=="function"},w=function(C){return er(C)==="object"&&C.nodeType===1},v=function(C,L){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var D=""+C.getAttribute("src");if(D.indexOf("data:image/")===0)return ag(unescape(D).split("base64,").pop());var ne=t.loadFile(D,!0);if(ne!==void 0)return ne}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var se;switch(L){case"PNG":se="image/png";break;case"WEBP":se="image/webp";break;default:se="image/jpeg"}return ag(C.toDataURL(se,1).split("base64,").pop())}},j=function(C){var L=this.internal.collections[e+"images"];if(L){for(var D in L)if(C===L[D].alias)return L[D]}},S=function(C,L,D){return C||L||(C=-96,L=-96),C<0&&(C=-1*D.width*72/C/this.internal.scaleFactor),L<0&&(L=-1*D.height*72/L/this.internal.scaleFactor),C===0&&(C=L*D.width/D.height),L===0&&(L=C*D.height/D.width),[C,L]},_=function(C,L,D,ne,se,oe){var Z=S.call(this,D,ne,se),Y=this.internal.getCoordinateString,pe=this.internal.getVerticalCoordinateString,we=h.call(this);if(D=Z[0],ne=Z[1],we[se.index]=se,oe){oe*=Math.PI/180;var ae=Math.cos(oe),F=Math.sin(oe),ee=function(he){return he.toFixed(4)},Q=[ee(ae),ee(F),ee(-1*F),ee(ae),0,0,"cm"]}this.internal.write("q"),oe?(this.internal.write([1,"0","0",1,Y(C),pe(L+ne),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([Y(D),"0","0",Y(ne),"0","0","cm"].join(" "))):this.internal.write([Y(D),"0","0",Y(ne),Y(C),pe(L+ne),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+se.index+" Do"),this.internal.write("Q")},I=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var V=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},z=t.__addimage__.sHashCode=function(C){var L,D,ne=0;if(typeof C=="string")for(D=C.length,L=0;L<D;L++)ne=(ne<<5)-ne+C.charCodeAt(L),ne|=0;else if(le(C))for(D=C.byteLength/2,L=0;L<D;L++)ne=(ne<<5)-ne+C[L],ne|=0;return ne},$=t.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var L=!0;return C.length===0&&(L=!1),C.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(L=!1),L},J=t.__addimage__.extractImageFromDataUrl=function(C){if(C==null||!(C=C.trim()).startsWith("data:"))return null;var L=C.indexOf(",");return L<0?null:C.substring(0,L).trim().endsWith("base64")?C.substring(L+1):null};t.__addimage__.isArrayBuffer=function(C){return C instanceof ArrayBuffer};var le=t.__addimage__.isArrayBufferView=function(C){return C instanceof Int8Array||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array},q=t.__addimage__.binaryStringToUint8Array=function(C){for(var L=C.length,D=new Uint8Array(L),ne=0;ne<L;ne++)D[ne]=C.charCodeAt(ne);return D},E=t.__addimage__.arrayBufferToBinaryString=function(C){for(var L="",D=le(C)?C:new Uint8Array(C),ne=0;ne<D.length;ne+=8192)L+=String.fromCharCode.apply(null,D.subarray(ne,ne+8192));return L};t.addImage=function(){var C,L,D,ne,se,oe,Z,Y,pe;if(typeof arguments[1]=="number"?(L=n,D=arguments[1],ne=arguments[2],se=arguments[3],oe=arguments[4],Z=arguments[5],Y=arguments[6],pe=arguments[7]):(L=arguments[1],D=arguments[2],ne=arguments[3],se=arguments[4],oe=arguments[5],Z=arguments[6],Y=arguments[7],pe=arguments[8]),er(C=arguments[0])==="object"&&!w(C)&&"imageData"in C){var we=C;C=we.imageData,L=we.format||L||n,D=we.x||D||0,ne=we.y||ne||0,se=we.w||we.width||se,oe=we.h||we.height||oe,Z=we.alias||Z,Y=we.compression||Y,pe=we.rotation||we.angle||pe}var ae=this.internal.getFilters();if(Y===void 0&&ae.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(D)||isNaN(ne))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var F=T.call(this,C,L,Z,Y);return _.call(this,D,ne,se,oe,F,pe),this};var T=function(C,L,D,ne){var se,oe,Z;if(typeof C=="string"&&i(C)===n){C=unescape(C);var Y=U(C,!1);(Y!==""||(Y=t.loadFile(C,!0))!==void 0)&&(C=Y)}if(w(C)&&(C=v(C,L)),L=i(C,L),!y(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((Z=D)==null||Z.length===0)&&(D=(function(pe){return typeof pe=="string"||le(pe)?z(pe):le(pe.data)?z(pe.data):null})(C)),(se=j.call(this,D))||(C instanceof Uint8Array||L==="RGBA"||(oe=C,C=q(C)),se=this["process"+L.toUpperCase()](C,p.call(this),D,(function(pe){return pe&&typeof pe=="string"&&(pe=pe.toUpperCase()),pe in t.image_compression?pe:V.NONE})(ne),oe)),!se)throw new Error("An unknown error occurred whilst processing the image.");return se},U=t.__addimage__.convertBase64ToBinaryString=function(C,L){L=typeof L!="boolean"||L;var D,ne="";if(typeof C=="string"){var se;D=(se=J(C))!==null&&se!==void 0?se:C;try{ne=ag(D)}catch(oe){if(L)throw $(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+oe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};t.getImageProperties=function(C){var L,D,ne="";if(w(C)&&(C=v(C)),typeof C=="string"&&i(C)===n&&((ne=U(C,!1))===""&&(ne=t.loadFile(C)||""),C=ne),D=i(C),!y(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(C instanceof Uint8Array||(C=q(C)),!(L=this["process"+D.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=D,L}})(Tt.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Tt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,p=!1,y=0;y<h.length&&!p;y++)switch((r=h[y]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var w=0;w<h.length;w++){r=h[w];var v=this.internal.pdfEscape,j=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(S.objId),V=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+c(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y)+"] ")+"/Contents ("+v(I(r.contents))+")",s+=" /Popup "+_.objId+" 0 R",s+=" /P "+u.objId+" 0 R",s+=" /T ("+v(I(V))+") >>",S.content=s;var z=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+c(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+c(r.bounds.y)+"] ")+" /Parent "+z,r.open&&(s+=" /Open true"),s+=" >>",_.content=s,this.internal.write(S.objId,"0 R",_.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+c(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y+r.bounds.h)+"] ";var $=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(j(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var J=this.annotations._nameMap[r.options.name];r.options.pageNumber=J.page,r.options.top=J.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(j(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var le=c(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+le+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,a){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(n),y:h(r),w:u(n+i),h:h(r+s)},options:a,type:"link"})},t.textWithLink=function(n,r,i,s){var a,c,u=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){c=s.maxWidth;var p=this.splitTextToSize(n,c).length;a=Math.ceil(h*p)}else c=u,a=h;return this.text(n,r,i,s),i+=.2*h,s.align==="center"&&(r-=u/2),s.align==="right"&&(r-=u),this.link(r,i-h,c,a,s),u},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(Tt.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},c=t.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&i.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length==4},y=t.__arabicParser__.resolveLigatures=function(S){var _=0,I=n,V="",z=0;for(_=0;_<S.length;_+=1)I[S.charCodeAt(_)]!==void 0?(z++,typeof(I=I[S.charCodeAt(_)])=="number"&&(V+=String.fromCharCode(I),I=n,z=0),_===S.length-1&&(I=n,V+=S.charAt(_-(z-1)),_-=z-1,z=0)):(I=n,V+=S.charAt(_-z),_-=z,z=0);return V};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var w=t.__arabicParser__.getCorrectForm=function(S,_,I){return a(S)?s(S)===!1?-1:!h(S)||!a(_)&&!a(I)||!a(I)&&c(_)||c(S)&&!a(_)||c(S)&&u(_)||c(S)&&c(_)?0:p(S)&&a(_)&&!c(_)&&a(I)&&h(I)?3:c(S)||!a(I)?1:2:-1},v=function(S){var _=0,I=0,V=0,z="",$="",J="",le=(S=S||"").split("\\s+"),q=[];for(_=0;_<le.length;_+=1){for(q.push(""),I=0;I<le[_].length;I+=1)z=le[_][I],$=le[_][I-1],J=le[_][I+1],a(z)?(V=w(z,$,J),q[_]+=V!==-1?String.fromCharCode(e[z.charCodeAt(0)][V]):z):q[_]+=z;q[_]=y(q[_])}return q.join(" ")},j=t.__arabicParser__.processArabic=t.processArabic=function(){var S,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(_)){var V=0;for(I=[],V=0;V<_.length;V+=1)Array.isArray(_[V])?I.push([v(_[V][0]),_[V][1],_[V][2]]):I.push([v(_[V])]);S=I}else S=v(_);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",j])})(Tt.API),Tt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(c){s=c}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(c){a=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Tt.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(S){u=S}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(S){h=S}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(S){w=S}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(S){j=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,h){r.call(this);var p=(h=h||{}).fontSize||this.getFontSize(),y=h.font||this.getFont(),w=h.scaleFactor||this.internal.scaleFactor,v=0,j=0,S=0,_=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var I=h.maxWidth;I>0?typeof u=="string"?u=this.splitTextToSize(u,I):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(z,$){return z.concat(_.splitTextToSize($,I))},[])):u=Array.isArray(u)?u:[u];for(var V=0;V<u.length;V++)v<(S=this.getStringUnitWidth(u[V],{font:y})*p)&&(v=S);return v!==0&&(j=u.length),{w:v/=w,h:Math.max((j*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/w,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var u;u=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var h=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===u.lineNumber?(u.x=(h.x||0)+(h.width||0),u.y=h.y||0):h.y+h.height+u.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=y.top,v&&w&&(this.printHeaderRow(u.lineNumber,!0),u.y+=w[0].height)):u.y=h.y+h.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,n===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-p,u.y+p,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+p,{align:"center",baseline:"top",maxWidth:u.width-p-p}):this.text(u.text,u.x+p,u.y+p,{align:"left",baseline:"top",maxWidth:u.width-p-p})),this.internal.__cell__.lastCell=u,this};t.table=function(u,h,p,y,w){if(r.call(this),!p)throw new Error("No data for PDF table.");var v,j,S,_,I=[],V=[],z=[],$={},J={},le=[],q=[],E=(w=w||{}).autoSize||!1,T=w.printHeaders!==!1,U=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,C=w.margins||Object.assign({width:this.getPageWidth()},e),L=typeof w.padding=="number"?w.padding:3,D=w.headerBackgroundColor||"#c8c8c8",ne=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=ne,this.setFontSize(U),y==null)V=I=Object.keys(p[0]),z=I.map(function(){return"left"});else if(Array.isArray(y)&&er(y[0])==="object")for(I=y.map(function(we){return we.name}),V=y.map(function(we){return we.prompt||we.name||""}),z=y.map(function(we){return we.align||"left"}),v=0;v<y.length;v+=1)J[y[v].name]=.7499990551181103*y[v].width;else Array.isArray(y)&&typeof y[0]=="string"&&(V=I=y,z=I.map(function(){return"left"}));if(E||Array.isArray(y)&&typeof y[0]=="string")for(v=0;v<I.length;v+=1){for($[_=I[v]]=p.map(function(we){return we[_]}),this.setFont(void 0,"bold"),le.push(this.getTextDimensions(V[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=$[_],this.setFont(void 0,"normal"),S=0;S<j.length;S+=1)le.push(this.getTextDimensions(j[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[_]=Math.max.apply(null,le)+L+L,le=[]}if(T){var se={};for(v=0;v<I.length;v+=1)se[I[v]]={},se[I[v]].text=V[v],se[I[v]].align=z[v];var oe=c.call(this,se,J);q=I.map(function(we){return new s(u,h,J[we],oe,se[we].text,void 0,se[we].align)}),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var Z=y.reduce(function(we,ae){return we[ae.name]=ae.align,we},{});for(v=0;v<p.length;v+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:v,data:p[v]},this);var Y=c.call(this,p[v],J);for(S=0;S<I.length;S+=1){var pe=p[v][I[S]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:v,col:S,data:pe},this),a.call(this,new s(u,h,J[I[S]],Y,pe,v+2,Z[I[S]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=h,this};var c=function(u,h){var p=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(u).map(function(v){var j=u[v];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,h[v]-p-p)},this).map(function(v){return this.getLineHeightFactor()*v.length*y/w+p+p},this).reduce(function(v,j){return Math.max(v,j)},0)};t.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){p=this.internal.__cell__.tableHeaderRow[v].clone(),h&&(p.y=this.internal.__cell__.margins.top||0,w.push(p)),p.lineNumber=u;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(j)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}})(Tt.API);var rI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],H1=nI(iI),sI=[100,200,300,400,500,600,700,800,900],uY=nI(sI);function Av(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(s){return rI[s=s||"normal"]?s:"normal"})(t.style),r=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(t.weight),i=(function(s){return typeof H1[s=s||"normal"]=="number"?s:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function PN(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var dY={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},RN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function jN(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function LN(t){return t.trimLeft()}function hY(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function fY(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var zm,DN,MN,zd,qm,ON,FN,VN,Nv=["times"];function UN(t,e,n,r,i){var s=4,a=zN;switch(i){case Tt.API.image_compression.FAST:s=1,a=BN;break;case Tt.API.image_compression.MEDIUM:s=6,a=qN;break;case Tt.API.image_compression.SLOW:s=9,a=$N}t=(function(u,h,p,y){for(var w,v=u.length/h,j=new Uint8Array(u.length+v),S=[pY,BN,zN,qN,$N],_=0;_<v;_+=1){var I=_*h,V=u.subarray(I,I+h);if(y)j.set(y(V,p,w),I+_);else{for(var z=S.length,$=[],J=0;J<z;J+=1)$[J]=S[J](V,p,w);var le=gY($.concat());j.set($[le],I+_)}w=V}return j})(t,e,Math.ceil(n*r/8),a);var c=F1(t,{level:s});return Tt.API.__addimage__.arrayBufferToBinaryString(c)}function pY(t){var e=Array.apply([],t);return e.unshift(0),e}function BN(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=t[i-e]||0;r[i+1]=t[i]-s+256&255}return r}function zN(t,e,n){var r=t.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var a=n&&n[s]||0;i[s+1]=t[s]-a+256&255}return i}function qN(t,e,n){var r=t.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var a=t[s-e]||0,c=n&&n[s]||0;i[s+1]=t[s]+256-(a+c>>>1)&255}return i}function $N(t,e,n){var r=t.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var a=mY(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);i[s+1]=t[s]-a+256&255}return i}function mY(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n}function gY(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Ev(t,e,n){var r=e*n,i=Math.floor(r/8),s=16-(r-8*i+n),a=(1<<n)-1;return oI(t,i)>>s&a}function HN(t,e,n,r){var i=n*r,s=Math.floor(i/8),a=16-(i-8*s+r),c=(1<<r)-1,u=(e&c)<<a;(function(h,p,y){if(p+1<h.byteLength)h.setUint16(p,y,!1);else{var w=y>>8&255;h.setUint8(p,w)}})(t,s,oI(t,s)&~(c<<a)&65535|u)}function oI(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function yY(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<1+(7&i);t[e++],t[e++];var c=null,u=null;s&&(c=e,u=a,e+=3*a);var h=!0,p=[],y=0,w=null,v=0,j=null;for(this.width=n,this.height=r;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,j=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];y=t[e++]|t[e++]<<8,w=t[e++],1&S||(w=null),v=S>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,V=t[e++]|t[e++]<<8,z=t[e++]|t[e++]<<8,$=t[e++],J=$>>6&1,le=1<<1+(7&$),q=c,E=u,T=!1;$>>7&&(T=!0,q=e,E=le,e+=3*le);var U=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}p.push({x:_,y:I,width:V,height:z,has_local_palette:T,palette_offset:q,palette_size:E,data_offset:U,data_length:e-U,transparent_index:w,interlaced:!!J,delay:y,disposal:v});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return j},this.frameInfo=function(L){if(L<0||L>=p.length)throw new Error("Frame index out of range.");return p[L]},this.decodeAndBlitFrameBGRA=function(L,D){var ne=this.frameInfo(L),se=ne.width*ne.height,oe=new Uint8Array(se);WN(t,ne.data_offset,oe,se);var Z=ne.palette_offset,Y=ne.transparent_index;Y===null&&(Y=256);var pe=ne.width,we=n-pe,ae=pe,F=4*(ne.y*n+ne.x),ee=4*((ne.y+ne.height)*n+ne.x),Q=F,he=4*we;ne.interlaced===!0&&(he+=4*n*7);for(var ge=8,ve=0,Ee=oe.length;ve<Ee;++ve){var Te=oe[ve];if(ae===0&&(ae=pe,(Q+=he)>=ee&&(he=4*we+4*n*(ge-1),Q=F+(pe+we)*(ge<<1),ge>>=1)),Te===Y)Q+=4;else{var je=t[Z+3*Te],ze=t[Z+3*Te+1],Je=t[Z+3*Te+2];D[Q++]=Je,D[Q++]=ze,D[Q++]=je,D[Q++]=255}--ae}},this.decodeAndBlitFrameRGBA=function(L,D){var ne=this.frameInfo(L),se=ne.width*ne.height,oe=new Uint8Array(se);WN(t,ne.data_offset,oe,se);var Z=ne.palette_offset,Y=ne.transparent_index;Y===null&&(Y=256);var pe=ne.width,we=n-pe,ae=pe,F=4*(ne.y*n+ne.x),ee=4*((ne.y+ne.height)*n+ne.x),Q=F,he=4*we;ne.interlaced===!0&&(he+=4*n*7);for(var ge=8,ve=0,Ee=oe.length;ve<Ee;++ve){var Te=oe[ve];if(ae===0&&(ae=pe,(Q+=he)>=ee&&(he=4*we+4*n*(ge-1),Q=F+(pe+we)*(ge<<1),ge>>=1)),Te===Y)Q+=4;else{var je=t[Z+3*Te],ze=t[Z+3*Te+1],Je=t[Z+3*Te+2];D[Q++]=je,D[Q++]=ze,D[Q++]=Je,D[Q++]=255}--ae}}}function WN(t,e,n,r){for(var i=t[e++],s=1<<i,a=s+1,c=a+1,u=i+1,h=(1<<u)-1,p=0,y=0,w=0,v=t[e++],j=new Int32Array(4096),S=null;;){for(;p<16&&v!==0;)y|=t[e++]<<p,p+=8,v===1?v=t[e++]:--v;if(p<u)break;var _=y&h;if(y>>=u,p-=u,_!==s){if(_===a)break;for(var I=_<c?_:S,V=0,z=I;z>s;)z=j[z]>>8,++V;var $=z;if(w+V+(I!==_?1:0)>r)return void or.log("Warning, gif stream longer than expected.");n[w++]=$;var J=w+=V;for(I!==_&&(n[w++]=$),z=I;V--;)z=j[z],n[--J]=255&z,z>>=8;S!==null&&c<4096&&(j[c++]=S<<8|$,c>=h+1&&u<12&&(++u,h=h<<1|1)),S=_}else c=a+1,h=(1<<(u=i+1))-1,S=null}return w!==r&&or.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Sv(t){var e,n,r,i,s,a=Math.floor,c=new Array(64),u=new Array(64),h=new Array(64),p=new Array(64),y=new Array(65535),w=new Array(65535),v=new Array(64),j=new Array(64),S=[],_=0,I=7,V=new Array(64),z=new Array(64),$=new Array(64),J=new Array(256),le=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function oe(F,ee){for(var Q=0,he=0,ge=new Array,ve=1;ve<=16;ve++){for(var Ee=1;Ee<=F[ve];Ee++)ge[ee[he]]=[],ge[ee[he]][0]=Q,ge[ee[he]][1]=ve,he++,Q++;Q*=2}return ge}function Z(F){for(var ee=F[0],Q=F[1]-1;Q>=0;)ee&1<<Q&&(_|=1<<I),Q--,--I<0&&(_==255?(Y(255),Y(0)):Y(_),I=7,_=0)}function Y(F){S.push(F)}function pe(F){Y(F>>8&255),Y(255&F)}function we(F,ee,Q,he,ge){for(var ve,Ee=ge[0],Te=ge[240],je=(function(Ke,ct){var nt,$t,At,fn,Bt,vt,Ht,Dt,Nt,kt,xt=0;for(Nt=0;Nt<8;++Nt){nt=Ke[xt],$t=Ke[xt+1],At=Ke[xt+2],fn=Ke[xt+3],Bt=Ke[xt+4],vt=Ke[xt+5],Ht=Ke[xt+6];var Sn=nt+(Dt=Ke[xt+7]),vn=nt-Dt,ht=$t+Ht,zt=$t-Ht,kn=At+vt,Ct=At-vt,sn=fn+Bt,Ut=fn-Bt,nr=Sn+sn,Dn=Sn-sn,pn=ht+kn,Mt=ht-kn;Ke[xt]=nr+pn,Ke[xt+4]=nr-pn;var an=.707106781*(Mt+Dn);Ke[xt+2]=Dn+an,Ke[xt+6]=Dn-an;var yo=.382683433*((nr=Ut+Ct)-(Mt=zt+vn)),vr=.5411961*nr+yo,Vs=1.306562965*Mt+yo,hi=.707106781*(pn=Ct+zt),It=vn+hi,Vn=vn-hi;Ke[xt+5]=Vn+vr,Ke[xt+3]=Vn-vr,Ke[xt+1]=It+Vs,Ke[xt+7]=It-Vs,xt+=8}for(xt=0,Nt=0;Nt<8;++Nt){nt=Ke[xt],$t=Ke[xt+8],At=Ke[xt+16],fn=Ke[xt+24],Bt=Ke[xt+32],vt=Ke[xt+40],Ht=Ke[xt+48];var hs=nt+(Dt=Ke[xt+56]),xr=nt-Dt,fi=$t+Ht,qn=$t-Ht,dr=At+vt,Yn=At-vt,vo=fn+Bt,Oo=fn-Bt,Ui=hs+vo,Us=hs-vo,Rr=fi+dr,Ai=fi-dr;Ke[xt]=Ui+Rr,Ke[xt+32]=Ui-Rr;var br=.707106781*(Ai+Us);Ke[xt+16]=Us+br,Ke[xt+48]=Us-br;var Fo=.382683433*((Ui=Oo+Yn)-(Ai=qn+xr)),fs=.5411961*Ui+Fo,Js=1.306562965*Ai+Fo,xo=.707106781*(Rr=Yn+qn),Vo=xr+xo,ha=xr-xo;Ke[xt+40]=ha+fs,Ke[xt+24]=ha-fs,Ke[xt+8]=Vo+Js,Ke[xt+56]=Vo-Js,xt++}for(Nt=0;Nt<64;++Nt)kt=Ke[Nt]*ct[Nt],v[Nt]=kt>0?kt+.5|0:kt-.5|0;return v})(F,ee),ze=0;ze<64;++ze)j[q[ze]]=je[ze];var Je=j[0]-Q;Q=j[0],Je==0?Z(he[0]):(Z(he[w[ve=32767+Je]]),Z(y[ve]));for(var tt=63;tt>0&&j[tt]==0;)tt--;if(tt==0)return Z(Ee),Q;for(var Me,fe=1;fe<=tt;){for(var Xt=fe;j[fe]==0&&fe<=tt;)++fe;var Pt=fe-Xt;if(Pt>=16){Me=Pt>>4;for(var bt=1;bt<=Me;++bt)Z(Te);Pt&=15}ve=32767+j[fe],Z(ge[(Pt<<4)+w[ve]]),Z(y[ve]),fe++}return tt!=63&&Z(Ee),Q}function ae(F){F=Math.min(Math.max(F,1),100),s!=F&&((function(ee){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],he=0;he<64;he++){var ge=a((Q[he]*ee+50)/100);ge=Math.min(Math.max(ge,1),255),c[q[he]]=ge}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var Te=a((ve[Ee]*ee+50)/100);Te=Math.min(Math.max(Te,1),255),u[q[Ee]]=Te}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ze=0,Je=0;Je<8;Je++)for(var tt=0;tt<8;tt++)h[ze]=1/(c[q[ze]]*je[Je]*je[tt]*8),p[ze]=1/(u[q[ze]]*je[Je]*je[tt]*8),ze++})(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,ee){ee&&ae(ee),S=new Array,_=0,I=7,pe(65496),pe(65504),pe(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),pe(1),pe(1),Y(0),Y(0),(function(){pe(65499),pe(132),Y(0);for(var $t=0;$t<64;$t++)Y(c[$t]);Y(1);for(var At=0;At<64;At++)Y(u[At])})(),(function($t,At){pe(65472),pe(17),Y(8),pe(At),pe($t),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)})(F.width,F.height),(function(){pe(65476),pe(418),Y(0);for(var $t=0;$t<16;$t++)Y(E[$t+1]);for(var At=0;At<=11;At++)Y(T[At]);Y(16);for(var fn=0;fn<16;fn++)Y(U[fn+1]);for(var Bt=0;Bt<=161;Bt++)Y(C[Bt]);Y(1);for(var vt=0;vt<16;vt++)Y(L[vt+1]);for(var Ht=0;Ht<=11;Ht++)Y(D[Ht]);Y(17);for(var Dt=0;Dt<16;Dt++)Y(ne[Dt+1]);for(var Nt=0;Nt<=161;Nt++)Y(se[Nt])})(),pe(65498),pe(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var Q=0,he=0,ge=0;_=0,I=7,this.encode.displayName="_encode_";for(var ve,Ee,Te,je,ze,Je,tt,Me,fe,Xt=F.data,Pt=F.width,bt=F.height,Ke=4*Pt,ct=0;ct<bt;){for(ve=0;ve<Ke;){for(ze=Ke*ct+ve,tt=-1,Me=0,fe=0;fe<64;fe++)Je=ze+(Me=fe>>3)*Ke+(tt=4*(7&fe)),ct+Me>=bt&&(Je-=Ke*(ct+1+Me-bt)),ve+tt>=Ke&&(Je-=ve+tt-Ke+4),Ee=Xt[Je++],Te=Xt[Je++],je=Xt[Je++],V[fe]=(le[Ee]+le[Te+256|0]+le[je+512|0]>>16)-128,z[fe]=(le[Ee+768|0]+le[Te+1024|0]+le[je+1280|0]>>16)-128,$[fe]=(le[Ee+1280|0]+le[Te+1536|0]+le[je+1792|0]>>16)-128;Q=we(V,h,Q,e,r),he=we(z,p,he,n,i),ge=we($,p,ge,n,i),ve+=32}ct+=8}if(I>=0){var nt=[];nt[1]=I+1,nt[0]=(1<<I+1)-1,Z(nt)}return pe(65497),new Uint8Array(S)},t=t||50,(function(){for(var F=String.fromCharCode,ee=0;ee<256;ee++)J[ee]=F(ee)})(),e=oe(E,T),n=oe(L,D),r=oe(U,C),i=oe(ne,se),(function(){for(var F=1,ee=2,Q=1;Q<=15;Q++){for(var he=F;he<ee;he++)w[32767+he]=Q,y[32767+he]=[],y[32767+he][1]=Q,y[32767+he][0]=he;for(var ge=-(ee-1);ge<=-F;ge++)w[32767+ge]=Q,y[32767+ge]=[],y[32767+ge][1]=Q,y[32767+ge][0]=ee-1+ge;F<<=1,ee<<=1}})(),(function(){for(var F=0;F<256;F++)le[F]=19595*F,le[F+256|0]=38470*F,le[F+512|0]=7471*F+32768,le[F+768|0]=-11059*F,le[F+1024|0]=-21709*F,le[F+1280|0]=32768*F+8421375,le[F+1536|0]=-27439*F,le[F+1792|0]=-5329*F})(),ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Pa(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function GN(t){function e(T){if(!T)throw Error("assert :P")}function n(T,U,C){for(var L=0;4>L;L++)if(T[U+L]!=C.charCodeAt(L))return!0;return!1}function r(T,U,C,L,D){for(var ne=0;ne<D;ne++)T[U+ne]=C[L+ne]}function i(T,U,C,L){for(var D=0;D<L;D++)T[U+D]=C}function s(T){return new Int32Array(T)}function a(T,U){for(var C=[],L=0;L<T;L++)C.push(new U);return C}function c(T,U){var C=[];return(function L(D,ne,se){for(var oe=se[ne],Z=0;Z<oe&&(D.push(se.length>ne+1?[]:new U),!(se.length<ne+1));Z++)L(D[Z],ne+1,se)})(C,0,T),C}var u=function(){var T=this;function U(m,b){for(var k=1<<b-1>>>0;m&k;)k>>>=1;return k?(m&k-1)+k:m}function C(m,b,k,M,W){e(!(M%k));do m[b+(M-=k)]=W;while(0<M)}function L(m,b,k,M,W){if(e(2328>=W),512>=W)var K=s(512);else if((K=s(W))==null)return 0;return(function(X,te,ie,ce,xe,Ce){var ue,_e,ke=te,Ve=1<<ie,Pe=s(16),Oe=s(16);for(e(xe!=0),e(ce!=null),e(X!=null),e(0<ie),_e=0;_e<xe;++_e){if(15<ce[_e])return 0;++Pe[ce[_e]]}if(Pe[0]==xe)return 0;for(Oe[1]=0,ue=1;15>ue;++ue){if(Pe[ue]>1<<ue)return 0;Oe[ue+1]=Oe[ue]+Pe[ue]}for(_e=0;_e<xe;++_e)ue=ce[_e],0<ce[_e]&&(Ce[Oe[ue]++]=_e);if(Oe[15]==1)return(ce=new D).g=0,ce.value=Ce[0],C(X,ke,1,Ve,ce),Ve;var Fe,Be=-1,qe=Ve-1,Et=0,ot=1,Jt=1,dt=1<<ie;for(_e=0,ue=1,xe=2;ue<=ie;++ue,xe<<=1){if(ot+=Jt<<=1,0>(Jt-=Pe[ue]))return 0;for(;0<Pe[ue];--Pe[ue])(ce=new D).g=ue,ce.value=Ce[_e++],C(X,ke+Et,xe,dt,ce),Et=U(Et,ue)}for(ue=ie+1,xe=2;15>=ue;++ue,xe<<=1){if(ot+=Jt<<=1,0>(Jt-=Pe[ue]))return 0;for(;0<Pe[ue];--Pe[ue]){if(ce=new D,(Et&qe)!=Be){for(ke+=dt,Fe=1<<(Be=ue)-ie;15>Be&&!(0>=(Fe-=Pe[Be]));)++Be,Fe<<=1;Ve+=dt=1<<(Fe=Be-ie),X[te+(Be=Et&qe)].g=Fe+ie,X[te+Be].value=ke-te-Be}ce.g=ue-ie,ce.value=Ce[_e++],C(X,ke+(Et>>ie),xe,dt,ce),Et=U(Et,ue)}}return ot!=2*Oe[15]-1?0:Ve})(m,b,k,M,W,K)}function D(){this.value=this.g=0}function ne(){this.value=this.g=0}function se(){this.G=a(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(ro,ne)}function oe(m,b,k,M){e(m!=null),e(b!=null),e(2147483648>M),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=b,m.pa=k,m.Jd=b,m.Yc=k+M,m.Zc=4<=M?k+M-4+1:k,Ee(m)}function Z(m,b){for(var k=0;0<b--;)k|=je(m,128)<<b;return k}function Y(m,b){var k=Z(m,b);return Te(m)?-k:k}function pe(m,b,k,M){var W,K=0;for(e(m!=null),e(b!=null),e(4294967288>M),m.Sb=M,m.Ra=0,m.u=0,m.h=0,4<M&&(M=4),W=0;W<M;++W)K+=b[k+W]<<8*W;m.Ra=K,m.bb=M,m.oa=b,m.pa=k}function we(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Ka-8>>>0,++m.bb,m.u-=8;he(m)&&(m.h=1,m.u=0)}function ae(m,b){if(e(0<=b),!m.h&&b<=qs){var k=Q(m)&zs[b];return m.u+=b,we(m),k}return m.h=1,m.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(m){return m.Ra>>>(m.u&Ka-1)>>>0}function he(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Ka}function ge(m,b){m.u=b,m.h=he(m)}function ve(m){m.u>=Go&&(e(m.u>=Go),we(m))}function Ee(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function Te(m){return Z(m,1)}function je(m,b){var k=m.Ca;0>m.b&&Ee(m);var M=m.b,W=k*b>>>8,K=(m.I>>>M>W)+0;for(K?(k-=W,m.I-=W+1<<M>>>0):k=W+1,M=k,W=0;256<=M;)W+=8,M>>=8;return M=7^W+va[M],m.b-=M,m.Ca=(k<<M)-1,K}function ze(m,b,k){m[b+0]=k>>24&255,m[b+1]=k>>16&255,m[b+2]=k>>8&255,m[b+3]=255&k}function Je(m,b){return m[b+0]|m[b+1]<<8}function tt(m,b){return Je(m,b)|m[b+2]<<16}function Me(m,b){return Je(m,b)|Je(m,b+2)<<16}function fe(m,b){var k=1<<b;return e(m!=null),e(0<b),m.X=s(k),m.X==null?0:(m.Mb=32-b,m.Xa=b,1)}function Xt(m,b){e(m!=null),e(b!=null),e(m.Xa==b.Xa),r(b.X,0,m.X,0,1<<b.Xa)}function Pt(){this.X=[],this.Xa=this.Mb=0}function bt(m,b,k,M){e(k!=null),e(M!=null);var W=k[0],K=M[0];return W==0&&(W=(m*K+b/2)/b),K==0&&(K=(b*W+m/2)/m),0>=W||0>=K?0:(k[0]=W,M[0]=K,1)}function Ke(m,b){return m+(1<<b)-1>>>b}function ct(m,b){return((4278255360&m)+(4278255360&b)>>>0&4278255360)+((16711935&m)+(16711935&b)>>>0&16711935)>>>0}function nt(m,b){T[b]=function(k,M,W,K,X,te,ie){var ce;for(ce=0;ce<X;++ce){var xe=T[m](te[ie+ce-1],W,K+ce);te[ie+ce]=ct(k[M+ce],xe)}}}function $t(){this.ud=this.hd=this.jd=0}function At(m,b){return((4278124286&(m^b))>>>1)+(m&b)>>>0}function fn(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Bt(m,b){return fn(m+(m-b+.5>>1))}function vt(m,b,k){return Math.abs(b-k)-Math.abs(m-k)}function Ht(m,b,k,M,W,K,X){for(M=K[X-1],k=0;k<W;++k)K[X+k]=M=ct(m[b+k],M)}function Dt(m,b,k,M,W){var K;for(K=0;K<k;++K){var X=m[b+K],te=X>>8&255,ie=16711935&(ie=(ie=16711935&X)+((te<<16)+te));M[W+K]=(4278255360&X)+ie>>>0}}function Nt(m,b){b.jd=255&m,b.hd=m>>8&255,b.ud=m>>16&255}function kt(m,b,k,M,W,K){var X;for(X=0;X<M;++X){var te=b[k+X],ie=te>>>8,ce=te,xe=255&(xe=(xe=te>>>16)+((m.jd<<24>>24)*(ie<<24>>24)>>>5));ce=255&(ce=(ce+=(m.hd<<24>>24)*(ie<<24>>24)>>>5)+((m.ud<<24>>24)*(xe<<24>>24)>>>5)),W[K+X]=(4278255360&te)+(xe<<16)+ce}}function xt(m,b,k,M,W){T[b]=function(K,X,te,ie,ce,xe,Ce,ue,_e){for(ie=Ce;ie<ue;++ie)for(Ce=0;Ce<_e;++Ce)ce[xe++]=W(te[M(K[X++])])},T[m]=function(K,X,te,ie,ce,xe,Ce){var ue=8>>K.b,_e=K.Ea,ke=K.K[0],Ve=K.w;if(8>ue)for(K=(1<<K.b)-1,Ve=(1<<ue)-1;X<te;++X){var Pe,Oe=0;for(Pe=0;Pe<_e;++Pe)Pe&K||(Oe=M(ie[ce++])),xe[Ce++]=W(ke[Oe&Ve]),Oe>>=ue}else T["VP8LMapColor"+k](ie,ce,ke,Ve,xe,Ce,X,te,_e)}}function Sn(m,b,k,M,W){for(k=b+k;b<k;){var K=m[b++];M[W++]=K>>16&255,M[W++]=K>>8&255,M[W++]=255&K}}function vn(m,b,k,M,W){for(k=b+k;b<k;){var K=m[b++];M[W++]=K>>16&255,M[W++]=K>>8&255,M[W++]=255&K,M[W++]=K>>24&255}}function ht(m,b,k,M,W){for(k=b+k;b<k;){var K=(X=m[b++])>>16&240|X>>12&15,X=240&X|X>>28&15;M[W++]=K,M[W++]=X}}function zt(m,b,k,M,W){for(k=b+k;b<k;){var K=(X=m[b++])>>16&248|X>>13&7,X=X>>5&224|X>>3&31;M[W++]=K,M[W++]=X}}function kn(m,b,k,M,W){for(k=b+k;b<k;){var K=m[b++];M[W++]=255&K,M[W++]=K>>8&255,M[W++]=K>>16&255}}function Ct(m,b,k,M,W,K){if(K==0)for(k=b+k;b<k;)ze(M,((K=m[b++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),W+=32;else r(M,W,m,b,k)}function sn(m,b){T[b][0]=T[m+"0"],T[b][1]=T[m+"1"],T[b][2]=T[m+"2"],T[b][3]=T[m+"3"],T[b][4]=T[m+"4"],T[b][5]=T[m+"5"],T[b][6]=T[m+"6"],T[b][7]=T[m+"7"],T[b][8]=T[m+"8"],T[b][9]=T[m+"9"],T[b][10]=T[m+"10"],T[b][11]=T[m+"11"],T[b][12]=T[m+"12"],T[b][13]=T[m+"13"],T[b][14]=T[m+"0"],T[b][15]=T[m+"0"]}function Ut(m){return m==xc||m==Ml||m==yu||m==vu}function nr(){this.eb=[],this.size=this.A=this.fb=0}function Dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new nr,this.f.kb=new Dn,this.sd=null}function Mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function an(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yo(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function vr(m,b){var k=m.T,M=b.ba.f.RGBA,W=M.eb,K=M.fb+m.ka*M.A,X=ws[b.ba.S],te=m.y,ie=m.O,ce=m.f,xe=m.N,Ce=m.ea,ue=m.W,_e=b.cc,ke=b.dc,Ve=b.Mc,Pe=b.Nc,Oe=m.ka,Fe=m.ka+m.T,Be=m.U,qe=Be+1>>1;for(Oe==0?X(te,ie,null,null,ce,xe,Ce,ue,ce,xe,Ce,ue,W,K,null,null,Be):(X(b.ec,b.fc,te,ie,_e,ke,Ve,Pe,ce,xe,Ce,ue,W,K-M.A,W,K,Be),++k);Oe+2<Fe;Oe+=2)_e=ce,ke=xe,Ve=Ce,Pe=ue,xe+=m.Rc,ue+=m.Rc,K+=2*M.A,X(te,(ie+=2*m.fa)-m.fa,te,ie,_e,ke,Ve,Pe,ce,xe,Ce,ue,W,K-M.A,W,K,Be);return ie+=m.fa,m.j+Fe<m.o?(r(b.ec,b.fc,te,ie,Be),r(b.cc,b.dc,ce,xe,qe),r(b.Mc,b.Nc,Ce,ue,qe),k--):1&Fe||X(te,ie,null,null,ce,xe,Ce,ue,ce,xe,Ce,ue,W,K+M.A,null,null,Be),k}function Vs(m,b,k){var M=m.F,W=[m.J];if(M!=null){var K=m.U,X=b.ba.S,te=X==gu||X==yu;b=b.ba.f.RGBA;var ie=[0],ce=m.ka;ie[0]=m.T,m.Kb&&(ce==0?--ie[0]:(--ce,W[0]-=m.width),m.j+m.ka+m.T==m.o&&(ie[0]=m.o-m.j-ce));var xe=b.eb;ce=b.fb+ce*b.A,m=pu(M,W[0],m.width,K,ie,xe,ce+(te?0:3),b.A),e(k==ie),m&&Ut(X)&&Dl(xe,ce,te,K,ie,b.A)}return 0}function hi(m){var b=m.ma,k=b.ba.S,M=11>k,W=k==Ja||k==mu||k==gu||k==Qn||k==12||Ut(k);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!hc(b.Oa,m,W?11:12))return 0;if(W&&Ut(k)&&kl(),m.da)alert("todo:use_scaling");else{if(M){if(b.Ib=yo,m.Kb){if(k=m.U+1>>1,b.memory=s(m.U+2*k),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+m.U,b.Mc=b.cc,b.Nc=b.dc+k,b.Ib=vr,kl()}}else alert("todo:EmitYUV");W&&(b.Jb=Vs,M&&rr())}if(M&&!Li){for(m=0;256>m;++m)_s[m]=89858*(m-128)+To>>_a,As[m]=-22014*(m-128)+To,Ac[m]=-45773*(m-128),Ul[m]=113618*(m-128)+To>>_a;for(m=zn;m<Gn;++m)b=76283*(m-16)+To>>_a,wd[m-zn]=ln(b,255),Vp[m-zn]=ln(b+8>>4,15);Li=1}return 1}function It(m){var b=m.ma,k=m.U,M=m.T;return e(!(1&m.ka)),0>=k||0>=M?0:(k=b.Ib(m,b),b.Jb!=null&&b.Jb(m,b,k),b.Dc+=k,1)}function Vn(m){m.ma.memory=null}function hs(m,b,k,M){return ae(m,8)!=47?0:(b[0]=ae(m,14)+1,k[0]=ae(m,14)+1,M[0]=ae(m,1),ae(m,3)!=0?0:!m.h)}function xr(m,b){if(4>m)return m+1;var k=m-2>>1;return(2+(1&m)<<k)+ae(b,k)+1}function fi(m,b){return 120<b?b-120:1<=(k=((k=T0[b-1])>>4)*m+(8-(15&k)))?k:1;var k}function qn(m,b,k){var M=Q(k),W=m[b+=255&M].g-8;return 0<W&&(ge(k,k.u+8),M=Q(k),b+=m[b].value,b+=M&(1<<W)-1),ge(k,k.u+m[b].g),m[b].value}function dr(m,b,k){return k.g+=m.g,k.value+=m.value<<b>>>0,e(8>=k.g),m.g}function Yn(m,b,k){var M=m.xc;return e((b=M==0?0:m.vc[m.md*(k>>M)+(b>>M)])<m.Wb),m.Ya[b]}function vo(m,b,k,M){var W=m.ab,K=m.c*b,X=m.C;b=X+b;var te=k,ie=M;for(M=m.Ta,k=m.Ua;0<W--;){var ce=m.gc[W],xe=X,Ce=b,ue=te,_e=ie,ke=(ie=M,te=k,ce.Ea);switch(e(xe<Ce),e(Ce<=ce.nc),ce.hc){case 2:jr(ue,_e,(Ce-xe)*ke,ie,te);break;case 0:var Ve=xe,Pe=Ce,Oe=ie,Fe=te,Be=(dt=ce).Ea;Ve==0&&(xa(ue,_e,null,null,1,Oe,Fe),Ht(ue,_e+1,0,0,Be-1,Oe,Fe+1),_e+=Be,Fe+=Be,++Ve);for(var qe=1<<dt.b,Et=qe-1,ot=Ke(Be,dt.b),Jt=dt.K,dt=dt.w+(Ve>>dt.b)*ot;Ve<Pe;){var gn=Jt,Sr=dt,Zt=1;for(Ko(ue,_e,Oe,Fe-Be,1,Oe,Fe);Zt<Be;){var at=(Zt&~Et)+qe;at>Be&&(at=Be),(0,Pl[gn[Sr++]>>8&15])(ue,_e+ +Zt,Oe,Fe+Zt-Be,at-Zt,Oe,Fe+Zt),Zt=at}_e+=Be,Fe+=Be,++Ve&Et||(dt+=ot)}Ce!=ce.nc&&r(ie,te-ke,ie,te+(Ce-xe-1)*ke,ke);break;case 1:for(ke=ue,Pe=_e,Be=(ue=ce.Ea)-(Fe=ue&~(Oe=(_e=1<<ce.b)-1)),Ve=Ke(ue,ce.b),qe=ce.K,ce=ce.w+(xe>>ce.b)*Ve;xe<Ce;){for(Et=qe,ot=ce,Jt=new $t,dt=Pe+Fe,gn=Pe+ue;Pe<dt;)Nt(Et[ot++],Jt),pc(Jt,ke,Pe,_e,ie,te),Pe+=_e,te+=_e;Pe<gn&&(Nt(Et[ot++],Jt),pc(Jt,ke,Pe,Be,ie,te),Pe+=Be,te+=Be),++xe&Oe||(ce+=Ve)}break;case 3:if(ue==ie&&_e==te&&0<ce.b){for(Pe=ie,ue=ke=te+(Ce-xe)*ke-(Fe=(Ce-xe)*Ke(ce.Ea,ce.b)),_e=ie,Oe=te,Ve=[],Fe=(Be=Fe)-1;0<=Fe;--Fe)Ve[Fe]=_e[Oe+Fe];for(Fe=Be-1;0<=Fe;--Fe)Pe[ue+Fe]=Ve[Fe];Cl(ce,xe,Ce,ie,ke,ie,te)}else Cl(ce,xe,Ce,ue,_e,ie,te)}te=M,ie=k}ie!=k&&r(M,k,te,ie,K)}function Oo(m,b){var k=m.V,M=m.Ba+m.c*m.C,W=b-m.C;if(e(b<=m.l.o),e(16>=W),0<W){var K=m.l,X=m.Ta,te=m.Ua,ie=K.width;if(vo(m,W,k,M),W=te=[te],e((k=m.C)<(M=b)),e(K.v<K.va),M>K.o&&(M=K.o),k<K.j){var ce=K.j-k;k=K.j,W[0]+=ce*ie}if(k>=M?k=0:(W[0]+=4*K.v,K.ka=k-K.j,K.U=K.va-K.v,K.T=M-k,k=1),k){if(te=te[0],11>(k=m.ca).S){var xe=k.f.RGBA,Ce=(M=k.S,W=K.U,K=K.T,ce=xe.eb,xe.A),ue=K;for(xe=xe.fb+m.Ma*xe.A;0<ue--;){var _e=X,ke=te,Ve=W,Pe=ce,Oe=xe;switch(M){case yd:mc(_e,ke,Ve,Pe,Oe);break;case Ja:ba(_e,ke,Ve,Pe,Oe);break;case xc:ba(_e,ke,Ve,Pe,Oe),Dl(Pe,Oe,0,Ve,1,0);break;case Lp:Rl(_e,ke,Ve,Pe,Oe);break;case mu:Ct(_e,ke,Ve,Pe,Oe,1);break;case Ml:Ct(_e,ke,Ve,Pe,Oe,1),Dl(Pe,Oe,0,Ve,1,0);break;case gu:Ct(_e,ke,Ve,Pe,Oe,0);break;case yu:Ct(_e,ke,Ve,Pe,Oe,0),Dl(Pe,Oe,1,Ve,1,0);break;case Qn:Ya(_e,ke,Ve,Pe,Oe);break;case vu:Ya(_e,ke,Ve,Pe,Oe),zh(Pe,Oe,Ve,1,0);break;case vd:Qa(_e,ke,Ve,Pe,Oe);break;default:e(0)}te+=ie,xe+=Ce}m.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=k.height)}}m.C=b,e(m.C<=m.i)}function Ui(m){var b;if(0<m.ua)return 0;for(b=0;b<m.Wb;++b){var k=m.Ya[b].G,M=m.Ya[b].H;if(0<k[1][M[1]+0].g||0<k[2][M[2]+0].g||0<k[3][M[3]+0].g)return 0}return 1}function Us(m,b,k,M,W,K){if(m.Z!=0){var X=m.qd,te=m.rd;for(e(Hi[m.Z]!=null);b<k;++b)Hi[m.Z](X,te,M,W,M,W,K),X=M,te=W,W+=K;m.qd=X,m.rd=te}}function Rr(m,b){var k=m.l.ma,M=k.Z==0||k.Z==1?m.l.j:m.C;if(M=m.C<M?M:m.C,e(b<=m.l.o),b>M){var W=m.l.width,K=k.ca,X=k.tb+W*M,te=m.V,ie=m.Ba+m.c*M,ce=m.gc;e(m.ab==1),e(ce[0].hc==3),Eo(ce[0],M,b,te,ie,K,X),Us(k,M,b,K,X,W)}m.C=m.Ma=b}function Ai(m,b,k,M,W,K,X){var te=m.$/M,ie=m.$%M,ce=m.m,xe=m.s,Ce=k+m.$,ue=Ce;W=k+M*W;var _e=k+M*K,ke=280+xe.ua,Ve=m.Pb?te:16777216,Pe=0<xe.ua?xe.Wa:null,Oe=xe.wc,Fe=Ce<_e?Yn(xe,ie,te):null;e(m.C<K),e(_e<=W);var Be=!1;e:for(;;){for(;Be||Ce<_e;){var qe=0;if(te>=Ve){var Et=Ce-k;e((Ve=m).Pb),Ve.wd=Ve.m,Ve.xd=Et,0<Ve.s.ua&&Xt(Ve.s.Wa,Ve.s.vb),Ve=te+bd}if(ie&Oe||(Fe=Yn(xe,ie,te)),e(Fe!=null),Fe.Qb&&(b[Ce]=Fe.qb,Be=!0),!Be)if(ve(ce),Fe.jc){qe=ce,Et=b;var ot=Ce,Jt=Fe.pd[Q(qe)&ro-1];e(Fe.jc),256>Jt.g?(ge(qe,qe.u+Jt.g),Et[ot]=Jt.value,qe=0):(ge(qe,qe.u+Jt.g-256),e(256<=Jt.value),qe=Jt.value),qe==0&&(Be=!0)}else qe=qn(Fe.G[0],Fe.H[0],ce);if(ce.h)break;if(Be||256>qe){if(!Be)if(Fe.nd)b[Ce]=(Fe.qb|qe<<8)>>>0;else{if(ve(ce),Be=qn(Fe.G[1],Fe.H[1],ce),ve(ce),Et=qn(Fe.G[2],Fe.H[2],ce),ot=qn(Fe.G[3],Fe.H[3],ce),ce.h)break;b[Ce]=(ot<<24|Be<<16|qe<<8|Et)>>>0}if(Be=!1,++Ce,++ie>=M&&(ie=0,++te,X!=null&&te<=K&&!(te%16)&&X(m,te),Pe!=null))for(;ue<Ce;)qe=b[ue++],Pe.X[(506832829*qe&4294967295)>>>Pe.Mb]=qe}else if(280>qe){if(qe=xr(qe-256,ce),Et=qn(Fe.G[4],Fe.H[4],ce),ve(ce),Et=fi(M,Et=xr(Et,ce)),ce.h)break;if(Ce-k<Et||W-Ce<qe)break e;for(ot=0;ot<qe;++ot)b[Ce+ot]=b[Ce+ot-Et];for(Ce+=qe,ie+=qe;ie>=M;)ie-=M,++te,X!=null&&te<=K&&!(te%16)&&X(m,te);if(e(Ce<=W),ie&Oe&&(Fe=Yn(xe,ie,te)),Pe!=null)for(;ue<Ce;)qe=b[ue++],Pe.X[(506832829*qe&4294967295)>>>Pe.Mb]=qe}else{if(!(qe<ke))break e;for(Be=qe-280,e(Pe!=null);ue<Ce;)qe=b[ue++],Pe.X[(506832829*qe&4294967295)>>>Pe.Mb]=qe;qe=Ce,e(!(Be>>>(Et=Pe).Xa)),b[qe]=Et.X[Be],Be=!0}Be||e(ce.h==he(ce))}if(m.Pb&&ce.h&&Ce<W)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Xt(m.s.vb,m.s.Wa);else{if(ce.h)break e;X?.(m,te>K?K:te),m.a=0,m.$=Ce-k}return 1}return m.a=3,0}function br(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var b=m.Wa;b!=null&&(b.X=null),m.vb=null,e(m!=null)}function Fo(){var m=new ft;return m==null?null:(m.a=0,m.xb=wc,sn("Predictor","VP8LPredictors"),sn("Predictor","VP8LPredictors_C"),sn("PredictorAdd","VP8LPredictorsAdd"),sn("PredictorAdd","VP8LPredictorsAdd_C"),jr=Dt,pc=kt,mc=Sn,ba=vn,Ya=ht,Qa=zt,Rl=kn,T.VP8LMapColor32b=Yo,T.VP8LMapColor8b=Il,m)}function fs(m,b,k,M,W){var K=1,X=[m],te=[b],ie=M.m,ce=M.s,xe=null,Ce=0;e:for(;;){if(k)for(;K&&ae(ie,1);){var ue=X,_e=te,ke=M,Ve=1,Pe=ke.m,Oe=ke.gc[ke.ab],Fe=ae(Pe,2);if(ke.Oc&1<<Fe)K=0;else{switch(ke.Oc|=1<<Fe,Oe.hc=Fe,Oe.Ea=ue[0],Oe.nc=_e[0],Oe.K=[null],++ke.ab,e(4>=ke.ab),Fe){case 0:case 1:Oe.b=ae(Pe,3)+2,Ve=fs(Ke(Oe.Ea,Oe.b),Ke(Oe.nc,Oe.b),0,ke,Oe.K),Oe.K=Oe.K[0];break;case 3:var Be,qe=ae(Pe,8)+1,Et=16<qe?0:4<qe?1:2<qe?2:3;if(ue[0]=Ke(Oe.Ea,Et),Oe.b=Et,Be=Ve=fs(qe,1,0,ke,Oe.K)){var ot,Jt=qe,dt=Oe,gn=1<<(8>>dt.b),Sr=s(gn);if(Sr==null)Be=0;else{var Zt=dt.K[0],at=dt.w;for(Sr[0]=dt.K[0][0],ot=1;ot<1*Jt;++ot)Sr[ot]=ct(Zt[at+ot],Sr[ot-1]);for(;ot<4*gn;++ot)Sr[ot]=0;dt.K[0]=null,dt.K[0]=Sr,Be=1}}Ve=Be;break;case 2:break;default:e(0)}K=Ve}}if(X=X[0],te=te[0],K&&ae(ie,1)&&!(K=1<=(Ce=ae(ie,4))&&11>=Ce)){M.a=3;break e}var rt;if(rt=K)t:{var Lr,qt,dn,ir=M,gi=X,$r=te,mr=Ce,ni=k,yi=ir.m,lr=ir.s,bn=[null],Pn=1,cr=0,Rn=Mp[mr];n:for(;;){if(ni&&ae(yi,1)){var Tr=ae(yi,3)+2,kr=Ke(gi,Tr),Xn=Ke($r,Tr),Wi=kr*Xn;if(!fs(kr,Xn,0,ir,bn))break n;for(bn=bn[0],lr.xc=Tr,Lr=0;Lr<Wi;++Lr){var Kn=bn[Lr]>>8&65535;bn[Lr]=Kn,Kn>=Pn&&(Pn=Kn+1)}}if(yi.h)break n;for(qt=0;5>qt;++qt){var Jn=Ol[qt];!qt&&0<mr&&(Jn+=1<<mr),cr<Jn&&(cr=Jn)}var Hr=a(Pn*Rn,D),Di=Pn,Ns=a(Di,se);if(Ns==null)var Dr=null;else e(65536>=Di),Dr=Ns;var Mr=s(cr);if(Dr==null||Mr==null||Hr==null){ir.a=1;break n}var Gi=Hr;for(Lr=dn=0;Lr<Pn;++Lr){var Zn=Dr[Lr],Ki=Zn.G,oo=Zn.H,ko=0,vi=1,Or=0;for(qt=0;5>qt;++qt){Jn=Ol[qt],Ki[qt]=Gi,oo[qt]=dn,!qt&&0<mr&&(Jn+=1<<mr);i:{var tl,Na=Jn,Nc=ir,Jo=Mr,Bp=Gi,ef=dn,sr=0,Co=Nc.m,tf=ae(Co,1);if(i(Jo,0,0,Na),tf){var nf=ae(Co,1)+1,_d=ae(Co,1),Ad=ae(Co,_d==0?1:8);Jo[Ad]=1,nf==2&&(Jo[Ad=ae(Co,8)]=1);var Zo=1}else{var ur=s(19),Wr=ae(Co,4)+4;if(19<Wr){Nc.a=3;var Fr=0;break i}for(tl=0;tl<Wr;++tl)ur[S0[tl]]=ae(Co,3);var Ec=void 0,Ea=void 0,Sc=Nc,R0=ur,ri=Na,Nd=Jo,Au=0,ea=Sc.m,Io=8,$s=a(128,D);r:for(;L($s,0,7,R0,19);){if(ae(ea,1)){var Nu=2+2*ae(ea,3);if((Ec=2+ae(ea,Nu))>ri)break r}else Ec=ri;for(Ea=0;Ea<ri&&Ec--;){ve(ea);var Ed=$s[0+(127&Q(ea))];ge(ea,ea.u+Ed.g);var nl=Ed.value;if(16>nl)Nd[Ea++]=nl,nl!=0&&(Io=nl);else{var zp=nl==16,rf=nl-16,qp=xd[rf],sf=ae(ea,xu[rf])+qp;if(Ea+sf>ri)break r;for(var $p=zp?Io:0;0<sf--;)Nd[Ea++]=$p}}Au=1;break r}Au||(Sc.a=3),Zo=Au}(Zo=Zo&&!Co.h)&&(sr=L(Bp,ef,8,Jo,Na)),Zo&&sr!=0?Fr=sr:(Nc.a=3,Fr=0)}if(Fr==0)break n;if(vi&&Dp[qt]==1&&(vi=Gi[dn].g==0),ko+=Gi[dn].g,dn+=Fr,3>=qt){var Tc,Sd=Mr[0];for(Tc=1;Tc<Jn;++Tc)Mr[Tc]>Sd&&(Sd=Mr[Tc]);Or+=Sd}}if(Zn.nd=vi,Zn.Qb=0,vi&&(Zn.qb=(Ki[3][oo[3]+0].value<<24|Ki[1][oo[1]+0].value<<16|Ki[2][oo[2]+0].value)>>>0,ko==0&&256>Ki[0][oo[0]+0].value&&(Zn.Qb=1,Zn.qb+=Ki[0][oo[0]+0].value<<8)),Zn.jc=!Zn.Qb&&6>Or,Zn.jc){var Eu,Hs=Zn;for(Eu=0;Eu<ro;++Eu){var Sa=Eu,Po=Hs.pd[Sa],zl=Hs.G[0][Hs.H[0]+Sa];256<=zl.value?(Po.g=zl.g+256,Po.value=zl.value):(Po.g=0,Po.value=0,Sa>>=dr(zl,8,Po),Sa>>=dr(Hs.G[1][Hs.H[1]+Sa],16,Po),Sa>>=dr(Hs.G[2][Hs.H[2]+Sa],0,Po),dr(Hs.G[3][Hs.H[3]+Sa],24,Po))}}}lr.vc=bn,lr.Wb=Pn,lr.Ya=Dr,lr.yc=Hr,rt=1;break t}rt=0}if(!(K=rt)){M.a=3;break e}if(0<Ce){if(ce.ua=1<<Ce,!fe(ce.Wa,Ce)){M.a=1,K=0;break e}}else ce.ua=0;var Td=M,kd=X,Hp=te,Cd=Td.s,Id=Cd.xc;if(Td.c=kd,Td.i=Hp,Cd.md=Ke(kd,Id),Cd.wc=Id==0?-1:(1<<Id)-1,k){M.xb=Xo;break e}if((xe=s(X*te))==null){M.a=1,K=0;break e}K=(K=Ai(M,xe,0,X,te,te,null))&&!ie.h;break e}return K?(W!=null?W[0]=xe:(e(xe==null),e(k)),M.$=0,k||br(ce)):br(ce),K}function Js(m,b){var k=m.c*m.i,M=k+b+16*b;return e(m.c<=b),m.V=s(M),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+k+b,1)}function xo(m,b){var k=m.C,M=b-k,W=m.V,K=m.Ba+m.c*k;for(e(b<=m.l.o);0<M;){var X=16<M?16:M,te=m.l.ma,ie=m.l.width,ce=ie*X,xe=te.ca,Ce=te.tb+ie*k,ue=m.Ta,_e=m.Ua;vo(m,X,W,K),qh(ue,_e,xe,Ce,ce),Us(te,k,k+X,xe,Ce,ie),M-=X,W+=X*m.c,k+=X}e(k==b),m.C=m.Ma=b}function Vo(){this.ub=this.yd=this.td=this.Rb=0}function ha(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function uu(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Mn(){this.Yb=(function(){var m=[];return(function b(k,M,W){for(var K=W[M],X=0;X<K&&(k.push(W.length>M+1?[]:0),!(W.length<M+1));X++)b(k[X],M+1,W)})(m,0,[3,11]),m})()}function Al(){this.jb=s(3),this.Wc=c([4,8],Mn),this.Xc=c([4,17],Mn)}function Uo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ei(){this.ld=this.La=this.dd=this.tc=0}function Bi(){this.Na=this.la=0}function Ua(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ba(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new ei),this.Y=0,this.ya=Array(new Ba),this.aa=0,this.l=new Br}function zi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Nl(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new Vo,this.Kc=new ha,this.ed=new Uo,this.Qa=new uu,this.Ic=this.$c=this.Aa=0,this.D=new Bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,F),this.ia=0,this.pb=a(4,Ua),this.Pa=new Al,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zi),this.Hd=0,this.rb=Array(new Bi),this.sb=0,this.wa=Array(new ei),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ba),this.L=this.aa=0,this.gd=c([4,2],ei),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Br(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function El(){var m=new Nl;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Fl||(Fl=ps)),m}function hr(m,b,k){return m.a==0&&(m.a=b,m.sc=k,m.cb=0),0}function Sl(m,b,k){return 3<=k&&m[b+0]==157&&m[b+1]==1&&m[b+2]==42}function fa(m,b){if(m==null)return 0;if(m.a=0,m.sc="OK",b==null)return hr(m,2,"null VP8Io passed to VP8GetHeaders()");var k=b.data,M=b.w,W=b.ha;if(4>W)return hr(m,7,"Truncated header.");var K=k[M+0]|k[M+1]<<8|k[M+2]<<16,X=m.Od;if(X.Rb=!(1&K),X.td=K>>1&7,X.yd=K>>4&1,X.ub=K>>5,3<X.td)return hr(m,3,"Incorrect keyframe parameters.");if(!X.yd)return hr(m,4,"Frame not displayable.");M+=3,W-=3;var te=m.Kc;if(X.Rb){if(7>W)return hr(m,7,"cannot parse picture header");if(!Sl(k,M,W))return hr(m,3,"Bad code word");te.c=16383&(k[M+4]<<8|k[M+3]),te.Td=k[M+4]>>6,te.i=16383&(k[M+6]<<8|k[M+5]),te.Ud=k[M+6]>>6,M+=7,W-=7,m.za=te.c+15>>4,m.Ub=te.i+15>>4,b.width=te.c,b.height=te.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,i((K=m.Pa).jb,0,255,K.jb.length),e((K=m.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,i(K.Zb,0,0,K.Zb.length),i(K.Lb,0,0,K.Lb)}if(X.ub>W)return hr(m,7,"bad partition length");oe(K=m.m,k,M,X.ub),M+=X.ub,W-=X.ub,X.Rb&&(te.Ld=Te(K),te.Kd=Te(K)),te=m.Qa;var ie,ce=m.Pa;if(e(K!=null),e(te!=null),te.Cb=Te(K),te.Cb){if(te.Bb=Te(K),Te(K)){for(te.Fb=Te(K),ie=0;4>ie;++ie)te.Zb[ie]=Te(K)?Y(K,7):0;for(ie=0;4>ie;++ie)te.Lb[ie]=Te(K)?Y(K,6):0}if(te.Bb)for(ie=0;3>ie;++ie)ce.jb[ie]=Te(K)?Z(K,8):255}else te.Bb=0;if(K.Ka)return hr(m,3,"cannot parse segment header");if((te=m.ed).zd=Te(K),te.Tb=Z(K,6),te.wb=Z(K,3),te.Pc=Te(K),te.Pc&&Te(K)){for(ce=0;4>ce;++ce)Te(K)&&(te.vd[ce]=Y(K,6));for(ce=0;4>ce;++ce)Te(K)&&(te.od[ce]=Y(K,6))}if(m.L=te.Tb==0?0:te.zd?1:2,K.Ka)return hr(m,3,"cannot parse filter header");var xe=W;if(W=ie=M,M=ie+xe,te=xe,m.Xb=(1<<Z(m.m,2))-1,xe<3*(ce=m.Xb))k=7;else{for(ie+=3*ce,te-=3*ce,xe=0;xe<ce;++xe){var Ce=k[W+0]|k[W+1]<<8|k[W+2]<<16;Ce>te&&(Ce=te),oe(m.Jc[+xe],k,ie,Ce),ie+=Ce,te-=Ce,W+=3}oe(m.Jc[+ce],k,ie,te),k=ie<M?0:5}if(k!=0)return hr(m,k,"cannot parse partitions");for(k=Z(ie=m.m,7),W=Te(ie)?Y(ie,4):0,M=Te(ie)?Y(ie,4):0,te=Te(ie)?Y(ie,4):0,ce=Te(ie)?Y(ie,4):0,ie=Te(ie)?Y(ie,4):0,xe=m.Qa,Ce=0;4>Ce;++Ce){if(xe.Cb){var ue=xe.Zb[Ce];xe.Fb||(ue+=k)}else{if(0<Ce){m.pb[Ce]=m.pb[0];continue}ue=k}var _e=m.pb[Ce];_e.Sc[0]=bc[ln(ue+W,127)],_e.Sc[1]=bu[ln(ue+0,127)],_e.Eb[0]=2*bc[ln(ue+M,127)],_e.Eb[1]=101581*bu[ln(ue+te,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=bc[ln(ue+ce,117)],_e.Qc[1]=bu[ln(ue+ie,127)],_e.lc=ue+ie}if(!X.Rb)return hr(m,4,"Not a key frame.");for(Te(K),X=m.Pa,k=0;4>k;++k){for(W=0;8>W;++W)for(M=0;3>M;++M)for(te=0;11>te;++te)ce=je(K,C0[k][W][M][te])?Z(K,8):Fp[k][W][M][te],X.Wc[k][W].Yb[M][te]=ce;for(W=0;17>W;++W)X.Xc[k][W]=X.Wc[k][Xh[W]]}return m.kc=Te(K),m.kc&&(m.Bd=Z(K,8)),m.cb=1}function ps(m,b,k,M,W,K,X){var te=b[W].Yb[k];for(k=0;16>W;++W){if(!je(m,te[k+0]))return W;for(;!je(m,te[k+1]);)if(te=b[++W].Yb[0],k=0,W==16)return 16;var ie=b[W+1].Yb;if(je(m,te[k+2])){var ce=m,xe=0;if(je(ce,(ue=te)[(Ce=k)+3]))if(je(ce,ue[Ce+6])){for(te=0,Ce=2*(xe=je(ce,ue[Ce+8]))+(ue=je(ce,ue[Ce+9+xe])),xe=0,ue=Yh[Ce];ue[te];++te)xe+=xe+je(ce,ue[te]);xe+=3+(8<<Ce)}else je(ce,ue[Ce+7])?(xe=7+2*je(ce,165),xe+=je(ce,145)):xe=5+je(ce,159);else xe=je(ce,ue[Ce+4])?3+je(ce,ue[Ce+5]):2;te=ie[2]}else xe=1,te=ie[1];ie=X+Qh[W],0>(ce=m).b&&Ee(ce);var Ce,ue=ce.b,_e=(Ce=ce.Ca>>1)-(ce.I>>ue)>>31;--ce.b,ce.Ca+=_e,ce.Ca|=1,ce.I-=(Ce+1&_e)<<ue,K[ie]=((xe^_e)-_e)*M[(0<W)+0]}return 16}function ms(m){var b=m.rb[m.sb-1];b.la=0,b.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function Ni(m,b,k,M,W){W=m[b+k+32*M]+(W>>3),m[b+k+32*M]=-256&W?0>W?0:255:W}function pa(m,b,k,M,W,K){Ni(m,b,0,k,M+W),Ni(m,b,1,k,M+K),Ni(m,b,2,k,M-K),Ni(m,b,3,k,M-W)}function Un(m){return(20091*m>>16)+m}function Ei(m,b,k,M){var W,K=0,X=s(16);for(W=0;4>W;++W){var te=m[b+0]+m[b+8],ie=m[b+0]-m[b+8],ce=(35468*m[b+4]>>16)-Un(m[b+12]),xe=Un(m[b+4])+(35468*m[b+12]>>16);X[K+0]=te+xe,X[K+1]=ie+ce,X[K+2]=ie-ce,X[K+3]=te-xe,K+=4,b++}for(W=K=0;4>W;++W)te=(m=X[K+0]+4)+X[K+8],ie=m-X[K+8],ce=(35468*X[K+4]>>16)-Un(X[K+12]),Ni(k,M,0,0,te+(xe=Un(X[K+4])+(35468*X[K+12]>>16))),Ni(k,M,1,0,ie+ce),Ni(k,M,2,0,ie-ce),Ni(k,M,3,0,te-xe),K++,M+=32}function ma(m,b,k,M){var W=m[b+0]+4,K=35468*m[b+4]>>16,X=Un(m[b+4]),te=35468*m[b+1]>>16;pa(k,M,0,W+X,m=Un(m[b+1]),te),pa(k,M,1,W+K,m,te),pa(k,M,2,W-K,m,te),pa(k,M,3,W-X,m,te)}function zo(m,b,k,M,W){Ei(m,b,k,M),W&&Ei(m,b+16,k,M+4)}function qo(m,b,k,M){jl(m,b+0,k,M,1),jl(m,b+32,k,M+128,1)}function mn(m,b,k,M){var W;for(m=m[b+0]+4,W=0;4>W;++W)for(b=0;4>b;++b)Ni(k,M,b,W,m)}function bo(m,b,k,M){m[b+0]&&In(m,b+0,k,M),m[b+16]&&In(m,b+16,k,M+4),m[b+32]&&In(m,b+32,k,M+128),m[b+48]&&In(m,b+48,k,M+128+4)}function cn(m,b,k,M){var W,K=s(16);for(W=0;4>W;++W){var X=m[b+0+W]+m[b+12+W],te=m[b+4+W]+m[b+8+W],ie=m[b+4+W]-m[b+8+W],ce=m[b+0+W]-m[b+12+W];K[0+W]=X+te,K[8+W]=X-te,K[4+W]=ce+ie,K[12+W]=ce-ie}for(W=0;4>W;++W)X=(m=K[0+4*W]+3)+K[3+4*W],te=K[1+4*W]+K[2+4*W],ie=K[1+4*W]-K[2+4*W],ce=m-K[3+4*W],k[M+0]=X+te>>3,k[M+16]=ce+ie>>3,k[M+32]=X-te>>3,k[M+48]=ce-ie>>3,M+=64}function Zi(m,b,k){var M,W=b-32,K=ns,X=255-m[W-1];for(M=0;M<k;++M){var te,ie=K,ce=X+m[b-1];for(te=0;te<k;++te)m[b+te]=ie[ce+m[W+te]];b+=32}}function za(m,b){Zi(m,b,4)}function qa(m,b){Zi(m,b,8)}function lc(m,b){Zi(m,b,16)}function cc(m,b){var k;for(k=0;16>k;++k)r(m,b+32*k,m,b-32,16)}function $a(m,b){var k;for(k=16;0<k;--k)i(m,b,m[b-1],16),b+=32}function wo(m,b,k){var M;for(M=0;16>M;++M)i(b,k+32*M,m,16)}function Si(m,b){var k,M=16;for(k=0;16>k;++k)M+=m[b-1+32*k]+m[b+k-32];wo(M>>5,m,b)}function ti(m,b){var k,M=8;for(k=0;16>k;++k)M+=m[b-1+32*k];wo(M>>4,m,b)}function Ti(m,b){var k,M=8;for(k=0;16>k;++k)M+=m[b+k-32];wo(M>>4,m,b)}function es(m,b){wo(128,m,b)}function Rt(m,b,k){return m+2*b+k+2>>2}function gs(m,b){var k,M=b-32;for(M=new Uint8Array([Rt(m[M-1],m[M+0],m[M+1]),Rt(m[M+0],m[M+1],m[M+2]),Rt(m[M+1],m[M+2],m[M+3]),Rt(m[M+2],m[M+3],m[M+4])]),k=0;4>k;++k)r(m,b+32*k,M,0,M.length)}function Zs(m,b){var k=m[b-1],M=m[b-1+32],W=m[b-1+64],K=m[b-1+96];ze(m,b+0,16843009*Rt(m[b-1-32],k,M)),ze(m,b+32,16843009*Rt(k,M,W)),ze(m,b+64,16843009*Rt(M,W,K)),ze(m,b+96,16843009*Rt(W,K,K))}function du(m,b){var k,M=4;for(k=0;4>k;++k)M+=m[b+k-32]+m[b-1+32*k];for(M>>=3,k=0;4>k;++k)i(m,b+32*k,M,4)}function uc(m,b){var k=m[b-1+0],M=m[b-1+32],W=m[b-1+64],K=m[b-1-32],X=m[b+0-32],te=m[b+1-32],ie=m[b+2-32],ce=m[b+3-32];m[b+0+96]=Rt(M,W,m[b-1+96]),m[b+1+96]=m[b+0+64]=Rt(k,M,W),m[b+2+96]=m[b+1+64]=m[b+0+32]=Rt(K,k,M),m[b+3+96]=m[b+2+64]=m[b+1+32]=m[b+0+0]=Rt(X,K,k),m[b+3+64]=m[b+2+32]=m[b+1+0]=Rt(te,X,K),m[b+3+32]=m[b+2+0]=Rt(ie,te,X),m[b+3+0]=Rt(ce,ie,te)}function wr(m,b){var k=m[b+1-32],M=m[b+2-32],W=m[b+3-32],K=m[b+4-32],X=m[b+5-32],te=m[b+6-32],ie=m[b+7-32];m[b+0+0]=Rt(m[b+0-32],k,M),m[b+1+0]=m[b+0+32]=Rt(k,M,W),m[b+2+0]=m[b+1+32]=m[b+0+64]=Rt(M,W,K),m[b+3+0]=m[b+2+32]=m[b+1+64]=m[b+0+96]=Rt(W,K,X),m[b+3+32]=m[b+2+64]=m[b+1+96]=Rt(K,X,te),m[b+3+64]=m[b+2+96]=Rt(X,te,ie),m[b+3+96]=Rt(te,ie,ie)}function _o(m,b){var k=m[b-1+0],M=m[b-1+32],W=m[b-1+64],K=m[b-1-32],X=m[b+0-32],te=m[b+1-32],ie=m[b+2-32],ce=m[b+3-32];m[b+0+0]=m[b+1+64]=K+X+1>>1,m[b+1+0]=m[b+2+64]=X+te+1>>1,m[b+2+0]=m[b+3+64]=te+ie+1>>1,m[b+3+0]=ie+ce+1>>1,m[b+0+96]=Rt(W,M,k),m[b+0+64]=Rt(M,k,K),m[b+0+32]=m[b+1+96]=Rt(k,K,X),m[b+1+32]=m[b+2+96]=Rt(K,X,te),m[b+2+32]=m[b+3+96]=Rt(X,te,ie),m[b+3+32]=Rt(te,ie,ce)}function dc(m,b){var k=m[b+0-32],M=m[b+1-32],W=m[b+2-32],K=m[b+3-32],X=m[b+4-32],te=m[b+5-32],ie=m[b+6-32],ce=m[b+7-32];m[b+0+0]=k+M+1>>1,m[b+1+0]=m[b+0+64]=M+W+1>>1,m[b+2+0]=m[b+1+64]=W+K+1>>1,m[b+3+0]=m[b+2+64]=K+X+1>>1,m[b+0+32]=Rt(k,M,W),m[b+1+32]=m[b+0+96]=Rt(M,W,K),m[b+2+32]=m[b+1+96]=Rt(W,K,X),m[b+3+32]=m[b+2+96]=Rt(K,X,te),m[b+3+64]=Rt(X,te,ie),m[b+3+96]=Rt(te,ie,ce)}function Ao(m,b){var k=m[b-1+0],M=m[b-1+32],W=m[b-1+64],K=m[b-1+96];m[b+0+0]=k+M+1>>1,m[b+2+0]=m[b+0+32]=M+W+1>>1,m[b+2+32]=m[b+0+64]=W+K+1>>1,m[b+1+0]=Rt(k,M,W),m[b+3+0]=m[b+1+32]=Rt(M,W,K),m[b+3+32]=m[b+1+64]=Rt(W,K,K),m[b+3+64]=m[b+2+64]=m[b+0+96]=m[b+1+96]=m[b+2+96]=m[b+3+96]=K}function eo(m,b){var k=m[b-1+0],M=m[b-1+32],W=m[b-1+64],K=m[b-1+96],X=m[b-1-32],te=m[b+0-32],ie=m[b+1-32],ce=m[b+2-32];m[b+0+0]=m[b+2+32]=k+X+1>>1,m[b+0+32]=m[b+2+64]=M+k+1>>1,m[b+0+64]=m[b+2+96]=W+M+1>>1,m[b+0+96]=K+W+1>>1,m[b+3+0]=Rt(te,ie,ce),m[b+2+0]=Rt(X,te,ie),m[b+1+0]=m[b+3+32]=Rt(k,X,te),m[b+1+32]=m[b+3+64]=Rt(M,k,X),m[b+1+64]=m[b+3+96]=Rt(W,M,k),m[b+1+96]=Rt(K,W,M)}function Ha(m,b){var k;for(k=0;8>k;++k)r(m,b+32*k,m,b-32,8)}function ki(m,b){var k;for(k=0;8>k;++k)i(m,b,m[b-1],8),b+=32}function qi(m,b,k){var M;for(M=0;8>M;++M)i(b,k+32*M,m,8)}function ys(m,b){var k,M=8;for(k=0;8>k;++k)M+=m[b+k-32]+m[b-1+32*k];qi(M>>4,m,b)}function $o(m,b){var k,M=4;for(k=0;8>k;++k)M+=m[b+k-32];qi(M>>3,m,b)}function $n(m,b){var k,M=4;for(k=0;8>k;++k)M+=m[b-1+32*k];qi(M>>3,m,b)}function Tl(m,b){qi(128,m,b)}function No(m,b,k){var M=m[b-k],W=m[b+0],K=3*(W-M)+Qo[1020+m[b-2*k]-m[b+k]],X=vc[112+(K+4>>3)];m[b-k]=ns[255+M+vc[112+(K+3>>3)]],m[b+0]=ns[255+W-X]}function Bs(m,b,k,M){var W=m[b+0],K=m[b+k];return io[255+m[b-2*k]-m[b-k]]>M||io[255+K-W]>M}function Ho(m,b,k,M){return 4*io[255+m[b-k]-m[b+0]]+io[255+m[b-2*k]-m[b+k]]<=M}function Wo(m,b,k,M,W){var K=m[b-3*k],X=m[b-2*k],te=m[b-k],ie=m[b+0],ce=m[b+k],xe=m[b+2*k],Ce=m[b+3*k];return 4*io[255+te-ie]+io[255+X-ce]>M?0:io[255+m[b-4*k]-K]<=W&&io[255+K-X]<=W&&io[255+X-te]<=W&&io[255+Ce-xe]<=W&&io[255+xe-ce]<=W&&io[255+ce-ie]<=W}function Ci(m,b,k,M){var W=2*M+1;for(M=0;16>M;++M)Ho(m,b+M,k,W)&&No(m,b+M,k)}function to(m,b,k,M){var W=2*M+1;for(M=0;16>M;++M)Ho(m,b+M*k,1,W)&&No(m,b+M*k,1)}function Ii(m,b,k,M){var W;for(W=3;0<W;--W)Ci(m,b+=4*k,k,M)}function Wa(m,b,k,M){var W;for(W=3;0<W;--W)to(m,b+=4,k,M)}function vs(m,b,k,M,W,K,X,te){for(K=2*K+1;0<W--;){if(Wo(m,b,k,K,X))if(Bs(m,b,k,te))No(m,b,k);else{var ie=m,ce=b,xe=k,Ce=ie[ce-2*xe],ue=ie[ce-xe],_e=ie[ce+0],ke=ie[ce+xe],Ve=ie[ce+2*xe],Pe=27*(Fe=Qo[1020+3*(_e-ue)+Qo[1020+Ce-ke]])+63>>7,Oe=18*Fe+63>>7,Fe=9*Fe+63>>7;ie[ce-3*xe]=ns[255+ie[ce-3*xe]+Fe],ie[ce-2*xe]=ns[255+Ce+Oe],ie[ce-xe]=ns[255+ue+Pe],ie[ce+0]=ns[255+_e-Pe],ie[ce+xe]=ns[255+ke-Oe],ie[ce+2*xe]=ns[255+Ve-Fe]}b+=M}}function pi(m,b,k,M,W,K,X,te){for(K=2*K+1;0<W--;){if(Wo(m,b,k,K,X))if(Bs(m,b,k,te))No(m,b,k);else{var ie=m,ce=b,xe=k,Ce=ie[ce-xe],ue=ie[ce+0],_e=ie[ce+xe],ke=vc[112+(4+(Ve=3*(ue-Ce))>>3)],Ve=vc[112+(Ve+3>>3)],Pe=ke+1>>1;ie[ce-2*xe]=ns[255+ie[ce-2*xe]+Pe],ie[ce-xe]=ns[255+Ce+Ve],ie[ce+0]=ns[255+ue-ke],ie[ce+xe]=ns[255+_e-Pe]}b+=M}}function Ga(m,b,k,M,W,K){vs(m,b,k,1,16,M,W,K)}function zr(m,b,k,M,W,K){vs(m,b,1,k,16,M,W,K)}function Pi(m,b,k,M,W,K){var X;for(X=3;0<X;--X)pi(m,b+=4*k,k,1,16,M,W,K)}function ga(m,b,k,M,W,K){var X;for(X=3;0<X;--X)pi(m,b+=4,1,k,16,M,W,K)}function A(m,b,k,M,W,K,X,te){vs(m,b,W,1,8,K,X,te),vs(k,M,W,1,8,K,X,te)}function H(m,b,k,M,W,K,X,te){vs(m,b,1,W,8,K,X,te),vs(k,M,1,W,8,K,X,te)}function de(m,b,k,M,W,K,X,te){pi(m,b+4*W,W,1,8,K,X,te),pi(k,M+4*W,W,1,8,K,X,te)}function ye(m,b,k,M,W,K,X,te){pi(m,b+4,1,W,8,K,X,te),pi(k,M+4,1,W,8,K,X,te)}function Ne(){this.ba=new pn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new an,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ue(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function $e(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function st(){this.ua=0,this.Wa=new Pt,this.vb=new Pt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new se,this.yc=new D}function ft(){this.xb=this.a=0,this.l=new Br,this.ca=new pn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new st,this.ab=0,this.gc=a(4,$e),this.Oc=0}function Lt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Br,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Vt(m,b,k,M,W,K,X){for(m=m==null?0:m[b+0],b=0;b<X;++b)W[K+b]=m+k[M+b]&255,m=W[K+b]}function wn(m,b,k,M,W,K,X){var te;if(m==null)Vt(null,null,k,M,W,K,X);else for(te=0;te<X;++te)W[K+te]=m[b+te]+k[M+te]&255}function Cn(m,b,k,M,W,K,X){if(m==null)Vt(null,null,k,M,W,K,X);else{var te,ie=m[b+0],ce=ie,xe=ie;for(te=0;te<X;++te)ce=xe+(ie=m[b+te])-ce,xe=k[M+te]+(-256&ce?0>ce?0:255:ce)&255,ce=ie,W[K+te]=xe}}function fr(m,b,k,M){var W=b.width,K=b.o;if(e(m!=null&&b!=null),0>k||0>=M||k+M>K)return null;if(!m.Cc){if(m.ga==null){var X;if(m.ga=new Lt,(X=m.ga==null)||(X=b.width*b.o,e(m.Gb.length==0),m.Gb=s(X),m.Uc=0,m.Gb==null?X=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,X=1),X=!X),!X){X=m.ga;var te=m.Fa,ie=m.P,ce=m.qc,xe=m.mb,Ce=m.nb,ue=ie+1,_e=ce-1,ke=X.l;if(e(te!=null&&xe!=null&&b!=null),Hi[0]=null,Hi[1]=Vt,Hi[2]=wn,Hi[3]=Cn,X.ca=xe,X.tb=Ce,X.c=b.width,X.i=b.height,e(0<X.c&&0<X.i),1>=ce)b=0;else if(X.$a=3&te[ie+0],X.Z=te[ie+0]>>2&3,X.Lc=te[ie+0]>>4&3,ie=te[ie+0]>>6&3,0>X.$a||1<X.$a||4<=X.Z||1<X.Lc||ie)b=0;else if(ke.put=It,ke.ac=hi,ke.bc=Vn,ke.ma=X,ke.width=b.width,ke.height=b.height,ke.Da=b.Da,ke.v=b.v,ke.va=b.va,ke.j=b.j,ke.o=b.o,X.$a)e:{e(X.$a==1),b=Fo();t:for(;;){if(b==null){b=0;break e}if(e(X!=null),X.mc=b,b.c=X.c,b.i=X.i,b.l=X.l,b.l.ma=X,b.l.width=X.c,b.l.height=X.i,b.a=0,pe(b.m,te,ue,_e),!fs(X.c,X.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&Ui(b.s)?(X.ic=1,te=b.c*b.i,b.Ta=null,b.Ua=0,b.V=s(te),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(X.ic=0,b=Js(b,X.c)),!b))break t;b=1;break e}X.mc=null,b=0}else b=_e>=X.c*X.i;X=!b}if(X)return null;m.ga.Lc!=1?m.Ga=0:M=K-k}e(m.ga!=null),e(k+M<=K);e:{if(b=(te=m.ga).c,K=te.l.o,te.$a==0){if(ue=m.rc,_e=m.Vc,ke=m.Fa,ie=m.P+1+k*b,ce=m.mb,xe=m.nb+k*b,e(ie<=m.P+m.qc),te.Z!=0)for(e(Hi[te.Z]!=null),X=0;X<M;++X)Hi[te.Z](ue,_e,ke,ie,ce,xe,b),ue=ce,_e=xe,xe+=b,ie+=b;else for(X=0;X<M;++X)r(ce,xe,ke,ie,b),ue=ce,_e=xe,xe+=b,ie+=b;m.rc=ue,m.Vc=_e}else{if(e(te.mc!=null),b=k+M,e((X=te.mc)!=null),e(b<=X.i),X.C>=b)b=1;else if(te.ic||rr(),te.ic){te=X.V,ue=X.Ba,_e=X.c;var Ve=X.i,Pe=(ke=1,ie=X.$/_e,ce=X.$%_e,xe=X.m,Ce=X.s,X.$),Oe=_e*Ve,Fe=_e*b,Be=Ce.wc,qe=Pe<Fe?Yn(Ce,ce,ie):null;e(Pe<=Oe),e(b<=Ve),e(Ui(Ce));t:for(;;){for(;!xe.h&&Pe<Fe;){if(ce&Be||(qe=Yn(Ce,ce,ie)),e(qe!=null),ve(xe),256>(Ve=qn(qe.G[0],qe.H[0],xe)))te[ue+Pe]=Ve,++Pe,++ce>=_e&&(ce=0,++ie<=b&&!(ie%16)&&Rr(X,ie));else{if(!(280>Ve)){ke=0;break t}Ve=xr(Ve-256,xe);var Et,ot=qn(qe.G[4],qe.H[4],xe);if(ve(xe),!(Pe>=(ot=fi(_e,ot=xr(ot,xe)))&&Oe-Pe>=Ve)){ke=0;break t}for(Et=0;Et<Ve;++Et)te[ue+Pe+Et]=te[ue+Pe+Et-ot];for(Pe+=Ve,ce+=Ve;ce>=_e;)ce-=_e,++ie<=b&&!(ie%16)&&Rr(X,ie);Pe<Fe&&ce&Be&&(qe=Yn(Ce,ce,ie))}e(xe.h==he(xe))}Rr(X,ie>b?b:ie);break t}!ke||xe.h&&Pe<Oe?(ke=0,X.a=xe.h?5:3):X.$=Pe,b=ke}else b=Ai(X,X.V,X.Ba,X.c,X.i,b,xo);if(!b){M=0;break e}}k+M>=K&&(m.Cc=1),M=1}if(!M)return null;if(m.Cc&&((M=m.ga)!=null&&(M.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+k*W}function Bn(m,b,k,M,W,K){for(;0<W--;){var X,te=m,ie=b+(k?1:0),ce=m,xe=b+(k?0:3);for(X=0;X<M;++X){var Ce=ce[xe+4*X];Ce!=255&&(Ce*=32897,te[ie+4*X+0]=te[ie+4*X+0]*Ce>>23,te[ie+4*X+1]=te[ie+4*X+1]*Ce>>23,te[ie+4*X+2]=te[ie+4*X+2]*Ce>>23)}b+=K}}function _r(m,b,k,M,W){for(;0<M--;){var K;for(K=0;K<k;++K){var X=m[b+2*K+0],te=15&(ce=m[b+2*K+1]),ie=4369*te,ce=(240&ce|ce>>4)*ie>>16;m[b+2*K+0]=(240&X|X>>4)*ie>>16&240|(15&X|X<<4)*ie>>16>>4&15,m[b+2*K+1]=240&ce|te}b+=W}}function ar(m,b,k,M,W,K,X,te){var ie,ce,xe=255;for(ce=0;ce<W;++ce){for(ie=0;ie<M;++ie){var Ce=m[b+ie];K[X+4*ie]=Ce,xe&=Ce}b+=k,X+=te}return xe!=255}function Ar(m,b,k,M,W){var K;for(K=0;K<W;++K)k[M+K]=m[b+K]>>8}function rr(){Dl=Bn,zh=_r,pu=ar,qh=Ar}function Ri(m,b,k){T[m]=function(M,W,K,X,te,ie,ce,xe,Ce,ue,_e,ke,Ve,Pe,Oe,Fe,Be){var qe,Et=Be-1>>1,ot=te[ie+0]|ce[xe+0]<<16,Jt=Ce[ue+0]|_e[ke+0]<<16;e(M!=null);var dt=3*ot+Jt+131074>>2;for(b(M[W+0],255&dt,dt>>16,Ve,Pe),K!=null&&(dt=3*Jt+ot+131074>>2,b(K[X+0],255&dt,dt>>16,Oe,Fe)),qe=1;qe<=Et;++qe){var gn=te[ie+qe]|ce[xe+qe]<<16,Sr=Ce[ue+qe]|_e[ke+qe]<<16,Zt=ot+gn+Jt+Sr+524296,at=Zt+2*(gn+Jt)>>3;dt=at+ot>>1,ot=(Zt=Zt+2*(ot+Sr)>>3)+gn>>1,b(M[W+2*qe-1],255&dt,dt>>16,Ve,Pe+(2*qe-1)*k),b(M[W+2*qe-0],255&ot,ot>>16,Ve,Pe+(2*qe-0)*k),K!=null&&(dt=Zt+Jt>>1,ot=at+Sr>>1,b(K[X+2*qe-1],255&dt,dt>>16,Oe,Fe+(2*qe-1)*k),b(K[X+2*qe+0],255&ot,ot>>16,Oe,Fe+(2*qe+0)*k)),ot=gn,Jt=Sr}1&Be||(dt=3*ot+Jt+131074>>2,b(M[W+Be-1],255&dt,dt>>16,Ve,Pe+(Be-1)*k),K!=null&&(dt=3*Jt+ot+131074>>2,b(K[X+Be-1],255&dt,dt>>16,Oe,Fe+(Be-1)*k)))}}function kl(){ws[yd]=I0,ws[Ja]=Za,ws[Lp]=P0,ws[mu]=_c,ws[gu]=Vl,ws[Qn]=wu,ws[vd]=Jh,ws[xc]=Za,ws[Ml]=_c,ws[yu]=Vl,ws[vu]=wu}function ts(m){return m&-16384?0>m?0:255:m>>el}function g(m,b){return ts((19077*m>>8)+(26149*b>>8)-14234)}function P(m,b,k){return ts((19077*m>>8)-(6419*b>>8)-(13320*k>>8)+8708)}function B(m,b){return ts((19077*m>>8)+(33050*b>>8)-17685)}function re(m,b,k,M,W){M[W+0]=g(m,k),M[W+1]=P(m,b,k),M[W+2]=B(m,b)}function Se(m,b,k,M,W){M[W+0]=B(m,b),M[W+1]=P(m,b,k),M[W+2]=g(m,k)}function Le(m,b,k,M,W){var K=P(m,b,k);b=K<<3&224|B(m,b)>>3,M[W+0]=248&g(m,k)|K>>5,M[W+1]=b}function Xe(m,b,k,M,W){var K=240&B(m,b)|15;M[W+0]=240&g(m,k)|P(m,b,k)>>4,M[W+1]=K}function xn(m,b,k,M,W){M[W+0]=255,re(m,b,k,M,W+1)}function pr(m,b,k,M,W){Se(m,b,k,M,W),M[W+3]=255}function un(m,b,k,M,W){re(m,b,k,M,W),M[W+3]=255}function ln(m,b){return 0>m?0:m>b?b:m}function Hn(m,b,k){T[m]=function(M,W,K,X,te,ie,ce,xe,Ce){for(var ue=xe+(-2&Ce)*k;xe!=ue;)b(M[W+0],K[X+0],te[ie+0],ce,xe),b(M[W+1],K[X+0],te[ie+0],ce,xe+k),W+=2,++X,++ie,xe+=2*k;1&Ce&&b(M[W+0],K[X+0],te[ie+0],ce,xe)}}function ji(m,b,k){return k==0?m==0?b==0?6:5:b==0?4:0:k}function $i(m,b,k,M,W){switch(m>>>30){case 3:jl(b,k,M,W,0);break;case 2:Nr(b,k,M,W);break;case 1:In(b,k,M,W)}}function mi(m,b){var k,M,W=b.M,K=b.Nb,X=m.oc,te=m.pc+40,ie=m.oc,ce=m.pc+584,xe=m.oc,Ce=m.pc+600;for(k=0;16>k;++k)X[te+32*k-1]=129;for(k=0;8>k;++k)ie[ce+32*k-1]=129,xe[Ce+32*k-1]=129;for(0<W?X[te-1-32]=ie[ce-1-32]=xe[Ce-1-32]=129:(i(X,te-32-1,127,21),i(ie,ce-32-1,127,9),i(xe,Ce-32-1,127,9)),M=0;M<m.za;++M){var ue=b.ya[b.aa+M];if(0<M){for(k=-1;16>k;++k)r(X,te+32*k-4,X,te+32*k+12,4);for(k=-1;8>k;++k)r(ie,ce+32*k-4,ie,ce+32*k+4,4),r(xe,Ce+32*k-4,xe,Ce+32*k+4,4)}var _e=m.Gd,ke=m.Hd+M,Ve=ue.ad,Pe=ue.Hc;if(0<W&&(r(X,te-32,_e[ke].y,0,16),r(ie,ce-32,_e[ke].f,0,8),r(xe,Ce-32,_e[ke].ea,0,8)),ue.Za){var Oe=X,Fe=te-32+16;for(0<W&&(M>=m.za-1?i(Oe,Fe,_e[ke].y[15],4):r(Oe,Fe,_e[ke+1].y,0,4)),k=0;4>k;k++)Oe[Fe+128+k]=Oe[Fe+256+k]=Oe[Fe+384+k]=Oe[Fe+0+k];for(k=0;16>k;++k,Pe<<=2)Oe=X,Fe=te+Zh[k],so[ue.Ob[k]](Oe,Fe),$i(Pe,Ve,16*+k,Oe,Fe)}else if(Oe=ji(M,W,ue.Ob[0]),rs[Oe](X,te),Pe!=0)for(k=0;16>k;++k,Pe<<=2)$i(Pe,Ve,16*+k,X,te+Zh[k]);for(k=ue.Gc,Oe=ji(M,W,ue.Dd),bs[Oe](ie,ce),bs[Oe](xe,Ce),Pe=Ve,Oe=ie,Fe=ce,255&(ue=0|k)&&(170&ue?xs(Pe,256,Oe,Fe):Wn(Pe,256,Oe,Fe)),ue=xe,Pe=Ce,255&(k>>=8)&&(170&k?xs(Ve,320,ue,Pe):Wn(Ve,320,ue,Pe)),W<m.Ub-1&&(r(_e[ke].y,0,X,te+480,16),r(_e[ke].f,0,ie,ce+224,8),r(_e[ke].ea,0,xe,Ce+224,8)),k=8*K*m.B,_e=m.sa,ke=m.ta+16*M+16*K*m.R,Ve=m.qa,ue=m.ra+8*M+k,Pe=m.Ha,Oe=m.Ia+8*M+k,k=0;16>k;++k)r(_e,ke+k*m.R,X,te+32*k,16);for(k=0;8>k;++k)r(Ve,ue+k*m.B,ie,ce+32*k,8),r(Pe,Oe+k*m.B,xe,Ce+32*k,8)}}function no(m,b,k,M,W,K,X,te,ie){var ce=[0],xe=[0],Ce=0,ue=ie!=null?ie.kd:0,_e=ie??new Ue;if(m==null||12>k)return 7;_e.data=m,_e.w=b,_e.ha=k,b=[b],k=[k],_e.gb=[_e.gb];e:{var ke=b,Ve=k,Pe=_e.gb;if(e(m!=null),e(Ve!=null),e(Pe!=null),Pe[0]=0,12<=Ve[0]&&!n(m,ke[0],"RIFF")){if(n(m,ke[0]+8,"WEBP")){Pe=3;break e}var Oe=Me(m,ke[0]+4);if(12>Oe||4294967286<Oe){Pe=3;break e}if(ue&&Oe>Ve[0]-8){Pe=7;break e}Pe[0]=Oe,ke[0]+=12,Ve[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Oe=0<_e.gb[0],k=k[0];;){e:{var Fe=m;Ve=b,Pe=k;var Be=ce,qe=xe,Et=ke=[0];if((dt=Ce=[Ce])[0]=0,8>Pe[0])Pe=7;else{if(!n(Fe,Ve[0],"VP8X")){if(Me(Fe,Ve[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var ot=Me(Fe,Ve[0]+8),Jt=1+tt(Fe,Ve[0]+12);if(2147483648<=Jt*(Fe=1+tt(Fe,Ve[0]+15))){Pe=3;break e}Et!=null&&(Et[0]=ot),Be!=null&&(Be[0]=Jt),qe!=null&&(qe[0]=Fe),Ve[0]+=18,Pe[0]-=18,dt[0]=1}Pe=0}}if(Ce=Ce[0],ke=ke[0],Pe!=0)return Pe;if(Ve=!!(2&ke),!Oe&&Ce)return 3;if(K!=null&&(K[0]=!!(16&ke)),X!=null&&(X[0]=Ve),te!=null&&(te[0]=0),X=ce[0],ke=xe[0],Ce&&Ve&&ie==null){Pe=0;break}if(4>k){Pe=7;break}if(Oe&&Ce||!Oe&&!Ce&&!n(m,b[0],"ALPH")){k=[k],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{ot=m,Pe=b,Oe=k;var dt=_e.gb;Be=_e.na,qe=_e.P,Et=_e.Sa,Jt=22,e(ot!=null),e(Oe!=null),Fe=Pe[0];var gn=Oe[0];for(e(Be!=null),e(Et!=null),Be[0]=null,qe[0]=null,Et[0]=0;;){if(Pe[0]=Fe,Oe[0]=gn,8>gn){Pe=7;break e}var Sr=Me(ot,Fe+4);if(4294967286<Sr){Pe=3;break e}var Zt=8+Sr+1&-2;if(Jt+=Zt,0<dt&&Jt>dt){Pe=3;break e}if(!n(ot,Fe,"VP8 ")||!n(ot,Fe,"VP8L")){Pe=0;break e}if(gn[0]<Zt){Pe=7;break e}n(ot,Fe,"ALPH")||(Be[0]=ot,qe[0]=Fe+8,Et[0]=Sr),Fe+=Zt,gn-=Zt}}if(k=k[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],Pe!=0)break}k=[k],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(dt=m,Pe=b,Oe=k,Be=_e.gb[0],qe=_e.Ja,Et=_e.xa,ot=Pe[0],Fe=!n(dt,ot,"VP8 "),Jt=!n(dt,ot,"VP8L"),e(dt!=null),e(Oe!=null),e(qe!=null),e(Et!=null),8>Oe[0])Pe=7;else{if(Fe||Jt){if(dt=Me(dt,ot+4),12<=Be&&dt>Be-12){Pe=3;break e}if(ue&&dt>Oe[0]-8){Pe=7;break e}qe[0]=dt,Pe[0]+=8,Oe[0]-=8,Et[0]=Jt}else Et[0]=5<=Oe[0]&&dt[ot+0]==47&&!(dt[ot+4]>>5),qe[0]=Oe[0];Pe=0}if(k=k[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],b=b[0],Pe!=0)break;if(4294967286<_e.Ja)return 3;if(te==null||Ve||(te[0]=_e.xa?2:1),X=[X],ke=[ke],_e.xa){if(5>k){Pe=7;break}te=X,ue=ke,Ve=K,m==null||5>k?m=0:5<=k&&m[b+0]==47&&!(m[b+4]>>5)?(Oe=[0],dt=[0],Be=[0],pe(qe=new ee,m,b,k),hs(qe,Oe,dt,Be)?(te!=null&&(te[0]=Oe[0]),ue!=null&&(ue[0]=dt[0]),Ve!=null&&(Ve[0]=Be[0]),m=1):m=0):m=0}else{if(10>k){Pe=7;break}te=ke,m==null||10>k||!Sl(m,b+3,k-3)?m=0:(ue=m[b+0]|m[b+1]<<8|m[b+2]<<16,Ve=16383&(m[b+7]<<8|m[b+6]),m=16383&(m[b+9]<<8|m[b+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=_e.Ja||!Ve||!m?m=0:(X&&(X[0]=Ve),te&&(te[0]=m),m=1))}if(!m||(X=X[0],ke=ke[0],Ce&&(ce[0]!=X||xe[0]!=ke)))return 3;ie!=null&&(ie[0]=_e,ie.offset=b-ie.w,e(4294967286>b-ie.w),e(ie.offset==ie.ha-k));break}return Pe==0||Pe==7&&Ce&&ie==null?(K!=null&&(K[0]|=_e.na!=null&&0<_e.na.length),M!=null&&(M[0]=X),W!=null&&(W[0]=ke),0):Pe}function hc(m,b,k){var M=b.width,W=b.height,K=0,X=0,te=M,ie=W;if(b.Da=m!=null&&0<m.Da,b.Da&&(te=m.cd,ie=m.bd,K=m.v,X=m.j,11>k||(K&=-2,X&=-2),0>K||0>X||0>=te||0>=ie||K+te>M||X+ie>W))return 0;if(b.v=K,b.j=X,b.va=K+te,b.o=X+ie,b.U=te,b.T=ie,b.da=m!=null&&0<m.da,b.da){if(!bt(te,ie,k=[m.ib],K=[m.hb]))return 0;b.ib=k[0],b.hb=K[0]}return b.ob=m!=null&&m.ob,b.Kb=m==null||!m.Sd,b.da&&(b.ob=b.ib<3*M/4&&b.hb<3*W/4,b.Kb=0),1}function fc(m){if(m==null)return 2;if(11>m.S){var b=m.f.RGBA;b.fb+=(m.height-1)*b.A,b.A=-b.A}else b=m.f.kb,m=m.height,b.O+=(m-1)*b.fa,b.fa=-b.fa,b.N+=(m-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(m-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(m-1)*b.lb,b.lb=-b.lb);return 0}function ya(m,b,k,M){if(M==null||0>=m||0>=b)return 2;if(k!=null){if(k.Da){var W=k.cd,K=k.bd,X=-2&k.v,te=-2&k.j;if(0>X||0>te||0>=W||0>=K||X+W>m||te+K>b)return 2;m=W,b=K}if(k.da){if(!bt(m,b,W=[k.ib],K=[k.hb]))return 2;m=W[0],b=K[0]}}M.width=m,M.height=b;e:{var ie=M.width,ce=M.height;if(m=M.S,0>=ie||0>=ce||!(m>=yd&&13>m))m=2;else{if(0>=M.Rd&&M.sd==null){X=K=W=b=0;var xe=(te=ie*_u[m])*ce;if(11>m||(K=(ce+1)/2*(b=(ie+1)/2),m==12&&(X=(W=ie)*ce)),(ce=s(xe+2*K+X))==null){m=1;break e}M.sd=ce,11>m?((ie=M.f.RGBA).eb=ce,ie.fb=0,ie.A=te,ie.size=xe):((ie=M.f.kb).y=ce,ie.O=0,ie.fa=te,ie.Fd=xe,ie.f=ce,ie.N=0+xe,ie.Ab=b,ie.Cd=K,ie.ea=ce,ie.W=0+xe+K,ie.Db=b,ie.Ed=K,m==12&&(ie.F=ce,ie.J=0+xe+2*K),ie.Tc=X,ie.lb=W)}if(b=1,W=M.S,K=M.width,X=M.height,W>=yd&&13>W)if(11>W)m=M.f.RGBA,b&=(te=Math.abs(m.A))*(X-1)+K<=m.size,b&=te>=K*_u[W],b&=m.eb!=null;else{m=M.f.kb,te=(K+1)/2,xe=(X+1)/2,ie=Math.abs(m.fa),ce=Math.abs(m.Ab);var Ce=Math.abs(m.Db),ue=Math.abs(m.lb),_e=ue*(X-1)+K;b&=ie*(X-1)+K<=m.Fd,b&=ce*(xe-1)+te<=m.Cd,b=(b&=Ce*(xe-1)+te<=m.Ed)&ie>=K&ce>=te&Ce>=te,b&=m.y!=null,b&=m.f!=null,b&=m.ea!=null,W==12&&(b&=ue>=K,b&=_e<=m.Tc,b&=m.F!=null)}else b=0;m=b?0:2}}return m!=0||k!=null&&k.fd&&(m=fc(M)),m}var ro=64,zs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qs=24,Ka=32,Go=8,va=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(m){return m},T.Predictor2=function(m,b,k){return b[k+0]},T.Predictor3=function(m,b,k){return b[k+1]},T.Predictor4=function(m,b,k){return b[k-1]},T.Predictor5=function(m,b,k){return At(At(m,b[k+1]),b[k+0])},T.Predictor6=function(m,b,k){return At(m,b[k-1])},T.Predictor7=function(m,b,k){return At(m,b[k+0])},T.Predictor8=function(m,b,k){return At(b[k-1],b[k+0])},T.Predictor9=function(m,b,k){return At(b[k+0],b[k+1])},T.Predictor10=function(m,b,k){return At(At(m,b[k-1]),At(b[k+0],b[k+1]))},T.Predictor11=function(m,b,k){var M=b[k+0];return 0>=vt(M>>24&255,m>>24&255,(b=b[k-1])>>24&255)+vt(M>>16&255,m>>16&255,b>>16&255)+vt(M>>8&255,m>>8&255,b>>8&255)+vt(255&M,255&m,255&b)?M:m},T.Predictor12=function(m,b,k){var M=b[k+0];return(fn((m>>24&255)+(M>>24&255)-((b=b[k-1])>>24&255))<<24|fn((m>>16&255)+(M>>16&255)-(b>>16&255))<<16|fn((m>>8&255)+(M>>8&255)-(b>>8&255))<<8|fn((255&m)+(255&M)-(255&b)))>>>0},T.Predictor13=function(m,b,k){var M=b[k-1];return(Bt((m=At(m,b[k+0]))>>24&255,M>>24&255)<<24|Bt(m>>16&255,M>>16&255)<<16|Bt(m>>8&255,M>>8&255)<<8|Bt(255&m,255&M))>>>0};var xa=T.PredictorAdd0;T.PredictorAdd1=Ht,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var Ko=T.PredictorAdd2;xt("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),xt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var jr,Cl=T.ColorIndexInverseTransform,Yo=T.MapARGB,Eo=T.VP8LColorIndexInverseTransformAlpha,Il=T.MapAlpha,Pl=T.VP8LPredictorsAdd=[];Pl.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var pc,mc,ba,Ya,Qa,Rl,Xa,jl,Nr,xs,In,Wn,Er,qr,So,hu,gc,wa,md,yc,gd,Bh,fu,Ll,Dl,zh,pu,qh,$h=s(511),Hh=s(2041),Wh=s(225),Gh=s(767),Kh=0,Qo=Hh,vc=Wh,ns=Gh,io=$h,yd=0,Ja=1,Lp=2,mu=3,gu=4,Qn=5,vd=6,xc=7,Ml=8,yu=9,vu=10,xu=[2,3,7],xd=[3,3,11],Ol=[280,256,256,256,40],Dp=[0,1,1,1,0],S0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],T0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bd=8,bc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fl=null,Yh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Op=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Fp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],k0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],C0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Xh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],rs=[],so=[],bs=[],Xo=1,wc=2,Hi=[],ws=[];Ri("UpsampleRgbLinePair",re,3),Ri("UpsampleBgrLinePair",Se,3),Ri("UpsampleRgbaLinePair",un,4),Ri("UpsampleBgraLinePair",pr,4),Ri("UpsampleArgbLinePair",xn,4),Ri("UpsampleRgba4444LinePair",Xe,2),Ri("UpsampleRgb565LinePair",Le,2);var I0=T.UpsampleRgbLinePair,P0=T.UpsampleBgrLinePair,Za=T.UpsampleRgbaLinePair,_c=T.UpsampleBgraLinePair,Vl=T.UpsampleArgbLinePair,wu=T.UpsampleRgba4444LinePair,Jh=T.UpsampleRgb565LinePair,_a=16,To=1<<_a-1,zn=-227,Gn=482,el=6,Li=0,_s=s(256),Ul=s(256),Ac=s(256),As=s(256),wd=s(Gn-zn),Vp=s(Gn-zn);Hn("YuvToRgbRow",re,3),Hn("YuvToBgrRow",Se,3),Hn("YuvToRgbaRow",un,4),Hn("YuvToBgraRow",pr,4),Hn("YuvToArgbRow",xn,4),Hn("YuvToRgba4444Row",Xe,2),Hn("YuvToRgb565Row",Le,2);var Zh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bl=[0,2,8],Up=[8,7,6,4,4,2,2,2,1,1,1,1],Aa=1;this.WebPDecodeRGBA=function(m,b,k,M,W){var K=Ja,X=new Ne,te=new pn;X.ba=te,te.S=K,te.width=[te.width],te.height=[te.height];var ie=te.width,ce=te.height,xe=new Mt;if(xe==null||m==null)var Ce=2;else e(xe!=null),Ce=no(m,b,k,xe.width,xe.height,xe.Pd,xe.Qd,xe.format,null);if(Ce!=0?ie=0:(ie!=null&&(ie[0]=xe.width[0]),ce!=null&&(ce[0]=xe.height[0]),ie=1),ie){te.width=te.width[0],te.height=te.height[0],M!=null&&(M[0]=te.width),W!=null&&(W[0]=te.height);e:{if(M=new Br,(W=new Ue).data=m,W.w=b,W.ha=k,W.kd=1,b=[0],e(W!=null),((m=no(W.data,W.w,W.ha,null,null,null,b,null,W))==0||m==7)&&b[0]&&(m=4),(b=m)==0){if(e(X!=null),M.data=W.data,M.w=W.w+W.offset,M.ha=W.ha-W.offset,M.put=It,M.ac=hi,M.bc=Vn,M.ma=X,W.xa){if((m=Fo())==null){X=1;break e}if((function(ue,_e){var ke=[0],Ve=[0],Pe=[0];t:for(;;){if(ue==null)return 0;if(_e==null)return ue.a=2,0;if(ue.l=_e,ue.a=0,pe(ue.m,_e.data,_e.w,_e.ha),!hs(ue.m,ke,Ve,Pe)){ue.a=3;break t}if(ue.xb=wc,_e.width=ke[0],_e.height=Ve[0],!fs(ke[0],Ve[0],1,ue,null))break t;return 1}return e(ue.a!=0),0})(m,M)){if(M=(b=ya(M.width,M.height,X.Oa,X.ba))==0){t:{M=m;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((k=M.l)!=null),e((W=k.ma)!=null),M.xb!=0){if(M.ca=W.ba,M.tb=W.tb,e(M.ca!=null),!hc(W.Oa,k,mu)){M.a=2;break n}if(!Js(M,k.width)||k.da)break n;if((k.da||Ut(M.ca.S))&&rr(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&rr()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!fe(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!Ai(M,M.V,M.Ba,M.c,M.i,k.o,Oo))break n;W.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(b=m.a)}else b=m.a}else{if((m=new El)==null){X=1;break e}if(m.Fa=W.na,m.P=W.P,m.qc=W.Sa,fa(m,M)){if((b=ya(M.width,M.height,X.Oa,X.ba))==0){if(m.Aa=0,k=X.Oa,e((W=m)!=null),k!=null){if(0<(ie=0>(ie=k.Md)?0:100<ie?255:255*ie/100)){for(ce=xe=0;4>ce;++ce)12>(Ce=W.pb[ce]).lc&&(Ce.ia=ie*Up[0>Ce.lc?0:Ce.lc]>>3),xe|=Ce.ia;xe&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=k.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}(function(ue,_e){if(ue==null)return 0;if(_e==null)return hr(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!fa(ue,_e))return 0;if(e(ue.cb),_e.ac==null||_e.ac(_e)){_e.ob&&(ue.L=0);var ke=Bl[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=_e.v-ke>>4,ue.zb=_e.j-ke>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=_e.o+15+ke>>4,ue.Hb=_e.va+15+ke>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var Ve=ue.ed;for(ke=0;4>ke;++ke){var Pe;if(ue.Qa.Cb){var Oe=ue.Qa.Lb[ke];ue.Qa.Fb||(Oe+=Ve.Tb)}else Oe=Ve.Tb;for(Pe=0;1>=Pe;++Pe){var Fe=ue.gd[ke][Pe],Be=Oe;if(Ve.Pc&&(Be+=Ve.vd[0],Pe&&(Be+=Ve.od[0])),0<(Be=0>Be?0:63<Be?63:Be)){var qe=Be;0<Ve.wb&&(qe=4<Ve.wb?qe>>2:qe>>1)>9-Ve.wb&&(qe=9-Ve.wb),1>qe&&(qe=1),Fe.dd=qe,Fe.tc=2*Be+qe,Fe.ld=40<=Be?2:15<=Be?1:0}else Fe.tc=0;Fe.La=Pe}}}ke=0}else hr(ue,6,"Frame setup failed"),ke=ue.a;if(ke=ke==0){if(ke){ue.$c=0,0<ue.Aa||(ue.Ic=Aa);t:{ke=ue.Ic,Ve=4*(qe=ue.za);var Et=32*qe,ot=qe+1,Jt=0<ue.L?qe*(0<ue.Aa?2:1):0,dt=(ue.Aa==2?2:1)*qe;if((Fe=Ve+832+(Pe=3*(16*ke+Bl[ue.L])/2*Et)+(Oe=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=Fe)ke=0;else{if(Fe>ue.Vb){if(ue.Vb=0,ue.Ec=s(Fe),ue.Fc=0,ue.Ec==null){ke=hr(ue,1,"no memory during frame initialization.");break t}ue.Vb=Fe}Fe=ue.Ec,Be=ue.Fc,ue.Ac=Fe,ue.Bc=Be,Be+=Ve,ue.Gd=a(Et,zi),ue.Hd=0,ue.rb=a(ot+1,Bi),ue.sb=1,ue.wa=Jt?a(Jt,ei):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=qe),e(!0),ue.oc=Fe,ue.pc=Be,Be+=832,ue.ya=a(dt,Ba),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=qe),ue.R=16*qe,ue.B=8*qe,qe=(Et=Bl[ue.L])*ue.R,Et=Et/2*ue.B,ue.sa=Fe,ue.ta=Be+qe,ue.qa=ue.sa,ue.ra=ue.ta+16*ke*ue.R+Et,ue.Ha=ue.qa,ue.Ia=ue.ra+8*ke*ue.B+Et,ue.$c=0,Be+=Pe,ue.mb=Oe?Fe:null,ue.nb=Oe?Be:null,e(Be+Oe<=ue.Fc+ue.Vb),ms(ue),i(ue.Ac,ue.Bc,0,Ve),ke=1}}if(ke){if(_e.ka=0,_e.y=ue.sa,_e.O=ue.ta,_e.f=ue.qa,_e.N=ue.ra,_e.ea=ue.Ha,_e.Vd=ue.Ia,_e.fa=ue.R,_e.Rc=ue.B,_e.F=null,_e.J=0,!Kh){for(ke=-255;255>=ke;++ke)$h[255+ke]=0>ke?-ke:ke;for(ke=-1020;1020>=ke;++ke)Hh[1020+ke]=-128>ke?-128:127<ke?127:ke;for(ke=-112;112>=ke;++ke)Wh[112+ke]=-16>ke?-16:15<ke?15:ke;for(ke=-255;510>=ke;++ke)Gh[255+ke]=0>ke?0:255<ke?255:ke;Kh=1}Xa=cn,jl=zo,xs=qo,In=mn,Wn=bo,Nr=ma,Er=Ga,qr=zr,So=A,hu=H,gc=Pi,wa=ga,md=de,yc=ye,gd=Ci,Bh=to,fu=Ii,Ll=Wa,so[0]=du,so[1]=za,so[2]=gs,so[3]=Zs,so[4]=uc,so[5]=_o,so[6]=wr,so[7]=dc,so[8]=eo,so[9]=Ao,rs[0]=Si,rs[1]=lc,rs[2]=cc,rs[3]=$a,rs[4]=ti,rs[5]=Ti,rs[6]=es,bs[0]=ys,bs[1]=qa,bs[2]=Ha,bs[3]=ki,bs[4]=$n,bs[5]=$o,bs[6]=Tl,ke=1}else ke=0}ke&&(ke=(function(gn,Sr){for(gn.M=0;gn.M<gn.Va;++gn.M){var Zt,at=gn.Jc[gn.M&gn.Xb],rt=gn.m,Lr=gn;for(Zt=0;Zt<Lr.za;++Zt){var qt=rt,dn=Lr,ir=dn.Ac,gi=dn.Bc+4*Zt,$r=dn.zc,mr=dn.ya[dn.aa+Zt];if(dn.Qa.Bb?mr.$b=je(qt,dn.Pa.jb[0])?2+je(qt,dn.Pa.jb[2]):je(qt,dn.Pa.jb[1]):mr.$b=0,dn.kc&&(mr.Ad=je(qt,dn.Bd)),mr.Za=!je(qt,145)+0,mr.Za){var ni=mr.Ob,yi=0;for(dn=0;4>dn;++dn){var lr,bn=$r[0+dn];for(lr=0;4>lr;++lr){bn=k0[ir[gi+lr]][bn];for(var Pn=Op[je(qt,bn[0])];0<Pn;)Pn=Op[2*Pn+je(qt,bn[Pn])];bn=-Pn,ir[gi+lr]=bn}r(ni,yi,ir,gi,4),yi+=4,$r[0+dn]=bn}}else bn=je(qt,156)?je(qt,128)?1:3:je(qt,163)?2:0,mr.Ob[0]=bn,i(ir,gi,bn,4),i($r,0,bn,4);mr.Dd=je(qt,142)?je(qt,114)?je(qt,183)?1:3:2:0}if(Lr.m.Ka)return hr(gn,7,"Premature end-of-partition0 encountered.");for(;gn.ja<gn.za;++gn.ja){if(Lr=at,qt=(rt=gn).rb[rt.sb-1],ir=rt.rb[rt.sb+rt.ja],Zt=rt.ya[rt.aa+rt.ja],gi=rt.kc?Zt.Ad:0)qt.la=ir.la=0,Zt.Za||(qt.Na=ir.Na=0),Zt.Hc=0,Zt.Gc=0,Zt.ia=0;else{var cr,Rn;if(qt=ir,ir=Lr,gi=rt.Pa.Xc,$r=rt.ya[rt.aa+rt.ja],mr=rt.pb[$r.$b],dn=$r.ad,ni=0,yi=rt.rb[rt.sb-1],bn=lr=0,i(dn,ni,0,384),$r.Za)var Tr=0,kr=gi[3];else{Pn=s(16);var Xn=qt.Na+yi.Na;if(Xn=Fl(ir,gi[1],Xn,mr.Eb,0,Pn,0),qt.Na=yi.Na=(0<Xn)+0,1<Xn)Xa(Pn,0,dn,ni);else{var Wi=Pn[0]+3>>3;for(Pn=0;256>Pn;Pn+=16)dn[ni+Pn]=Wi}Tr=1,kr=gi[0]}var Kn=15&qt.la,Jn=15&yi.la;for(Pn=0;4>Pn;++Pn){var Hr=1&Jn;for(Wi=Rn=0;4>Wi;++Wi)Kn=Kn>>1|(Hr=(Xn=Fl(ir,kr,Xn=Hr+(1&Kn),mr.Sc,Tr,dn,ni))>Tr)<<7,Rn=Rn<<2|(3<Xn?3:1<Xn?2:dn[ni+0]!=0),ni+=16;Kn>>=4,Jn=Jn>>1|Hr<<7,lr=(lr<<8|Rn)>>>0}for(kr=Kn,Tr=Jn>>4,cr=0;4>cr;cr+=2){for(Rn=0,Kn=qt.la>>4+cr,Jn=yi.la>>4+cr,Pn=0;2>Pn;++Pn){for(Hr=1&Jn,Wi=0;2>Wi;++Wi)Xn=Hr+(1&Kn),Kn=Kn>>1|(Hr=0<(Xn=Fl(ir,gi[2],Xn,mr.Qc,0,dn,ni)))<<3,Rn=Rn<<2|(3<Xn?3:1<Xn?2:dn[ni+0]!=0),ni+=16;Kn>>=2,Jn=Jn>>1|Hr<<5}bn|=Rn<<4*cr,kr|=Kn<<4<<cr,Tr|=(240&Jn)<<cr}qt.la=kr,yi.la=Tr,$r.Hc=lr,$r.Gc=bn,$r.ia=43690&bn?0:mr.ia,gi=!(lr|bn)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[Zt.$b][Zt.Za],rt.wa[rt.Y+rt.ja].La|=!gi),Lr.Ka)return hr(gn,7,"Premature end-of-file encountered.")}if(ms(gn),rt=Sr,Lr=1,Zt=(at=gn).D,qt=0<at.L&&at.M>=at.zb&&at.M<=at.Va,at.Aa==0)t:{if(Zt.M=at.M,Zt.uc=qt,mi(at,Zt),Lr=1,Zt=(Rn=at.D).Nb,qt=(bn=Bl[at.L])*at.R,ir=bn/2*at.B,Pn=16*Zt*at.R,Wi=8*Zt*at.B,gi=at.sa,$r=at.ta-qt+Pn,mr=at.qa,dn=at.ra-ir+Wi,ni=at.Ha,yi=at.Ia-ir+Wi,Jn=(Kn=Rn.M)==0,lr=Kn>=at.Va-1,at.Aa==2&&mi(at,Rn),Rn.uc)for(Hr=(Xn=at).D.M,e(Xn.D.uc),Rn=Xn.yb;Rn<Xn.Hb;++Rn){Tr=Rn,kr=Hr;var Di=(Ns=(Or=Xn).D).Nb;cr=Or.R;var Ns=Ns.wa[Ns.Y+Tr],Dr=Or.sa,Mr=Or.ta+16*Di*cr+16*Tr,Gi=Ns.dd,Zn=Ns.tc;if(Zn!=0)if(e(3<=Zn),Or.L==1)0<Tr&&Bh(Dr,Mr,cr,Zn+4),Ns.La&&Ll(Dr,Mr,cr,Zn),0<kr&&gd(Dr,Mr,cr,Zn+4),Ns.La&&fu(Dr,Mr,cr,Zn);else{var Ki=Or.B,oo=Or.qa,ko=Or.ra+8*Di*Ki+8*Tr,vi=Or.Ha,Or=Or.Ia+8*Di*Ki+8*Tr;Di=Ns.ld,0<Tr&&(qr(Dr,Mr,cr,Zn+4,Gi,Di),hu(oo,ko,vi,Or,Ki,Zn+4,Gi,Di)),Ns.La&&(wa(Dr,Mr,cr,Zn,Gi,Di),yc(oo,ko,vi,Or,Ki,Zn,Gi,Di)),0<kr&&(Er(Dr,Mr,cr,Zn+4,Gi,Di),So(oo,ko,vi,Or,Ki,Zn+4,Gi,Di)),Ns.La&&(gc(Dr,Mr,cr,Zn,Gi,Di),md(oo,ko,vi,Or,Ki,Zn,Gi,Di))}}if(at.ia&&alert("todo:DitherRow"),rt.put!=null){if(Rn=16*Kn,Kn=16*(Kn+1),Jn?(rt.y=at.sa,rt.O=at.ta+Pn,rt.f=at.qa,rt.N=at.ra+Wi,rt.ea=at.Ha,rt.W=at.Ia+Wi):(Rn-=bn,rt.y=gi,rt.O=$r,rt.f=mr,rt.N=dn,rt.ea=ni,rt.W=yi),lr||(Kn-=bn),Kn>rt.o&&(Kn=rt.o),rt.F=null,rt.J=null,at.Fa!=null&&0<at.Fa.length&&Rn<Kn&&(rt.J=fr(at,rt,Rn,Kn-Rn),rt.F=at.mb,rt.F==null&&rt.F.length==0)){Lr=hr(at,3,"Could not decode alpha data.");break t}Rn<rt.j&&(bn=rt.j-Rn,Rn=rt.j,e(!(1&bn)),rt.O+=at.R*bn,rt.N+=at.B*(bn>>1),rt.W+=at.B*(bn>>1),rt.F!=null&&(rt.J+=rt.width*bn)),Rn<Kn&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=Rn-rt.j,rt.U=rt.va-rt.v,rt.T=Kn-Rn,Lr=rt.put(rt))}Zt+1!=at.Ic||lr||(r(at.sa,at.ta-qt,gi,$r+16*at.R,qt),r(at.qa,at.ra-ir,mr,dn+8*at.B,ir),r(at.Ha,at.Ia-ir,ni,yi+8*at.B,ir))}if(!Lr)return hr(gn,6,"Output aborted.")}return 1})(ue,_e)),_e.bc!=null&&_e.bc(_e),ke&=1}return ke?(ue.cb=0,ke):0})(m,M)||(b=m.a)}}else b=m.a}b==0&&X.Oa!=null&&X.Oa.fd&&(b=fc(X.ba))}X=b}K=X!=0?null:11>K?te.f.RGBA.eb:te.f.kb.y}else K=null;return K};var _u=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(T,U){for(var C="",L=0;L<4;L++)C+=String.fromCharCode(T[U++]);return C}function p(T,U){return T[U+0]|T[U+1]<<8}function y(T,U){return(T[U+0]|T[U+1]<<8|T[U+2]<<16)>>>0}function w(T,U){return(T[U+0]|T[U+1]<<8|T[U+2]<<16|T[U+3]<<24)>>>0}new u;var v=[0],j=[0],S=[],_=new u,I=t,V=(function(T,U){var C={},L=0,D=!1,ne=0,se=0;if(C.frames=[],!(function(F,ee){for(var Q=0;Q<4;Q++)if(F[ee+Q]!="RIFF".charCodeAt(Q))return!0;return!1})(T,U)){for(w(T,U+=4),U+=8;U<T.length;){var oe=h(T,U),Z=w(T,U+=4);U+=4;var Y=Z+(1&Z);switch(oe){case"VP8 ":case"VP8L":C.frames[L]===void 0&&(C.frames[L]={}),(ae=C.frames[L]).src_off=D?se:U-8,ae.src_size=ne+Z+8,L++,D&&(D=!1,ne=0,se=0);break;case"VP8X":(ae=C.header={}).feature_flags=T[U];var pe=U+4;ae.canvas_width=1+y(T,pe),pe+=3,ae.canvas_height=1+y(T,pe),pe+=3;break;case"ALPH":D=!0,ne=Y+8,se=U-8;break;case"ANIM":(ae=C.header).bgcolor=w(T,U),pe=U+4,ae.loop_count=p(T,pe),pe+=2;break;case"ANMF":var we,ae;(ae=C.frames[L]={}).offset_x=2*y(T,U),U+=3,ae.offset_y=2*y(T,U),U+=3,ae.width=1+y(T,U),U+=3,ae.height=1+y(T,U),U+=3,ae.duration=y(T,U),U+=3,we=T[U++],ae.dispose=1&we,ae.blend=we>>1&1}oe!="ANMF"&&(U+=Y)}return C}})(I,0);V.response=I,V.rgbaoutput=!0,V.dataurl=!1;var z=V.header?V.header:null,$=V.frames?V.frames:null;if(z){z.loop_counter=z.loop_count,v=[z.canvas_height],j=[z.canvas_width];for(var J=0;J<$.length&&$[J].blend!=0;J++);}var le=$[0],q=_.WebPDecodeRGBA(I,le.src_off,le.src_size,j,v);le.rgba=q,le.imgwidth=j[0],le.imgheight=v[0];for(var E=0;E<j[0]*v[0]*4;E++)S[E]=q[E];return this.width=j,this.height=v,this.data=S,this}(function(t){var e,n,r,i,s,a,c,u,h,p=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new u,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new a,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new a,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,h=new p}]);var y=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=F;Object.defineProperty(this,"pdf",{get:function(){return ee}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Me){Q=!!Me}});var he=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return he},set:function(Me){he=!!Me}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(Me){isNaN(Me)||(ge=Me)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(Me){isNaN(Me)||(ve=Me)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(Me){var fe;typeof Me=="number"?fe=[Me,Me,Me,Me]:((fe=new Array(4))[0]=Me[0],fe[1]=Me.length>=2?Me[1]:fe[0],fe[2]=Me.length>=3?Me[2]:fe[0],fe[3]=Me.length>=4?Me[3]:fe[1]),h.margin=fe}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(Me){Ee=Me}});var Te=0;Object.defineProperty(this,"lastBreak",{get:function(){return Te},set:function(Me){Te=Me}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(Me){je=Me}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(Me){Me instanceof p&&(h=Me)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(Me){h.path=Me}});var ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return ze},set:function(Me){ze=Me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Me){var fe;fe=w(Me),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Me){var fe=w(Me);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Me){["butt","round","square"].indexOf(Me)!==-1&&(this.ctx.lineCap=Me,this.pdf.setLineCap(Me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Me){isNaN(Me)||(this.ctx.lineWidth=Me,this.pdf.setLineWidth(Me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Me){["bevel","round","miter"].indexOf(Me)!==-1&&(this.ctx.lineJoin=Me,this.pdf.setLineJoin(Me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Me){isNaN(Me)||(this.ctx.miterLimit=Me,this.pdf.setMiterLimit(Me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Me){this.ctx.textBaseline=Me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Me){["right","end","center","left","start"].indexOf(Me)!==-1&&(this.ctx.textAlign=Me)}});var Je=null,tt=null;Object.defineProperty(this,"fontFaces",{get:function(){return tt},set:function(Me){Je=null,tt=Me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Me){var fe;if(this.ctx.font=Me,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Me))!==null){var Xt=fe[1];fe[2];var Pt=fe[3],bt=fe[4];fe[5];var Ke=fe[6],ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(bt)[2];bt=Math.floor(ct==="px"?parseFloat(bt)*this.pdf.internal.scaleFactor:ct==="em"?parseFloat(bt)*this.pdf.getFontSize():parseFloat(bt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(bt);var nt=(function(kt){var xt,Sn,vn=[],ht=kt.trim();if(ht==="")return Nv;if(ht in RN)return[RN[ht]];for(;ht!=="";){switch(Sn=null,xt=(ht=LN(ht)).charAt(0)){case'"':case"'":Sn=hY(ht.substring(1),xt);break;default:Sn=fY(ht)}if(Sn===null||(vn.push(Sn[0]),(ht=LN(Sn[1]))!==""&&ht.charAt(0)!==","))return Nv;ht=ht.replace(/^,/,"")}return vn})(Ke);if(this.fontFaces){var $t=(function(kt,xt){if(Je===null){var Sn=(function(vn){var ht=[];return Object.keys(vn).forEach(function(zt){vn[zt].forEach(function(kn){var Ct=null;switch(kn){case"bold":Ct={family:zt,weight:"bold"};break;case"italic":Ct={family:zt,style:"italic"};break;case"bolditalic":Ct={family:zt,weight:"bold",style:"italic"};break;case"":case"normal":Ct={family:zt}}Ct!==null&&(Ct.ref={name:zt,style:kn},ht.push(Ct))})}),ht})(kt.getFontList());Je=(function(vn){for(var ht={},zt=0;zt<vn.length;++zt){var kn=Av(vn[zt]),Ct=kn.family,sn=kn.stretch,Ut=kn.style,nr=kn.weight;ht[Ct]=ht[Ct]||{},ht[Ct][sn]=ht[Ct][sn]||{},ht[Ct][sn][Ut]=ht[Ct][sn][Ut]||{},ht[Ct][sn][Ut][nr]=kn}return ht})(Sn.concat(xt))}return Je})(this.pdf,this.fontFaces),At=nt.map(function(kt){return{family:kt,stretch:"normal",weight:Pt,style:Xt}}),fn=(function(kt,xt,Sn){for(var vn=(Sn=Sn||{}).defaultFontFamily||"times",ht=Object.assign({},dY,Sn.genericFontFamilies||{}),zt=null,kn=null,Ct=0;Ct<xt.length;++Ct)if(ht[(zt=Av(xt[Ct])).family]&&(zt.family=ht[zt.family]),kt.hasOwnProperty(zt.family)){kn=kt[zt.family];break}if(!(kn=kn||kt[vn]))throw new Error("Could not find a font-family for the rule '"+jN(zt)+"' and default family '"+vn+"'.");if(kn=(function(sn,Ut){if(Ut[sn])return Ut[sn];var nr=H1[sn],Dn=nr<=H1.normal?-1:1,pn=PN(Ut,iI,nr,Dn);if(!pn)throw new Error("Could not find a matching font-stretch value for "+sn);return pn})(zt.stretch,kn),kn=(function(sn,Ut){if(Ut[sn])return Ut[sn];for(var nr=rI[sn],Dn=0;Dn<nr.length;++Dn)if(Ut[nr[Dn]])return Ut[nr[Dn]];throw new Error("Could not find a matching font-style for "+sn)})(zt.style,kn),!(kn=(function(sn,Ut){if(Ut[sn])return Ut[sn];if(sn===400&&Ut[500])return Ut[500];if(sn===500&&Ut[400])return Ut[400];var nr=uY[sn],Dn=PN(Ut,sI,nr,sn<400?-1:1);if(!Dn)throw new Error("Could not find a matching font-weight for value "+sn);return Dn})(zt.weight,kn)))throw new Error("Failed to resolve a font for the rule '"+jN(zt)+"'.");return kn})($t,At);this.pdf.setFont(fn.ref.name,fn.ref.style)}else{var Bt="";(Pt==="bold"||parseInt(Pt,10)>=700||Xt==="bold")&&(Bt="bold"),Xt==="italic"&&(Bt+="italic"),Bt.length===0&&(Bt="normal");for(var vt="",Ht={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Dt=0;Dt<nt.length;Dt++){if(this.pdf.internal.getFont(nt[Dt],Bt,{noFallback:!0,disableWarning:!0})!==void 0){vt=nt[Dt];break}if(Bt==="bolditalic"&&this.pdf.internal.getFont(nt[Dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)vt=nt[Dt],Bt="bold";else if(this.pdf.internal.getFont(nt[Dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){vt=nt[Dt],Bt="normal";break}}if(vt===""){for(var Nt=0;Nt<nt.length;Nt++)if(Ht[nt[Nt]]){vt=Ht[nt[Nt]];break}}vt=vt===""?"Times":vt,this.pdf.setFont(vt,Bt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Me){this.ctx.globalCompositeOperation=Me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Me){this.ctx.globalAlpha=Me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Me){this.ctx.lineDashOffset=Me,ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Me){this.ctx.lineDash=Me,ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Me){this.ctx.ignoreClearRect=!!Me}})};y.prototype.setLineDash=function(F){this.lineDash=F},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){$.call(this,"fill",!1)},y.prototype.stroke=function(){$.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(F,ee){if(isNaN(F)||isNaN(ee))throw or.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new a(F,ee));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(F,ee)},y.prototype.closePath=function(){var F=new a(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&er(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){F=new a(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(F.x,F.y)},y.prototype.lineTo=function(F,ee){if(isNaN(F)||isNaN(ee))throw or.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new a(F,ee));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$.call(this,null,!0)},y.prototype.quadraticCurveTo=function(F,ee,Q,he){if(isNaN(Q)||isNaN(he)||isNaN(F)||isNaN(ee))throw or.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new a(Q,he)),ve=this.ctx.transform.applyToPoint(new a(F,ee));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new a(ge.x,ge.y)},y.prototype.bezierCurveTo=function(F,ee,Q,he,ge,ve){if(isNaN(ge)||isNaN(ve)||isNaN(F)||isNaN(ee)||isNaN(Q)||isNaN(he))throw or.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new a(ge,ve)),Te=this.ctx.transform.applyToPoint(new a(F,ee)),je=this.ctx.transform.applyToPoint(new a(Q,he));this.path.push({type:"bct",x1:Te.x,y1:Te.y,x2:je.x,y2:je.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new a(Ee.x,Ee.y)},y.prototype.arc=function(F,ee,Q,he,ge,ve){if(isNaN(F)||isNaN(ee)||isNaN(Q)||isNaN(he)||isNaN(ge))throw or.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new a(F,ee));F=Ee.x,ee=Ee.y;var Te=this.ctx.transform.applyToPoint(new a(0,Q)),je=this.ctx.transform.applyToPoint(new a(0,0));Q=Math.sqrt(Math.pow(Te.x-je.x,2)+Math.pow(Te.y-je.y,2))}Math.abs(ge-he)>=2*Math.PI&&(he=0,ge=2*Math.PI),this.path.push({type:"arc",x:F,y:ee,radius:Q,startAngle:he,endAngle:ge,counterclockwise:ve})},y.prototype.arcTo=function(F,ee,Q,he,ge){throw new Error("arcTo not implemented.")},y.prototype.rect=function(F,ee,Q,he){if(isNaN(F)||isNaN(ee)||isNaN(Q)||isNaN(he))throw or.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,ee),this.lineTo(F+Q,ee),this.lineTo(F+Q,ee+he),this.lineTo(F,ee+he),this.lineTo(F,ee),this.lineTo(F+Q,ee),this.lineTo(F,ee)},y.prototype.fillRect=function(F,ee,Q,he){if(isNaN(F)||isNaN(ee)||isNaN(Q)||isNaN(he))throw or.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,ee,Q,he),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},y.prototype.strokeRect=function(F,ee,Q,he){if(isNaN(F)||isNaN(ee)||isNaN(Q)||isNaN(he))throw or.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(F,ee,Q,he),this.stroke())},y.prototype.clearRect=function(F,ee,Q,he){if(isNaN(F)||isNaN(ee)||isNaN(Q)||isNaN(he))throw or.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,ee,Q,he))},y.prototype.save=function(F){F=typeof F!="boolean"||F;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var he=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=he}},y.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(F){var ee,Q,he,ge;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))ee=0,Q=0,he=0,ge=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(ve!==null)ee=parseInt(ve[1]),Q=parseInt(ve[2]),he=parseInt(ve[3]),ge=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)ee=parseInt(ve[1]),Q=parseInt(ve[2]),he=parseInt(ve[3]),ge=parseFloat(ve[4]);else{if(ge=1,typeof F=="string"&&F.charAt(0)!=="#"){var Ee=new QC(F);F=Ee.ok?Ee.toHex():"#000000"}F.length===4?(ee=F.substring(1,2),ee+=ee,Q=F.substring(2,3),Q+=Q,he=F.substring(3,4),he+=he):(ee=F.substring(1,3),Q=F.substring(3,5),he=F.substring(5,7)),ee=parseInt(ee,16),Q=parseInt(Q,16),he=parseInt(he,16)}}return{r:ee,g:Q,b:he,a:ge,style:F}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(F,ee,Q,he){if(isNaN(ee)||isNaN(Q)||typeof F!="string")throw or.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(he=isNaN(he)?void 0:he,!v.call(this)){var ge=Y(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;L.call(this,{text:F,x:ee,y:Q,scale:ve,angle:ge,align:this.textAlign,maxWidth:he})}},y.prototype.strokeText=function(F,ee,Q,he){if(isNaN(ee)||isNaN(Q)||typeof F!="string")throw or.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){he=isNaN(he)?void 0:he;var ge=Y(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;L.call(this,{text:F,x:ee,y:Q,scale:ve,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:he})}},y.prototype.measureText=function(F){if(typeof F!="string")throw or.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,Q=this.pdf.internal.scaleFactor,he=ee.internal.getFontSize(),ge=ee.getStringUnitWidth(F)*he/ee.internal.scaleFactor;return new function(ve){var Ee=(ve=ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this}({width:ge*=Math.round(96*Q/72*1e4)/1e4})},y.prototype.scale=function(F,ee){if(isNaN(F)||isNaN(ee))throw or.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new u(F,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},y.prototype.rotate=function(F){if(isNaN(F))throw or.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new u(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},y.prototype.translate=function(F,ee){if(isNaN(F)||isNaN(ee))throw or.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new u(1,0,0,1,F,ee);this.ctx.transform=this.ctx.transform.multiply(Q)},y.prototype.transform=function(F,ee,Q,he,ge,ve){if(isNaN(F)||isNaN(ee)||isNaN(Q)||isNaN(he)||isNaN(ge)||isNaN(ve))throw or.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new u(F,ee,Q,he,ge,ve);this.ctx.transform=this.ctx.transform.multiply(Ee)},y.prototype.setTransform=function(F,ee,Q,he,ge,ve){F=isNaN(F)?1:F,ee=isNaN(ee)?0:ee,Q=isNaN(Q)?0:Q,he=isNaN(he)?1:he,ge=isNaN(ge)?0:ge,ve=isNaN(ve)?0:ve,this.ctx.transform=new u(F,ee,Q,he,ge,ve)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(F,ee,Q,he,ge,ve,Ee,Te,je){var ze=this.pdf.getImageProperties(F),Je=1,tt=1,Me=1,fe=1;he!==void 0&&Te!==void 0&&(Me=Te/he,fe=je/ge,Je=ze.width/he*Te/he,tt=ze.height/ge*je/ge),ve===void 0&&(ve=ee,Ee=Q,ee=0,Q=0),he!==void 0&&Te===void 0&&(Te=he,je=ge),he===void 0&&Te===void 0&&(Te=ze.width,je=ze.height);for(var Xt,Pt=this.ctx.transform.decompose(),bt=Y(Pt.rotate.shx),Ke=new u,ct=(Ke=(Ke=(Ke=Ke.multiply(Pt.translate)).multiply(Pt.skew)).multiply(Pt.scale)).applyToRectangle(new c(ve-ee*Me,Ee-Q*fe,he*Je,ge*tt)),nt=_.call(this,ct),$t=[],At=0;At<nt.length;At+=1)$t.indexOf(nt[At])===-1&&$t.push(nt[At]);if(z($t),this.autoPaging)for(var fn=$t[0],Bt=$t[$t.length-1],vt=fn;vt<Bt+1;vt++){this.pdf.setPage(vt);var Ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=vt===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=vt===1?0:Nt+(vt-2)*kt;if(this.ctx.clip_path.length!==0){var Sn=this.path;Xt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(Xt,this.posX+this.margin[3],-xt+Dt+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=Sn}var vn=JSON.parse(JSON.stringify(ct));vn=V([vn],this.posX+this.margin[3],-xt+Dt+this.ctx.prevPageLastElemOffset)[0];var ht=(vt>fn||vt<Bt)&&S.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ht,kt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",vn.x,vn.y,vn.w,vn.h,null,null,bt),ht&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,bt)};var _=function(F,ee,Q){var he=[];ee=ee||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":he.push(Math.floor((F.y+ge)/Q)+1);break;case"arc":he.push(Math.floor((F.y+ge-F.radius)/Q)+1),he.push(Math.floor((F.y+ge+F.radius)/Q)+1);break;case"qct":var ve=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);he.push(Math.floor((ve.y+ge)/Q)+1),he.push(Math.floor((ve.y+ve.h+ge)/Q)+1);break;case"bct":var Ee=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);he.push(Math.floor((Ee.y+ge)/Q)+1),he.push(Math.floor((Ee.y+Ee.h+ge)/Q)+1);break;case"rect":he.push(Math.floor((F.y+ge)/Q)+1),he.push(Math.floor((F.y+F.h+ge)/Q)+1)}for(var Te=0;Te<he.length;Te+=1)for(;this.pdf.internal.getNumberOfPages()<he[Te];)I.call(this);return he},I=function(){var F=this.fillStyle,ee=this.strokeStyle,Q=this.font,he=this.lineCap,ge=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=ee,this.font=Q,this.lineCap=he,this.lineWidth=ge,this.lineJoin=ve},V=function(F,ee,Q){for(var he=0;he<F.length;he++)switch(F[he].type){case"bct":F[he].x2+=ee,F[he].y2+=Q;case"qct":F[he].x1+=ee,F[he].y1+=Q;default:F[he].x+=ee,F[he].y+=Q}return F},z=function(F){return F.sort(function(ee,Q){return ee-Q})},$=function(F,ee){for(var Q,he,ge=this.fillStyle,ve=this.strokeStyle,Ee=this.lineCap,Te=this.lineWidth,je=Math.abs(Te*this.ctx.transform.scaleX),ze=this.lineJoin,Je=JSON.parse(JSON.stringify(this.path)),tt=JSON.parse(JSON.stringify(this.path)),Me=[],fe=0;fe<tt.length;fe++)if(tt[fe].x!==void 0)for(var Xt=_.call(this,tt[fe]),Pt=0;Pt<Xt.length;Pt+=1)Me.indexOf(Xt[Pt])===-1&&Me.push(Xt[Pt]);for(var bt=0;bt<Me.length;bt++)for(;this.pdf.internal.getNumberOfPages()<Me[bt];)I.call(this);if(z(Me),this.autoPaging)for(var Ke=Me[0],ct=Me[Me.length-1],nt=Ke;nt<ct+1;nt++){this.pdf.setPage(nt),this.fillStyle=ge,this.strokeStyle=ve,this.lineCap=Ee,this.lineWidth=je,this.lineJoin=ze;var $t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],At=nt===1?this.posY+this.margin[0]:this.margin[0],fn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vt=nt===1?0:fn+(nt-2)*Bt;if(this.ctx.clip_path.length!==0){var Ht=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(Q,this.posX+this.margin[3],-vt+At+this.ctx.prevPageLastElemOffset),J.call(this,F,!0),this.path=Ht}if(he=JSON.parse(JSON.stringify(Je)),this.path=V(he,this.posX+this.margin[3],-vt+At+this.ctx.prevPageLastElemOffset),ee===!1||nt===0){var Dt=(nt>Ke||nt<ct)&&S.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,Bt,null).clip().discardPath()),J.call(this,F,ee),Dt&&this.pdf.restoreGraphicsState()}this.lineWidth=Te}else this.lineWidth=je,J.call(this,F,ee),this.lineWidth=Te;this.path=Je},J=function(F,ee){if((F!=="stroke"||ee||!j.call(this))&&(F==="stroke"||ee||!v.call(this))){for(var Q,he,ge=[],ve=this.path,Ee=0;Ee<ve.length;Ee++){var Te=ve[Ee];switch(Te.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:Te,deltas:[],abs:[]});break;case"lt":var je=ge.length;if(ve[Ee-1]&&!isNaN(ve[Ee-1].x)&&(Q=[Te.x-ve[Ee-1].x,Te.y-ve[Ee-1].y],je>0)){for(;je>=0;je--)if(ge[je-1].close!==!0&&ge[je-1].begin!==!0){ge[je-1].deltas.push(Q),ge[je-1].abs.push(Te);break}}break;case"bct":Q=[Te.x1-ve[Ee-1].x,Te.y1-ve[Ee-1].y,Te.x2-ve[Ee-1].x,Te.y2-ve[Ee-1].y,Te.x-ve[Ee-1].x,Te.y-ve[Ee-1].y],ge[ge.length-1].deltas.push(Q);break;case"qct":var ze=ve[Ee-1].x+2/3*(Te.x1-ve[Ee-1].x),Je=ve[Ee-1].y+2/3*(Te.y1-ve[Ee-1].y),tt=Te.x+2/3*(Te.x1-Te.x),Me=Te.y+2/3*(Te.y1-Te.y),fe=Te.x,Xt=Te.y;Q=[ze-ve[Ee-1].x,Je-ve[Ee-1].y,tt-ve[Ee-1].x,Me-ve[Ee-1].y,fe-ve[Ee-1].x,Xt-ve[Ee-1].y],ge[ge.length-1].deltas.push(Q);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(Te)}}he=ee?null:F==="stroke"?"stroke":"fill";for(var Pt=!1,bt=0;bt<ge.length;bt++)if(ge[bt].arc)for(var Ke=ge[bt].abs,ct=0;ct<Ke.length;ct++){var nt=Ke[ct];nt.type==="arc"?E.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,ee,!Pt):D.call(this,nt.x,nt.y),Pt=!0}else if(ge[bt].close===!0)this.pdf.internal.out("h"),Pt=!1;else if(ge[bt].begin!==!0){var $t=ge[bt].start.x,At=ge[bt].start.y;ne.call(this,ge[bt].deltas,$t,At),Pt=!0}he&&T.call(this,he),ee&&U.call(this)}},le=function(F){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Q;case"top":return F+ee-Q;case"hanging":return F+ee-2*Q;case"middle":return F+ee/2-Q;default:return F}},q=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(ee,Q){this.colorStops.push([ee,Q])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(F,ee,Q,he,ge,ve,Ee,Te,je){for(var ze=oe.call(this,Q,he,ge,ve),Je=0;Je<ze.length;Je++){var tt=ze[Je];Je===0&&(je?C.call(this,tt.x1+F,tt.y1+ee):D.call(this,tt.x1+F,tt.y1+ee)),se.call(this,F,ee,tt.x2,tt.y2,tt.x3,tt.y3,tt.x4,tt.y4)}Te?U.call(this):T.call(this,Ee)},T=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(F,ee){this.pdf.internal.out(n(F)+" "+r(ee)+" m")},L=function(F){var ee;switch(F.align){case"right":case"end":ee="right";break;case"center":ee="center";break;default:ee="left"}var Q=this.pdf.getTextDimensions(F.text),he=le.call(this,F.y),ge=q.call(this,he)-Q.h,ve=this.ctx.transform.applyToPoint(new a(F.x,he)),Ee=this.ctx.transform.decompose(),Te=new u;Te=(Te=(Te=Te.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var je,ze,Je,tt=this.ctx.transform.applyToRectangle(new c(F.x,he,Q.w,Q.h)),Me=Te.applyToRectangle(new c(F.x,ge,Q.w,Q.h)),fe=_.call(this,Me),Xt=[],Pt=0;Pt<fe.length;Pt+=1)Xt.indexOf(fe[Pt])===-1&&Xt.push(fe[Pt]);if(z(Xt),this.autoPaging)for(var bt=Xt[0],Ke=Xt[Xt.length-1],ct=bt;ct<Ke+1;ct++){this.pdf.setPage(ct);var nt=ct===1?this.posY+this.margin[0]:this.margin[0],$t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[2],fn=At-this.margin[0],Bt=this.pdf.internal.pageSize.width-this.margin[1],vt=Bt-this.margin[3],Ht=ct===1?0:$t+(ct-2)*fn;if(this.ctx.clip_path.length!==0){var Dt=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=V(je,this.posX+this.margin[3],-1*Ht+nt),J.call(this,"fill",!0),this.path=Dt}var Nt=V([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-Ht+nt+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(ze=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ze*F.scale),Je=this.lineWidth,this.lineWidth=Je*F.scale);var kt=this.autoPaging!=="text";if(kt||Nt.y+Nt.h<=At){if(kt||Nt.y>=nt&&Nt.x<=Bt){var xt=kt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Bt-Nt.x)[0],Sn=V([JSON.parse(JSON.stringify(tt))],this.posX+this.margin[3],-Ht+nt+this.ctx.prevPageLastElemOffset)[0],vn=kt&&(ct>bt||ct<Ke)&&S.call(this);vn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,fn,null).clip().discardPath()),this.pdf.text(xt,Sn.x,Sn.y,{angle:F.angle,align:ee,renderingMode:F.renderingMode}),vn&&this.pdf.restoreGraphicsState()}}else Nt.y<At&&(this.ctx.prevPageLastElemOffset+=At-Nt.y);F.scale>=.01&&(this.pdf.setFontSize(ze),this.lineWidth=Je)}else F.scale>=.01&&(ze=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ze*F.scale),Je=this.lineWidth,this.lineWidth=Je*F.scale),this.pdf.text(F.text,ve.x+this.posX,ve.y+this.posY,{angle:F.angle,align:ee,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(ze),this.lineWidth=Je)},D=function(F,ee,Q,he){Q=Q||0,he=he||0,this.pdf.internal.out(n(F+Q)+" "+r(ee+he)+" l")},ne=function(F,ee,Q){return this.pdf.lines(F,ee,Q,null,null)},se=function(F,ee,Q,he,ge,ve,Ee,Te){this.pdf.internal.out([e(i(Q+F)),e(s(he+ee)),e(i(ge+F)),e(s(ve+ee)),e(i(Ee+F)),e(s(Te+ee)),"c"].join(" "))},oe=function(F,ee,Q,he){for(var ge=2*Math.PI,ve=Math.PI/2;ee>Q;)ee-=ge;var Ee=Math.abs(Q-ee);Ee<ge&&he&&(Ee=ge-Ee);for(var Te=[],je=he?-1:1,ze=ee;Ee>1e-5;){var Je=ze+je*Math.min(Ee,ve);Te.push(Z.call(this,F,ze,Je)),Ee-=Math.abs(Je-ze),ze=Je}return Te},Z=function(F,ee,Q){var he=(Q-ee)/2,ge=F*Math.cos(he),ve=F*Math.sin(he),Ee=ge,Te=-ve,je=Ee*Ee+Te*Te,ze=je+Ee*ge+Te*ve,Je=4/3*(Math.sqrt(2*je*ze)-ze)/(Ee*ve-Te*ge),tt=Ee-Je*Te,Me=Te+Je*Ee,fe=tt,Xt=-Me,Pt=he+ee,bt=Math.cos(Pt),Ke=Math.sin(Pt);return{x1:F*Math.cos(ee),y1:F*Math.sin(ee),x2:tt*bt-Me*Ke,y2:tt*Ke+Me*bt,x3:fe*bt-Xt*Ke,y3:fe*Ke+Xt*bt,x4:F*Math.cos(Q),y4:F*Math.sin(Q)}},Y=function(F){return 180*F/Math.PI},pe=function(F,ee,Q,he,ge,ve){var Ee=F+.5*(Q-F),Te=ee+.5*(he-ee),je=ge+.5*(Q-ge),ze=ve+.5*(he-ve),Je=Math.min(F,ge,Ee,je),tt=Math.max(F,ge,Ee,je),Me=Math.min(ee,ve,Te,ze),fe=Math.max(ee,ve,Te,ze);return new c(Je,Me,tt-Je,fe-Me)},we=function(F,ee,Q,he,ge,ve,Ee,Te){var je,ze,Je,tt,Me,fe,Xt,Pt,bt,Ke,ct,nt,$t,At,fn=Q-F,Bt=he-ee,vt=ge-Q,Ht=ve-he,Dt=Ee-ge,Nt=Te-ve;for(ze=0;ze<41;ze++)bt=(Xt=(Je=F+(je=ze/40)*fn)+je*((Me=Q+je*vt)-Je))+je*(Me+je*(ge+je*Dt-Me)-Xt),Ke=(Pt=(tt=ee+je*Bt)+je*((fe=he+je*Ht)-tt))+je*(fe+je*(ve+je*Nt-fe)-Pt),ze==0?(ct=bt,nt=Ke,$t=bt,At=Ke):(ct=Math.min(ct,bt),nt=Math.min(nt,Ke),$t=Math.max($t,bt),At=Math.max(At,Ke));return new c(Math.round(ct),Math.round(nt),Math.round($t-ct),Math.round(At-nt))},ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,ee,Q=(F=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:ee}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(Tt.API),(function(t){var e=function(a){var c,u,h,p,y,w,v,j,S,_;for(u=[],h=0,p=(a+=c="\0\0\0\0".slice(a.length%4||4)).length;p>h;h+=4)(y=(a.charCodeAt(h)<<24)+(a.charCodeAt(h+1)<<16)+(a.charCodeAt(h+2)<<8)+a.charCodeAt(h+3))!==0?(w=(y=((y=((y=((y=(y-(_=y%85))/85)-(S=y%85))/85)-(j=y%85))/85)-(v=y%85))/85)%85,u.push(w+33,v+33,j+33,S+33,_+33)):u.push(122);return(function(I,V){for(var z=V;z>0;z--)I.pop()})(u,c.length),String.fromCharCode.apply(String,u)+"~>"},n=function(a){var c,u,h,p,y,w=String,v="length",j=255,S="charCodeAt",_="slice",I="replace";for(a[_](-2),a=a[_](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),h=[],p=0,y=(a+=c="uuuuu"[_](a[v]%5||5))[v];y>p;p+=5)u=52200625*(a[S](p)-33)+614125*(a[S](p+1)-33)+7225*(a[S](p+2)-33)+85*(a[S](p+3)-33)+(a[S](p+4)-33),h.push(j&u>>24,j&u>>16,j&u>>8,j&u);return(function(V,z){for(var $=z;$>0;$--)V.pop()})(h,c[v]),w.fromCharCode.apply(w,h)},r=function(a){return a.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),c.test(a)===!1)return"";for(var u="",h=0;h<a.length;h+=2)u+=String.fromCharCode("0x"+(a[h]+a[h+1]));return u},s=function(a){for(var c=new Uint8Array(a.length),u=a.length;u--;)c[u]=a.charCodeAt(u);return(c=F1(c)).reduce(function(h,p){return h+String.fromCharCode(p)},"")};t.processDataByFilters=function(a,c){var u=0,h=a||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":h=n(h),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=e(h),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=i(h),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=r(h),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=s(h),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:h,reverseChain:p.reverse().join(" ")}}})(Tt.API),(function(t){t.loadFile=function(e,n,r){return(function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var c=void 0;try{c=(function(u,h,p){var y=new XMLHttpRequest,w=0,v=function(j){var S=j.length,_=[],I=String.fromCharCode;for(w=0;w<S;w+=1)_.push(I(255&j.charCodeAt(w)));return _.join("")};if(y.open("GET",u,!h),y.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(y.onload=function(){y.status===200?p(v(this.responseText)):p(void 0)}),y.send(null),h&&y.status===200)return v(y.responseText)})(i,s,a)}catch{}return c})(e,n,r)},t.loadImageFile=t.loadFile})(Tt.API),(function(t){function e(){return(Kt.html2canvas?Promise.resolve(Kt.html2canvas):sg(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(Kt.DOMPurify?Promise.resolve(Kt.DOMPurify):sg(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var u=er(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(c,u){var h=document.createElement(c);for(var p in u.className&&(h.className=u.className),u.innerHTML&&u.dompurify&&(h.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)h.style[p]=u.style[p];return h},s=function c(u,h){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),y=u.firstChild;y;y=y.nextSibling)h!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(c(y,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p},a=function c(u){var h=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),h);return(p=p.setProgress(1,c,1,[c])).set(u)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(c,u){return c.__proto__=u||a.prototype,c},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(c,u){return this.then(function(){switch(u=u||(function(h){switch(r(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),u){case"string":return this.then(n).then(function(h){return this.set({src:i("div",{innerHTML:c,dompurify:h})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},a.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,u(this.prop.container,h)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var h=this.opt.jsPDF,p=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=p,p)for(var v=0;v<p.length;++v){var j=p[v],S=j.src.find(function(_){return _.format==="truetype"});S&&h.addFont(S.url,j.ref.name,j.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,h.context2d.save(!0),u(this.prop.container,w)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(c,u,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},a.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},a.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},a.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(c){if(r(c)!=="object")return this;var u=Object.keys(c||{}).map(function(h){if(h in a.template.prop)return function(){this.prop[h]=c[h]};switch(h){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[h]=c[h]}}},this);return this.then(function(){return this.thenList(u)})},a.prototype.get=function(c,u){return this.then(function(){var h=c in a.template.prop?this.prop[c]:this.opt[c];return u?u(h):h})},a.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},a.prototype.setPageSize=function(c){function u(h,p){return Math.floor(h*p/72*96)}return this.then(function(){(c=c||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},a.prototype.setProgress=function(c,u,h,p){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),h!=null&&(this.progress.n=h),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(c,u,h,p){return this.setProgress(c?this.progress.val+c:null,u||null,h?this.progress.n+h:null,p?this.progress.stack.concat(p):null)},a.prototype.then=function(c,u){var h=this;return this.thenCore(c,u,function(p,y){return h.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(w){return h.updateProgress(null,p),w}).then(p,y).then(function(w){return h.updateProgress(1),w})})},a.prototype.thenCore=function(c,u,h){h=h||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),u&&(u=u.bind(p));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:a.convert(Object.assign({},p),Promise.prototype),w=h.call(y,c,u);return a.convert(w,p.__proto__)},a.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},a.prototype.thenList=function(c){var u=this;return c.forEach(function(h){u=u.thenCore(h)}),u},a.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return a.convert(u,this)},a.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},a.prototype.error=function(c){return this.then(function(){throw new Error(c)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Tt.getPageSize=function(c,u,h){if(er(c)==="object"){var p=c;c=p.orientation,u=p.unit||u,h=p.format||h}u=u||"mm",h=h||"a4",c=(""+(c||"P")).toLowerCase();var y,w=(""+h).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+u}var j,S=0,_=0;if(v.hasOwnProperty(w))S=v[w][1]/y,_=v[w][0]/y;else try{S=h[1],_=h[0]}catch{throw new Error("Invalid format: "+h)}if(c==="p"||c==="portrait")c="p",_>S&&(j=_,_=S,S=j);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",S>_&&(j=_,_=S,S=j)}return{width:_,height:S,unit:u,k:y,orientation:c}},t.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(Av):null;var h=new a(u);return u.worker?h:h.from(c).doCallback()}})(Tt.API),Tt.API.addJS=function(t){return MN=t,this.internal.events.subscribe("postPutResources",function(){zm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),DN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+MN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zm!==void 0&&DN!==void 0&&this.internal.out("/Names <</JavaScript "+zm+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],c=r.exec(a);if(c!=null){var u=c[1];n.internal.newObjectDeferredBegin(u,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,p=[];for(s=0;s<h;s++){var y=n.internal.newObject();p.push(y);var w=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var c=this.count=this.count_r({count:0},a);if(c>0&&this.line("/Count "+c),a.options&&a.options.pageNumber){var u=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])})(Tt.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,a,c){var u,h=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,u=(function(y){for(var w,v=256*y.charCodeAt(4)+y.charCodeAt(5),j=y.length,S={width:0,height:0,numcomponents:1},_=4;_<j;_+=2){if(_+=v,e.indexOf(y.charCodeAt(_+1))!==-1){w=256*y.charCodeAt(_+5)+y.charCodeAt(_+6),S={width:256*y.charCodeAt(_+7)+y.charCodeAt(_+8),height:w,numcomponents:y.charCodeAt(_+9)};break}v=256*y.charCodeAt(_+2)+y.charCodeAt(_+3)}return S})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),u.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:n,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:h,index:r,alias:i}}return p}})(Tt.API),Tt.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=QK(t,{checkCrc:!0}),a=s.width,c=s.height,u=s.channels,h=s.palette,p=s.depth;i=h&&u===1?(function(E){for(var T=E.width,U=E.height,C=E.data,L=E.palette,D=E.depth,ne=!1,se=[],oe=[],Z=void 0,Y=!1,pe=0,we=0;we<L.length;we++){var ae=UA(L[we],4),F=ae[0],ee=ae[1],Q=ae[2],he=ae[3];se.push(F,ee,Q),he!=null&&(he===0?(pe++,oe.length<1&&oe.push(we)):he<255&&(Y=!0))}if(Y||pe>1){ne=!0,oe=void 0;var ge=T*U;Z=new Uint8Array(ge);for(var ve=new DataView(C.buffer),Ee=0;Ee<ge;Ee++){var Te=Ev(ve,Ee,D),je=UA(L[Te],4)[3];Z[Ee]=je}}else pe===0&&(oe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ne?8:void 0,colorBytes:C,alphaBytes:Z,needSMask:ne,palette:se,mask:oe}})(s):u===2||u===4?(function(E){for(var T=E.data,U=E.width,C=E.height,L=E.channels,D=E.depth,ne=L===2?"DeviceGray":"DeviceRGB",se=L-1,oe=U*C,Z=se,Y=oe*Z,pe=1*oe,we=Math.ceil(Y*D/8),ae=Math.ceil(pe*D/8),F=new Uint8Array(we),ee=new Uint8Array(ae),Q=new DataView(T.buffer),he=new DataView(F.buffer),ge=new DataView(ee.buffer),ve=!1,Ee=0;Ee<oe;Ee++){for(var Te=Ee*L,je=0;je<Z;je++)HN(he,Ev(Q,Te+je,D),Ee*Z+je,D);var ze=Ev(Q,Te+Z,D);ze<(1<<D)-1&&(ve=!0),HN(ge,ze,1*Ee,D)}return{colorSpace:ne,colorsPerPixel:se,sMaskBitsPerComponent:ve?D:void 0,colorBytes:F,alphaBytes:ee,needSMask:ve}})(s):(function(E){var T=E.data,U=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:U,colorsPerPixel:U==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?(function(C){for(var L=C.length,D=new Uint8Array(2*L),ne=new DataView(D.buffer,D.byteOffset,D.byteLength),se=0;se<L;se++)ne.setUint16(2*se,C[se],!1);return D})(T):T,needSMask:!1}})(s);var y,w,v,j=i,S=j.colorSpace,_=j.colorsPerPixel,I=j.sMaskBitsPerComponent,V=j.colorBytes,z=j.alphaBytes,$=j.needSMask,J=j.palette,le=j.mask,q=null;return r!==Tt.API.image_compression.NONE&&typeof F1=="function"?(q=(function(E){var T;switch(E){case Tt.API.image_compression.FAST:T=11;break;case Tt.API.image_compression.MEDIUM:T=13;break;case Tt.API.image_compression.SLOW:T=14;break;default:T=12}return T})(r),y=this.decode.FLATE_DECODE,w="/Predictor ".concat(q," /Colors ").concat(_," /BitsPerComponent ").concat(p," /Columns ").concat(a),t=UN(V,Math.ceil(a*_*p/8),_,p,r),$&&(v=UN(z,Math.ceil(a*I/8),1,I,r))):(y=void 0,w=void 0,t=V,$&&(v=z)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(v&&this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),{alias:n,data:t,index:e,filter:y,decodeParameters:w,transparency:le,palette:J,sMask:v,predictor:q,width:a,height:c,bitsPerComponent:p,sMaskBitsPerComponent:I,colorSpace:S}}},(function(t){t.processGIF89A=function(e,n,r,i){var s=new yY(e),a=s.width,c=s.height,u=[];s.decodeAndBlitFrameRGBA(0,u);var h={data:u,width:a,height:c},p=new Sv(100).encode(h,100);return t.processJPEG.call(this,p,n,r,i)},t.processGIF87A=t.processGIF89A})(Tt.API),Pa.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Pa.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){or.log("bit decode error:"+n)}},Pa.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,c=0;c<8&&8*i+c<this.width;c++){var u=this.palette[s>>7-c&1];this.data[a+4*c]=u.blue,this.data[a+4*c+1]=u.green,this.data[a+4*c+2]=u.red,this.data[a+4*c+3]=255}n!==0&&(this.pos+=4-n)}},Pa.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,c=s>>4,u=15&s,h=this.palette[c];if(this.data[a]=h.blue,this.data[a+1]=h.green,this.data[a+2]=h.red,this.data[a+3]=255,2*i+1>=this.width)break;h=this.palette[u],this.data[a+4]=h.blue,this.data[a+4+1]=h.green,this.data[a+4+2]=h.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Pa.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Pa.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&e)/e*255|0,u=(s>>10&e)/e*255|0,h=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=u,this.data[p+1]=c,this.data[p+2]=a,this.data[p+3]=h}this.pos+=t}},Pa.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,u=(a>>5&n)/n*255|0,h=(a>>11)/e*255|0,p=i*this.width*4+4*s;this.data[p]=h,this.data[p+1]=u,this.data[p+2]=c,this.data[p+3]=255}this.pos+=t}},Pa.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Pa.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=s,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=a}},Pa.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,i){var s=new Pa(e,!1),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},h=new Sv(100).encode(u,100);return t.processJPEG.call(this,h,n,r,i)}})(Tt.API),GN.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,i){var s=new GN(e),a=s.width,c=s.height,u={data:s.getData(),width:a,height:c},h=new Sv(100).encode(u,100);return t.processJPEG.call(this,h,n,r,i)}})(Tt.API),Tt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),c=0,u=0,h=0;h<i;h+=4){var p=r[h],y=r[h+1],w=r[h+2],v=r[h+3];s[c++]=p,s[c++]=y,s[c++]=w,a[u++]=v}var j=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:j,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Tt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zd=Tt.API,qm=zd.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:i.metadata.Unicode.widths,u=c.fof?c.fof:1,h=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=h.fof?h.fof:1,y=e.doKerning!==!1,w=0,v=t.length,j=0,S=c[0]||u,_=[];for(n=0;n<v;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?_.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(w=y&&er(h[r])==="object"&&!isNaN(parseInt(h[r][j],10))?h[r][j]/p:0,_.push((c[r]||S)/u+w)),j=r;return _},ON=zd.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return zd.processArabic&&(t=zd.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:qm.apply(this,arguments).reduce(function(s,a){return s+a},0)},FN=function(t,e,n,r){for(var i=[],s=0,a=t.length,c=0;s!==a&&c+e[s]<n;)c+=e[s],s++;i.push(t.slice(0,s));var u=s;for(c=0;s!==a;)c+e[s]>r&&(i.push(t.slice(u,s)),c=0,u=s),c+=e[s],s++;return u!==s&&i.push(t.slice(u,s)),i},VN=function(t,e,n){n||(n={});var r,i,s,a,c,u,h,p=[],y=[p],w=n.textIndent||0,v=0,j=0,S=t.split(" "),_=qm.apply(this,[" ",n])[0];if(u=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var I=Array(u).join(" "),V=[];S.map(function($){($=$.split(/\s*\n/)).length>1?V=V.concat($.map(function(J,le){return(le&&J.length?`
`:"")+J})):V.push($[0])}),S=V,u=ON.apply(this,[I,n])}for(s=0,a=S.length;s<a;s++){var z=0;if(r=S[s],u&&r[0]==`
`&&(r=r.substr(1),z=1),w+v+(j=(i=qm.apply(this,[r,n])).reduce(function($,J){return $+J},0))>e||z){if(j>e){for(c=FN.apply(this,[r,i,e-(w+v),e]),p.push(c.shift()),p=[c.pop()];c.length;)y.push([c.shift()]);j=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function($,J){return $+J},0)}else p=[r];y.push(p),w=j+u,v=_}else p.push(r),w+=v+j,v=_}return h=u?function($,J){return(J?I:"")+$.join(" ")}:function($){return $.join(" ")},y.map(h)},zd.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var y=this.internal.getFont(p.fontName,p.fontStyle),w="Unicode";return y.metadata[w]?{widths:y.metadata[w].widths||{0:1},kerning:y.metadata[w].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var c,u,h=[];for(c=0,u=r.length;c<u;c++)h=h.concat(VN.apply(this,[r[c],a,s]));return h},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=e[s],i[e[s]]=n[s];var a=function(w){return"0x"+parseInt(w,10).toString(16)},c=t.__fontmetrics__.compress=function(w){var v,j,S,_,I=["{"];for(var V in w){if(v=w[V],isNaN(parseInt(V,10))?j="'"+V+"'":(V=parseInt(V,10),j=(j=a(V).slice(2)).slice(0,-1)+i[j.slice(-1)]),typeof v=="number")v<0?(S=a(v).slice(3),_="-"):(S=a(v).slice(2),_=""),S=_+S.slice(0,-1)+i[S.slice(-1)];else{if(er(v)!=="object")throw new Error("Don't know what to do with value type "+er(v)+".");S=c(v)}I.push(j+S)}return I.push("}"),I.join("")},u=t.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,j,S,_,I={},V=1,z=I,$=[],J="",le="",q=w.length-1,E=1;E<q;E+=1)(_=w[E])=="'"?v?(S=v.join(""),v=void 0):v=[]:v?v.push(_):_=="{"?($.push([z,S]),z={},S=void 0):_=="}"?((j=$.pop())[0][j[1]]=z,S=void 0,z=j[0]):_=="-"?V=-1:S===void 0?r.hasOwnProperty(_)?(J+=r[_],S=parseInt(J,16)*V,V=1,J=""):J+=_:r.hasOwnProperty(_)?(le+=r[_],z[S]=parseInt(le,16)*V,V=1,S=void 0,le=""):le+=_;return I},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},y={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(w){var v=w.font,j=y.Unicode[v.postScriptName];j&&(v.metadata.Unicode={},v.metadata.Unicode.widths=j.widths,v.metadata.Unicode.kerning=j.kerning);var S=p.Unicode[v.postScriptName];S&&(v.metadata.Unicode.encoding=S,v.encoding=S.codePages[0])}])})(Tt.API),(function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(ag(c)),a.metadata=t.API.TTFFont.open(c),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])})(Tt),Tt.API.addSvgAsImage=function(t,e,n,r,i,s,a,c){if(isNaN(e)||isNaN(n))throw or.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw or.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=r,u.height=i;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(Kt.canvg?Promise.resolve(Kt.canvg):sg(()=>import("./index.es-DQvbwk-H.js"),[])).catch(function(w){return Promise.reject(new Error("Could not load canvg: "+w))}).then(function(w){return w.default?w.default:w}).then(function(w){return w.fromString(h,t,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(p)}).then(function(){y.addImage(u.toDataURL("image/jpeg",1),e,n,r,i,a,c)})},Tt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Tt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(a),u=[],h=0,p=0,y=0;function w(j,S){var _,I=!1;for(_=0;_<j.length;_+=1)j[_]===S&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var v=c.length;for(y=0;y<v;y+=1)n[c[y]].value=n[c[y]].defaultValue,n[c[y]].explicitSet=!1}if(er(t)==="object"){for(i in t)if(s=t[i],w(c,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&w(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(h=0;h<s.length;h+=1)if(r=!0,s[h].length===1&&typeof s[h][0]=="number")u.push(String(s[h]-1));else if(s[h].length>1){for(p=0;p<s[h].length;p+=1)typeof s[h][p]!="number"&&(r=!1);r===!0&&u.push([s[h][0]-1,s[h][1]-1].join(" "))}n[i].value="["+u.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,S=[];for(j in n)n[j].explicitSet===!0&&(n[j].type==="name"?S.push("/"+j+" /"+n[j].value):S.push("/"+j+" "+n[j].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+a.length+c.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+c+u),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(Tt.API),(function(t){var e=t.API,n=e.pdfEscape16=function(s,a){for(var c,u=a.metadata.Unicode.widths,h=["","0","00","000","0000"],p=[""],y=0,w=s.length;y<w;++y){if(c=a.metadata.characterToGlyph(s.charCodeAt(y)),a.metadata.glyIdsUsed.push(c),a.metadata.toUnicode[c]=s.charCodeAt(y),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(a.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(h[4-c.length],c)}return p.join("")},r=function(s){var a,c,u,h,p,y,w;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],y=0,w=(c=Object.keys(s).sort(function(v,j){return v-j})).length;y<w;y++)a=c[y],u.length>=100&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(h=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),u.push("<"+a+"><"+h+">"));return u.length&&(p+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,h=a.newObject,p=a.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var y=c.metadata.Unicode.widths,w=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),v="",j=0;j<w.length;j++)v+=String.fromCharCode(w[j]);var S=h();p({data:v,addLength1:!0,objectId:S}),u("endobj");var _=h();p({data:r(c.metadata.toUnicode),addLength1:!0,objectId:_}),u("endobj");var I=h();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Gd(c.fontName)),u("/FontFile2 "+S+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var V=h();u("<<"),u("/Type /Font"),u("/BaseFont /"+Gd(c.fontName)),u("/FontDescriptor "+I+" 0 R"),u("/W "+t.API.PDFObject.convert(y)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=h(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+_+" 0 R"),u("/BaseFont /"+Gd(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+V+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var c=a.font,u=a.out,h=a.newObject,p=a.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var y=c.metadata.rawData,w="",v=0;v<y.length;v++)w+=String.fromCharCode(y[v]);var j=h();p({data:w,addLength1:!0,objectId:j}),u("endobj");var S=h();p({data:r(c.metadata.toUnicode),addLength1:!0,objectId:S}),u("endobj");var _=h();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+j+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+Gd(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=h();for(var I=0;I<c.metadata.hmtx.widths.length;I++)c.metadata.hmtx.widths[I]=parseInt(c.metadata.hmtx.widths[I]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Gd(c.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,c=s.text||"",u=s.x,h=s.y,p=s.options||{},y=s.mutex||{},w=y.pdfEscape,v=y.activeFontKey,j=y.fonts,S=v,_="",I=0,V="",z=j[S].encoding;if(j[S].encoding!=="Identity-H")return{text:c,x:u,y:h,options:p,mutex:y};for(V=c,S=v,Array.isArray(c)&&(V=c[0]),I=0;I<V.length;I+=1)j[S].metadata.hasOwnProperty("cmap")&&(a=j[S].metadata.cmap.unicode.codeMap[V[I].charCodeAt(0)]),a||V[I].charCodeAt(0)<256&&j[S].metadata.hasOwnProperty("Unicode")?_+=V[I]:_+="";var $="";return parseInt(S.slice(1))<14||z==="WinAnsiEncoding"?$=w(_,S).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):z==="Identity-H"&&($=n(_,j[S])),y.isHex=!0,{text:$,x:u,y:h,options:p,mutex:y}};e.events.push(["postProcessText",function(s){var a=s.text||"",c=[],u={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var h=0;for(h=0;h<a.length;h+=1)Array.isArray(a[h])&&a[h].length===3?c.push([i(Object.assign({},u,{text:a[h][0]})).text,a[h][1],a[h][2]]):c.push(i(Object.assign({},u,{text:a[h]})).text);s.text=c}else s.text=i(Object.assign({},u,{text:a})).text}])})(Tt),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Tt.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,a,c,u,h,p,y=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),V=!1,z=0;this.__bidiEngine__={};var $=function(C){var L=C.charCodeAt(),D=L>>8,ne=S[D];return ne!==void 0?y[256*ne+(255&L)]:D===252||D===253?"AL":I.test(D)?"L":D===8?"R":"N"},J=function(C){for(var L,D=0;D<C.length;D++){if((L=$(C.charAt(D)))==="L")return!1;if(L==="R")return!0}return!1},le=function(C,L,D,ne){var se,oe,Z,Y,pe=L[ne];switch(pe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":V=!1;break;case"N":case"AN":break;case"EN":V&&(pe="AN");break;case"AL":V=!0,pe="R";break;case"WS":case"BN":pe="N";break;case"CS":ne<1||ne+1>=L.length||(se=D[ne-1])!=="EN"&&se!=="AN"||(oe=L[ne+1])!=="EN"&&oe!=="AN"?pe="N":V&&(oe="AN"),pe=oe===se?oe:"N";break;case"ES":pe=(se=ne>0?D[ne-1]:"B")==="EN"&&ne+1<L.length&&L[ne+1]==="EN"?"EN":"N";break;case"ET":if(ne>0&&D[ne-1]==="EN"){pe="EN";break}if(V){pe="N";break}for(Z=ne+1,Y=L.length;Z<Y&&L[Z]==="ET";)Z++;pe=Z<Y&&L[Z]==="EN"?"EN":"N";break;case"NSM":if(a&&!c){for(Y=L.length,Z=ne+1;Z<Y&&L[Z]==="NSM";)Z++;if(Z<Y){var we=C[ne],ae=we>=1425&&we<=2303||we===64286;if(se=L[Z],ae&&(se==="R"||se==="AL")){pe="R";break}}}pe=ne<1||(se=L[ne-1])==="B"?"N":D[ne-1];break;case"B":V=!1,i=!0,pe=z;break;case"S":s=!0,pe="N"}return pe},q=function(C,L,D){var ne=C.split("");return D&&E(ne,D,{hiLevel:z}),ne.reverse(),L&&L.reverse(),ne.join("")},E=function(C,L,D){var ne,se,oe,Z,Y,pe=-1,we=C.length,ae=0,F=[],ee=z?v:w,Q=[];for(V=!1,i=!1,s=!1,se=0;se<we;se++)Q[se]=$(C[se]);for(oe=0;oe<we;oe++){if(Y=ae,F[oe]=le(C,Q,F,oe),ne=240&(ae=ee[Y][j[F[oe]]]),ae&=15,L[oe]=Z=ee[ae][5],ne>0)if(ne===16){for(se=pe;se<oe;se++)L[se]=1;pe=-1}else pe=-1;if(ee[ae][6])pe===-1&&(pe=oe);else if(pe>-1){for(se=pe;se<oe;se++)L[se]=Z;pe=-1}Q[oe]==="B"&&(L[oe]=0),D.hiLevel|=Z}s&&(function(he,ge,ve){for(var Ee=0;Ee<ve;Ee++)if(he[Ee]==="S"){ge[Ee]=z;for(var Te=Ee-1;Te>=0&&he[Te]==="WS";Te--)ge[Te]=z}})(Q,L,we)},T=function(C,L,D,ne,se){if(!(se.hiLevel<C)){if(C===1&&z===1&&!i)return L.reverse(),void(D&&D.reverse());for(var oe,Z,Y,pe,we=L.length,ae=0;ae<we;){if(ne[ae]>=C){for(Y=ae+1;Y<we&&ne[Y]>=C;)Y++;for(pe=ae,Z=Y-1;pe<Z;pe++,Z--)oe=L[pe],L[pe]=L[Z],L[Z]=oe,D&&(oe=D[pe],D[pe]=D[Z],D[Z]=oe);ae=Y}ae++}}},U=function(C,L,D){var ne=C.split(""),se={hiLevel:z};return D||(D=[]),E(ne,D,se),(function(oe,Z,Y){if(Y.hiLevel!==0&&p)for(var pe,we=0;we<oe.length;we++)Z[we]===1&&(pe=_.indexOf(oe[we]))>=0&&(oe[we]=_[pe+1])})(ne,D,se),T(2,ne,L,D,se),T(1,ne,L,D,se),ne.join("")};return this.__bidiEngine__.doBidiReorder=function(C,L,D){if((function(se,oe){if(oe)for(var Z=0;Z<se.length;Z++)oe[Z]=Z;c===void 0&&(c=J(se)),h===void 0&&(h=J(se))})(C,L),a||!u||h)if(a&&u&&c^h)z=c?1:0,C=q(C,L,D);else if(!a&&u&&h)z=c?1:0,C=U(C,L,D),C=q(C,L);else if(!a||c||u||h){if(a&&!u&&c^h)C=q(C,L),c?(z=0,C=U(C,L,D)):(z=1,C=U(C,L,D),C=q(C,L));else if(a&&c&&!u&&h)z=1,C=U(C,L,D),C=q(C,L);else if(!a&&!u&&c^h){var ne=p;c?(z=1,C=U(C,L,D),z=0,p=!1,C=U(C,L,D),p=ne):(z=0,C=U(C,L,D),C=q(C,L),z=1,p=!1,C=U(C,L,D),p=ne,C=q(C,L))}}else z=0,C=U(C,L,D);else z=c?1:0,C=U(C,L,D);return C},this.__bidiEngine__.setOptions=function(C){C&&(a=C.isInputVisual,u=C.isOutputVisual,c=C.isInputRtl,h=C.isOutputRtl,p=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var c=0;for(a=[],c=0;c<i.length;c+=1)Object.prototype.toString.call(i[c])==="[object Array]"?a.push([n.doBidiReorder(i[c][0]),i[c][1],i[c][2]]):a.push([n.doBidiReorder(i[c])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(Tt),Tt.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new ou(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new RY(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new vY(this.contents),this.head=new bY(this),this.name=new EY(this),this.cmap=new aI(this),this.toUnicode={},this.hhea=new wY(this),this.maxp=new SY(this),this.hmtx=new TY(this),this.post=new AY(this),this.os2=new _Y(this),this.loca=new PY(this),this.glyf=new kY(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,c,u,h;for(h=[],a=0,c=(u=this.bbox).length;a<c;a++)e=u[a],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,a,c;for(a=0,s=0,c=(e=""+e).length;0<=c?s<c:s>c;s=0<=c?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var Va,ou=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,a,c,u;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^c)+(255^u)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*c+u},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t})(),vY=(function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,a,c,u,h,p,y,w,v,j,S;for(S in v=Object.keys(n).length,u=Math.log(2),y=16*Math.floor(Math.log(v)/u),a=Math.floor(y/u),p=16*v-y,(i=new ou).writeInt(this.scalarType),i.writeShort(v),i.writeShort(y),i.writeShort(a),i.writeShort(p),s=16*v,h=i.pos+s,c=null,j=[],n)for(w=n[S],i.writeString(S),i.writeInt(t(w)),i.writeInt(h),i.writeInt(w.length),j=j.concat(w),S==="head"&&(c=h),h+=w.length;h%4;)j.push(0),h++;return i.write(j),r=2981146554-t(i.data),i.pos=c+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,a;for(n=lI.call(n);n.length%4;)n.push(0);for(s=new ou(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e})(),xY={}.hasOwnProperty,_l=function(t,e){for(var n in e)xY.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Va=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var bY=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new ou).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),KN=(function(){function t(e,n){var r,i,s,a,c,u,h,p,y,w,v,j,S,_,I,V,z;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(v=e.readUInt16(),w=v/2,e.pos+=6,s=(function(){var $,J;for(J=[],u=$=0;0<=w?$<w:$>w;u=0<=w?++$:--$)J.push(e.readUInt16());return J})(),e.pos+=2,S=(function(){var $,J;for(J=[],u=$=0;0<=w?$<w:$>w;u=0<=w?++$:--$)J.push(e.readUInt16());return J})(),h=(function(){var $,J;for(J=[],u=$=0;0<=w?$<w:$>w;u=0<=w?++$:--$)J.push(e.readUInt16());return J})(),p=(function(){var $,J;for(J=[],u=$=0;0<=w?$<w:$>w;u=0<=w?++$:--$)J.push(e.readUInt16());return J})(),i=(this.length-e.pos+this.offset)/2,c=(function(){var $,J;for(J=[],u=$=0;0<=i?$<i:$>i;u=0<=i?++$:--$)J.push(e.readUInt16());return J})(),u=I=0,z=s.length;I<z;u=++I)for(_=s[u],r=V=j=S[u];j<=_?V<=_:V>=_;r=j<=_?++V:--V)p[u]===0?a=r+h[u]:(a=c[p[u]/2+(r-j)-(w-u)]||0)!==0&&(a+=h[u]),this.codeMap[r]=65535&a}e.pos=y}return t.encode=function(e,n){var r,i,s,a,c,u,h,p,y,w,v,j,S,_,I,V,z,$,J,le,q,E,T,U,C,L,D,ne,se,oe,Z,Y,pe,we,ae,F,ee,Q,he,ge,ve,Ee,Te,je,ze,Je;switch(ne=new ou,a=Object.keys(e).sort(function(tt,Me){return tt-Me}),n){case"macroman":for(S=0,_=(function(){var tt=[];for(j=0;j<256;++j)tt.push(0);return tt})(),V={0:0},s={},se=0,pe=a.length;se<pe;se++)V[Te=e[i=a[se]]]==null&&(V[Te]=++S),s[i]={old:e[i],new:V[e[i]]},_[i]=V[e[i]];return ne.writeUInt16(1),ne.writeUInt16(0),ne.writeUInt32(12),ne.writeUInt16(0),ne.writeUInt16(262),ne.writeUInt16(0),ne.write(_),{charMap:s,subtable:ne.data,maxGlyphID:S+1};case"unicode":for(L=[],y=[],z=0,V={},r={},I=h=null,oe=0,we=a.length;oe<we;oe++)V[J=e[i=a[oe]]]==null&&(V[J]=++z),r[i]={old:J,new:V[J]},c=V[J]-i,I!=null&&c===h||(I&&y.push(I),L.push(i),h=c),I=i;for(I&&y.push(I),y.push(65535),L.push(65535),U=2*(T=L.length),E=2*Math.pow(Math.log(T)/Math.LN2,2),w=Math.log(E/2)/Math.LN2,q=2*T-E,u=[],le=[],v=[],j=Z=0,ae=L.length;Z<ae;j=++Z){if(C=L[j],p=y[j],C===65535){u.push(0),le.push(0);break}if(C-(D=r[C].new)>=32768)for(u.push(0),le.push(2*(v.length+T-j)),i=Y=C;C<=p?Y<=p:Y>=p;i=C<=p?++Y:--Y)v.push(r[i].new);else u.push(D-C),le.push(0)}for(ne.writeUInt16(3),ne.writeUInt16(1),ne.writeUInt32(12),ne.writeUInt16(4),ne.writeUInt16(16+8*T+2*v.length),ne.writeUInt16(0),ne.writeUInt16(U),ne.writeUInt16(E),ne.writeUInt16(w),ne.writeUInt16(q),ve=0,F=y.length;ve<F;ve++)i=y[ve],ne.writeUInt16(i);for(ne.writeUInt16(0),Ee=0,ee=L.length;Ee<ee;Ee++)i=L[Ee],ne.writeUInt16(i);for(je=0,Q=u.length;je<Q;je++)c=u[je],ne.writeUInt16(c);for(ze=0,he=le.length;ze<he;ze++)$=le[ze],ne.writeUInt16($);for(Je=0,ge=v.length;Je<ge;Je++)S=v[Je],ne.writeUInt16(S);return{charMap:r,subtable:ne.data,maxGlyphID:z+1}}},t})(),aI=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new KN(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=KN.encode(e,n),(i=new ou).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t})(),wY=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),_Y=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),AY=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var a,c,u;for(u=[],s=a=0,c=this.file.maxp.numGlyphs;0<=c?a<c:a>c;s=0<=c?++a:--a)u.push(e.readUInt32());return u}).call(this)}},t})(),NY=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},EY=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,s,a,c,u,h,p,y,w;for(e.pos=this.offset,e.readShort(),n=e.readShort(),c=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(u={},s=p=0,y=r.length;p<y;s=++p)i=r[s],e.pos=i.offset,h=e.readString(i.length),a=new NY(h,i),u[w=i.nameID]==null&&(u[w]=[]),u[i.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t})(),SY=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),TY=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,s,a,c,u;for(e.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,p;for(p=[],n=h=0;0<=i?h<i:h>i;n=0<=i?++h:--h)p.push(e.readInt16());return p})(),this.widths=(function(){var h,p,y,w;for(w=[],h=0,p=(y=this.metrics).length;h<p;h++)s=y[h],w.push(s.advance);return w}).call(this),r=this.widths[this.widths.length-1],u=[],n=a=0;0<=i?a<i:a>i;n=0<=i?++a:--a)u.push(this.widths.push(r));return u},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),lI=[].slice,kY=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,s,a,c,u,h,p,y;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,a=(c=new ou(n.read(i))).readShort(),h=c.readShort(),y=c.readShort(),u=c.readShort(),p=c.readShort(),this.cache[e]=a===-1?new IY(c,h,y,u,p):new CY(c,a,h,y,u,p),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,s,a,c,u;for(a=[],s=[],c=0,u=n.length;c<u;c++)i=e[n[c]],s.push(a.length),i&&(a=a.concat(i.encode(r)));return s.push(a.length),{table:a,offsets:s}},t})(),CY=(function(){function t(e,n,r,i,s,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),IY=(function(){function t(e,n,r,i,s){var a,c;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;c=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&c;)a.pos+=1&c?4:2,128&c?a.pos+=8:64&c?a.pos+=4:8&c&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new ou(lI.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),PY=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return _l(t,Va),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<r.length;++a)if(r[a]=i,s<n.length&&n[s]==a){++s,r[a]=i;var c=this.offsets[a],u=this.offsets[a+1]-c;u>0&&(i+=u)}for(var h=new Array(4*r.length),p=0;p<r.length;++p)h[4*p+3]=255&r[p],h[4*p+2]=(65280&r[p])>>8,h[4*p+1]=(16711680&r[p])>>16,h[4*p]=(4278190080&r[p])>>24;return h},t})(),RY=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,a,c,u;for(i={},a=0,c=e.length;a<c;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in u=this.glyphsFor(n))r=u[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,a,c,u,h,p,y,w,v,j,S,_,I;for(i in r=aI.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),v={0:0},I=r.charMap)v[(u=I[i]).old]=u.new;for(j in w=r.maxGlyphID,a)j in v||(v[j]=w++);return p=(function(V){var z,$;for(z in $={},V)$[V[z]]=z;return $})(v),y=Object.keys(p).sort(function(V,z){return V-z}),S=(function(){var V,z,$;for($=[],V=0,z=y.length;V<z;V++)c=y[V],$.push(p[c]);return $})(),s=this.font.glyf.encode(a,S,v),h=this.font.loca.encode(s.offsets,S),_={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t})();Tt.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+(function(){var c,u,h;for(h=[],c=0,u=n.length;c<u;c++)r=n[c],h.push(e.convert(r));return h})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+n},e})();const jY={initial:{opacity:0},animate:{opacity:1,transition:{duration:.6,staggerChildren:.1}}},cI=({patientName:t="Blanca",patientBirthDate:e=new Date("2010-05-15")})=>{const{allergies:n}=K1(),[r,i]=O.useState(""),[s,a]=O.useState("all"),[c,u]=O.useState("all"),[h,p]=O.useState("dashboard"),[y,w]=O.useState(new Set),[v,j]=O.useState(!1),S=O.useMemo(()=>n.filter(E=>E.isAlergic).map(E=>OW(E,"PATIENT-001",t)),[n,t]),_=O.useMemo(()=>{const E=S.length,T=S.filter(oe=>oe.intensity.toLowerCase()==="alta"||oe.intensity.toLowerCase()==="alto").length,U=[...new Set(S.map(oe=>oe.category))],C=S.flatMap(oe=>oe.testResults.filter(Z=>{const Y=new Date;return Y.setDate(Y.getDate()-30),Z.date>Y})),L=S.flatMap(oe=>oe.reactionHistory.filter(Z=>Z.severity==="severe"||Z.severity==="anaphylactic")),D=S.flatMap(oe=>oe.testResults.map(Z=>Z.date)),ne=D.length>0?new Date(Math.max(...D.map(oe=>oe.getTime()))):null,se=ne?new Date(ne.getTime()+365*24*60*60*1e3):null;return{totalAllergies:E,highRiskAllergies:T,categoriesWithAllergies:U,recentTests:C,severeReactions:L,lastTestDate:ne,nextTestDue:se}},[S]),I=O.useMemo(()=>{const E=_.highRiskAllergies>2?"critical":_.highRiskAllergies>1?"high":_.highRiskAllergies>0?"moderate":"low",T=[];_.highRiskAllergies>0&&T.push(`${_.highRiskAllergies} alergias de alto riesgo`),_.severeReactions.length>0&&T.push(`${_.severeReactions.length} reacciones severas registradas`),(!_.lastTestDate||new Date().getTime()-_.lastTestDate.getTime()>365*24*60*60*1e3)&&T.push("Pruebas de alergia desactualizadas");const U=["Mantener EpiPen disponible en todo momento","Evitar restaurantes con alto riesgo de contaminacin cruzada","Leer etiquetas de alimentos cuidadosamente","Informar a escuela sobre alergias severas","Realizar pruebas de seguimiento anualmente"];return _.highRiskAllergies>0&&U.unshift("Considerar bracelet de identificacin mdica"),{overallRisk:E,riskFactors:T,recommendations:U,emergencyPreparedness:Math.min(100,S.filter(C=>C.medications.length>0).length/Math.max(S.length,1)*100)}},[_,S]),V=O.useMemo(()=>{let E=S;return r&&(E=E.filter(T=>T.name.toLowerCase().includes(r.toLowerCase())||T.category.toLowerCase().includes(r.toLowerCase()))),s!=="all"&&(E=E.filter(T=>T.category===s)),c!=="all"&&(E=E.filter(T=>{const U=T.testResults[T.testResults.length-1];return U?sa.getRiskLevel(U.kuaLevel)===c:!1})),E},[S,r,s,c]),z=O.useMemo(()=>[...new Set(S.map(E=>E.category))],[S]),$=O.useCallback(E=>{w(T=>{const U=new Set(T);return U.has(E)?U.delete(E):U.add(E),U})},[]),J=O.useCallback(E=>{if(et.info(`Exporting medical records as ${E}`),E==="csv"){const T=["Nombre","Categora","Intensidad","KUA/Litro","Es Alrgica"],U=n.map(se=>[se.name,se.category,se.intensity,se.KUA_Litro?.toString()||"N/A",se.isAlergic?"S":"No"]),C=[T.join(","),...U.map(se=>se.join(","))].join(`
`),L=new Blob([C],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a"),ne=URL.createObjectURL(L);D.setAttribute("href",ne),D.setAttribute("download",`historial_medico_${new Date().toISOString().split("T")[0]}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D),et.info("CSV export completed successfully")}else if(E==="pdf"){et.info("Starting PDF export with jsPDF");try{const T=new Tt({orientation:"portrait",unit:"mm",format:"a4"});T.setFont("helvetica");const U=(Q,he,ge,ve=12,Ee="normal")=>{T.setFontSize(ve),T.setFont("helvetica",Ee),T.text(Q,he,ge)},C=T.internal.pageSize.getWidth(),L=T.internal.pageSize.getHeight(),D=20;let ne=D;const se=(Q=10)=>ne+Q>L-D?(T.addPage(),ne=D,!0):!1;U("Historial Medico de Alergias",C/2,ne,20,"bold"),T.text("(BlancAlergic App)",C/2,ne+7,{align:"center"}),ne+=20,T.setDrawColor(37,99,235),T.setLineWidth(.5),T.line(D,ne,C-D,ne),ne+=15,U("Resumen del Paciente:",D,ne,14,"bold"),ne+=10,[`Paciente: ${t||"Blanca"}`,`Fecha: ${new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`,`Total de alergias: ${n.filter(Q=>Q.isAlergic).length}`,`Alergias severas: ${n.filter(Q=>Q.isAlergic&&Q.intensity==="Alta").length}`,`Generado: ${new Date().toLocaleString("es-ES")}`].forEach(Q=>{U(Q,D+5,ne,11),ne+=7}),ne+=15,se(30),U("Tabla de Alergias:",D,ne,14,"bold"),ne+=10;const Z=ne,Y=[60,40,25,25,25],pe=[D,D+Y[0],D+Y[0]+Y[1],D+Y[0]+Y[1]+Y[2],D+Y[0]+Y[1]+Y[2]+Y[3]];T.setFillColor(37,99,235),T.rect(D,Z-5,C-D*2,8,"F"),T.setTextColor(255,255,255),["Nombre","Categoria","Intensidad","KUA/Litro","Estado"].forEach((Q,he)=>{U(Q,pe[he],Z,10,"bold")}),T.setTextColor(0,0,0),ne+=10,n.filter(Q=>Q.isAlergic).forEach(Q=>{se(8),Q.intensity==="Alta"?T.setFillColor(254,226,226):Q.intensity==="Media"?T.setFillColor(255,243,205):T.setFillColor(212,237,218),T.rect(D,ne-2,C-D*2,6,"F");const he=Q.name.length>20?Q.name.substring(0,20)+"...":Q.name;U(he,pe[0],ne,9),U(Q.category,pe[1],ne,9),U(Q.intensity,pe[2],ne,9),U(Q.KUA_Litro?.toFixed(1)||"N/A",pe[3],ne,9),U("Alrgica",pe[4],ne,9),ne+=7}),ne=L-50,T.setDrawColor(200,200,200),T.line(D,ne,C-D,ne),ne+=10,U("Aviso Importante:",D,ne,11,"bold"),ne+=7,["Este documento es informativo y no sustituye el consejo medico profesional.","Generado por BlancAlergic App - "+new Date().toLocaleString("es-ES"),"Para mas informacion, consulte con un especialista en alergias."].forEach(Q=>{T.splitTextToSize(Q,C-D*2).forEach(ge=>{se(5),U(ge,D,ne,9),ne+=5})});const ee=`historial_medico_${new Date().toISOString().split("T")[0]}.pdf`;T.save(ee),et.info("PDF export completed successfully")}catch(T){et.error({error:T},"Error generating PDF with jsPDF"),et.info("Falling back to CSV export");const U=["Nombre","Categora","Intensidad","KUA/Litro","Es Alrgica"],C=n.map(oe=>[oe.name,oe.category,oe.intensity,oe.KUA_Litro?.toString()||"N/A",oe.isAlergic?"S":"No"]),L=[U.join(","),...C.map(oe=>oe.join(","))].join(`
`),D=new Blob([L],{type:"text/csv;charset=utf-8;"}),ne=document.createElement("a"),se=URL.createObjectURL(D);ne.setAttribute("href",se),ne.setAttribute("download",`historial_medico_${new Date().toISOString().split("T")[0]}.csv`),ne.style.visibility="hidden",document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),alert("La exportacin PDF fall. Se ha descargado un archivo CSV en su lugar.")}}},[n,t]),le=O.useCallback(()=>{et.info("Printing medical records");const E=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Historial Mdico - ${t||"Blanca"}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #2563eb; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f5f5f5; }
            .header { margin-bottom: 30px; }
            .footer { margin-top: 30px; font-size: 12px; color: #666; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>Historial Mdico de Alergias</h1>
            <p><strong>Paciente:</strong> ${t||"Blanca"}</p>
            <p><strong>Fecha:</strong> ${new Date().toLocaleDateString("es-ES")}</p>
            <p><strong>Total de alergias:</strong> ${n.filter(U=>U.isAlergic).length}</p>
          </div>

          <table>
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Categora</th>
                <th>Intensidad</th>
                <th>KUA/Litro</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody>
              ${n.map(U=>`
                <tr>
                  <td>${U.name}</td>
                  <td>${U.category}</td>
                  <td>${U.intensity}</td>
                  <td>${U.KUA_Litro||"N/A"}</td>
                  <td>${U.isAlergic?"Alrgica":"No alrgica"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="footer">
            <p>Generado por BlancAlergic App - ${new Date().toLocaleString("es-ES")}</p>
          </div>
        </body>
      </html>
    `,T=window.open("","_blank");T?(T.document.write(E),T.document.close(),T.focus(),T.print(),T.close(),et.info("Print completed successfully")):(et.error("Failed to open print window"),alert("No se pudo abrir la ventana de impresin. Verifica que tu navegador permita ventanas emergentes."))},[n,t]),q=sa.calculateAge(e);return d.jsxs(mo.div,{variants:jY,initial:"initial",animate:"animate",className:"container mx-auto px-4 py-6 space-y-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-foreground flex items-center gap-3",children:[d.jsx(Hf,{className:"h-8 w-8 text-primary"}),"Historial Mdico Completo"]}),d.jsxs("p",{className:"text-muted-foreground dark:text-gray-300 text-sm md:text-base mt-2",children:["Sistema integral de gestin mdica para ",t]})]}),d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[d.jsxs(Nn,{variant:"outline",size:"default",onClick:()=>J("pdf"),className:"w-full sm:w-auto h-12 px-3 sm:px-4 flex items-center justify-center gap-2 text-xs sm:text-sm font-medium","aria-label":"Exportar historial mdico completo como PDF",children:[d.jsx(hh,{className:"h-4 w-4 flex-shrink-0","aria-hidden":"true"}),d.jsx("span",{className:"hidden sm:inline font-medium",children:"Exportar PDF"}),d.jsx("span",{className:"sm:hidden font-medium",children:"PDF"})]}),d.jsxs(Nn,{variant:"outline",size:"default",onClick:le,className:"w-full sm:w-auto h-12 px-3 sm:px-4 flex items-center justify-center gap-2 text-xs sm:text-sm font-medium","aria-label":"Imprimir historial mdico completo",children:[d.jsx(yj,{className:"h-4 w-4 flex-shrink-0","aria-hidden":"true"}),d.jsx("span",{className:"hidden sm:inline font-medium",children:"Imprimir"}),d.jsx("span",{className:"sm:hidden font-medium",children:"Print"})]})]})]}),d.jsx("div",{className:"mt-8",children:d.jsxs(iC,{value:h,onValueChange:E=>p(E),className:"w-full",children:[d.jsxs(qx,{className:"grid w-full grid-cols-2 relative z-10 bg-background",children:[d.jsxs(oh,{value:"dashboard",className:"flex items-center gap-2 py-3",children:[d.jsx(O6,{className:"h-4 w-4"}),"Dashboard"]}),d.jsxs(oh,{value:"records",className:"flex items-center gap-2 py-3",children:[d.jsx(fh,{className:"h-4 w-4"}),"Registros"]})]}),d.jsx(ah,{value:"dashboard",className:"mt-12 relative",children:d.jsx(fC,{statistics:_,riskAssessment:I,patientName:t,patientAge:q,lastTestDate:_.lastTestDate})}),d.jsxs(ah,{value:"records",className:"mt-12 space-y-6 relative",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(Zc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400"}),d.jsx(fp,{placeholder:"Buscar alergias por nombre o categora...",value:r,onChange:E=>i(E.target.value),className:"pl-10"})]}),d.jsxs(Nn,{variant:"outline",onClick:()=>j(!v),className:"flex items-center gap-2",children:[d.jsx(J1,{className:"h-4 w-4"}),"Filtros",d.jsx(SE,{className:nn("h-4 w-4 transition-transform",v&&"rotate-180")})]})]}),d.jsx(Kv,{children:v&&d.jsx(mo.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"p-4 bg-muted/50 rounded-lg space-y-4",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Categora"}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsxs(Ir,{variant:s==="all"?"default":"outline",className:"cursor-pointer",onClick:()=>a("all"),children:["Todas (",z.length,")"]}),z.map(E=>d.jsx(Ir,{variant:s===E?"default":"outline",className:"cursor-pointer",onClick:()=>a(E),children:E},E))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Nivel de Riesgo"}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx(Ir,{variant:c==="all"?"default":"outline",className:"cursor-pointer",onClick:()=>u("all"),children:"Todos"}),d.jsx(Ir,{variant:c==="low"?"default":"outline",className:"cursor-pointer bg-green-100 text-green-800 hover:bg-green-200",onClick:()=>u("low"),children:"Bajo"}),d.jsx(Ir,{variant:c==="moderate"?"default":"outline",className:"cursor-pointer bg-yellow-100 text-yellow-800 hover:bg-yellow-200",onClick:()=>u("moderate"),children:"Moderado"}),d.jsx(Ir,{variant:c==="high"?"default":"outline",className:"cursor-pointer bg-red-100 text-red-800 hover:bg-red-200",onClick:()=>u("high"),children:"Alto"})]})]})]})})}),d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("p",{className:"text-sm text-muted-foreground dark:text-gray-300",children:["Mostrando ",V.length," de ",S.length," registros",V.length!==S.length&&" (filtrados)"]})}),d.jsx("div",{className:"grid grid-cols-1 gap-4",children:d.jsx(Kv,{children:V.map(E=>d.jsx(yC,{record:E,expanded:y.has(E.id),onToggleExpanded:()=>$(E.id)},E.id))})}),V.length===0&&d.jsxs("div",{className:"text-center py-12 text-muted-foreground dark:text-gray-400",children:[d.jsx(pp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),d.jsx("h3",{className:"text-lg font-medium mb-2",children:"No se encontraron registros"}),d.jsx("p",{className:"text-sm",children:"Intenta ajustar los filtros o trminos de bsqueda"})]})]})]})})]})};cI.displayName="MedicalHistory";const uI=async t=>{try{const e=da(di,"users",t),n=await x0(e);if(n.exists()){const r=n.data();return{id:n.id,displayName:r.displayName||"",email:r.email||"",phone:r.phone,birthDate:r.birthDate,emergencyContact:r.emergencyContact?.name||r.emergencyContact,emergencyPhone:r.emergencyContact?.phone||r.emergencyPhone,bloodType:r.bloodType,medicalNotes:r.medicalNotes,photoURL:r.photoURL,createdAt:r.createdAt,updatedAt:r.updatedAt}}return null}catch(e){throw et.error({error:e,userId:t},"Error getting user profile"),new Error("No se pudo cargar el perfil de usuario")}},dI=async(t,e)=>{try{const n=da(di,"users",t);await b0(n,{...e,updatedAt:new Date().toISOString(),lastSyncAt:new Date().toISOString()})}catch(n){throw et.error({error:n,userId:t},"Error updating user profile"),new Error("No se pudo actualizar el perfil de usuario")}},hI=async(t,e)=>{try{const n=wl(di,"users",t,"allergies"),r={...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return{id:(await Lx(n,r)).id,...r}}catch(n){throw et.error({error:n,userId:t},"Error adding user allergy"),new Error("No se pudo aadir la alergia")}},fI=async(t,e,n)=>{try{const r=da(di,"users",t,"allergies",e);await b0(r,{...n,updatedAt:new Date().toISOString()})}catch(r){throw et.error({error:r,userId:t,allergyId:e},"Error updating user allergy"),new Error("No se pudo actualizar la alergia")}},pI=async(t,e)=>{try{const n=da(di,"users",t,"allergies",e);await fk(n)}catch(n){throw et.error({error:n,userId:t,allergyId:e},"Error deleting user allergy"),new Error("No se pudo eliminar la alergia")}},Xx=async t=>{try{const e=wl(di,"users",t,"allergies"),n=ud(e,dd("name"));return(await hd(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){throw et.error({error:e,userId:t},"Error getting user allergies"),new Error("No se pudieron cargar las alergias")}},mI=async t=>{try{const e=wl(di,"users",t,"medicalRecords"),n=ud(e,dd("date","desc")),i=(await hd(n)).docs.map(a=>({id:a.id,...a.data()})),s=await Xx(t);return{records:i,allergies:s}}catch(e){throw et.error({error:e,userId:t},"Error getting medical history"),new Error("No se pudo cargar el historial mdico")}},gI=async(t,e)=>{try{const n=wl(di,"users",t,"medicalRecords"),r={...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return{id:(await Lx(n,r)).id,...r}}catch(n){throw et.error({error:n,userId:t},"Error adding medical record"),new Error("No se pudo aadir el registro mdico")}},yI=async(t,e,n)=>{try{const r=da(di,"users",t,"medicalRecords",e);await b0(r,{...n,updatedAt:new Date().toISOString()})}catch(r){throw et.error({error:r,userId:t,recordId:e},"Error updating medical record"),new Error("No se pudo actualizar el registro mdico")}},vI=async(t,e)=>{try{const n=da(di,"users",t,"medicalRecords",e);await fk(n)}catch(n){throw et.error({error:n,userId:t,recordId:e},"Error deleting medical record"),new Error("No se pudo eliminar el registro mdico")}},xI=async t=>{try{const e=da(di,"users",t),n=await x0(e);return n.exists()?n.data():null}catch(e){throw et.error({error:e,userId:t},"Error getting medical profile data"),new Error("No se pudo cargar el perfil mdico")}},LY=async(t,e)=>{try{const n=wl(di,"users",t,"allergies"),r={...e,lastUpdated:new Date().toISOString()},i=await Lx(n,r),s=da(di,"users",t);return await b0(s,{allergies:Qq(i.id),updatedAt:new Date().toISOString()}),i.id}catch(n){throw et.error({error:n,userId:t},"Error adding allergy"),new Error("No se pudo aadir la alergia")}},bI=async t=>{try{const e=wl(di,"users",t,"allergies"),n=ud(e,dd("name"));return(await hd(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){throw et.error({error:e,userId:t},"Error getting allergies"),new Error("No se pudieron cargar las alergias")}},wI=async t=>{try{const e=wl(di,"users",t,"medications"),n=ud(e,dd("name"));return(await hd(n)).docs.map(s=>({id:s.id,...s.data()})).filter(s=>s.active===!0)}catch(e){throw et.error({error:e,userId:t},"Error getting medications"),new Error("No se pudieron cargar los medicamentos")}},_I=async(t,e)=>{try{const n=wl(di,"users",t,"medicalVisits");let r=ud(n,dd("date","desc"));return(await hd(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){throw et.error({error:n,userId:t},"Error getting medical visits"),new Error("No se pudieron cargar las visitas mdicas")}},AI=async t=>{try{const e=wl(di,"users",t,"vaccinations"),n=ud(e,dd("administrationDate","desc"));return(await hd(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){throw et.error({error:e,userId:t},"Error getting vaccinations"),new Error("No se pudieron cargar las vacunas")}},NI=async t=>{try{const e=wl(di,"users",t,"labResults"),n=ud(e,dd("resultDate","desc"));return(await hd(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){throw et.error({error:e,userId:t},"Error getting lab results"),new Error("No se pudieron cargar los resultados de laboratorio")}},DY=Object.freeze(Object.defineProperty({__proto__:null,addAllergy:LY,addMedicalRecord:gI,addUserAllergy:hI,deleteMedicalRecord:vI,deleteUserAllergy:pI,getAllergies:bI,getLabResults:NI,getMedicalHistory:mI,getMedicalProfileData:xI,getMedicalVisits:_I,getMedications:wI,getUserAllergies:Xx,getUserProfile:uI,getVaccinations:AI,updateMedicalRecord:yI,updateUserAllergy:fI,updateUserProfile:dI},Symbol.toStringTag,{value:"Module"})),MY=({className:t})=>{const{user:e}=cu(),n=ua(),[r,i]=mR(),s=r.get("tab")||"history",a=_=>{i({tab:_})},[c,u]=O.useState({profile:null,allergies:[],medications:[],visits:[],vaccinations:[],labResults:[]}),[h,p]=O.useState(!0);O.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(e)try{p(!0);const[_,I,V,z,$,J]=await Promise.all([xI(e.uid),bI(e.uid),wI(e.uid),_I(e.uid),AI(e.uid),NI(e.uid)]);u({profile:_,allergies:I,medications:V,visits:z,vaccinations:$,labResults:J})}catch(_){et.error({error:_},"Error cargando datos mdicos")}finally{p(!1)}},w=async()=>{if(!(!e||!c.profile))try{const _=ol.filter(I=>I.isAlergic);if(c.allergies.length===0){const{addAllergy:I}=await sg(async()=>{const{addAllergy:V}=await Promise.resolve().then(()=>DY);return{addAllergy:V}},void 0);for(const V of _)await I(e.uid,{name:V.name,intensity:V.intensity,category:V.category,KUA_Litro:V.KUA_Litro,isAlergic:!0,symptoms:[],reactions:["Reaccin alrgica estndar"],notes:`Alergia migrada desde perfil pblico - KUA/Litro: ${V.KUA_Litro}`,diagnosedDate:new Date().toISOString().split("T")[0]});await y(),alert("Se han migrado tus alergias pblicas a tu perfil mdico privado.")}else alert("Ya tienes alergias registradas en tu perfil mdico.")}catch(_){et.error({error:_},"Error migrando alergias"),alert("Error al migrar alergias. Por favor, intenta de nuevo.")}},v=[{id:"perfil",title:"Mi Perfil Mdico",description:"Informacin personal y datos de contacto",icon:fh,path:"/perfil-medico",color:"text-primary",bgColor:"bg-muted"},{id:"alergias",title:"Mis Alergias",description:"Gestiona tus alergias y reacciones",icon:pp,path:"/mis-alergias",color:"text-destructive",bgColor:"bg-destructive/10"},{id:"medicamentos",title:"Medicamentos",description:"Control de medicamentos actuales",icon:Hf,path:"/medicamentos",color:"text-primary",bgColor:"bg-muted"},{id:"visitas",title:"Historial de Visitas",description:"Registro de consultas mdicas",icon:X1,path:"/visitas-medicas",color:"text-foreground",bgColor:"bg-accent"},{id:"vacunas",title:"Vacunacin",description:"Historial de vacunas recibidas",icon:Tj,path:"/vacunas",color:"text-foreground",bgColor:"bg-accent"},{id:"laboratorio",title:"Resultados de Laboratorio",description:"Anlisis y pruebas mdicas",icon:CE,path:"/resultados-laboratorio",color:"text-foreground",bgColor:"bg-accent"},{id:"informes",title:"Informes Mdicos",description:"Sube y gestiona informes y documentos",icon:tj,path:"/informes-medicos",color:"text-muted-foreground",bgColor:"bg-muted"}],j=_=>{n(_)},S={totalAllergies:c.allergies.length,activeMedications:c.medications.filter(_=>_.active).length,recentVisits:c.visits.filter(_=>{const I=new Date(_.date),V=new Date;return V.setDate(V.getDate()-30),I>=V}).length,upcomingVaccines:c.vaccinations.filter(_=>_.nextDoseDate?new Date(_.nextDoseDate)>=new Date:!1).length};return h?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx(id,{className:"h-12 w-12 text-primary mx-auto mb-4 animate-pulse"}),d.jsx("p",{className:"text-muted-foreground",children:"Cargando tu historial mdico..."})]})}):d.jsxs("div",{className:`container mx-auto px-4 py-8 space-y-6 ${t}`,children:[c.profile&&c.allergies.length===0&&d.jsx(En,{className:"border-border bg-muted",children:d.jsx(Ln,{className:"p-4",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"flex items-start sm:items-center space-x-3",children:[d.jsx(Ms,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5 sm:mt-0"}),d.jsx("span",{className:"text-foreground text-sm",children:"Parece que no tienes alergias registradas. Quieres migrar tus alergias pblicas a tu perfil mdico privado?"})]}),d.jsxs(Nn,{size:"sm",variant:"outline",onClick:w,className:"w-full sm:w-auto min-h-[44px] px-4",children:[d.jsx(hh,{className:"h-4 w-4 mr-2"}),"Migrar Alergias"]})]})})}),d.jsxs(iC,{value:s,onValueChange:_=>a(_),className:"w-full",children:[d.jsxs(qx,{className:"grid w-full grid-cols-3 h-16 p-1",children:[d.jsxs(oh,{value:"history",className:"flex flex-col items-center justify-center gap-1 p-2 min-h-[44px] min-w-[44px]","aria-label":"Ver historial mdico",children:[d.jsx(Hf,{className:"h-4 w-4"}),d.jsx("span",{className:"text-xs font-medium",children:"Historial"})]}),d.jsxs(oh,{value:"sections",className:"flex flex-col items-center justify-center gap-1 p-2 min-h-[44px] min-w-[44px]","aria-label":"Ver secciones mdicas",children:[d.jsx(kE,{className:"h-4 w-4"}),d.jsx("span",{className:"text-xs font-medium",children:"Secciones"})]}),d.jsxs(oh,{value:"emergency",className:"flex flex-col items-center justify-center gap-1 p-2 min-h-[44px] min-w-[44px]","aria-label":"Ver informacin de emergencia",children:[d.jsx(tc,{className:"h-4 w-4"}),d.jsx("span",{className:"text-xs font-medium",children:"Emergencia"})]})]}),d.jsx(ah,{value:"history",className:"mt-6",children:d.jsx(cI,{patientName:c.profile?.displayName||e?.displayName||"Usuario",patientBirthDate:c.profile?.birthDate?new Date(c.profile.birthDate):new Date("2010-05-15")})}),d.jsx(ah,{value:"sections",className:"mt-6",children:d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4 sm:gap-6",children:[d.jsxs(En,{children:[d.jsxs(ai,{children:[d.jsxs(Qr,{className:"flex items-center gap-2 text-primary",children:[d.jsx(Z1,{className:"h-5 w-5"}),"Funciones Pblicas"]}),d.jsx(fo,{children:"Acceso a la informacin general de alergias"})]}),d.jsx(Ln,{className:"space-y-4",children:[{id:"buscar",title:"Buscar Alergias",description:"Busca informacin detallada sobre alergias especficas",icon:Zc,path:"/buscarAlergias",color:"text-primary",bgColor:"bg-muted"},{id:"emergencias",title:"Protocolo de Emergencia",description:"Pasos a seguir en caso de reaccin alrgica",icon:Ms,path:"/emergencias",color:"text-destructive",bgColor:"bg-destructive/10"},{id:"tabla",title:"Tabla de Alergias",description:"Vista completa de todas las alergias y sus niveles",icon:e2,path:"/tablaAlergias",color:"text-foreground",bgColor:"bg-accent"}].map(_=>d.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-all ${_.bgColor} hover:shadow-md min-h-[44px] flex items-center`,onClick:()=>j(_.path),role:"button",tabIndex:0,"aria-label":`Ir a ${_.title}`,onKeyDown:I=>{(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),j(_.path))},children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`p-3 rounded-lg ${_.bgColor}`,children:d.jsx(_.icon,{className:`h-6 w-6 ${_.color}`})}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-sm sm:text-base",children:_.title}),d.jsx("div",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:_.description})]})]}),d.jsx(Iw,{className:`h-5 w-5 ${_.color} flex-shrink-0`})]})},_.id))})]}),d.jsxs(En,{children:[d.jsxs(ai,{children:[d.jsxs(Qr,{className:"flex items-center gap-2 text-primary",children:[d.jsx(fh,{className:"h-5 w-5"}),"Mi Perfil Mdico Privado"]}),d.jsx(fo,{children:"Gestin de tu historial mdico personal"})]}),d.jsx(Ln,{className:"space-y-3",children:v.map(_=>{const I=_.id==="alergias"?S.totalAllergies:_.id==="medicamentos"?S.activeMedications:_.id==="visitas"?S.recentVisits:_.id==="vacunas"?S.upcomingVaccines:0;return d.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border cursor-pointer transition-all ${_.bgColor} hover:shadow-md min-h-[44px]`,onClick:()=>j(_.path),role:"button",tabIndex:0,"aria-label":`Ir a ${_.title}`,onKeyDown:V=>{(V.key==="Enter"||V.key===" ")&&(V.preventDefault(),j(_.path))},children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:`p-2 rounded-lg ${_.bgColor}`,children:d.jsx(_.icon,{className:`h-5 w-5 ${_.color}`})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-medium",children:_.title}),d.jsx("div",{className:"text-sm text-muted-foreground",children:_.description})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[I>0&&d.jsx(Ir,{variant:"secondary",className:"text-xs",children:I}),d.jsx(Iw,{className:`h-5 w-5 ${_.color}`})]})]},_.id)})})]})]})}),d.jsx(ah,{value:"emergency",className:"mt-6",children:d.jsxs(En,{className:"border-destructive bg-destructive/5",children:[d.jsx(ai,{children:d.jsxs(Qr,{className:"text-destructive flex items-center gap-2",children:[d.jsx(tc,{className:"h-5 w-5"}),"Informacin de Emergencia"]})}),d.jsx(Ln,{children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-destructive mb-2",children:"Contacto de Emergencia:"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{children:[" ",c.profile?.emergencyContact?.name||"No configurado"]}),d.jsxs("div",{children:[" ",c.profile?.emergencyContact?.phone||"No configurado"]}),d.jsxs("div",{children:[" ",c.profile?.bloodType||"Tipo de sangre no registrado"]})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-destructive mb-2",children:"Acciones en Emergencia:"}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsx("div",{children:"1. Administrar EpiPen si disponible"}),d.jsx("div",{children:"2. Llamar emergencias (112)"}),d.jsx("div",{children:"3. Contactar al alerglogo"})]})]})]})})]})})]})]})},EI=t=>{const[e,n]=O.useState(null),[r,i]=O.useState([]),[s,a]=O.useState(!0),[c,u]=O.useState(null),[h,p]=O.useState("synced"),y=O.useCallback(async()=>{if(!t){a(!1);return}try{a(!0),p("syncing"),u(null);const[I,V]=await Promise.all([uI(t),Xx(t)]);n(I),i(V),p("synced")}catch(I){const V=I instanceof Error?I.message:"Error al cargar perfil";u(V),p("error"),et.error({error:I,userId:t},"Error fetching medical profile")}finally{a(!1)}},[t]),w=O.useCallback(async I=>{if(!t){u("Usuario no autenticado");return}try{p("syncing"),u(null),await dI(t,I),n(V=>V?{...V,...I,updatedAt:new Date().toISOString()}:null),p("synced")}catch(V){const z=V instanceof Error?V.message:"Error al actualizar perfil";throw u(z),p("error"),V}},[t]),v=O.useCallback(async I=>{if(!t)throw new Error("Usuario no autenticado");try{if(p("syncing"),u(null),!I.type.startsWith("image/"))throw new Error("El archivo debe ser una imagen");if(I.size>5*1024*1024)throw new Error("La imagen no debe superar los 5MB");const V=P1(R1,`profile-photos/${t}/${Date.now()}-${I.name}`),z=await Ik(V,I),$=await Pk(z.ref);return await w({photoURL:$}),p("synced"),$}catch(V){const z=V instanceof Error?V.message:"Error al subir foto";throw u(z),p("error"),V}},[t,w]),j=O.useCallback(async I=>{if(!t){u("Usuario no autenticado");return}try{p("syncing"),u(null);const V=await hI(t,I);i(z=>[...z,V]),p("synced")}catch(V){const z=V instanceof Error?V.message:"Error al agregar alergia";throw u(z),p("error"),V}},[t]),S=O.useCallback(async(I,V)=>{if(!t){u("Usuario no autenticado");return}try{p("syncing"),u(null),await fI(t,I,V),i(z=>z.map($=>$.id===I?{...$,...V,updatedAt:new Date().toISOString()}:$)),p("synced")}catch(z){const $=z instanceof Error?z.message:"Error al actualizar alergia";throw u($),p("error"),z}},[t]),_=O.useCallback(async I=>{if(!t){u("Usuario no autenticado");return}try{p("syncing"),u(null),await pI(t,I),i(V=>V.filter(z=>z.id!==I)),p("synced")}catch(V){const z=V instanceof Error?V.message:"Error al eliminar alergia";throw u(z),p("error"),V}},[t]);return O.useEffect(()=>{y()},[y]),O.useEffect(()=>{const I=()=>p("synced"),V=()=>p("offline");return window.addEventListener("online",I),window.addEventListener("offline",V),()=>{window.removeEventListener("online",I),window.removeEventListener("offline",V)}},[]),{profile:e,allergies:r,loading:s,error:c,syncStatus:h,updateProfile:w,uploadProfilePhoto:v,addAllergy:j,updateAllergy:S,deleteAllergy:_,refreshProfile:y}},Sf=O.forwardRef(({className:t,...e},n)=>d.jsx("label",{ref:n,className:nn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));Sf.displayName="Label";const SI=O.forwardRef(({className:t,...e},n)=>d.jsx("textarea",{className:nn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));SI.displayName="Textarea";const TI=O.forwardRef(({className:t,src:e,alt:n,children:r,...i},s)=>d.jsxs("div",{ref:s,className:nn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...i,children:[e&&d.jsx("img",{src:e,alt:n,className:"aspect-square h-full w-full object-cover"}),!e&&r&&d.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-full bg-gray-200 text-gray-600",children:r})]}));TI.displayName="Avatar";const kI=js.memo(({onSave:t,mode:e="full",showBackButton:n=!1,backButtonTo:r="/historial-medico",customTitle:i,showAccountInfo:s=!0,compact:a=!1})=>{const{user:c}=cu(),u=ua(),{profile:h,loading:p,error:y,syncStatus:w,updateProfile:v,uploadProfilePhoto:j}=EI(c?.uid),[S,_]=O.useState({displayName:h?.displayName||"",email:h?.email||c?.email||"",phone:h?.phone||"",birthDate:h?.birthDate||"",emergencyContact:h?.emergencyContact||"",emergencyPhone:h?.emergencyPhone||"",bloodType:h?.bloodType||"",medicalNotes:h?.medicalNotes||""}),[I,V]=O.useState(!1),[z,$]=O.useState(!1),J=O.useRef(null),le=Z=>{const{name:Y,value:pe}=Z.target;_(we=>({...we,[Y]:pe}))},q=async()=>{try{await v(S),V(!1),t?.()}catch(Z){et.error({msg:"Error saving profile",error:Z})}},E=async Z=>{const Y=Z.target.files?.[0];if(Y)try{$(!0),await j(Y)}catch(pe){et.error({msg:"Error uploading photo",error:pe})}finally{$(!1)}},T=()=>{switch(w){case"synced":return"bg-green-500";case"syncing":return"bg-yellow-500";case"error":return"bg-red-500";case"offline":return"bg-gray-500";default:return"bg-gray-500"}},U=()=>{switch(w){case"synced":return"Sincronizado";case"syncing":return"Sincronizando...";case"error":return"Error de sincronizacin";case"offline":return"Sin conexin";default:return"Desconocido"}},C=()=>{const Z=i||"Mi Perfil Mdico";return e==="simple"||n?d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[n&&d.jsx("button",{onClick:()=>u(r),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Volver",children:d.jsx(R6,{className:"w-5 h-5 text-gray-600"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:Z})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:`w-3 h-3 rounded-full ${T()}`}),d.jsx("span",{className:"text-sm text-muted-foreground",children:U()})]})]}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-2xl font-bold",children:Z}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:`w-3 h-3 rounded-full ${T()}`}),d.jsx("span",{className:"text-sm text-gray-600",children:U()})]})]})},L=()=>{const Z=e==="simple"?"bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded mb-4":"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded";return d.jsx("div",{className:Z,children:y})},D=()=>{const Z=h?.photoURL||c?.photoURL||"",Y=h?.displayName?.charAt(0)||c?.displayName?.charAt(0)||"U";return e==="simple"?d.jsx("div",{className:"bg-card rounded-lg shadow-md border border-border mb-6",children:d.jsxs("div",{className:"p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Foto de Perfil"}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center overflow-hidden",children:Z?d.jsx("img",{src:Z,alt:"Profile",className:"w-full h-full object-cover"}):d.jsx("span",{className:"text-muted-foreground text-xl",children:Y})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("input",{ref:J,type:"file",accept:"image/*",onChange:E,className:"hidden"}),d.jsx("button",{onClick:()=>J.current?.click(),disabled:z,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:z?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),d.jsx("span",{children:"Subiendo..."})]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Cambiar Foto"})]})}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Formatos: JPG, PNG. Tamao mximo: ",Lw.MAX_SIZE_MB,"MB"]})]})]})]})}):d.jsxs(En,{children:[d.jsx(ai,{children:d.jsxs(Qr,{className:"flex items-center space-x-2",children:[d.jsx(D6,{className:"w-5 h-5"}),d.jsx("span",{children:"Foto de Perfil"})]})}),d.jsx(Ln,{children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx(TI,{className:"w-20 h-20",src:Z,children:Y}),d.jsxs("div",{className:"flex-1",children:[d.jsx("input",{ref:J,type:"file",accept:"image/*",onChange:E,className:"hidden"}),d.jsx(Nn,{variant:"outline",onClick:()=>J.current?.click(),disabled:z,className:"flex items-center space-x-2",children:z?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),d.jsx("span",{children:"Subiendo..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(Mj,{className:"w-4 h-4"}),d.jsx("span",{children:"Cambiar Foto"})]})}),d.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Formatos: JPG, PNG. Tamao mximo: ",Lw.MAX_SIZE_MB,"MB"]})]})]})})]})},ne=(Z,Y,pe,we)=>e==="simple"?d.jsx("div",{className:"bg-card rounded-lg shadow-md border border-border mb-6",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:Z}),Z==="Informacin Personal"&&d.jsx("button",{onClick:()=>I?q():V(!0),className:`px-4 py-2 rounded ${I?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:I?" Guardar":" Editar"})]}),pe]})}):d.jsxs(En,{children:[d.jsx(ai,{children:Z==="Informacin Personal"?d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs(Qr,{className:"flex items-center space-x-2",children:[Y,d.jsx("span",{children:Z})]}),d.jsx(Nn,{variant:I?"default":"outline",size:"sm",onClick:()=>I?q():V(!0),children:I?d.jsxs(d.Fragment,{children:[d.jsx(bj,{className:"w-4 h-4 mr-2"}),"Guardar"]}):"Editar"})]}):d.jsxs(d.Fragment,{children:[d.jsxs(Qr,{className:"flex items-center space-x-2",children:[Y,d.jsx("span",{children:Z})]}),we&&d.jsx(fo,{children:we})]})}),d.jsx(Ln,{className:"space-y-4",children:pe})]}),se=(Z,Y,pe="text",we)=>{const ae=S[Z],F=!I||Z==="email";if(e==="simple")return d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:we?d.jsxs(d.Fragment,{children:[we," ",Y]}):Y}),d.jsx("input",{id:Z,name:Z,type:pe,value:ae,onChange:le,disabled:F,className:"w-full p-2 border border-input rounded-md focus:ring-2 focus:ring-primary focus:border-primary disabled:bg-muted disabled:cursor-not-allowed",placeholder:Z==="email"?"tu@email.com":Z==="phone"||Z==="emergencyPhone"?"+34 600 000 000":""})]});const ee=we?d.jsxs(Sf,{htmlFor:Z,className:"flex items-center space-x-1",children:[we,d.jsx("span",{children:Y})]}):d.jsx(Sf,{htmlFor:Z,children:Y});return d.jsxs("div",{children:[ee,d.jsx(fp,{id:Z,name:Z,type:pe,value:ae,onChange:le,disabled:F,placeholder:Z==="email"?"tu@email.com":Z==="phone"||Z==="emergencyPhone"?"+34 600 000 000":""})]})};if(p)return d.jsx("div",{className:"flex items-center justify-center p-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});const oe=e==="simple"?"container max-w-4xl mx-auto p-4":`max-w-4xl mx-auto ${a?"p-4":"p-6"} space-y-6`;return d.jsxs("div",{className:oe,children:[C(),y&&L(),D(),ne("Informacin Personal",d.jsx(fh,{className:"w-5 h-5"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[se("displayName","Nombre Completo"),se("email","Correo Electrnico","email"),se("phone","Telfono","tel",d.jsx(tc,{className:"w-4 h-4"})),se("birthDate","Fecha de Nacimiento","date",d.jsx(X1,{className:"w-4 h-4"}))]}),"Informacin bsica y datos de contacto"),ne("Contacto de Emergencia",null,d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[se("emergencyContact","Nombre del Contacto"),se("emergencyPhone","Telfono de Emergencia","tel")]}),"Persona a contactar en caso de emergencia mdica"),ne("Informacin Mdica",null,d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(Sf,{htmlFor:"bloodType",children:"Tipo de Sangre"}),d.jsxs("select",{id:"bloodType",name:"bloodType",value:S.bloodType,onChange:le,disabled:!I,className:e==="simple"?"w-full p-2 border border-input rounded-md focus:ring-2 focus:ring-primary focus:border-primary disabled:bg-muted disabled:cursor-not-allowed":"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"",children:"Seleccionar tipo de sangre"}),Kj.map(Z=>d.jsx("option",{value:Z,children:Z},Z))]})]}),d.jsxs("div",{children:[d.jsx(Sf,{htmlFor:"medicalNotes",children:"Notas Mdicas"}),d.jsx(SI,{id:"medicalNotes",name:"medicalNotes",value:S.medicalNotes,onChange:le,disabled:!I,placeholder:"Informacin mdica relevante, medicamentos habituales, condiciones crnicas, etc.",rows:4})]})]}),"Datos mdicos importantes y notas adicionales"),s&&ne("Informacin de la Cuenta",null,d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"Proveedor:"}),d.jsx(Ir,{variant:"secondary",children:"Google"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"ID de Usuario:"}),d.jsxs("span",{className:"text-sm font-mono",children:[c?.uid?.substring(0,8),"..."]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-gray-600",children:"ltima actualizacin:"}),d.jsx("span",{className:"text-sm",children:h?.updatedAt?new Date(h.updatedAt).toLocaleDateString():"No disponible"})]})]}))]})});kI.displayName="ProfileEditComponent";const OY=()=>{const{user:t}=cu(),e=ua(),{allergies:n,loading:r,error:i,syncStatus:s,addAllergy:a,updateAllergy:c,deleteAllergy:u}=EI(t?.uid),[h,p]=O.useState(!1),[y,w]=O.useState(null),[v,j]=O.useState(""),[S,_]=O.useState("todas"),[I,V]=O.useState("todas"),[z,$]=O.useState({name:"",category:"Frutos secos",intensity:"Media",symptoms:"",notes:"",KUA_Litro:void 0}),J=["todas","Crustceos","Mariscos","Pescados","Frutas","Vegetales","Frutos secos","rboles","Hongos","Animales","Otros"],le=["todas","Baja","Media","Alta"];O.useEffect(()=>{y?($({name:y.name,category:y.category,intensity:y.intensity,symptoms:Array.isArray(y.symptoms)?y.symptoms.join(", "):y.symptoms,notes:y.notes,KUA_Litro:y.KUA_Litro}),p(!0)):q()},[y]);const q=()=>{$({name:"",category:"Frutos secos",intensity:"Media",symptoms:"",notes:"",KUA_Litro:void 0})},E=Z=>{const{name:Y,value:pe}=Z.target;$(we=>({...we,[Y]:pe}))},T=async Z=>{Z.preventDefault();try{const Y={...z,symptoms:z.symptoms.split(",").map(pe=>pe.trim()).filter(pe=>pe.length>0),isAlergic:!0,reactions:[],diagnosedDate:new Date().toISOString(),lastUpdated:new Date().toISOString()};y?(await c(y.id,Y),w(null)):await a(Y),p(!1),q()}catch(Y){et.error({error:Y,userId:t?.uid,operation:y?"update":"create"},"Error saving allergy")}},U=Z=>{w(Z)},C=async Z=>{if(window.confirm("Ests seguro de que quieres eliminar esta alergia?"))try{await u(Z)}catch(Y){et.error({error:Y,userId:t?.uid,allergyId:Z},"Error deleting allergy")}},L=()=>{p(!1),w(null),q()},D=n.filter(Z=>{const Y=Array.isArray(Z.symptoms)?Z.symptoms.join(", "):Z.symptoms,pe=Z.name.toLowerCase().includes(v.toLowerCase())||Y.toLowerCase().includes(v.toLowerCase()),we=S==="todas"||Z.category===S,ae=I==="todas"||Z.intensity===I;return pe&&we&&ae}),ne=Z=>{switch(Z){case"Alta":return"bg-red-100 text-red-800 border-red-200";case"Media":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Baja":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},se=()=>{switch(s){case"synced":return"bg-green-500";case"syncing":return"bg-yellow-500";case"error":return"bg-red-500";case"offline":return"bg-gray-500";default:return"bg-gray-500"}},oe=()=>{switch(s){case"synced":return"Sincronizado";case"syncing":return"Sincronizando...";case"error":return"Error";case"offline":return"Sin conexin";default:return"Desconocido"}};return r?d.jsx("div",{className:"flex items-center justify-center p-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):d.jsxs("div",{className:"container max-w-6xl mx-auto p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:()=>e("/historial-medico"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Volver al men mdico",children:d.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestin de Alergias"}),d.jsx("p",{className:"text-gray-600",children:"Administra tus alergias y reacciones alrgicas"})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:`w-3 h-3 rounded-full ${se()}`}),d.jsx("span",{className:"text-sm text-gray-600",children:oe()})]})]}),i&&d.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:i}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Buscar"}),d.jsx("input",{type:"text",value:v,onChange:Z=>j(Z.target.value),placeholder:"Buscar alergia o sntoma...",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),d.jsx("select",{value:S,onChange:Z=>_(Z.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:J.map(Z=>d.jsx("option",{value:Z,children:Z==="todas"?"Todas las categoras":Z},Z))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intensidad"}),d.jsx("select",{value:I,onChange:Z=>V(Z.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:le.map(Z=>d.jsx("option",{value:Z,children:Z==="todas"?"Todas las intensidades":Z},Z))})]}),d.jsx("div",{className:"flex items-end",children:d.jsxs("button",{onClick:()=>p(!0),className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center justify-center space-x-2",children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Agregar Alergia"})]})})]})}),h&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:y?" Editar Alergia":" Agregar Nueva Alergia"}),d.jsxs("form",{onSubmit:T,children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Alergia *"}),d.jsx("input",{name:"name",type:"text",value:z.name,onChange:E,required:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Man, Ltex, Polen..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora *"}),d.jsx("select",{name:"category",value:z.category,onChange:E,required:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:J.filter(Z=>Z!=="todas").map(Z=>d.jsx("option",{value:Z,children:Z},Z))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intensidad *"}),d.jsxs("select",{name:"intensity",value:z.intensity,onChange:E,required:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"Baja",children:"Baja"}),d.jsx("option",{value:"Media",children:"Media"}),d.jsx("option",{value:"Alta",children:"Alta"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"KUA/Litro (opcional)"}),d.jsx("input",{name:"KUA_Litro",type:"number",step:"0.01",value:z.KUA_Litro||"",onChange:E,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sntomas *"}),d.jsx("textarea",{name:"symptoms",value:z.symptoms,onChange:E,required:!0,rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe los sntomas que experimentas..."})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas Adicionales"}),d.jsx("textarea",{name:"notes",value:z.notes,onChange:E,rows:2,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Informacin adicional, medicamentos para emergencia, etc..."})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center space-x-2",children:[d.jsx("span",{children:y?"":""}),d.jsx("span",{children:y?"Actualizar":"Agregar"})]}),d.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancelar"})]})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Mis Alergias (",D.length,")"]}),D.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx("div",{className:"text-4xl mb-2",children:""}),d.jsx("p",{children:"No se encontraron alergias"}),d.jsx("p",{className:"text-sm",children:v||S!=="todas"||I!=="todas"?"Intenta ajustar los filtros de bsqueda":"Agrega tu primera alergia usando el botn de arriba"})]}):d.jsx("div",{className:"space-y-4",children:D.map(Z=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx("h4",{className:"font-semibold text-lg",children:Z.name}),d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${ne(Z.intensity)}`,children:Z.intensity}),d.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:Z.category})]}),d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sntomas: "}),d.jsx("span",{className:"text-sm text-gray-600",children:Array.isArray(Z.symptoms)?Z.symptoms.join(", "):Z.symptoms})]}),Z.KUA_Litro&&d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"KUA/Litro: "}),d.jsx("span",{className:"text-sm text-gray-600",children:Z.KUA_Litro})]}),Z.notes&&d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Notas: "}),d.jsx("span",{className:"text-sm text-gray-600",children:Z.notes})]}),d.jsxs("div",{className:"text-xs text-gray-500",children:["ltima actualizacin: ",new Date(Z.updatedAt||Z.lastUpdated).toLocaleDateString()]})]}),d.jsxs("div",{className:"flex space-x-2 ml-4",children:[d.jsx("button",{onClick:()=>U(Z),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:""}),d.jsx("button",{onClick:()=>C(Z.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:""})]})]})},Z.id))})]})})]})},FY=()=>{const t=ua(),[e,n]=O.useState([]),[r,i]=O.useState(!1),[s,a]=O.useState(null),[c,u]=O.useState(""),[h,p]=O.useState("todos"),[y]=O.useState(!1),[w,v]=O.useState({name:"",dosage:"",frequency:"",route:"oral",startDate:new Date().toISOString().split("T")[0],endDate:"",prescribedBy:"",reason:"",active:!0,sideEffects:"",notes:"",reminderTimes:""}),j=[{value:"oral",label:"Oral"},{value:"intravenosa",label:"Intravenosa"},{value:"intramuscular",label:"Intramuscular"},{value:"tpica",label:"Tpica"},{value:"inhalada",label:"Inhalada"}],S=["Una vez al da","Dos veces al da","Tres veces al da","Cuatro veces al da","Cada 8 horas","Cada 12 horas","Cada 24 horas","Segn necesidad","Otro"],_=[{value:"todos",label:"Todos los medicamentos"},{value:"activos",label:"Medicamentos activos"},{value:"inactivos",label:"Medicamentos inactivos"}],I=()=>{v({name:"",dosage:"",frequency:"",route:"oral",startDate:new Date().toISOString().split("T")[0],endDate:"",prescribedBy:"",reason:"",active:!0,sideEffects:"",notes:"",reminderTimes:""})},V=C=>{const{name:L,value:D,type:ne}=C.target;v(ne==="checkbox"?se=>({...se,[L]:C.target.checked}):se=>({...se,[L]:D}))},z=()=>{a(null),I(),i(!0)},$=C=>{a(C),v({name:C.name,dosage:C.dosage,frequency:C.frequency,route:C.route,startDate:C.startDate,endDate:C.endDate||"",prescribedBy:C.prescribedBy,reason:C.reason,active:C.active,sideEffects:C.sideEffects.join(", "),notes:C.notes,reminderTimes:C.reminderTimes.join(", ")}),i(!0)},J=()=>{et.debug("Saving medication");const C={id:s?.id||Date.now().toString(),...w,sideEffects:w.sideEffects.split(",").map(L=>L.trim()).filter(L=>L),reminderTimes:w.reminderTimes.split(",").map(L=>L.trim()).filter(L=>L)};n(s?L=>L.map(D=>D.id===s.id?C:D):L=>[...L,C]),i(!1),I()},le=C=>{window.confirm("Ests seguro de que quieres eliminar este medicamento?")&&n(L=>L.filter(D=>D.id!==C))},q=C=>{n(L=>L.map(D=>D.id===C?{...D,active:!D.active}:D))},E=e.filter(C=>{const L=C.name.toLowerCase().includes(c.toLowerCase())||C.reason.toLowerCase().includes(c.toLowerCase()),D=h==="todos"||h==="activos"&&C.active||h==="inactivos"&&!C.active;return L&&D}),T=C=>C?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",U=C=>C?"Activo":"Inactivo";return y?d.jsx("div",{className:"flex items-center justify-center p-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):d.jsxs("div",{className:"container max-w-6xl mx-auto p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:()=>t("/historial-medico"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Volver al men mdico",children:d.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestin de Medicamentos"}),d.jsx("p",{className:"text-gray-600",children:"Controla tus medicamentos y tratamientos"})]})]}),d.jsxs("button",{onClick:z,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Aadir Medicamento"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Buscar medicamento"}),d.jsx("input",{type:"text",value:c,onChange:C=>u(C.target.value),placeholder:"Nombre o razn del medicamento",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Estado"}),d.jsx("select",{value:h,onChange:C=>p(C.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:_.map(C=>d.jsx("option",{value:C.value,children:C.label},C.value))})]}),d.jsx("div",{className:"flex items-end",children:d.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",E.length," medicamentos",d.jsx("br",{}),"Activos: ",E.filter(C=>C.active).length]})})]})}),r&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:s?"Editar Medicamento":"Aadir Nuevo Medicamento"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Medicamento *"}),d.jsx("input",{type:"text",name:"name",value:w.name,onChange:V,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Ibuprofeno",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosis *"}),d.jsx("input",{type:"text",name:"dosage",value:w.dosage,onChange:V,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 400mg",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frecuencia *"}),d.jsxs("select",{name:"frequency",value:w.frequency,onChange:V,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Seleccionar frecuencia"}),S.map(C=>d.jsx("option",{value:C,children:C},C))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Va de Administracin *"}),d.jsx("select",{name:"route",value:w.route,onChange:V,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:j.map(C=>d.jsx("option",{value:C.value,children:C.label},C.value))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Inicio *"}),d.jsx("input",{type:"date",name:"startDate",value:w.startDate,onChange:V,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Fin"}),d.jsx("input",{type:"date",name:"endDate",value:w.endDate,onChange:V,min:w.startDate,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prescrito por *"}),d.jsx("input",{type:"text",name:"prescribedBy",value:w.prescribedBy,onChange:V,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del mdico",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razn del tratamiento *"}),d.jsx("input",{type:"text",name:"reason",value:w.reason,onChange:V,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Dolor de cabeza",required:!0})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Efectos Secundarios"}),d.jsx("input",{type:"text",name:"sideEffects",value:w.sideEffects,onChange:V,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Separados por comas (ej: nuseas, mareos)"})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Horarios de Recordatorio"}),d.jsx("input",{type:"text",name:"reminderTimes",value:w.reminderTimes,onChange:V,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Separados por comas (ej: 08:00, 20:00)"})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),d.jsx("textarea",{name:"notes",value:w.notes,onChange:V,rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Instrucciones adicionales, precauciones, etc."})]}),d.jsx("div",{className:"md:col-span-2",children:d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",name:"active",checked:w.active,onChange:V,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d.jsx("span",{className:"text-sm text-gray-700",children:"Medicamento activo actualmente"})]})})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx("button",{onClick:()=>{i(!1),I()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancelar"}),d.jsx("button",{onClick:J,disabled:!w.name||!w.dosage||!w.frequency||!w.prescribedBy||!w.reason,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:s?"Actualizar Medicamento":"Aadir Medicamento"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:E.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:""}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay medicamentos registrados"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Comienza aadiendo tu primer medicamento"}),d.jsx("button",{onClick:z,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Aadir Medicamento"})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Medicamento"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dosis y Frecuencia"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Va"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(C=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.name}),d.jsx("div",{className:"text-sm text-gray-500",children:C.reason}),d.jsxs("div",{className:"text-xs text-gray-400",children:["Inicio: ",new Date(C.startDate).toLocaleDateString(),C.endDate&&`  Fin: ${new Date(C.endDate).toLocaleDateString()}`]})]})}),d.jsxs("td",{className:"px-6 py-4",children:[d.jsx("div",{className:"text-sm text-gray-900",children:C.dosage}),d.jsx("div",{className:"text-sm text-gray-500",children:C.frequency}),d.jsxs("div",{className:"text-xs text-gray-400",children:["Dr/a. ",C.prescribedBy]})]}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("span",{className:"text-sm text-gray-900 capitalize",children:C.route})}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T(C.active)}`,children:U(C.active)})}),d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>q(C.id),className:"text-blue-600 hover:text-blue-900 text-sm",title:C.active?"Desactivar":"Activar",children:C.active?"":""}),d.jsx("button",{onClick:()=>$(C),className:"text-blue-600 hover:text-blue-900 text-sm",title:"Editar",children:""}),d.jsx("button",{onClick:()=>le(C.id),className:"text-red-600 hover:text-red-900 text-sm",title:"Eliminar",children:""})]})})]},C.id))})]})})})]})},VY=()=>{const t=ua(),[e,n]=O.useState([]),[r,i]=O.useState(!1),[s,a]=O.useState(null),[c,u]=O.useState(""),[h,p]=O.useState("todos"),[y]=O.useState(!1),[w,v]=O.useState({vaccineName:"",vaccineType:"",administrationDate:new Date().toISOString().split("T")[0],nextDoseDate:"",administeredBy:"",batchNumber:"",adverseReactions:"",notes:""}),j=["COVID-19","Influenza (Gripe)","Hepatitis A","Hepatitis B","Ttanos","Difteria","Tos Ferina (DTP)","Poliomielitis","Sarampin","Rubola","Parotiditis (Paperas)","Varicela","Neumococo","Meningococo","Rotavirus","VPH","Herpes Zster","Fiebre Amarilla","Otra"],S=[{value:"todos",label:"Todas las vacunas"},{value:"pendientes",label:"Prximas dosis pendientes"},{value:"completadas",label:"Esquema completo"}],_=()=>{v({vaccineName:"",vaccineType:"",administrationDate:new Date().toISOString().split("T")[0],nextDoseDate:"",administeredBy:"",batchNumber:"",adverseReactions:"",notes:""})},I=E=>{const{name:T,value:U}=E.target;v(C=>({...C,[T]:U}))},V=()=>{a(null),_(),i(!0)},z=E=>{a(E),v({vaccineName:E.vaccineName,vaccineType:E.vaccineType,administrationDate:E.administrationDate,nextDoseDate:E.nextDoseDate||"",administeredBy:E.administeredBy,batchNumber:E.batchNumber,adverseReactions:E.adverseReactions.join(", "),notes:E.notes}),i(!0)},$=()=>{et.debug("Saving vaccination");const E={id:s?.id||Date.now().toString(),...w,adverseReactions:w.adverseReactions.split(",").map(T=>T.trim()).filter(T=>T)};n(s?T=>T.map(U=>U.id===s.id?E:U):T=>[...T,E]),i(!1),_()},J=E=>{window.confirm("Ests seguro de que quieres eliminar este registro de vacunacin?")&&n(T=>T.filter(U=>U.id!==E))},le=e.filter(E=>{const T=E.vaccineName.toLowerCase().includes(c.toLowerCase())||E.vaccineType.toLowerCase().includes(c.toLowerCase())||E.administeredBy.toLowerCase().includes(c.toLowerCase()),U=new Date,C=E.nextDoseDate&&new Date(E.nextDoseDate)>=U;return T&&(h==="todos"||h==="pendientes"&&C||h==="completadas"&&!C)}),q=E=>{if(!E)return{text:"Completado",color:"bg-green-100 text-green-800"};const T=new Date,U=new Date(E),C=Math.ceil((U.getTime()-T.getTime())/(1e3*60*60*24));return C<0?{text:"Atrasada",color:"bg-red-100 text-red-800"}:C<=30?{text:`Prxima (${C} das)`,color:"bg-yellow-100 text-yellow-800"}:{text:`Programada (${C} das)`,color:"bg-blue-100 text-blue-800"}};return y?d.jsx("div",{className:"flex items-center justify-center p-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):d.jsxs("div",{className:"container max-w-6xl mx-auto p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:()=>t("/historial-medico"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Volver al men mdico",children:d.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Historial de Vacunacin"}),d.jsx("p",{className:"text-gray-600",children:"Gestiona tu historial de vacunas y prximas dosis"})]})]}),d.jsxs("button",{onClick:V,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Aadir Vacuna"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Buscar vacuna"}),d.jsx("input",{type:"text",value:c,onChange:E=>u(E.target.value),placeholder:"Nombre de vacuna, tipo o mdico",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Estado"}),d.jsx("select",{value:h,onChange:E=>p(E.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:S.map(E=>d.jsx("option",{value:E.value,children:E.label},E.value))})]}),d.jsx("div",{className:"flex items-end",children:d.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",le.length," vacunas",d.jsx("br",{}),"Prximas dosis: ",le.filter(E=>E.nextDoseDate&&new Date(E.nextDoseDate)>=new Date).length]})})]})}),r&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:s?"Editar Registro de Vacunacin":"Aadir Nuevo Registro"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Vacuna *"}),d.jsx("input",{type:"text",name:"vaccineName",value:w.vaccineName,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Pfizer-BioNTech COVID-19",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Vacuna *"}),d.jsxs("select",{name:"vaccineType",value:w.vaccineType,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Seleccionar tipo de vacuna"}),j.map(E=>d.jsx("option",{value:E,children:E},E))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Administracin *"}),d.jsx("input",{type:"date",name:"administrationDate",value:w.administrationDate,onChange:I,max:new Date().toISOString().split("T")[0],className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prxima Dosis (opcional)"}),d.jsx("input",{type:"date",name:"nextDoseDate",value:w.nextDoseDate,onChange:I,min:w.administrationDate,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Administrado por *"}),d.jsx("input",{type:"text",name:"administeredBy",value:w.administeredBy,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del profesional",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Lote *"}),d.jsx("input",{type:"text",name:"batchNumber",value:w.batchNumber,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: ABC12345",required:!0})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reacciones Adversas"}),d.jsx("input",{type:"text",name:"adverseReactions",value:w.adverseReactions,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Separadas por comas (ej: fiebre, dolor en el sitio)"})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas Adicionales"}),d.jsx("textarea",{name:"notes",value:w.notes,onChange:I,rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Informacin adicional sobre la vacunacin"})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx("button",{onClick:()=>{i(!1),_()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancelar"}),d.jsx("button",{onClick:$,disabled:!w.vaccineName||!w.vaccineType||!w.administrationDate||!w.administeredBy||!w.batchNumber,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:s?"Actualizar Registro":"Guardar Registro"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:le.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:""}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay registros de vacunacin"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Comienza aadiendo tu primer registro de vacunacin"}),d.jsx("button",{onClick:V,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Aadir Vacuna"})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vacuna"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha de Administracin"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prxima Dosis"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Administrado por"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lote"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:le.map(E=>{const T=q(E.nextDoseDate);return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.vaccineName}),d.jsx("div",{className:"text-sm text-gray-500",children:E.vaccineType})]})}),d.jsxs("td",{className:"px-6 py-4",children:[d.jsx("div",{className:"text-sm text-gray-900",children:new Date(E.administrationDate).toLocaleDateString()}),E.adverseReactions.length>0&&d.jsxs("div",{className:"text-xs text-red-600",children:[E.adverseReactions.length," reaccin(es)"]})]}),d.jsx("td",{className:"px-6 py-4",children:E.nextDoseDate?d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-gray-900",children:new Date(E.nextDoseDate).toLocaleDateString()}),d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T.color}`,children:T.text})]}):d.jsx("span",{className:"text-sm text-gray-500",children:"No programada"})}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("div",{className:"text-sm text-gray-900",children:E.administeredBy})}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("div",{className:"text-sm text-gray-900",children:E.batchNumber})}),d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>z(E),className:"text-blue-600 hover:text-blue-900 text-sm",title:"Editar",children:""}),d.jsx("button",{onClick:()=>J(E.id),className:"text-red-600 hover:text-red-900 text-sm",title:"Eliminar",children:""})]})})]},E.id)})})]})})})]})},UY=()=>{const t=ua(),[e,n]=O.useState([]),[r,i]=O.useState(!1),[s,a]=O.useState(null),[c,u]=O.useState(""),[h,p]=O.useState("todos"),[y]=O.useState(!1),[w,v]=O.useState({testName:"",category:"Anlisis de Sangre",resultDate:new Date().toISOString().split("T")[0],normalRange:"",doctor:"",laboratory:"",notes:"",results:[]}),j=["Anlisis de Sangre","Anlisis de Orina","Pruebas de Funcin Heptica","Pruebas de Funcin Renal","Perfil Lipdico","Hemograma Completo","Pruebas de Tiroides","Marcadores Tumorales","Pruebas de Coagulacin","Electrolitos","Pruebas de Alergias","Pruebas Genticas","Cultivos","Pruebas COVID-19","Otras"],S=[{value:"todos",label:"Todos los resultados"},{value:"con-anomalias",label:"Con anomalas"},{value:"normales",label:"Resultados normales"}],_=()=>{v({testName:"",category:"Anlisis de Sangre",resultDate:new Date().toISOString().split("T")[0],normalRange:"",doctor:"",laboratory:"",notes:"",results:[]})},I=L=>{const{name:D,value:ne}=L.target;v(se=>({...se,[D]:ne}))},V=()=>{a(null),_(),i(!0)},z=L=>{a(L),v({testName:L.testName,category:L.category,resultDate:L.resultDate,normalRange:L.normalRange,doctor:L.doctor,laboratory:L.laboratory,notes:L.notes,results:L.results.map(D=>({...D}))}),i(!0)},$=()=>{v(L=>({...L,results:[...L.results,{parameter:"",value:"",unit:"",normalRange:"",status:"normal"}]}))},J=(L,D,ne)=>{v(se=>({...se,results:se.results.map((oe,Z)=>Z===L?{...oe,[D]:ne}:oe)}))},le=L=>{v(D=>({...D,results:D.results.filter((ne,se)=>se!==L)}))},q=()=>{et.debug("Saving lab result");const L={id:s?.id||Date.now().toString(),testName:w.testName,category:w.category,resultDate:w.resultDate,normalRange:w.normalRange,doctor:w.doctor,laboratory:w.laboratory,notes:w.notes,results:w.results};n(s?D=>D.map(ne=>ne.id===s.id?L:ne):D=>[...D,L]),i(!1),_()},E=L=>{window.confirm("Ests seguro de que quieres eliminar este resultado de laboratorio?")&&n(D=>D.filter(ne=>ne.id!==L))},T=e.filter(L=>{const D=L.testName.toLowerCase().includes(c.toLowerCase())||L.category.toLowerCase().includes(c.toLowerCase())||L.doctor.toLowerCase().includes(c.toLowerCase()),ne=L.results.some(oe=>oe.status!=="normal");return D&&(h==="todos"||h==="con-anomalias"&&ne||h==="normales"&&!ne)}),U=L=>{switch(L){case"normal":return"bg-green-100 text-green-800";case"alto":return"bg-red-100 text-red-800";case"bajo":return"bg-yellow-100 text-yellow-800";case"crtico":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},C=L=>{switch(L){case"normal":return"";case"alto":return"";case"bajo":return"";case"crtico":return"";default:return""}};return y?d.jsx("div",{className:"flex items-center justify-center p-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):d.jsxs("div",{className:"container max-w-6xl mx-auto p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:()=>t("/historial-medico"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Volver al men mdico",children:d.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Resultados de Laboratorio"}),d.jsx("p",{className:"text-gray-600",children:"Consulta y gestiona tus anlisis y pruebas mdicas"})]})]}),d.jsxs("button",{onClick:V,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Aadir Resultado"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Buscar anlisis"}),d.jsx("input",{type:"text",value:c,onChange:L=>u(L.target.value),placeholder:"Nombre del anlisis, mdico o laboratorio",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Categora"}),d.jsx("select",{value:h,onChange:L=>p(L.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:S.map(L=>d.jsx("option",{value:L.value,children:L.label},L.value))})]}),d.jsx("div",{className:"flex items-end",children:d.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",T.length," resultados",d.jsx("br",{}),"Con anomalas: ",T.filter(L=>L.results.some(D=>D.status!=="normal")).length]})})]})}),r&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:s?"Editar Resultado de Laboratorio":"Aadir Nuevo Resultado"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Anlisis *"}),d.jsx("input",{type:"text",name:"testName",value:w.testName,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Hemograma completo",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora *"}),d.jsx("select",{name:"category",value:w.category,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:j.map(L=>d.jsx("option",{value:L,children:L},L))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha del Resultado *"}),d.jsx("input",{type:"date",name:"resultDate",value:w.resultDate,onChange:I,max:new Date().toISOString().split("T")[0],className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mdico Solicitante *"}),d.jsx("input",{type:"text",name:"doctor",value:w.doctor,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del mdico",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Laboratorio *"}),d.jsx("input",{type:"text",name:"laboratory",value:w.laboratory,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del laboratorio",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rango Normal General"}),d.jsx("input",{type:"text",name:"normalRange",value:w.normalRange,onChange:I,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Rango general del anlisis"})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),d.jsx("textarea",{name:"notes",value:w.notes,onChange:I,rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Comentarios adicionales del mdico o laboratorio"})]})]}),d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h4",{className:"text-md font-semibold",children:"Parmetros del Anlisis"}),d.jsx("button",{type:"button",onClick:$,className:"px-3 py-1 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition-colors",children:"+ Aadir Parmetro"})]}),w.results.length===0?d.jsx("div",{className:"text-center py-4 border-2 border-dashed border-gray-300 rounded",children:d.jsx("p",{className:"text-gray-500",children:'No hay parmetros aadidos. Haz clic en "Aadir Parmetro" para empezar.'})}):d.jsx("div",{className:"space-y-3",children:w.results.map((L,D)=>d.jsx("div",{className:"border border-gray-200 rounded p-3",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Parmetro"}),d.jsx("input",{type:"text",value:L.parameter,onChange:ne=>J(D,"parameter",ne.target.value),className:"w-full p-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Hemoglobina"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor"}),d.jsx("input",{type:"text",value:L.value,onChange:ne=>J(D,"value",ne.target.value),className:"w-full p-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 14.5"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unidad"}),d.jsx("input",{type:"text",value:L.unit,onChange:ne=>J(D,"unit",ne.target.value),className:"w-full p-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: g/dL"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Rango Normal"}),d.jsx("input",{type:"text",value:L.normalRange,onChange:ne=>J(D,"normalRange",ne.target.value),className:"w-full p-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 12-16"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Estado"}),d.jsxs("select",{value:L.status,onChange:ne=>J(D,"status",ne.target.value),className:"w-full p-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"normal",children:"Normal"}),d.jsx("option",{value:"alto",children:"Alto"}),d.jsx("option",{value:"bajo",children:"Bajo"}),d.jsx("option",{value:"crtico",children:"Crtico"})]})]}),d.jsx("div",{className:"flex items-end",children:d.jsx("button",{type:"button",onClick:()=>le(D),className:"px-2 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600 transition-colors",children:"Eliminar"})})]})},D))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx("button",{onClick:()=>{i(!1),_()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancelar"}),d.jsx("button",{onClick:q,disabled:!w.testName||!w.category||!w.resultDate||!w.doctor||!w.laboratory,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:s?"Actualizar Resultado":"Guardar Resultado"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:T.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:""}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay resultados de laboratorio"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Comienza aadiendo tu primer resultado de anlisis"}),d.jsx("button",{onClick:V,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Aadir Resultado"})]}):d.jsx("div",{className:"divide-y divide-gray-200",children:T.map(L=>d.jsx("div",{className:"p-6 hover:bg-gray-50",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[d.jsx("h3",{className:"text-lg font-medium text-gray-900",children:L.testName}),d.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:L.category})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3 text-sm text-gray-600",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(L.resultDate).toLocaleDateString()]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:"Laboratorio:"})," ",L.laboratory]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:"Mdico:"})," Dr/a. ",L.doctor]})]}),L.results.length>0&&d.jsxs("div",{className:"mb-3",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Resultados principales:"}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[L.results.slice(0,5).map((D,ne)=>d.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded ${U(D.status)}`,children:[C(D.status)," ",D.parameter,": ",D.value," ",D.unit]},ne)),L.results.length>5&&d.jsxs("span",{className:"text-xs text-gray-500",children:["+",L.results.length-5," ms"]})]})]}),L.notes&&d.jsxs("div",{className:"text-sm text-gray-600",children:[d.jsx("span",{className:"font-medium",children:"Notas:"})," ",L.notes]})]}),d.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[d.jsx("button",{onClick:()=>z(L),className:"text-blue-600 hover:text-blue-900 text-sm",title:"Editar",children:""}),d.jsx("button",{onClick:()=>E(L.id),className:"text-red-600 hover:text-red-900 text-sm",title:"Eliminar",children:""})]})]})},L.id))})})]})},BY=t=>{const[e,n]=O.useState([]),[r,i]=O.useState([]),[s,a]=O.useState(!0),[c,u]=O.useState(null),[h,p]=O.useState("synced"),y=O.useCallback(async()=>{if(!t){a(!1);return}try{a(!0),p("syncing"),u(null);const S=await mI(t),_=S.records||[],I=S.allergies||[];n(_),i(I),p("synced")}catch(S){const _=S instanceof Error?S.message:"Error al cargar datos mdicos";u(_),p("error"),et.error({error:S,userId:t},"Error fetching medical data")}finally{a(!1)}},[t]),w=O.useCallback(async S=>{if(!t){u("Usuario no autenticado");return}try{p("syncing"),u(null);const _=await gI(t,S);n(I=>[...I,_]),p("synced")}catch(_){const I=_ instanceof Error?_.message:"Error al agregar registro";throw u(I),p("error"),_}},[t]),v=O.useCallback(async(S,_)=>{if(!t){u("Usuario no autenticado");return}try{p("syncing"),u(null),await yI(t,S,_),n(I=>I.map(V=>V.id===S?{...V,..._,updatedAt:new Date().toISOString()}:V)),p("synced")}catch(I){const V=I instanceof Error?I.message:"Error al actualizar registro";throw u(V),p("error"),I}},[t]),j=O.useCallback(async S=>{if(!t){u("Usuario no autenticado");return}try{p("syncing"),u(null),await vI(t,S),n(_=>_.filter(I=>I.id!==S)),p("synced")}catch(_){const I=_ instanceof Error?_.message:"Error al eliminar registro";throw u(I),p("error"),_}},[t]);return O.useEffect(()=>{y()},[y]),O.useEffect(()=>{const S=()=>p("synced"),_=()=>p("offline");return window.addEventListener("online",S),window.addEventListener("offline",_),()=>{window.removeEventListener("online",S),window.removeEventListener("offline",_)}},[]),{records:e,allergies:r,loading:s,error:c,fetchRecords:y,addRecord:w,updateRecord:v,deleteRecord:j,syncStatus:h}},zY=()=>{const{user:t}=cu(),e=ua(),{records:n,loading:r,error:i,syncStatus:s,addRecord:a,updateRecord:c,deleteRecord:u}=BY(t?.uid),[h,p]=O.useState(!1),[y,w]=O.useState(null),[v,j]=O.useState(""),[S,_]=O.useState("todos"),[I,V]=O.useState({type:"visit",title:"",description:"",date:new Date().toISOString().split("T")[0],doctor:"",location:"",result:"",nextAction:"",attachments:[]}),z=[{value:"todos",label:"Todos los registros"},{value:"visit",label:"Visitas Mdicas"},{value:"test",label:"Anlisis y Pruebas"},{value:"vaccination",label:"Vacunas"},{value:"medication",label:"Medicamentos"},{value:"document",label:"Documentos"},{value:"other",label:"Otros"}],$={visit:"",test:"",vaccination:"",medication:"",document:"",other:""},J={visit:"bg-blue-100 text-blue-800 border-blue-200",test:"bg-purple-100 text-purple-800 border-purple-200",vaccination:"bg-green-100 text-green-800 border-green-200",medication:"bg-orange-100 text-orange-800 border-orange-200",document:"bg-gray-100 text-gray-800 border-gray-200",other:"bg-pink-100 text-pink-800 border-pink-200"};js.useEffect(()=>{y&&(V({type:y.type,title:y.title,description:y.description,date:y.date,doctor:y.doctor||"",location:y.location||"",result:y.result||"",nextAction:y.nextAction||"",attachments:y.attachments||[]}),p(!0))},[y]);const le=()=>{V({type:"visit",title:"",description:"",date:new Date().toISOString().split("T")[0],doctor:"",location:"",result:"",nextAction:"",attachments:[]})},q=oe=>{const{name:Z,value:Y}=oe.target;V(pe=>({...pe,[Z]:Y}))},E=async oe=>{oe.preventDefault();try{y?(await c(y.id,I),w(null)):await a(I),p(!1),le()}catch(Z){et.error({error:Z,userId:t?.uid,operation:y?"update":"create"},"Error saving medical record")}},T=oe=>{w(oe)},U=async oe=>{if(window.confirm("Ests seguro de que quieres eliminar este registro mdico?"))try{await u(oe)}catch(Z){et.error({error:Z,userId:t?.uid,recordId:oe},"Error deleting medical record")}},C=()=>{p(!1),w(null),le()},D=n.filter(oe=>{const Z=oe.title.toLowerCase().includes(v.toLowerCase())||oe.description.toLowerCase().includes(v.toLowerCase())||oe.doctor&&oe.doctor.toLowerCase().includes(v.toLowerCase()),Y=S==="todos"||oe.type===S;return Z&&Y}).sort((oe,Z)=>new Date(Z.date).getTime()-new Date(oe.date).getTime()),ne=()=>{switch(s){case"synced":return"bg-green-500";case"syncing":return"bg-yellow-500";case"error":return"bg-red-500";case"offline":return"bg-gray-500";default:return"bg-gray-500"}},se=()=>{switch(s){case"synced":return"Sincronizado";case"syncing":return"Sincronizando...";case"error":return"Error";case"offline":return"Sin conexin";default:return"Desconocido"}};return r?d.jsx("div",{className:"flex items-center justify-center p-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):d.jsxs("div",{className:"container max-w-6xl mx-auto p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:()=>e("/historial-medico"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Volver al men mdico",children:d.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Historial Mdico"}),d.jsx("p",{className:"text-gray-600",children:"Gestiona tu historial mdico completo"})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:`w-3 h-3 rounded-full ${ne()}`}),d.jsx("span",{className:"text-sm text-gray-600",children:se()})]})]}),i&&d.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:i}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Buscar"}),d.jsx("input",{type:"text",value:v,onChange:oe=>j(oe.target.value),placeholder:"Buscar en historial...",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Registro"}),d.jsx("select",{value:S,onChange:oe=>_(oe.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:z.map(oe=>d.jsx("option",{value:oe.value,children:oe.label},oe.value))})]}),d.jsx("div",{className:"flex items-end",children:d.jsxs("button",{onClick:()=>p(!0),className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center justify-center space-x-2",children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Agregar Registro"})]})})]})}),h&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:y?" Editar Registro":" Agregar Nuevo Registro"}),d.jsxs("form",{onSubmit:E,children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Registro *"}),d.jsxs("select",{name:"type",value:I.type,onChange:q,required:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[d.jsx("option",{value:"visit",children:"Visita Mdica"}),d.jsx("option",{value:"test",children:"Anlisis/Prueba"}),d.jsx("option",{value:"vaccination",children:"Vacuna"}),d.jsx("option",{value:"medication",children:"Medicamento"}),d.jsx("option",{value:"document",children:"Documento"}),d.jsx("option",{value:"other",children:"Otro"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo *"}),d.jsx("input",{name:"title",type:"text",value:I.title,onChange:q,required:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Control de alergias, Anlisis de sangre..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha *"}),d.jsx("input",{name:"date",type:"date",value:I.date,onChange:q,required:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mdico/Facilitador"}),d.jsx("input",{name:"doctor",type:"text",value:I.doctor,onChange:q,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del mdico o especialista"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ubicacin"}),d.jsx("input",{name:"location",type:"text",value:I.location,onChange:q,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Hospital, clnica, laboratorio..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resultado"}),d.jsx("input",{name:"result",type:"text",value:I.result,onChange:q,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Resultado del anlisis o visita"})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin *"}),d.jsx("textarea",{name:"description",value:I.description,onChange:q,required:!0,rows:4,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe los detalles del registro mdico..."})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prximos Pasos"}),d.jsx("textarea",{name:"nextAction",value:I.nextAction,onChange:q,rows:2,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Prximas acciones, seguimiento recomendado..."})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center space-x-2",children:[d.jsx("span",{children:y?"":""}),d.jsx("span",{children:y?"Actualizar":"Agregar"})]}),d.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancelar"})]})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Registros Mdicos (",D.length,")"]}),D.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx("div",{className:"text-4xl mb-2",children:""}),d.jsx("p",{children:"No se encontraron registros mdicos"}),d.jsx("p",{className:"text-sm",children:v||S!=="todos"?"Intenta ajustar los filtros de bsqueda":"Agrega tu primer registro mdico usando el botn de arriba"})]}):d.jsx("div",{className:"space-y-4",children:D.map(oe=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx("span",{className:"text-lg",children:$[oe.type]}),d.jsx("h4",{className:"font-semibold text-lg",children:oe.title}),d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${J[oe.type]}`,children:z.find(Z=>Z.value===oe.type)?.label||oe.type})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2",children:[d.jsxs("div",{className:"text-sm",children:[d.jsx("span",{className:"font-medium text-gray-700",children:" Fecha: "}),d.jsx("span",{className:"text-gray-600",children:new Date(oe.date).toLocaleDateString()})]}),oe.doctor&&d.jsxs("div",{className:"text-sm",children:[d.jsx("span",{className:"font-medium text-gray-700",children:" Mdico: "}),d.jsx("span",{className:"text-gray-600",children:oe.doctor})]}),oe.location&&d.jsxs("div",{className:"text-sm",children:[d.jsx("span",{className:"font-medium text-gray-700",children:" Ubicacin: "}),d.jsx("span",{className:"text-gray-600",children:oe.location})]}),oe.result&&d.jsxs("div",{className:"text-sm",children:[d.jsx("span",{className:"font-medium text-gray-700",children:" Resultado: "}),d.jsx("span",{className:"text-gray-600",children:oe.result})]})]}),d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Descripcin: "}),d.jsx("p",{className:"text-sm text-gray-600",children:oe.description})]}),oe.nextAction&&d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Prximos Pasos: "}),d.jsx("p",{className:"text-sm text-gray-600",children:oe.nextAction})]}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Creado: ",new Date(oe.createdAt).toLocaleDateString()," | Actualizado: ",new Date(oe.updatedAt).toLocaleDateString()]})]}),d.jsxs("div",{className:"flex space-x-2 ml-4",children:[d.jsx("button",{onClick:()=>T(oe),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:""}),d.jsx("button",{onClick:()=>U(oe.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:""})]})]})},oe.id))})]})})]})},qY=()=>{const{user:t}=cu(),e=ua(),n=O.useRef(null),[r,i]=O.useState([]),[s,a]=O.useState(!1),[c,u]=O.useState(0),[h,p]=O.useState(""),[y,w]=O.useState("todos"),[v,j]=O.useState(null),S=[{value:"todos",label:"Todas las categoras"},{value:"medical-reports",label:"Informes Mdicos"},{value:"lab-results",label:"Resultados de Laboratorio"},{value:"prescriptions",label:"Recetas Mdicas"},{value:"scans",label:"Escneres y Radiografas"},{value:"vaccines",label:"Cartillas de Vacunacin"},{value:"insurance",label:"Seguros y Facturas"},{value:"other",label:"Otros Documentos"}],_={"medical-reports":"","lab-results":"",prescriptions:"",scans:"",vaccines:"",insurance:"",other:""},I=T=>T.startsWith("image/")?"":T.includes("pdf")?"":T.includes("word")||T.includes("document")?"":T.includes("excel")||T.includes("spreadsheet")?"":T.includes("powerpoint")||T.includes("presentation")?"":"",V=T=>{if(T===0)return"0 Bytes";const U=1024,C=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(T)/Math.log(U));return parseFloat((T/Math.pow(U,L)).toFixed(2))+" "+C[L]},z=async T=>{const U=T.target.files;if(!U||U.length===0)return;const C=U[0],L=y==="todos"?"other":y;if(C.size>10*1024*1024){alert("El archivo no debe superar los 10MB");return}try{a(!0),u(0);const D=P1(R1,`medical-documents/${t?.uid}/${Date.now()}-${C.name}`),ne=await Ik(D,C),se=await Pk(ne.ref),oe={id:ne.ref.fullPath,name:C.name,type:C.type,size:C.size,url:se,uploadDate:new Date().toISOString(),category:L,description:""};i(Z=>[oe,...Z]),u(100)}catch(D){et.error({error:D,fileName:C.name,userId:t?.uid},"Error uploading medical document"),alert("Error al subir el archivo. Por favor, intntalo de nuevo.")}finally{a(!1),u(0),n.current&&(n.current.value="")}},$=async T=>{if(window.confirm(`Ests seguro de que quieres eliminar "${T.name}"?`))try{const U=P1(R1,T.id);await aH(U),i(C=>C.filter(L=>L.id!==T.id)),j(null)}catch(U){et.error({error:U,documentId:T.id,userId:t?.uid},"Error deleting medical document"),alert("Error al eliminar el archivo. Por favor, intntalo de nuevo.")}},J=T=>{const U=window.document.createElement("a");U.href=T.url,U.download=T.name,U.target="_blank",window.document.body.appendChild(U),U.click(),window.document.body.removeChild(U)},le=T=>{j(T)},E=r.filter(T=>{const U=T.name.toLowerCase().includes(h.toLowerCase())||T.description&&T.description.toLowerCase().includes(h.toLowerCase()),C=y==="todos"||T.category===y;return U&&C}).sort((T,U)=>new Date(U.uploadDate).getTime()-new Date(T.uploadDate).getTime());return d.jsxs("div",{className:"container max-w-6xl mx-auto p-4",children:[d.jsx("div",{className:"flex items-center justify-between mb-6",children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("button",{onClick:()=>e("/historial-medico"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Volver al men mdico",children:d.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestin de Documentos"}),d.jsx("p",{className:"text-gray-600",children:"Almacena y gestiona tus documentos mdicos"})]})]})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 mb-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Buscar"}),d.jsx("input",{type:"text",value:h,onChange:T=>p(T.target.value),placeholder:"Buscar documento...",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),d.jsx("select",{value:y,onChange:T=>w(T.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:S.map(T=>d.jsx("option",{value:T.value,children:T.label},T.value))})]}),d.jsxs("div",{className:"flex items-end",children:[d.jsx("input",{ref:n,type:"file",onChange:z,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif",className:"hidden"}),d.jsx("button",{onClick:()=>n.current?.click(),disabled:s,className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:s?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),d.jsx("span",{children:"Subiendo..."})]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Subir Documento"})]})})]}),d.jsx("div",{className:"flex items-end text-sm text-gray-600",children:d.jsxs("span",{children:[E.length," documentos"]})})]}),s&&d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("span",{className:"text-sm text-gray-700",children:"Progreso de subida"}),d.jsxs("span",{className:"text-sm text-gray-700",children:[c,"%"]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:d.jsxs("div",{className:"p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Mis Documentos"}),E.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx("div",{className:"text-4xl mb-2",children:""}),d.jsx("p",{children:"No se encontraron documentos"}),d.jsx("p",{className:"text-sm",children:h||y!=="todos"?"Intenta ajustar los filtros de bsqueda":"Sube tu primer documento mdico usando el botn de arriba"})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(T=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx("div",{className:"text-2xl",children:_[T.category]||I(T.type)}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",title:T.name,children:T.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:[V(T.size),"  ",new Date(T.uploadDate).toLocaleDateString()]}),d.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[d.jsx("button",{onClick:()=>le(T),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Ver"}),d.jsx("span",{className:"text-gray-300",children:""}),d.jsx("button",{onClick:()=>J(T),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Descargar"}),d.jsx("span",{className:"text-gray-300",children:""}),d.jsx("button",{onClick:()=>$(T),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Eliminar"})]})]})]})},T.id))})]})}),v&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h3",{className:"text-lg font-semibold truncate",children:v.name}),d.jsx("button",{onClick:()=>j(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),d.jsx("div",{className:"p-4 overflow-auto max-h-[calc(90vh-200px)]",children:v.type.startsWith("image/")?d.jsx("img",{src:v.url,alt:v.name,className:"max-w-full h-auto mx-auto"}):v.type.includes("pdf")?d.jsx("iframe",{src:v.url,className:"w-full h-[600px]",title:v.name}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"text-4xl mb-4",children:I(v.type)}),d.jsx("p",{className:"text-gray-600 mb-4",children:"No se puede previsualizar este tipo de archivo"}),d.jsx("button",{onClick:()=>J(v),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Descargar Archivo"})]})}),d.jsxs("div",{className:"flex items-center justify-between p-4 border-t bg-gray-50",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:[d.jsxs("p",{children:["Tamao: ",V(v.size)]}),d.jsxs("p",{children:["Subido: ",new Date(v.uploadDate).toLocaleDateString()]})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>J(v),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Descargar"}),d.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cerrar"})]})]})]})}),d.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[d.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Informacin de uso"}),d.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[d.jsx("li",{children:" Formatos permitidos: PDF, Word, Excel, PowerPoint, imgenes (JPG, PNG, GIF)"}),d.jsx("li",{children:" Tamao mximo por archivo: 10MB"}),d.jsx("li",{children:" Los documentos se almacenan de forma segura en la nube"}),d.jsx("li",{children:" Puedes organizar tus documentos por categoras para facilitar su bsqueda"}),d.jsx("li",{children:" Mantn tus informes mdicos actualizados para un mejor seguimiento"})]})]})]})},$Y=({className:t="",onSuccess:e,onError:n})=>{const{loginWithGoogle:r}=cu(),[i,s]=O.useState(!1),a=async()=>{try{s(!0),await r(),e?.()}catch(c){if(et.error({msg:"Error en GoogleLogin",error:c}),c instanceof Error&&c.message==="REDIRECT_INITIATED")return;n?.(c instanceof Error?c:new Error("Unknown error"))}finally{s(!1)}};return d.jsx("button",{onClick:a,disabled:i,className:`
        flex items-center justify-center gap-3
        w-full max-w-sm mx-auto
        px-6 py-3
        bg-white border border-gray-300
        text-gray-700 font-medium
        rounded-lg shadow-sm
        hover:bg-gray-50 hover:border-gray-400
        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
        disabled:opacity-50 disabled:cursor-not-allowed
        transition-all duration-200
        ${t}
      `,children:i?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),d.jsx("span",{children:"Iniciando sesin..."})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-5 h-5",children:d.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),d.jsx("span",{children:"Continuar con Google"})]})})},Vc=({children:t,redirectTo:e="/"})=>{const{user:n,loading:r}=cu();return r?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Verificando autenticacin..."})]})}):n?d.jsx(d.Fragment,{children:t}):d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:d.jsxs("div",{className:"max-w-md w-full space-y-8 p-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100 mb-4",children:d.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"rea Mdica Protegida"}),d.jsx("p",{className:"text-gray-600 mb-8",children:"Esta seccin contiene informacin mdica confidencial. Inicia sesin con Google para acceder."})]}),d.jsx($Y,{onSuccess:()=>{},onError:i=>{et.error({error:i},"Authentication error in ProtectedRoute")}}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx("a",{href:e,className:"text-blue-600 hover:text-blue-500 text-sm",children:"Volver a la aplicacin principal"})}),d.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[d.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:" Tu informacin est segura"}),d.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[d.jsx("li",{children:" Encriptacin de grado mdico"}),d.jsx("li",{children:" Solo t puedes acceder a tus datos"}),d.jsx("li",{children:" Sincronizacin segura en la nube"}),d.jsx("li",{children:" Compatible con HIPAA y GDPR"})]})]})]})})};function HY({children:t}){const{setAllergies:e,setLoading:n,setError:r}=K1();return O.useEffect(()=>{(async()=>{try{n(!0),await new Promise(s=>setTimeout(s,500)),e(ol),n(!1)}catch(s){et.error({error:s},"Error initializing app"),r("Error al cargar los datos de alergias"),n(!1)}})()},[e,n,r]),d.jsx(d.Fragment,{children:t})}gP.createRoot(document.getElementById("root")).render(d.jsx(js.StrictMode,{children:d.jsx(FO,{defaultTheme:"system",storageKey:"blancalergic-theme",children:d.jsx(bR,{children:d.jsx(wH,{children:d.jsx(HY,{children:d.jsx(pR,{basename:"/BlancAlergic-APP/",children:d.jsxs(uR,{children:[d.jsxs(Ys,{path:"/",element:d.jsx(CA,{children:d.jsx(pw,{})}),children:[d.jsx(Ys,{index:!0,element:d.jsx("div",{})}),d.jsx(Ys,{path:"buscarAlergias",element:d.jsx(Qj,{})}),d.jsx(Ys,{path:"emergencias",element:d.jsx(u4,{})}),d.jsx(Ys,{path:"tablaAlergias",element:d.jsx(PO,{})})]}),d.jsxs(Ys,{path:"/",element:d.jsx(CA,{children:d.jsx(pw,{})}),children:[d.jsx(Ys,{path:"historial-medico",element:d.jsx(Vc,{children:d.jsx(MY,{})})}),d.jsx(Ys,{path:"perfil-medico",element:d.jsx(Vc,{children:d.jsx(kI,{mode:"simple",showBackButton:!0})})}),d.jsx(Ys,{path:"mis-alergias",element:d.jsx(Vc,{children:d.jsx(OY,{})})}),d.jsx(Ys,{path:"medicamentos",element:d.jsx(Vc,{children:d.jsx(FY,{})})}),d.jsx(Ys,{path:"visitas-medicas",element:d.jsx(Vc,{children:d.jsx(zY,{})})}),d.jsx(Ys,{path:"vacunas",element:d.jsx(Vc,{children:d.jsx(VY,{})})}),d.jsx(Ys,{path:"resultados-laboratorio",element:d.jsx(Vc,{children:d.jsx(UY,{})})}),d.jsx(Ys,{path:"informes-medicos",element:d.jsx(Vc,{children:d.jsx(qY,{})})})]})]})})})})})})}));export{er as _,WY as c,Ug as g};
